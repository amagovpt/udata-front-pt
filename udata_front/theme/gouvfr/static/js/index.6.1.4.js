var Fd=Object.defineProperty;var Bd=(t,e,s)=>e in t?Fd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ee=(t,e,s)=>(Bd(t,typeof e!="symbol"?e+"":e,s),s);import{defineComponent as q,inject as bt,useAttrs as Nd,computed as j,openBlock as y,createElementBlock as k,mergeProps as us,renderSlot as Ke,createBlock as N,unref as h,normalizeProps as Vd,withCtx as P,withAsyncContext as Wd,createCommentVNode as z,ref as M,normalizeClass as Te,createVNode as x,createElementVNode as d,toDisplayString as _,createTextVNode as W,watchEffect as _t,onMounted as we,cloneVNode as Hd,h as Xe,Fragment as J,provide as Yt,getCurrentInstance as Ud,watch as Tt,onUnmounted as Gt,Teleport as Yn,reactive as At,shallowRef as jd,toValue as _e,Suspense as Sr,normalizeStyle as nn,resolveDynamicComponent as xn,renderList as ve,withModifiers as Me,defineAsyncComponent as uc,resolveComponent as me,withDirectives as wt,vModelText as ds,TransitionGroup as qd,readonly as dc,vModelSelect as Tr,Transition as to,withKeys as Er,nextTick as fc,toRef as Yd,vShow as Gd,isRef as Xd,useId as fa,useTemplateRef as Kd,createApp as Zd}from"vue";import{g as hc,a as Ve,c as it,r as Jd,R as Qd,y as ut,b as pc,d as ef,e as tf,f as sf,h as kn,_ as pe,i as Pr,j as Yo,s as nf,p as fe,k as Dt,l as vs,m as si,n as _o,o as ha,q as of,t as zi,u as Fi,v as ce,w as rf,x as af,O as gc,z as mc,A as lf,Z as cf,B as Go,C as vc,D as Gn,E as Ys,F as Ar,G as on,H as Xo,I as uf,J as rn,K as Ds,L as Bs,M as Cn,N as bc,P as df,Q as ff,S as _c,T as hf,U as pf,V as yc,W as he,X as gf,Y as wc,$ as Sn,a0 as ps,a1 as xt,a2 as so,a3 as $e,a4 as mf,a5 as vf,a6 as Ko,a7 as bf,a8 as Tn,a9 as Ae,aa as $c,ab as _f,ac as pa,ad as xc,ae as yf,af as wf,ag as $f,ah as Zo,ai as Dr,aj as an,ak as kc,al as xf,am as kf,an as Cf,ao as Sf,ap as ot,aq as Tf,ar as Ef,as as Pf,at as Af,au as Df,av as Mf,aw as Of,ax as Lf,ay as Rf,az as ln,aA as ga,aB as If,aC as zf,aD as Ff,aE as Bf,aF as Gs,aG as ke,aH as no,aI as io,aJ as Kt,aK as Xn,aL as oo,aM as Ce,aN as Ee,aO as ze,aP as ma,aQ as Nf,aR as Vf,aS as Wf,aT as Hf,aU as Cc,aV as va,aW as cn,aX as Uf,aY as Sc,aZ as jf,a_ as Tc,a$ as Mr,b0 as qf,b1 as Yf,b2 as Or,b3 as Gf,b4 as Xf,b5 as Xs,b6 as Kf,b7 as Zf,b8 as Jf,b9 as Qf,ba,bb as Ec,bc as eh,bd as th,be as _a,bf as Jo,bg as sh,bh as nh,bi as ih,bj as Qo,bk as oh,bl as rh,bm as ah,bn as lh,bo as ya,bp as ch,bq as uh,br as dh,bs as wa,bt as $a,bu as fh,bv as hh,bw as ph,bx as gh,by as mh,bz as er,bA as vh,bB as bh,bC as _h,bD as yh,bE as wh,bF as $h,bG as xh,bH as kh}from"./sentry.6.1.4.js";import{ContentLoader as gs}from"vue-content-loader";import{c as Ch,g as Sh}from"./_commonjsHelpers.6.1.4.js";function D9(){import.meta.url,import("_").catch(()=>1);async function*t(){}}let ni=null;function Pc(){return hc("reuses/types/")}function Th(){return hc("reuses/topics/")}async function Eh(){return ni||(ni=(await Ve.get(Pc())).data,ni)}function Ph(t,e){const s=t.find(n=>n.id===e);return s?s.label:""}let ii=null;async function Ac(){return ii||(ii=Ve.get("datasets/schemas/").then(t=>t.data),ii)}function Ah(t,e){return t.find(s=>(e==null?void 0:e.name)===s.name)||null}function Dh(t){return"".concat(it.schema_documentation_url).concat(t,"/")}function Mh(t,e){var i;if(!t.schema||!t.schema.name)return null;let s={schema_name:"schema-datagouvfr.".concat(t.schema.name)};if(t.schema&&t.schema.version){const o=t.schema.version,r=(i=e.versions.find(a=>a.version_name===o))==null?void 0:i.schema_url;r&&(s={schema_url:r})}const n=new URLSearchParams({input:"url",url:t.url,"header-case":"on",...s}).toString();return"".concat(it.schema_validata_url,"/table-schema?").concat(n)}const Oh=["href"],Js=q({__name:"AppLink",props:{to:{},custom:{type:Boolean},activeClass:{},exactActiveClass:{},ariaCurrentValue:{default:"page"},replace:{type:Boolean}},setup(t){const e=bt(Jd,null),s=Nd(),n=j(()=>({...s,target:e?"_blank":s.target}));function i(o){return!e||typeof o=="string"&&o.startsWith("http")}return(o,r)=>i(o.to)?(y(),k("a",us({key:0},n.value,{href:o.to}),[Ke(o.$slots,"default")],16,Oh)):(y(),N(h(Qd),Vd(us({key:1},o.$props)),{default:P(()=>[Ke(o.$slots,"default")]),_:3},16))}}),Lr=q({__name:"AsyncTextClamp",props:{maxLines:{},text:{}},async setup(t){let e,s;const n=t,i=([e,s]=Wd(()=>n.text),e=await e,s(),e);return(o,r)=>h(i)?(y(),N(h(ut),{key:0,text:h(i),"max-lines":o.maxLines},null,8,["text","max-lines"])):z("",!0)}}),Lh={key:0,style:{color:"#3558a2"}},Rh={key:1},Ih=q({__name:"CopyButton",props:{text:{},label:{},copiedLabel:{},hideLabel:{type:Boolean,default:!1}},setup(t){pc(sf,tf,ef);const e=t,s=M(!1),n=()=>{navigator.clipboard.writeText(e.text),s.value=!0,setTimeout(()=>s.value=!1,2e3)};return(i,o)=>(y(),k("button",{type:"button",onClick:n,class:Te(["fr-text--sm fr-mb-0 whitespace-nowrap relative fr-p-1v text-mention-grey line-height-1",{"border bg-white rounded-xxs text-grey-500":i.hideLabel}])},[s.value?(y(),k("span",Lh,[x(h(kn),{height:16,width:16,name:"ri-check-line"}),d("span",{class:Te(["fr-ml-1v copy-label",{"fr-sr-only":i.hideLabel}])},_(i.copiedLabel),3)])):z("",!0),s.value?z("",!0):(y(),k("span",Rh,[x(h(kn),{height:16,width:16,name:i.hideLabel?"ri-clipboard-line":"ri-file-copy-line",class:"copy-icon"},null,8,["name"]),d("span",{class:Te(["fr-ml-1v copy-link copy-label",{"fr-sr-only":i.hideLabel}])},_(i.label),3)]))],2))}}),Ts=pe(Ih,[["__scopeId","data-v-4d7d7e27"]]);var Rr=function(t){var e=t.onRead,s=t.onRender,n=t.uncachedValues,i=n===void 0?new Set:n,o=t.useCache,r=o===void 0?!0:o;return function(a){a===void 0&&(a={});var l=Pr(a,[]),c={},u=[],f=!1;function p(m,v){m.startsWith("--")&&(l.hasCSSVariable=!0);var b=c[m];c[m]=v,c[m]!==b&&(u.indexOf(m)===-1&&u.push(m),f||(f=!0,nf.render(g.render)))}var g={get:function(m,v){v===void 0&&(v=!1);var b=!v&&r&&!i.has(m)&&c[m]!==void 0;return b?c[m]:e(m,l)},set:function(m,v){if(typeof m=="string")p(m,v);else for(var b in m)p(b,m[b]);return this},render:function(m){return m===void 0&&(m=!1),(f||m===!0)&&(s(c,l,u),f=!1,u.length=0),this}};return g}},zh=/([a-z])([A-Z])/g,Fh="$1-$2",ro=function(t){return t.replace(zh,Fh).toLowerCase()},Dc=new Map,Ir=new Map,Mc=["Webkit","Moz","O","ms",""],Bh=Mc.length,Nh=typeof document<"u",yo,Oc=function(t,e){return Ir.set(t,ro(e))},Vh=function(t){yo=yo||document.createElement("div");for(var e=0;e<Bh;e++){var s=Mc[e],n=s==="",i=n?t:s+t.charAt(0).toUpperCase()+t.slice(1);if(i in yo.style||n){if(n&&t==="clipPath"&&Ir.has(t))return;Dc.set(t,i),Oc(t,(n?"":"-")+ro(i))}}},Wh=function(t){return Oc(t,t)},Lc=function(t,e){e===void 0&&(e=!1);var s=e?Ir:Dc;return s.has(t)||(Nh?Vh(t):Wh(t)),s.get(t)||t},Hh=["","X","Y","Z"],Uh=["translate","scale","rotate","skew","transformPerspective"],tr=Uh.reduce(function(t,e){return Hh.reduce(function(s,n){return s.push(e+n),s},t)},["x","y","z"]),jh=tr.reduce(function(t,e){return t[e]=!0,t},{});function zr(t){return jh[t]===!0}function qh(t,e){return tr.indexOf(t)-tr.indexOf(e)}var Yh=new Set(["originX","originY","originZ"]);function Gh(t){return Yh.has(t)}var xa=Yo(Yo({},of),{transform:Math.round}),Xh={color:Dt,backgroundColor:Dt,outlineColor:Dt,fill:Dt,stroke:Dt,borderColor:Dt,borderTopColor:Dt,borderRightColor:Dt,borderBottomColor:Dt,borderLeftColor:Dt,borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,size:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,rotate:vs,rotateX:vs,rotateY:vs,rotateZ:vs,scale:si,scaleX:si,scaleY:si,scaleZ:si,skew:vs,skewX:vs,skewY:vs,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,opacity:_o,originX:ha,originY:ha,originZ:fe,zIndex:xa,fillOpacity:_o,strokeOpacity:_o,numOctaves:xa},Fr=function(t){return Xh[t]},Kh=function(t,e){return e&&typeof t=="number"?e.transform(t):t},En="scrollLeft",Pn="scrollTop",Rc=new Set([En,Pn]),Zh=new Set([En,Pn,"transform"]),Jh={x:"translateX",y:"translateY",z:"translateZ"};function Ic(t){return typeof t=="function"}function Qh(t,e,s,n,i,o){o===void 0&&(o=!0);var r="",a=!1;s.sort(qh);for(var l=s.length,c=0;c<l;c++){var u=s[c];r+=(Jh[u]||u)+"("+e[u]+") ",a=u==="z"?!0:a}return!a&&i?r+="translateZ(0)":r=r.trim(),Ic(t.transform)?r=t.transform(e,n?"":r):o&&n&&(r="none"),r}function ep(t,e,s,n,i,o,r,a){e===void 0&&(e=!0),s===void 0&&(s={}),n===void 0&&(n={}),i===void 0&&(i={}),o===void 0&&(o=[]),r===void 0&&(r=!1),a===void 0&&(a=!0);var l=!0,c=!1,u=!1;for(var f in t){var p=t[f],g=Fr(f),m=Kh(p,g);zr(f)?(c=!0,n[f]=m,o.push(f),l&&(g.default&&p!==g.default||!g.default&&p!==0)&&(l=!1)):Gh(f)?(i[f]=m,u=!0):(!Zh.has(f)||!Ic(m))&&(s[Lc(f,r)]=m)}return(c||typeof t.transform=="function")&&(s.transform=Qh(t,n,o,l,e,a)),u&&(s.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0)),s}function Br(t){var e=t===void 0?{}:t,s=e.enableHardwareAcceleration,n=s===void 0?!0:s,i=e.isDashCase,o=i===void 0?!0:i,r=e.allowTransformNone,a=r===void 0?!0:r,l={},c={},u={},f=[];return function(p){return f.length=0,ep(p,n,l,c,u,f,o,a),l}}function tp(t,e){var s=e.element,n=e.preparseOutput,i=Fr(t);if(zr(t))return i&&i.default||0;if(Rc.has(t))return s[t];var o=window.getComputedStyle(s,null).getPropertyValue(Lc(t,!0))||0;return n&&i&&i.test(o)&&i.parse?i.parse(o):o}function sp(t,e,s){var n=e.element,i=e.buildStyles,o=e.hasCSSVariable;if(Object.assign(n.style,i(t)),o)for(var r=s.length,a=0;a<r;a++){var l=s[a];l.startsWith("--")&&n.style.setProperty(l,t[l])}s.indexOf(En)!==-1&&(n[En]=t[En]),s.indexOf(Pn)!==-1&&(n[Pn]=t[Pn])}var np=Rr({onRead:tp,onRender:sp,uncachedValues:Rc});function ip(t,e){e===void 0&&(e={});var s=e.enableHardwareAcceleration,n=e.allowTransformNone,i=Pr(e,["enableHardwareAcceleration","allowTransformNone"]);return np(Yo({element:t,buildStyles:Br({enableHardwareAcceleration:s,allowTransformNone:n}),preparseOutput:!0},i))}var zc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),ka=.5,Fc=function(){return{style:{}}},wo=function(t,e){return fe.transform(t*e)},op={x:0,y:0,width:0,height:0};function Ca(t,e,s){return typeof t=="string"?t:fe.transform(e+s*t)}function rp(t,e,s){return Ca(e,t.x,t.width)+" "+Ca(s,t.y,t.height)}var Bc={enableHardwareAcceleration:!1,isDashCase:!1};function ap(t,e,s,n,i,o){e===void 0&&(e=op),n===void 0&&(n=Br(Bc)),i===void 0&&(i=Fc()),o===void 0&&(o=!0);var r=t.attrX,a=t.attrY,l=t.originX,c=t.originY,u=t.pathLength,f=t.pathSpacing,p=f===void 0?1:f,g=t.pathOffset,m=g===void 0?0:g,v=Pr(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),b=n(v);for(var $ in b)if($==="transform")i.style.transform=b[$];else{var w=o&&!zc.has($)?ro($):$;i[w]=b[$]}return(l!==void 0||c!==void 0||b.transform)&&(i.style.transformOrigin=rp(e,l!==void 0?l:ka,c!==void 0?c:ka)),r!==void 0&&(i.x=r),a!==void 0&&(i.y=a),s!==void 0&&u!==void 0&&(i[o?"stroke-dashoffset":"strokeDashoffset"]=wo(-m,s),i[o?"stroke-dasharray":"strokeDasharray"]=wo(u,s)+" "+wo(p,s)),i}function lp(t,e,s){s===void 0&&(s=!0);var n=Fc(),i=Br(Bc);return function(o){return ap(o,t,e,i,n,s)}}var cp=function(t){return typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()},up=function(t){try{return cp(t)}catch(e){return{x:0,y:0,width:0,height:0}}},dp=function(t){return t.tagName==="path"},fp=Rr({onRead:function(t,e){var s=e.element;if(t=zc.has(t)?t:ro(t),zr(t)){var n=Fr(t);return n&&n.default||0}else return s.getAttribute(t)},onRender:function(t,e){var s=e.element,n=e.buildAttrs,i=n(t);for(var o in i)o==="style"?Object.assign(s.style,i.style):s.setAttribute(o,i[o])}}),hp=function(t){var e=up(t),s=dp(t)&&t.getTotalLength?t.getTotalLength():void 0;return fp({element:t,buildAttrs:lp(e,s)})},pp=Rr({useCache:!1,onRead:function(t){return t==="scrollTop"?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,s=e===void 0?0:e,n=t.scrollLeft,i=n===void 0?0:n;return window.scrollTo(i,s)}}),sr=new WeakMap,gp=function(t){return t instanceof HTMLElement||typeof t.click=="function"},mp=function(t){return t instanceof SVGElement||"ownerSVGElement"in t},vp=function(t,e){var s;return t===window?s=pp(t):gp(t)?s=ip(t,e):mp(t)&&(s=hp(t)),sr.set(t,s),s},bp=function(t,e){return sr.has(t)?sr.get(t):vp(t,e)};function Nc(t,e){var s=typeof t=="string"?document.querySelector(t):t;return bp(s,e)}function Vc(t,e,s=0){if(t){const n=Nc(t);e?(n.set({display:"block"}),n.render(!0),zi({from:{height:0,padding:0},to:{height:t.scrollHeight+2*s,padding:s},duration:300,ease:Fi}).start({update:n.set,complete:()=>n.set({height:"auto"})})):zi({from:{height:t.scrollHeight,padding:s},to:{height:0,padding:0},duration:300,ease:Fi}).start({update:n.set,complete:()=>n.set({height:0,display:"none"})})}}const _p=["title"],Ms=q({__name:"OrganizationNameWithCertificate",props:{organization:{},showType:{type:Boolean,default:!0}},setup(t){const{t:e}=ce(),s=t,{type:n}=rf(s.organization),{organizationCertified:i}=af(s.organization);return(o,r)=>(y(),k("span",{class:Te(["inline-flex",h(n)!==h(gc)||h(i)?"fr-grid-row--middle":"align-items-baseline"])},[d("span",null,[o.showType?(y(),N(mc,{key:0,type:h(n)},null,8,["type"])):z("",!0)]),x(h(ut),{class:"fr-mx-1v","auto-resize":!0,text:o.organization.name,"max-lines":1},null,8,["text"]),h(i)?(y(),k("span",{key:0,class:"fr-icon-success-line fr-icon--sm",title:h(e)("The identity of this public service is certified by {certifier}",{certifier:h(it).title}),"aria-hidden":"true"},null,8,_p)):z("",!0)],2))}}),yp={key:0,class:"fr-my-0"},wp={key:1,class:"fr-my-0 text-mention-grey"},es=q({__name:"QualityItem",props:{passed:{type:Boolean},messagePassed:{},messageFailed:{}},setup(t){return(e,s)=>(y(),k("li",null,[e.passed?(y(),k("p",yp,[s[0]||(s[0]=d("span",{class:"fr-icon-check-line","aria-hidden":"true"},null,-1)),W(" "+_(e.messagePassed),1)])):(y(),k("p",wp,[s[1]||(s[1]=d("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),W(" "+_(e.messageFailed),1)]))]))}});function $p(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}let xp=Symbol("headlessui.useid"),kp=0;function cs(){return bt(xp,()=>"".concat(++kp))()}function te(t){var e;if(t==null||t.value==null)return null;let s=(e=t.value.$el)!=null?e:t.value;return s instanceof Node?s:null}function vt(t,e,...s){if(t in e){let i=e[t];return typeof i=="function"?i(...s):i}let n=new Error('Tried to handle "'.concat(t,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(e).map(i=>'"'.concat(i,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(n,vt),n}var Cp=Object.defineProperty,Sp=(t,e,s)=>e in t?Cp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Sa=(t,e,s)=>(Sp(t,typeof e!="symbol"?e+"":e,s),s);let Tp=class{constructor(){Sa(this,"current",this.detect()),Sa(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},ao=new Tp;function Zt(t){if(ao.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=te(t);if(e)return e.ownerDocument}return document}let nr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>"".concat(t,":not([tabindex='-1'])")).join(",");var je=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(je||{}),is=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(is||{}),Ep=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Ep||{});function lo(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(nr)).sort((e,s)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(s.tabIndex||Number.MAX_SAFE_INTEGER)))}var Nr=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Nr||{});function Wc(t,e=0){var s;return t===((s=Zt(t))==null?void 0:s.body)?!1:vt(e,{0(){return t.matches(nr)},1(){let n=t;for(;n!==null;){if(n.matches(nr))return!0;n=n.parentElement}return!1}})}var Pp=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Pp||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Ap=["textarea","input"].join(",");function Dp(t){var e,s;return(s=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,Ap))!=null?s:!1}function Us(t,e=s=>s){return t.slice().sort((s,n)=>{let i=e(s),o=e(n);if(i===null||o===null)return 0;let r=i.compareDocumentPosition(o);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function mt(t,e,{sorted:s=!0,relativeTo:n=null,skipElements:i=[]}={}){var o;let r=(o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?o:document,a=Array.isArray(t)?s?Us(t):t:lo(t);i.length>0&&a.length>1&&(a=a.filter(m=>!i.includes(m))),n=n!=null?n:r.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(n))-1;if(e&4)return Math.max(0,a.indexOf(n))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},f=0,p=a.length,g;do{if(f>=p||f+p<=0)return 0;let m=c+f;if(e&16)m=(m+p)%p;else{if(m<0)return 3;if(m>=p)return 1}g=a[m],g==null||g.focus(u),f+=l}while(g!==r.activeElement);return e&6&&Dp(g)&&g.select(),2}function Mp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Op(){return/Android/gi.test(window.navigator.userAgent)}function Lp(){return Mp()||Op()}function oi(t,e,s){ao.isServer||_t(n=>{document.addEventListener(t,e,s),n(()=>document.removeEventListener(t,e,s))})}function Hc(t,e,s){ao.isServer||_t(n=>{window.addEventListener(t,e,s),n(()=>window.removeEventListener(t,e,s))})}function Rp(t,e,s=j(()=>!0)){function n(o,r){if(!s.value||o.defaultPrevented)return;let a=r(o);if(a===null||!a.getRootNode().contains(a))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:te(c);if(u!=null&&u.contains(a)||o.composed&&o.composedPath().includes(u))return}return!Wc(a,Nr.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let i=M(null);oi("pointerdown",o=>{var r,a;s.value&&(i.value=((a=(r=o.composedPath)==null?void 0:r.call(o))==null?void 0:a[0])||o.target)},!0),oi("mousedown",o=>{var r,a;s.value&&(i.value=((a=(r=o.composedPath)==null?void 0:r.call(o))==null?void 0:a[0])||o.target)},!0),oi("click",o=>{Lp()||i.value&&(n(o,()=>i.value),i.value=null)},!0),oi("touchend",o=>n(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Hc("blur",o=>n(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ta(t,e){if(t)return t;let s=e!=null?e:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function Uc(t,e){let s=M(Ta(t.value.type,t.value.as));return we(()=>{s.value=Ta(t.value.type,t.value.as)}),_t(()=>{var n;s.value||te(e)&&te(e)instanceof HTMLButtonElement&&!((n=te(e))!=null&&n.hasAttribute("type"))&&(s.value="button")}),s}var Os=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Os||{}),Ip=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Ip||{});function dt({visible:t=!0,features:e=0,ourProps:s,theirProps:n,...i}){var o;let r=qc(n,s),a=Object.assign(i,{props:r});if(t||e&2&&r.static)return $o(a);if(e&1){let l=(o=r.unmount)==null||o?0:1;return vt(l,{0(){return null},1(){return $o({...i,props:{...r,hidden:!0,style:{display:"none"}}})}})}return $o(a)}function $o({props:t,attrs:e,slots:s,slot:n,name:i}){var o,r;let{as:a,...l}=Yc(t,["unmount","static"]),c=(o=s.default)==null?void 0:o.call(s,n),u={};if(n){let f=!1,p=[];for(let[g,m]of Object.entries(n))typeof m=="boolean"&&(f=!0),m===!0&&p.push(g);f&&(u["data-headlessui-state"]=p.join(" "))}if(a==="template"){if(c=jc(c!=null?c:[]),Object.keys(l).length>0||Object.keys(e).length>0){let[f,...p]=c!=null?c:[];if(!zp(f)||p.length>0)throw new Error(['Passing props on "template"!',"","The current component <".concat(i,' /> is rendering a "template".'),"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(v=>v.trim()).filter((v,b,$)=>$.indexOf(v)===b).sort((v,b)=>v.localeCompare(b)).map(v=>"  - ".concat(v)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>"  - ".concat(v)).join("\n")].join("\n"));let g=qc((r=f.props)!=null?r:{},l,u),m=Hd(f,g,!0);for(let v in g)v.startsWith("on")&&(m.props||(m.props={}),m.props[v]=g[v]);return m}return Array.isArray(c)&&c.length===1?c[0]:c}return Xe(a,Object.assign({},l,u),{default:()=>c})}function jc(t){return t.flatMap(e=>e.type===J?jc(e.children):[e])}function qc(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},s={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(s[i]!=null||(s[i]=[]),s[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(s).map(n=>[n,void 0])));for(let n in s)Object.assign(e,{[n](i,...o){let r=s[n];for(let a of r){if(i instanceof Event&&i.defaultPrevented)return;a(i,...o)}}});return e}function Yc(t,e=[]){let s=Object.assign({},t);for(let n of e)n in s&&delete s[n];return s}function zp(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var Ls=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Ls||{});let Rs=q({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:s}){return()=>{var n;let{features:i,...o}=t,r={"aria-hidden":(i&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return dt({ourProps:r,theirProps:o,slot:{},attrs:s,slots:e,name:"Hidden"})}}}),Gc=Symbol("Context");var Is=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Is||{});function Xc(){return bt(Gc,null)}function Fp(t){Yt(Gc,t)}var Ye=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Ye||{});function Bp(t,e,s,n){ao.isServer||_t(i=>{t=t!=null?t:window,t.addEventListener(e,s,n),i(()=>t.removeEventListener(e,s,n))})}var Ht=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Ht||{});function Kc(){let t=M(0);return Hc("keydown",e=>{e.key==="Tab"&&(t.value=e.shiftKey?1:0)}),t}function Np({defaultContainers:t=[],portals:e,mainTreeNodeRef:s}={}){let n=M(null),i=Zt(n);function o(){var r,a,l;let c=[];for(let u of t)u!==null&&(u instanceof HTMLElement?c.push(u):"value"in u&&u.value instanceof HTMLElement&&c.push(u.value));if(e!=null&&e.value)for(let u of e.value)c.push(u);for(let u of(r=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?r:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(te(n))||u.contains((l=(a=te(n))==null?void 0:a.getRootNode())==null?void 0:l.host)||c.some(f=>u.contains(f))||c.push(u));return c}return{resolveContainers:o,contains(r){return o().some(a=>a.contains(r))},mainTreeNodeRef:n,MainTreeNode(){return s!=null?null:Xe(Rs,{features:Ls.Hidden,ref:n})}}}function Vp(){let t=M(null);return{mainTreeNodeRef:t,MainTreeNode(){return Xe(Rs,{features:Ls.Hidden,ref:t})}}}let Zc=Symbol("ForcePortalRootContext");function Wp(){return bt(Zc,!1)}q({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(t,{slots:e,attrs:s}){return Yt(Zc,t.force),()=>{let{force:n,...i}=t;return dt({theirProps:i,ourProps:{},slot:{},slots:e,attrs:s,name:"ForcePortalRoot"})}}});function Hp(t){let e=Zt(t);if(!e){if(t===null)return null;throw new Error("[Headless UI]: Cannot find ownerDocument for contextElement: ".concat(t))}let s=e.getElementById("headlessui-portal-root");if(s)return s;let n=e.createElement("div");return n.setAttribute("id","headlessui-portal-root"),e.body.appendChild(n)}const ir=new WeakMap;function Up(t){var e;return(e=ir.get(t))!=null?e:0}function Ea(t,e){let s=e(Up(t));return s<=0?ir.delete(t):ir.set(t,s),s}q({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:s}){let n=M(null),i=j(()=>Zt(n)),o=Wp(),r=bt(Jc,null),a=M(o===!0||r==null?Hp(n.value):r.resolveTarget());a.value&&Ea(a.value,p=>p+1);let l=M(!1);we(()=>{l.value=!0}),_t(()=>{o||r!=null&&(a.value=r.resolveTarget())});let c=bt(or,null),u=!1,f=Ud();return Tt(n,()=>{if(u||!c)return;let p=te(n);p&&(Gt(c.register(p),f),u=!0)}),Gt(()=>{var p,g;let m=(p=i.value)==null?void 0:p.getElementById("headlessui-portal-root");!m||a.value!==m||Ea(a.value,v=>v-1)||a.value.children.length>0||(g=a.value.parentElement)==null||g.removeChild(a.value)}),()=>{if(!l.value||a.value===null)return null;let p={ref:n,"data-headlessui-portal":""};return Xe(Yn,{to:a.value},dt({ourProps:p,theirProps:t,slot:{},attrs:s,slots:e,name:"Portal"}))}}});let or=Symbol("PortalParentContext");function jp(){let t=bt(or,null),e=M([]);function s(o){return e.value.push(o),t&&t.register(o),()=>n(o)}function n(o){let r=e.value.indexOf(o);r!==-1&&e.value.splice(r,1),t&&t.unregister(o)}let i={register:s,unregister:n,portals:e};return[e,q({name:"PortalWrapper",setup(o,{slots:r}){return Yt(or,i),()=>{var a;return(a=r.default)==null?void 0:a.call(r)}}})]}let Jc=Symbol("PortalGroupContext");q({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:e,slots:s}){let n=At({resolveTarget(){return t.target}});return Yt(Jc,n),()=>{let{target:i,...o}=t;return dt({theirProps:o,ourProps:{},slot:{},attrs:e,slots:s,name:"PortalGroup"})}}});var qp=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(qp||{});let Qc=Symbol("PopoverContext");function co(t){let e=bt(Qc,null);if(e===null){let s=new Error("<".concat(t," /> is missing a parent <").concat(nu.name," /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(s,co),s}return e}let eu=Symbol("PopoverGroupContext");function tu(){return bt(eu,null)}let su=Symbol("PopoverPanelContext");function Yp(){return bt(su,null)}let nu=q({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:s,expose:n}){var i;let o=M(null);n({el:o,$el:o});let r=M(1),a=M(null),l=M(null),c=M(null),u=M(null),f=j(()=>Zt(o)),p=j(()=>{var S,E;if(!te(a)||!te(u))return!1;for(let V of document.querySelectorAll("body > *"))if(Number(V==null?void 0:V.contains(te(a)))^Number(V==null?void 0:V.contains(te(u))))return!0;let O=lo(),A=O.indexOf(te(a)),L=(A+O.length-1)%O.length,B=(A+1)%O.length,H=O[L],D=O[B];return!((S=te(u))!=null&&S.contains(H))&&!((E=te(u))!=null&&E.contains(D))}),g={popoverState:r,buttonId:M(null),panelId:M(null),panel:u,button:a,isPortalled:p,beforePanelSentinel:l,afterPanelSentinel:c,togglePopover(){r.value=vt(r.value,{0:1,1:0})},closePopover(){r.value!==1&&(r.value=1)},close(S){g.closePopover();let E=(()=>S?S instanceof HTMLElement?S:S.value instanceof HTMLElement?te(S):te(g.button):te(g.button))();E==null||E.focus()}};Yt(Qc,g),Fp(j(()=>vt(r.value,{0:Is.Open,1:Is.Closed})));let m={buttonId:g.buttonId,panelId:g.panelId,close(){g.closePopover()}},v=tu(),b=v==null?void 0:v.registerPopover,[$,w]=jp(),C=Np({mainTreeNodeRef:v==null?void 0:v.mainTreeNodeRef,portals:$,defaultContainers:[a,u]});function T(){var S,E,O,A;return(A=v==null?void 0:v.isFocusWithinPopoverGroup())!=null?A:((S=f.value)==null?void 0:S.activeElement)&&(((E=te(a))==null?void 0:E.contains(f.value.activeElement))||((O=te(u))==null?void 0:O.contains(f.value.activeElement)))}return _t(()=>b==null?void 0:b(m)),Bp((i=f.value)==null?void 0:i.defaultView,"focus",S=>{var E,O;S.target!==window&&S.target instanceof HTMLElement&&r.value===0&&(T()||a&&u&&(C.contains(S.target)||(E=te(g.beforePanelSentinel))!=null&&E.contains(S.target)||(O=te(g.afterPanelSentinel))!=null&&O.contains(S.target)||g.closePopover()))},!0),Rp(C.resolveContainers,(S,E)=>{var O;g.closePopover(),Wc(E,Nr.Loose)||(S.preventDefault(),(O=te(a))==null||O.focus())},j(()=>r.value===0)),()=>{let S={open:r.value===0,close:g.close};return Xe(J,[Xe(w,{},()=>dt({theirProps:{...t,...s},ourProps:{ref:o},slot:S,slots:e,attrs:s,name:"Popover"})),Xe(C.MainTreeNode)])}}}),Gp=q({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:e,slots:s,expose:n}){var i;let o=(i=t.id)!=null?i:"headlessui-popover-button-".concat(cs()),r=co("PopoverButton"),a=j(()=>Zt(r.button));n({el:r.button,$el:r.button}),we(()=>{r.buttonId.value=o}),Gt(()=>{r.buttonId.value=null});let l=tu(),c=l==null?void 0:l.closeOthers,u=Yp(),f=j(()=>u===null?!1:u.value===r.panelId.value),p=M(null),g="headlessui-focus-sentinel-".concat(cs());f.value||_t(()=>{r.button.value=te(p)});let m=Uc(j(()=>({as:t.as,type:e.type})),p);function v(S){var E,O,A,L,B;if(f.value){if(r.popoverState.value===1)return;switch(S.key){case Ye.Space:case Ye.Enter:S.preventDefault(),(O=(E=S.target).click)==null||O.call(E),r.closePopover(),(A=te(r.button))==null||A.focus();break}}else switch(S.key){case Ye.Space:case Ye.Enter:S.preventDefault(),S.stopPropagation(),r.popoverState.value===1&&(c==null||c(r.buttonId.value)),r.togglePopover();break;case Ye.Escape:if(r.popoverState.value!==0)return c==null?void 0:c(r.buttonId.value);if(!te(r.button)||(L=a.value)!=null&&L.activeElement&&!((B=te(r.button))!=null&&B.contains(a.value.activeElement)))return;S.preventDefault(),S.stopPropagation(),r.closePopover();break}}function b(S){f.value||S.key===Ye.Space&&S.preventDefault()}function $(S){var E,O;t.disabled||(f.value?(r.closePopover(),(E=te(r.button))==null||E.focus()):(S.preventDefault(),S.stopPropagation(),r.popoverState.value===1&&(c==null||c(r.buttonId.value)),r.togglePopover(),(O=te(r.button))==null||O.focus()))}function w(S){S.preventDefault(),S.stopPropagation()}let C=Kc();function T(){let S=te(r.panel);if(!S)return;function E(){vt(C.value,{[Ht.Forwards]:()=>mt(S,je.First),[Ht.Backwards]:()=>mt(S,je.Last)})===is.Error&&mt(lo().filter(O=>O.dataset.headlessuiFocusGuard!=="true"),vt(C.value,{[Ht.Forwards]:je.Next,[Ht.Backwards]:je.Previous}),{relativeTo:te(r.button)})}E()}return()=>{let S=r.popoverState.value===0,E={open:S},{...O}=t,A=f.value?{ref:p,type:m.value,onKeydown:v,onClick:$}:{ref:p,id:o,type:m.value,"aria-expanded":r.popoverState.value===0,"aria-controls":te(r.panel)?r.panelId.value:void 0,disabled:t.disabled?!0:void 0,onKeydown:v,onKeyup:b,onClick:$,onMousedown:w};return Xe(J,[dt({ourProps:A,theirProps:{...e,...O},slot:E,attrs:e,slots:s,name:"PopoverButton"}),S&&!f.value&&r.isPortalled.value&&Xe(Rs,{id:g,features:Ls.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:T})])}}});q({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:e,slots:s}){let n=co("PopoverOverlay"),i="headlessui-popover-overlay-".concat(cs()),o=Xc(),r=j(()=>o!==null?(o.value&Is.Open)===Is.Open:n.popoverState.value===0);function a(){n.closePopover()}return()=>{let l={open:n.popoverState.value===0};return dt({ourProps:{id:i,"aria-hidden":!0,onClick:a},theirProps:t,slot:l,attrs:e,slots:s,features:Os.RenderStrategy|Os.Static,visible:r.value,name:"PopoverOverlay"})}}});let Xp=q({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:e,slots:s,expose:n}){var i;let o=(i=t.id)!=null?i:"headlessui-popover-panel-".concat(cs()),{focus:r}=t,a=co("PopoverPanel"),l=j(()=>Zt(a.panel)),c="headlessui-focus-sentinel-before-".concat(cs()),u="headlessui-focus-sentinel-after-".concat(cs());n({el:a.panel,$el:a.panel}),we(()=>{a.panelId.value=o}),Gt(()=>{a.panelId.value=null}),Yt(su,a.panelId),_t(()=>{var w,C;if(!r||a.popoverState.value!==0||!a.panel)return;let T=(w=l.value)==null?void 0:w.activeElement;(C=te(a.panel))!=null&&C.contains(T)||mt(te(a.panel),je.First)});let f=Xc(),p=j(()=>f!==null?(f.value&Is.Open)===Is.Open:a.popoverState.value===0);function g(w){var C,T;switch(w.key){case Ye.Escape:if(a.popoverState.value!==0||!te(a.panel)||l.value&&!((C=te(a.panel))!=null&&C.contains(l.value.activeElement)))return;w.preventDefault(),w.stopPropagation(),a.closePopover(),(T=te(a.button))==null||T.focus();break}}function m(w){var C,T,S,E,O;let A=w.relatedTarget;A&&te(a.panel)&&((C=te(a.panel))!=null&&C.contains(A)||(a.closePopover(),((S=(T=te(a.beforePanelSentinel))==null?void 0:T.contains)!=null&&S.call(T,A)||(O=(E=te(a.afterPanelSentinel))==null?void 0:E.contains)!=null&&O.call(E,A))&&A.focus({preventScroll:!0})))}let v=Kc();function b(){let w=te(a.panel);if(!w)return;function C(){vt(v.value,{[Ht.Forwards]:()=>{var T;mt(w,je.First)===is.Error&&((T=te(a.afterPanelSentinel))==null||T.focus())},[Ht.Backwards]:()=>{var T;(T=te(a.button))==null||T.focus({preventScroll:!0})}})}C()}function $(){let w=te(a.panel);if(!w)return;function C(){vt(v.value,{[Ht.Forwards]:()=>{let T=te(a.button),S=te(a.panel);if(!T)return;let E=lo(),O=E.indexOf(T),A=E.slice(0,O+1),L=[...E.slice(O+1),...A];for(let B of L.slice())if(B.dataset.headlessuiFocusGuard==="true"||S!=null&&S.contains(B)){let H=L.indexOf(B);H!==-1&&L.splice(H,1)}mt(L,je.First,{sorted:!1})},[Ht.Backwards]:()=>{var T;mt(w,je.Previous)===is.Error&&((T=te(a.button))==null||T.focus())}})}C()}return()=>{let w={open:a.popoverState.value===0,close:a.close},{focus:C,...T}=t,S={ref:a.panel,id:o,onKeydown:g,onFocusout:r&&a.popoverState.value===0?m:void 0,tabIndex:-1};return dt({ourProps:S,theirProps:{...e,...T},attrs:e,slot:w,slots:{...s,default:(...E)=>{var O;return[Xe(J,[p.value&&a.isPortalled.value&&Xe(Rs,{id:c,ref:a.beforePanelSentinel,features:Ls.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:b}),(O=s.default)==null?void 0:O.call(s,...E),p.value&&a.isPortalled.value&&Xe(Rs,{id:u,ref:a.afterPanelSentinel,features:Ls.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:$})])]}},features:Os.RenderStrategy|Os.Static,visible:p.value,name:"PopoverPanel"})}}});q({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:s,expose:n}){let i=M(null),o=jd([]),r=j(()=>Zt(i)),a=Vp();n({el:i,$el:i});function l(p){let g=o.value.indexOf(p);g!==-1&&o.value.splice(g,1)}function c(p){return o.value.push(p),()=>{l(p)}}function u(){var p;let g=r.value;if(!g)return!1;let m=g.activeElement;return(p=te(i))!=null&&p.contains(m)?!0:o.value.some(v=>{var b,$;return((b=g.getElementById(v.buttonId.value))==null?void 0:b.contains(m))||(($=g.getElementById(v.panelId.value))==null?void 0:$.contains(m))})}function f(p){for(let g of o.value)g.buttonId.value!==p&&g.close()}return Yt(eu,{registerPopover:c,unregisterPopover:l,isFocusWithinPopoverGroup:u,closeOthers:f,mainTreeNodeRef:a.mainTreeNodeRef}),()=>Xe(J,[dt({ourProps:{ref:i},theirProps:{...t,...e},slot:{},attrs:e,slots:s,name:"PopoverGroup"}),Xe(a.MainTreeNode)])}});let Kp=q({props:{onFocus:{type:Function,required:!0}},setup(t){let e=M(!0);return()=>e.value?Xe(Rs,{as:"button",type:"button",features:Ls.Focusable,onFocus(s){s.preventDefault();let n,i=50;function o(){var r;if(i--<=0){n&&cancelAnimationFrame(n);return}if((r=t.onFocus)!=null&&r.call(t)){e.value=!1,cancelAnimationFrame(n);return}n=requestAnimationFrame(o)}n=requestAnimationFrame(o)}}):null}});var Zp=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Zp||{}),Jp=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(Jp||{});let iu=Symbol("TabsContext");function Kn(t){let e=bt(iu,null);if(e===null){let s=new Error("<".concat(t," /> is missing a parent <TabGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(s,Kn),s}return e}let Vr=Symbol("TabsSSRContext"),Qp=q({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:e,attrs:s,emit:n}){var i;let o=M((i=t.selectedIndex)!=null?i:t.defaultIndex),r=M([]),a=M([]),l=j(()=>t.selectedIndex!==null),c=j(()=>l.value?t.selectedIndex:o.value);function u(v){var b;let $=Us(f.tabs.value,te),w=Us(f.panels.value,te),C=$.filter(T=>{var S;return!((S=te(T))!=null&&S.hasAttribute("disabled"))});if(v<0||v>$.length-1){let T=vt(o.value===null?0:Math.sign(v-o.value),{[-1]:()=>1,0:()=>vt(Math.sign(v),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),S=vt(T,{0:()=>$.indexOf(C[0]),1:()=>$.indexOf(C[C.length-1])});S!==-1&&(o.value=S),f.tabs.value=$,f.panels.value=w}else{let T=$.slice(0,v),S=[...$.slice(v),...T].find(O=>C.includes(O));if(!S)return;let E=(b=$.indexOf(S))!=null?b:f.selectedIndex.value;E===-1&&(E=f.selectedIndex.value),o.value=E,f.tabs.value=$,f.panels.value=w}}let f={selectedIndex:j(()=>{var v,b;return(b=(v=o.value)!=null?v:t.defaultIndex)!=null?b:null}),orientation:j(()=>t.vertical?"vertical":"horizontal"),activation:j(()=>t.manual?"manual":"auto"),tabs:r,panels:a,setSelectedIndex(v){c.value!==v&&n("change",v),l.value||u(v)},registerTab(v){var b;if(r.value.includes(v))return;let $=r.value[o.value];if(r.value.push(v),r.value=Us(r.value,te),!l.value){let w=(b=r.value.indexOf($))!=null?b:o.value;w!==-1&&(o.value=w)}},unregisterTab(v){let b=r.value.indexOf(v);b!==-1&&r.value.splice(b,1)},registerPanel(v){a.value.includes(v)||(a.value.push(v),a.value=Us(a.value,te))},unregisterPanel(v){let b=a.value.indexOf(v);b!==-1&&a.value.splice(b,1)}};Yt(iu,f);let p=M({tabs:[],panels:[]}),g=M(!1);we(()=>{g.value=!0}),Yt(Vr,j(()=>g.value?null:p.value));let m=j(()=>t.selectedIndex);return we(()=>{Tt([m],()=>{var v;return u((v=t.selectedIndex)!=null?v:t.defaultIndex)},{immediate:!0})}),_t(()=>{if(!l.value||c.value==null||f.tabs.value.length<=0)return;let v=Us(f.tabs.value,te);v.some((b,$)=>te(f.tabs.value[$])!==te(b))&&f.setSelectedIndex(v.findIndex(b=>te(b)===te(f.tabs.value[c.value])))}),()=>{let v={selectedIndex:o.value};return Xe(J,[r.value.length<=0&&Xe(Kp,{onFocus:()=>{for(let b of r.value){let $=te(b);if(($==null?void 0:$.tabIndex)===0)return $.focus(),!0}return!1}}),dt({theirProps:{...s,...Yc(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:v,slots:e,attrs:s,name:"TabGroup"})])}}}),eg=q({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:s}){let n=Kn("TabList");return()=>{let i={selectedIndex:n.selectedIndex.value},o={role:"tablist","aria-orientation":n.orientation.value};return dt({ourProps:o,theirProps:t,slot:i,attrs:e,slots:s,name:"TabList"})}}}),tg=q({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:e,slots:s,expose:n}){var i;let o=(i=t.id)!=null?i:"headlessui-tabs-tab-".concat(cs()),r=Kn("Tab"),a=M(null);n({el:a,$el:a}),we(()=>r.registerTab(a)),Gt(()=>r.unregisterTab(a));let l=bt(Vr),c=j(()=>{if(l.value){let w=l.value.tabs.indexOf(o);return w===-1?l.value.tabs.push(o)-1:w}return-1}),u=j(()=>{let w=r.tabs.value.indexOf(a);return w===-1?c.value:w}),f=j(()=>u.value===r.selectedIndex.value);function p(w){var C;let T=w();if(T===is.Success&&r.activation.value==="auto"){let S=(C=Zt(a))==null?void 0:C.activeElement,E=r.tabs.value.findIndex(O=>te(O)===S);E!==-1&&r.setSelectedIndex(E)}return T}function g(w){let C=r.tabs.value.map(T=>te(T)).filter(Boolean);if(w.key===Ye.Space||w.key===Ye.Enter){w.preventDefault(),w.stopPropagation(),r.setSelectedIndex(u.value);return}switch(w.key){case Ye.Home:case Ye.PageUp:return w.preventDefault(),w.stopPropagation(),p(()=>mt(C,je.First));case Ye.End:case Ye.PageDown:return w.preventDefault(),w.stopPropagation(),p(()=>mt(C,je.Last))}if(p(()=>vt(r.orientation.value,{vertical(){return w.key===Ye.ArrowUp?mt(C,je.Previous|je.WrapAround):w.key===Ye.ArrowDown?mt(C,je.Next|je.WrapAround):is.Error},horizontal(){return w.key===Ye.ArrowLeft?mt(C,je.Previous|je.WrapAround):w.key===Ye.ArrowRight?mt(C,je.Next|je.WrapAround):is.Error}}))===is.Success)return w.preventDefault()}let m=M(!1);function v(){var w;m.value||(m.value=!0,!t.disabled&&((w=te(a))==null||w.focus({preventScroll:!0}),r.setSelectedIndex(u.value),$p(()=>{m.value=!1})))}function b(w){w.preventDefault()}let $=Uc(j(()=>({as:t.as,type:e.type})),a);return()=>{var w,C;let T={selected:f.value,disabled:(w=t.disabled)!=null?w:!1},{...S}=t,E={ref:a,onKeydown:g,onMousedown:b,onClick:v,id:o,role:"tab",type:$.value,"aria-controls":(C=te(r.panels.value[u.value]))==null?void 0:C.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:t.disabled?!0:void 0};return dt({ourProps:E,theirProps:S,slot:T,attrs:e,slots:s,name:"Tab"})}}}),sg=q({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:s}){let n=Kn("TabPanels");return()=>{let i={selectedIndex:n.selectedIndex.value};return dt({theirProps:t,ourProps:{},slot:i,attrs:s,slots:e,name:"TabPanels"})}}}),ng=q({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:e,slots:s,expose:n}){var i;let o=(i=t.id)!=null?i:"headlessui-tabs-panel-".concat(cs()),r=Kn("TabPanel"),a=M(null);n({el:a,$el:a}),we(()=>r.registerPanel(a)),Gt(()=>r.unregisterPanel(a));let l=bt(Vr),c=j(()=>{if(l.value){let p=l.value.panels.indexOf(o);return p===-1?l.value.panels.push(o)-1:p}return-1}),u=j(()=>{let p=r.panels.value.indexOf(a);return p===-1?c.value:p}),f=j(()=>u.value===r.selectedIndex.value);return()=>{var p;let g={selected:f.value},{tabIndex:m,...v}=t,b={ref:a,id:o,role:"tabpanel","aria-labelledby":(p=te(r.tabs.value[u.value]))==null?void 0:p.id,tabIndex:f.value?m:-1};return!f.value&&t.unmount&&!t.static?Xe(Rs,{as:"span","aria-hidden":!0,...b}):dt({ourProps:b,theirProps:v,slot:g,attrs:e,slots:s,features:Os.Static|Os.RenderStrategy,visible:f.value,name:"TabPanel"})}}});const ig=q({__name:"ToggletipButton",props:{size:{default:"xs"},icon:{default:"fr-icon-information-line"}},setup(t){const e=t,s=j(()=>e.size==="md"?"":e.size==="xs"?"fr-btn--".concat(e.size," fr-icon--sm"):"fr-btn--".concat(e.size));return(n,i)=>(y(),k("button",{class:Te("fr-btn fr-btn--tertiary-no-outline text-grey-380 fr-btn--darker-hover align-middle ".concat(s.value," ").concat(n.icon))},null,2))}}),og=q({inheritAttrs:!1,__name:"Toggletip",props:{noMargin:{type:Boolean,default:!1},position:{default:"left"}},setup(t){return(e,s)=>(y(),N(h(nu),{class:"relative text-grey-500",focus:!0},{default:P(()=>[x(h(Gp),us(e.$attrs,{ref:"button",as:ig}),{default:P(()=>[Ke(e.$slots,"default",{},void 0,!0)]),_:3},16),x(h(Xp),{class:Te(["toggletip",{"fr-p-0":e.noMargin,"left-0":e.position==="right"}]),ref:"toggletip"},{default:P(({close:n})=>[Ke(e.$slots,"toggletip",{close:n},void 0,!0)]),_:3},8,["class"])]),_:3}))}}),Wr=pe(og,[["__scopeId","data-v-3bf812ef"]]),rg={class:"fr-m-0 fr-grid-row fr-grid-row--middle fr-text--sm text-mention-grey"},ag={class:"fr-grid-row fr-grid-row--middle"},lg={class:"fr-text--sm fr-my-0"},cg={class:"list-style-none fr-m-0 fr-p-0"},ug={class:"fr-grid-row fr-grid-row--right not-enlarged"},dg=["href","title"],fg={class:"fr-my-0 fr-mr-1v text-mention-grey fr-text--sm"},hg={class:"fr-grid-row fr-grid-row--middle fr-mr-1v"},pg=q({__name:"QualityComponentInline",props:{quality:{}},setup(t){return(e,s)=>(y(),k("div",rg,[d("div",ag,[x(h(Wr),{class:"relative z-2"},{toggletip:P(()=>[d("h5",lg,_(e.$t("Metadata quality:")),1),d("ul",cg,[x(h(es),{passed:e.quality.dataset_description_quality,messagePassed:e.$t("Data description filled"),messageFailed:e.$t("Data description empty"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.resources_documentation,messagePassed:e.$t("Files documented"),messageFailed:e.$t("Files documentation missing"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.license,messagePassed:e.$t("License filled"),messageFailed:e.$t("No license set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.update_frequency&&!!e.quality.update_fulfilled_in_time,messagePassed:e.$t("Update frequency followed"),messageFailed:e.quality.update_frequency?e.$t("Update frequency not followed"):e.$t("Update frequency not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.has_open_format,messagePassed:e.$t("File formats are open"),messageFailed:e.$t("File formats are closed"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.temporal_coverage,messagePassed:e.$t("Temporal coverage filled"),messageFailed:e.$t("Temporal coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.spatial,messagePassed:e.$t("Spatial coverage filled"),messageFailed:e.$t("Spatial coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),x(h(es),{passed:e.quality.all_resources_available,messagePassed:e.$t("All files are available"),messageFailed:e.$t("Some files are unavailable"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"])]),d("div",ug,[d("a",{href:h(it).guides_quality_url,target:"_blank",rel:"noopener",title:e.$t("Learn more about this indicator - opens a new window")},_(e.$t("Learn more about this indicator")),9,dg)])]),_:1}),d("p",fg,_(e.$t("Metadata :")),1),d("div",hg,[x(h(lf),{score:e.quality.score},null,8,["score"])])])]))}});function gg(t){const e=M(!1);function s(){e.value=!e.value;const n=document.getElementById(t);n&&Vc(n,e.value)}return{expanded:e,expand:s}}const mg=cf({duration:!1,dismissible:!0});function vg(){return{toast:mg}}function uo(t){return j(()=>{const s=_e(t);if(s)return s.organization?s.organization.name:s.owner.first_name+" "+s.owner.last_name})}const bg={class:"fr-my-2w fr-p-2w border border-default-grey fr-enlarge-link"},_g={key:0,class:"absolute top-0 fr-grid-row fr-grid-row--middle fr-mt-n3v fr-ml-n1v"},yg={key:0,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},wg={key:1,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},$g={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--top"},xg={class:"fr-col-auto"},kg={class:"logo"},Cg={class:"fr-col-12 fr-col-sm"},Sg={class:"fr-text--md fr-mb-0 fr-grid-row"},Tg={key:0,class:"fr-col-auto fr-ml-1w"},Eg={key:0,class:"fr-text--sm fr-m-0 inline-flex"},Pg={key:0,class:"not-enlarged fr-mr-1v"},Ag={class:"text-mention-grey dash-before-sm whitespace-nowrap"},Dg={class:"fr-mx-0 fr-mb-n1v fr-grid-row fr-grid-row--middle fr-text--sm text-mention-grey"},Mg={class:"fr-hidden flex-sm dash-after-sm text-grey-500"},Og={class:"fr-grid-row fr-grid-row--middle fr-mr-1v"},Lg=["aria-label"],Rg=["aria-label"],Ig=["aria-label"],zg=q({__name:"DatasetCard",props:{dataset:{},datasetUrl:{},organizationUrl:{},showDescription:{type:Boolean,default:!0}},setup(t){const e=t,{t:s}=ce(),n=uo(e.dataset);return(i,o)=>(y(),k("div",bg,[i.dataset.private||i.dataset.archived?(y(),k("div",_g,[i.dataset.private?(y(),k("p",yg,[o[0]||(o[0]=d("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("Draft")),1)])):z("",!0),i.dataset.archived?(y(),k("p",wg,[o[1]||(o[1]=d("span",{class:"fr-icon-archive-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("Archived")),1)])):z("",!0)])):z("",!0),d("div",$g,[d("div",xg,[d("div",kg,[i.dataset.organization?(y(),N(h(Go),{key:0,type:"dataset",src:i.dataset.organization.logo_thumbnail,alt:"",size:40},null,8,["src"])):i.dataset.owner?(y(),N(vc,{key:1,user:i.dataset.owner,size:40},null,8,["user"])):(y(),N(h(Go),{key:2,type:"dataset",size:40}))])]),d("div",Cg,[d("h4",Sg,[Ke(i.$slots,"datasetUrl",{dataset:i.dataset,datasetUrl:i.datasetUrl},()=>[x(Js,{to:i.datasetUrl,class:"text-grey-500 fr-grid-row"},{default:P(()=>[x(h(ut),{class:"fr-col","auto-resize":!0,text:i.dataset.title,"max-lines":1},null,8,["text"]),i.dataset.acronym?(y(),k("small",Tg,_(i.dataset.acronym),1)):z("",!0)]),_:1},8,["to"])])]),i.dataset.organization||i.dataset.owner?(y(),k("div",Eg,[i.dataset.organization?(y(),k("span",Pg,[i.organizationUrl?(y(),N(Js,{key:0,class:"fr-link fr-text--sm inline-flex items-center",to:i.organizationUrl},{default:P(()=>[x(Ms,{organization:i.dataset.organization},null,8,["organization"])]),_:1},8,["to"])):(y(),N(Ms,{key:1,organization:i.dataset.organization},null,8,["organization"]))])):(y(),N(h(ut),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(n),"max-lines":1},null,8,["text"])),d("span",Ag,_(i.$t("Updated {date}",{date:h(Gn)(i.dataset.last_update)})),1)])):z("",!0),d("div",Dg,[d("div",Mg,[x(h(pg),{quality:i.dataset.quality},null,8,["quality"])]),d("div",Og,[d("p",{class:"fr-text--sm fr-my-0","aria-label":h(s)("{n} resources downloads",i.dataset.metrics.resources_downloads)},[o[2]||(o[2]=d("span",{class:"fr-icon-download-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),W(_(h(Ys)(i.dataset.metrics.resources_downloads)),1)],8,Lg),d("p",{class:"fr-text--sm fr-my-0","aria-label":h(s)("{n} followers",i.dataset.metrics.followers)},[o[3]||(o[3]=d("span",{class:"fr-icon-star-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),W(_(h(Ys)(i.dataset.metrics.followers)),1)],8,Rg),d("p",{class:"fr-text--sm fr-my-0","aria-label":h(s)("{n} reuses",i.dataset.metrics.reuses)},[o[4]||(o[4]=d("span",{class:"fr-icon-line-chart-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),W(_(h(Ys)(i.dataset.metrics.reuses)),1)],8,Ig)])]),i.showDescription?(y(),N(Sr,{key:1},{default:P(()=>[x(Lr,{class:"fr-text--sm fr-mt-1w fr-mb-0 overflow-wrap-anywhere","auto-resize":!0,text:h(Ar)(i.dataset.description),"max-lines":2},null,8,["text"])]),_:1})):z("",!0)])])]))}}),Fg={key:0,class:"absolute top-0 fr-grid-row fr-grid-row--middle fr-mt-n3v fr-ml-n1v"},Bg={key:0,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Ng={key:1,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Vg={key:2,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Wg={class:"fr-text--md fr-mb-0"},Hg={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",class:"fr-mr-1v",style:{width:"1rem"}},Ug={key:1,class:"fr-icon-terminal-line fr-icon--sm fr-mr-1v","aria-hidden":"true"},jg={key:1,class:"fr-text--sm text-mention-grey inline-flex fr-mt-1v fr-mb-0"},qg={key:0,class:"not-enlarged"},Yg={class:"dash-before whitespace-nowrap"},Gg={class:"fr-text--sm text-mention-grey fr-my-0 fr-mt-1v"},Xg={class:"text-grey-400"},Kg=q({__name:"DataserviceCard",props:{dataservice:{},dataserviceUrl:{},organizationUrl:{},showDescription:{type:Boolean,default:!0}},setup(t){const e=t,{t:s}=ce(),n=uo(e.dataservice),i=j(()=>it.tabular_api_dataservice_id===e.dataservice.id);return(o,r)=>(y(),k("article",{class:Te(["fr-my-2w fr-p-2w border fr-enlarge-link",{"border-tabular-api":i.value}]),style:nn(e.style)},[o.dataservice.is_restricted||o.dataservice.private||o.dataservice.archived_at?(y(),k("div",Fg,[o.dataservice.is_restricted?(y(),k("p",Bg,[r[0]||(r[0]=d("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("Restricted access")),1)])):z("",!0),o.dataservice.private?(y(),k("p",Ng,[r[1]||(r[1]=d("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("Draft")),1)])):z("",!0),o.dataservice.archived_at?(y(),k("p",Vg,[r[2]||(r[2]=d("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("Archived")),1)])):z("",!0)])):z("",!0),d("h4",Wg,[Ke(o.$slots,"dataserviceUrl",{dataservice:o.dataservice,dataserviceUrl:o.dataserviceUrl},()=>[i.value?(y(),k("svg",Hg,r[3]||(r[3]=[d("path",{d:"M17.0007 1.20825 18.3195 3.68108 20.7923 4.99992 18.3195 6.31876 17.0007 8.79159 15.6818 6.31876 13.209 4.99992 15.6818 3.68108 17.0007 1.20825ZM10.6673 9.33325 15.6673 11.9999 10.6673 14.6666 8.00065 19.6666 5.33398 14.6666.333984 11.9999 5.33398 9.33325 8.00065 4.33325 10.6673 9.33325ZM11.4173 11.9999 9.18905 10.8115 8.00065 8.58325 6.81224 10.8115 4.58398 11.9999 6.81224 13.1883 8.00065 15.4166 9.18905 13.1883 11.4173 11.9999ZM19.6673 16.3333 18.0007 13.2083 16.334 16.3333 13.209 17.9999 16.334 19.6666 18.0007 22.7916 19.6673 19.6666 22.7923 17.9999 19.6673 16.3333Z"},null,-1)]))):(y(),k("span",Ug)),x(Js,{class:"inline-flex",to:o.dataserviceUrl},{default:P(()=>[x(h(ut),{"auto-resize":!0,text:o.dataservice.title,"max-lines":1},null,8,["text"])]),_:1},8,["to"])],!0)]),o.dataservice.organization||o.dataservice.owner?(y(),k("p",jg,[o.dataservice.organization?(y(),k("span",qg,[o.organizationUrl?(y(),N(Js,{key:0,class:"fr-link fr-text--sm",to:o.organizationUrl},{default:P(()=>[x(Ms,{organization:o.dataservice.organization},null,8,["organization"])]),_:1},8,["to"])):(y(),N(Ms,{key:1,organization:o.dataservice.organization},null,8,["organization"]))])):(y(),N(h(ut),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(n),"max-lines":1},null,8,["text"])),d("span",Yg,_(h(s)("Updated {date}",{date:h(Gn)(o.dataservice.metadata_modified_at)})),1)])):z("",!0),d("p",Gg,[r[4]||(r[4]=d("span",{class:"fr-icon-information-line fr-icon--sm text-grey-380"},null,-1)),W(" "+_(h(s)("Availability :"))+" ",1),d("span",Xg,[o.dataservice.availability?(y(),k(J,{key:0},[W(_(h(s)("{n}%",o.dataservice.availability)),1)],64)):(y(),k(J,{key:1},[W(_(h(s)("unknown")),1)],64))])]),o.showDescription?(y(),N(Sr,{key:2},{default:P(()=>[x(Lr,{class:"fr-text--sm fr-mt-1w fr-mb-0 overflow-wrap-anywhere","auto-resize":!0,text:h(Ar)(o.dataservice.description),"max-lines":2},null,8,["text"])]),_:1})):z("",!0)],6))}}),Hr=pe(Kg,[["__scopeId","data-v-f375eaf1"]]),Zg={class:"fr-grid-row fr-grid-row--middle fr-pb-3w fr-mb-3w border-bottom border-default-grey"},Jg={class:"fr-col"},Qg={class:"fr-col-auto"},em=["aria-expanded","aria-controls"],tm=["id"],sm={class:"fr-pb-3w fr-mb-3w border-bottom border-default-grey"},nm={class:"fr-grid-row fr-grid-row--gutters fr-text--sm fr-m-0","data-testid":"extra-list"},im={class:"subtitle fr-mb-1v"},om={class:"fr-text--sm fr-m-0 text-mention-grey overflow-wrap-anywhere"},rm=q({__name:"ExtraAccordion",props:{buttonText:{},titleText:{},extra:{},titleLevel:{}},setup(t){const e=on("accordion"),{expanded:s,expand:n}=gg(e);return(i,o)=>(y(),k("div",null,[d("header",Zg,[d("div",Jg,[(y(),N(xn(i.titleLevel),{class:"subtitle subtitle--uppercase fr-m-0"},{default:P(()=>[W(_(i.titleText),1)]),_:1}))]),d("div",Qg,[d("button",{onClick:o[0]||(o[0]=(...r)=>h(n)&&h(n)(...r)),role:"button","aria-expanded":h(s),"aria-controls":h(e),class:Te(["fr-btn fr-btn--tertiary-no-outline fr-btn--icon-left fr-btn--secondary-grey-500",{"fr-icon-arrow-up-s-line":h(s),"fr-icon-arrow-down-s-line":!h(s)}]),"data-testid":"button"},[h(s)?(y(),k(J,{key:0},[W(_(i.$t("Close details")),1)],64)):(y(),k(J,{key:1},[W(_(i.buttonText),1)],64))],10,em)])]),d("div",{class:"accordion-content",id:h(e)},[d("div",sm,[d("div",nm,[(y(!0),k(J,null,ve(i.extra,(r,a)=>(y(),k("div",{key:a,class:"fr-col-12 fr-col-sm-6 fr-col-md-4"},[d("h3",im,_(a),1),d("p",om,_(r),1)]))),128))])])],8,tm)]))}}),am={class:"relative"},Pa=284,ou=q({__name:"ReadMore",props:{maxHeight:{default:""}},setup(t){const e=t,s=M(!1),n=M(!1),i=Xo("containerRef"),o=Xo("readMoreRef"),{height:r}=uf(i),a=M(Pa),l=p=>{const g=getComputedStyle(p);return parseFloat(g.getPropertyValue("height"))+parseFloat(g.getPropertyValue("margin-top"))+parseFloat(g.getPropertyValue("margin-bottom"))},c=()=>{const p=document.querySelector('[data-read-more-max-height="'.concat(e.maxHeight,'"]'));return p?Array.from(p.children).map(l).reduce((g,m)=>g+m,0):Pa},u=p=>{a.value=c(),n.value=p>a.value,n.value||(a.value=p)},f=()=>{if(!o.value)return;const p=Nc(o.value);s.value?zi({from:{height:o.value.scrollHeight},to:{height:c()},duration:300,ease:Fi}).start({update:p.set,complete:()=>{var g;return(g=o.value)==null?void 0:g.scrollIntoView({behavior:"smooth"})}}):zi({from:{height:c()},to:{height:o.value.scrollHeight},duration:300,ease:Fi}).start({update:p.set,complete:()=>p.set({height:"auto"})}),s.value=!s.value};return Tt(r,u),(p,g)=>(y(),k("div",am,[d("div",{class:Te(["read-more",{expand:s.value}]),ref_key:"readMoreRef",ref:o,style:nn({height:a.value+"px"})},[d("div",{ref_key:"containerRef",ref:i},[Ke(p.$slots,"default")],512)],6),n.value?(y(),k("div",{key:0,class:"read-more__bottom",onClick:Me(f,["prevent"])},[d("button",{role:"button",class:"fr-btn fr-btn--tertiary-no-outline",onClick:Me(f,["prevent","stop"])},[s.value?(y(),k(J,{key:0},[W(_(p.$t("Read less")),1)],64)):(y(),k(J,{key:1},[W(_(p.$t("Read more")),1)],64))])])):z("",!0)]))}}),lm=["y"],cm=["y"],um=["y"],dm=["y"],fm=["y"],hm=["y"],pm=["y"],ru=q({__name:"Loader",setup(t){function e(s){return 16+4+s*(32+24)}return(s,n)=>(y(),N(h(gs),{width:1124,height:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>[n[0]||(n[0]=d("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"112",height:"24"},null,-1)),n[1]||(n[1]=d("rect",{x:"160",y:"16",rx:"4",ry:"4",width:"116",height:"24"},null,-1)),n[2]||(n[2]=d("rect",{x:"308",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1)),n[3]||(n[3]=d("rect",{x:"480",y:"16",rx:"4",ry:"4",width:"106",height:"24"},null,-1)),n[4]||(n[4]=d("rect",{x:"618",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1)),n[5]||(n[5]=d("rect",{x:"790",y:"16",rx:"4",ry:"4",width:"144",height:"24"},null,-1)),n[6]||(n[6]=d("rect",{x:"966",y:"16",rx:"4",ry:"4",width:"142",height:"24"},null,-1)),n[7]||(n[7]=d("rect",{x:"4",y:"56",rx:"4",ry:"4",width:"1116",height:"4"},null,-1)),(y(),k(J,null,ve(5,i=>(y(),k(J,null,[d("rect",{x:"16",y:e(i),rx:"4",ry:"4",width:"112",height:"32"},null,8,lm),d("rect",{x:"160",y:e(i),rx:"4",ry:"4",width:"116",height:"32"},null,8,cm),d("rect",{x:"308",y:e(i),rx:"4",ry:"4",width:"140",height:"32"},null,8,um),d("rect",{x:"480",y:e(i),rx:"4",ry:"4",width:"106",height:"32"},null,8,dm),d("rect",{x:"618",y:e(i),rx:"4",ry:"4",width:"140",height:"32"},null,8,fm),d("rect",{x:"790",y:e(i),rx:"4",ry:"4",width:"144",height:"32"},null,8,hm),d("rect",{x:"966",y:e(i),rx:"4",ry:"4",width:"142",height:"32"},null,8,pm)],64))),64))]),_:1}))}});function gm(t,e,s){let n="".concat(it.tabular_api_url,"/api/resources/").concat(t,"/data/?page=").concat(e,"&page_size=").concat(it.tabular_page_size);return s&&(n=n+"&".concat(s.column,"__sort=").concat(s.type)),rn.get(n)}function mm(t){const e="".concat(it.tabular_api_url,"/api/resources/").concat(t,"/profile/");return rn.get(e)}const vm={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},bm={class:"fr-grid-row fr-m-0"},_m={key:2,class:"fr-grid-row fr-grid-row--gutters"},ym={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},wm={class:"fr-grid-row fr-m-0"},$m={class:"fr-col-12 fr-col-sm-6 fr-col-md-4 fr-col-lg-3"},xm={class:"fr-text--sm fr-text--bold fr-mt-0 fr-mb-1v"},km={class:"code"},Cm=q({__name:"DataStructure",props:{resource:{}},setup(t){const e=t,s=M([]),n=M({}),i=M(!0),o=M(!1),r=M(!1);return we(async()=>{try{const{data:a}=await mm(e.resource.id);"profile"in a&&a.profile?(s.value=Object.keys(a.profile.columns),n.value=a.profile.columns,r.value=!0,i.value=!1):(o.value=!0,i.value=!1)}catch(a){o.value=!0,i.value=!1}}),(a,l)=>o.value?(y(),k("div",vm,[d("p",bm,[l[0]||(l[0]=d("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),W(" "+_(a.$t("The data structure of this file failed to load.")),1)])])):i.value?(y(),N(ru,{key:1})):(y(),k("div",_m,[r.value?z("",!0):(y(),k("div",ym,[d("p",wm,[l[1]||(l[1]=d("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),W(" "+_(a.$t("No data structure found for this file.")),1)])])),r.value?(y(!0),k(J,{key:1},ve(s.value,c=>(y(),k("div",$m,[d("h5",xm,_(c),1),d("code",km,_(n.value[c].format),1)]))),256)):z("",!0)]))}}),Sm='<svg width="64" height="64" viewBox="0 0 64 64" aria-hidden="true" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_677_1834" fill="white"><path d="M47.6364 31.7323C47.8391 31.8153 48.0153 31.8812 48.1901 31.9556C49.3599 32.4569 50.0394 33.3352 50.1277 34.6162C50.1983 35.6647 50.2292 36.7158 50.2371 37.7685C50.2523 39.8635 51.2789 41.4763 52.6657 42.8981C53.5865 43.842 53.6661 44.3716 52.7286 45.2974C51.1332 46.8812 49.3827 48.2165 47.1329 48.7665C44.8819 49.3216 42.5083 49.0548 40.4357 48.0138C39.4892 47.5604 38.5265 47.3019 37.5309 47.7071C37.071 47.9103 36.6618 48.214 36.3331 48.596C36.0111 48.9977 35.7367 49.4357 35.5154 49.9011C35.0548 50.75 34.2981 51.2484 33.4773 51.6648C33.2122 51.7978 32.9196 51.8661 32.6233 51.8641C32.3271 51.862 32.0355 51.7897 31.7724 51.653C31.4776 51.521 31.2044 51.3451 30.9618 51.1313C29.8211 50.0656 28.445 49.7385 26.9352 49.6965C24.2186 49.5962 21.5474 48.9671 19.0698 47.8441C18.4504 47.5532 17.8641 47.1957 17.3213 46.7778C16.6911 46.3217 16.5988 45.9152 16.8344 45.1807C17.1056 44.3195 17.3992 43.4821 17.6453 42.6226C17.6638 42.5251 17.6598 42.4247 17.6338 42.329C17.6077 42.2333 17.5603 42.1449 17.495 42.0705C16.4777 41.1564 16.4698 41.1632 15.3346 41.8919C12.2675 43.8671 9.1983 45.8419 6.12697 47.816C5.39573 48.2874 5.04746 48.1891 4.61497 47.4308C4.33147 46.9348 4.052 46.4365 3.77656 45.9357C3.18563 44.8787 3.26602 44.5782 4.27115 43.9407C7.48797 41.9067 10.6834 39.8658 13.9015 37.8507C14.3035 37.5956 14.4007 37.3572 14.3108 36.8936C13.6776 33.714 14.5417 30.9795 16.8278 28.6954C16.9816 28.5764 17.0894 28.4073 17.1328 28.2171C17.1763 28.027 17.1526 27.8277 17.0658 27.6532C16.5668 26.2486 15.7792 25.1355 14.3525 24.5233C13.5227 24.1467 12.7175 23.7178 11.9416 23.2391C10.7864 22.5922 9.89092 21.5619 9.40841 20.3243C9.31335 20.0822 9.28169 19.8197 9.31644 19.5617C9.3512 19.3037 9.45121 19.059 9.60692 18.8509C10.6377 17.2552 12.2625 16.7311 13.9773 16.7337C15.3337 16.7378 16.6957 17.1374 18.0435 17.418C19.2594 17.6697 19.3451 17.666 19.9235 16.5752C20.1987 16.055 20.4163 15.4882 20.7251 14.9994C21.2758 14.1191 21.9105 13.926 22.8624 14.3348C23.2938 14.516 23.7286 14.7474 24.1486 14.9462C24.9684 15.324 25.7026 15.2084 26.3461 14.585C26.6077 14.3351 26.842 14.0578 27.045 13.7578C27.8829 12.5231 28.9904 11.4969 30.2827 10.7576C31.7264 9.85971 32.9011 8.58535 33.6818 7.07013C34.0043 6.47507 34.6284 6.37336 35.1547 6.87449C36.1787 7.85765 37.2353 8.82594 38.1708 9.8952C39.6137 11.5828 41.5324 12.7905 43.6733 13.3587C45.1679 13.7661 46.5788 14.4553 48.045 14.97C49.8289 15.5957 51.624 16.1995 53.4326 16.7561C54.4429 17.0682 54.7071 17.4125 54.4318 18.4614C53.8032 20.8525 53.1633 23.2416 52.512 25.6287C52.2313 26.6591 51.5044 27.3829 50.6757 27.9621C49.3363 28.9134 48.2845 30.2182 47.6364 31.7323ZM19.0829 43.0845C18.8621 43.7906 18.688 44.4745 18.4321 45.1261C18.2675 45.546 18.3981 45.7414 18.7452 45.9473C21.1132 47.3103 23.6962 47.8813 26.3813 48.163C27.5256 48.2847 28.6999 48.356 29.785 48.6883C30.5876 48.9346 31.287 49.5481 32.0035 50.0404C32.41 50.3202 32.7838 50.4547 33.176 50.0845C33.6071 49.6961 34.0124 49.2799 34.3896 48.8386C34.6545 48.4664 34.8964 48.0784 35.1142 47.6767C35.6541 46.8224 36.438 46.3537 37.4121 46.1269C38.6063 45.8473 39.8607 46.0113 40.9435 46.5887C43.5843 47.9246 46.236 47.8653 48.8 46.4721C49.8779 45.8886 50.796 44.9852 51.8339 44.1811C49.2935 41.8756 48.4762 39.073 48.724 35.8709C48.7321 35.4135 48.6838 34.9569 48.5801 34.5115C48.4556 33.8144 47.9893 33.425 47.3285 33.2617C47.0897 33.2022 46.8401 33.1982 46.5981 33.1537C45.8078 32.9971 45.5014 32.4304 45.8734 31.7287C46.8901 29.7991 47.9735 27.9259 49.8707 26.6837C50.2318 26.4528 50.5403 26.1477 50.7759 25.7885C51.0114 25.4292 51.1688 25.0241 51.2375 24.5995C51.4742 23.351 51.8317 22.1215 52.1618 20.8919C52.3982 20.012 52.6732 19.1464 52.9439 18.2473C52.0883 17.992 51.2364 17.7912 50.4176 17.4913C48.2143 16.6752 46.0306 15.8094 43.8326 14.9782C42.7874 14.5843 41.7022 14.2815 40.6869 13.8328C38.9215 13.0457 37.6898 11.5944 36.4238 10.1918C35.887 9.59656 35.273 9.06983 34.7665 8.58209C33.7652 9.61965 32.9772 10.7416 31.9168 11.4609C30.2571 12.5878 28.7721 13.8207 27.6019 15.4618C27.008 16.2924 26.1005 16.6368 25.0653 16.6718C24.1996 16.7016 23.4937 16.3034 22.7614 15.9491C22.0637 15.6113 22.0795 15.6271 21.7115 16.3264C21.3435 17.0257 20.9463 17.727 20.5177 18.3967C20.3427 18.6865 20.0779 18.9105 19.764 19.0344C19.45 19.1582 19.1044 19.1751 18.7801 19.0823C17.7876 18.8694 16.7939 18.6383 15.799 18.389C14.442 18.0468 13.0074 18.2086 11.7591 18.8447C10.8519 19.286 10.659 19.8764 11.3125 20.6174C11.7995 21.1706 12.3573 21.6566 12.9713 22.0626C13.7107 22.5281 14.4823 22.9399 15.2802 23.2949C16.2898 23.744 17.1328 24.5015 17.6895 25.4597C18.0248 26.0498 18.3157 26.6661 18.629 27.2724C23.4786 24.8338 27.9071 26.9763 29.9508 29.657C31.1027 31.1657 31.7438 33.0057 31.7801 34.9075C31.8164 36.8093 31.2461 38.6732 30.1526 40.2264C28.1536 43.0702 23.9809 45.1654 19.0829 43.0845ZM23.4376 42.3861C27.4778 42.1222 30.5404 38.6684 30.2798 34.6712C30.16 32.7164 29.2747 30.8892 27.8175 29.5894C26.3603 28.2897 24.4499 27.6232 22.5043 27.7359C21.536 27.7825 20.5865 28.0224 19.7111 28.4416C18.8358 28.8608 18.0522 29.4508 17.4059 30.1773C16.7596 30.9039 16.2636 31.7523 15.9469 32.6733C15.6301 33.5943 15.4988 34.5693 15.5608 35.5416C15.6227 36.5139 15.8766 37.4639 16.3076 38.3364C16.7387 39.2089 17.3382 39.9863 18.0714 40.6234C18.8045 41.2604 19.6566 41.7444 20.5779 42.047C21.4992 42.3497 22.4713 42.465 23.4376 42.3861ZM5.73574 46.2692L15.5443 39.9311L14.9626 38.9176L5.11278 45.1722L5.73574 46.2692Z"/></mask><path d="M47.6364 31.7323C47.8391 31.8153 48.0153 31.8812 48.1901 31.9556C49.3599 32.4569 50.0394 33.3352 50.1277 34.6162C50.1983 35.6647 50.2292 36.7158 50.2371 37.7685C50.2523 39.8635 51.2789 41.4763 52.6657 42.8981C53.5865 43.842 53.6661 44.3716 52.7286 45.2974C51.1332 46.8812 49.3827 48.2165 47.1329 48.7665C44.8819 49.3216 42.5083 49.0548 40.4357 48.0138C39.4892 47.5604 38.5265 47.3019 37.5309 47.7071C37.071 47.9103 36.6618 48.214 36.3331 48.596C36.0111 48.9977 35.7367 49.4357 35.5154 49.9011C35.0548 50.75 34.2981 51.2484 33.4773 51.6648C33.2122 51.7978 32.9196 51.8661 32.6233 51.8641C32.3271 51.862 32.0355 51.7897 31.7724 51.653C31.4776 51.521 31.2044 51.3451 30.9618 51.1313C29.8211 50.0656 28.445 49.7385 26.9352 49.6965C24.2186 49.5962 21.5474 48.9671 19.0698 47.8441C18.4504 47.5532 17.8641 47.1957 17.3213 46.7778C16.6911 46.3217 16.5988 45.9152 16.8344 45.1807C17.1056 44.3195 17.3992 43.4821 17.6453 42.6226C17.6638 42.5251 17.6598 42.4247 17.6338 42.329C17.6077 42.2333 17.5603 42.1449 17.495 42.0705C16.4777 41.1564 16.4698 41.1632 15.3346 41.8919C12.2675 43.8671 9.1983 45.8419 6.12697 47.816C5.39573 48.2874 5.04746 48.1891 4.61497 47.4308C4.33147 46.9348 4.052 46.4365 3.77656 45.9357C3.18563 44.8787 3.26602 44.5782 4.27115 43.9407C7.48797 41.9067 10.6834 39.8658 13.9015 37.8507C14.3035 37.5956 14.4007 37.3572 14.3108 36.8936C13.6776 33.714 14.5417 30.9795 16.8278 28.6954C16.9816 28.5764 17.0894 28.4073 17.1328 28.2171C17.1763 28.027 17.1526 27.8277 17.0658 27.6532C16.5668 26.2486 15.7792 25.1355 14.3525 24.5233C13.5227 24.1467 12.7175 23.7178 11.9416 23.2391C10.7864 22.5922 9.89092 21.5619 9.40841 20.3243C9.31335 20.0822 9.28169 19.8197 9.31644 19.5617C9.3512 19.3037 9.45121 19.059 9.60692 18.8509C10.6377 17.2552 12.2625 16.7311 13.9773 16.7337C15.3337 16.7378 16.6957 17.1374 18.0435 17.418C19.2594 17.6697 19.3451 17.666 19.9235 16.5752C20.1987 16.055 20.4163 15.4882 20.7251 14.9994C21.2758 14.1191 21.9105 13.926 22.8624 14.3348C23.2938 14.516 23.7286 14.7474 24.1486 14.9462C24.9684 15.324 25.7026 15.2084 26.3461 14.585C26.6077 14.3351 26.842 14.0578 27.045 13.7578C27.8829 12.5231 28.9904 11.4969 30.2827 10.7576C31.7264 9.85971 32.9011 8.58535 33.6818 7.07013C34.0043 6.47507 34.6284 6.37336 35.1547 6.87449C36.1787 7.85765 37.2353 8.82594 38.1708 9.8952C39.6137 11.5828 41.5324 12.7905 43.6733 13.3587C45.1679 13.7661 46.5788 14.4553 48.045 14.97C49.8289 15.5957 51.624 16.1995 53.4326 16.7561C54.4429 17.0682 54.7071 17.4125 54.4318 18.4614C53.8032 20.8525 53.1633 23.2416 52.512 25.6287C52.2313 26.6591 51.5044 27.3829 50.6757 27.9621C49.3363 28.9134 48.2845 30.2182 47.6364 31.7323ZM19.0829 43.0845C18.8621 43.7906 18.688 44.4745 18.4321 45.1261C18.2675 45.546 18.3981 45.7414 18.7452 45.9473C21.1132 47.3103 23.6962 47.8813 26.3813 48.163C27.5256 48.2847 28.6999 48.356 29.785 48.6883C30.5876 48.9346 31.287 49.5481 32.0035 50.0404C32.41 50.3202 32.7838 50.4547 33.176 50.0845C33.6071 49.6961 34.0124 49.2799 34.3896 48.8386C34.6545 48.4664 34.8964 48.0784 35.1142 47.6767C35.6541 46.8224 36.438 46.3537 37.4121 46.1269C38.6063 45.8473 39.8607 46.0113 40.9435 46.5887C43.5843 47.9246 46.236 47.8653 48.8 46.4721C49.8779 45.8886 50.796 44.9852 51.8339 44.1811C49.2935 41.8756 48.4762 39.073 48.724 35.8709C48.7321 35.4135 48.6838 34.9569 48.5801 34.5115C48.4556 33.8144 47.9893 33.425 47.3285 33.2617C47.0897 33.2022 46.8401 33.1982 46.5981 33.1537C45.8078 32.9971 45.5014 32.4304 45.8734 31.7287C46.8901 29.7991 47.9735 27.9259 49.8707 26.6837C50.2318 26.4528 50.5403 26.1477 50.7759 25.7885C51.0114 25.4292 51.1688 25.0241 51.2375 24.5995C51.4742 23.351 51.8317 22.1215 52.1618 20.8919C52.3982 20.012 52.6732 19.1464 52.9439 18.2473C52.0883 17.992 51.2364 17.7912 50.4176 17.4913C48.2143 16.6752 46.0306 15.8094 43.8326 14.9782C42.7874 14.5843 41.7022 14.2815 40.6869 13.8328C38.9215 13.0457 37.6898 11.5944 36.4238 10.1918C35.887 9.59656 35.273 9.06983 34.7665 8.58209C33.7652 9.61965 32.9772 10.7416 31.9168 11.4609C30.2571 12.5878 28.7721 13.8207 27.6019 15.4618C27.008 16.2924 26.1005 16.6368 25.0653 16.6718C24.1996 16.7016 23.4937 16.3034 22.7614 15.9491C22.0637 15.6113 22.0795 15.6271 21.7115 16.3264C21.3435 17.0257 20.9463 17.727 20.5177 18.3967C20.3427 18.6865 20.0779 18.9105 19.764 19.0344C19.45 19.1582 19.1044 19.1751 18.7801 19.0823C17.7876 18.8694 16.7939 18.6383 15.799 18.389C14.442 18.0468 13.0074 18.2086 11.7591 18.8447C10.8519 19.286 10.659 19.8764 11.3125 20.6174C11.7995 21.1706 12.3573 21.6566 12.9713 22.0626C13.7107 22.5281 14.4823 22.9399 15.2802 23.2949C16.2898 23.744 17.1328 24.5015 17.6895 25.4597C18.0248 26.0498 18.3157 26.6661 18.629 27.2724C23.4786 24.8338 27.9071 26.9763 29.9508 29.657C31.1027 31.1657 31.7438 33.0057 31.7801 34.9075C31.8164 36.8093 31.2461 38.6732 30.1526 40.2264C28.1536 43.0702 23.9809 45.1654 19.0829 43.0845ZM23.4376 42.3861C27.4778 42.1222 30.5404 38.6684 30.2798 34.6712C30.16 32.7164 29.2747 30.8892 27.8175 29.5894C26.3603 28.2897 24.4499 27.6232 22.5043 27.7359C21.536 27.7825 20.5865 28.0224 19.7111 28.4416C18.8358 28.8608 18.0522 29.4508 17.4059 30.1773C16.7596 30.9039 16.2636 31.7523 15.9469 32.6733C15.6301 33.5943 15.4988 34.5693 15.5608 35.5416C15.6227 36.5139 15.8766 37.4639 16.3076 38.3364C16.7387 39.2089 17.3382 39.9863 18.0714 40.6234C18.8045 41.2604 19.6566 41.7444 20.5779 42.047C21.4992 42.3497 22.4713 42.465 23.4376 42.3861ZM5.73574 46.2692L15.5443 39.9311L14.9626 38.9176L5.11278 45.1722L5.73574 46.2692Z" fill="#e4794a" stroke="#e4794a" stroke-width="1.47127" mask="url(#path-1-inside-1_677_1834)"/><path d="M55.8056 54.9357L55.8053 54.9356C53.9679 53.7622 53.1178 52.0475 53.3058 49.8972C53.3294 49.6381 53.4447 49.3591 53.6234 49.051C53.749 48.8346 53.8901 48.6287 54.0361 48.4157C54.1014 48.3203 54.1677 48.2235 54.2341 48.1238L54.2342 48.1235C54.8237 47.2354 55.4726 46.374 56.1353 45.5437C56.3434 45.2859 56.6122 45.0845 56.9172 44.9578L56.9172 44.9579L56.923 44.9553C56.9599 44.9393 57 44.9321 57.04 44.9343C57.0801 44.9366 57.1192 44.9482 57.1542 44.9684L57.3381 44.6496L57.1542 44.9684C57.1892 44.9885 57.2192 45.0168 57.2417 45.0509C57.2643 45.0851 57.2786 45.1242 57.2835 45.1651L57.2856 45.1826L57.2894 45.1999C57.6104 46.6687 57.9003 48.1378 58.1967 49.6402C58.2648 49.9854 58.3332 50.3324 58.4025 50.6815C58.3661 51.0327 58.3381 51.3785 58.3105 51.7205C58.2462 52.5158 58.1835 53.291 58.0196 54.0677C58.0039 54.1413 57.9855 54.2112 57.9646 54.2774L57.2274 53.9288C57.2588 53.8551 57.2859 53.7789 57.3096 53.7024C57.3862 53.4552 57.4388 53.1657 57.4739 52.8556C57.5443 52.235 57.5488 51.4924 57.5128 50.7585C57.4768 50.0228 57.3995 49.2844 57.3024 48.6685C57.2079 48.0695 57.0879 47.5396 56.9499 47.2536L56.7354 46.8089L56.3706 47.1425C56.2548 47.2485 56.1361 47.3593 56.0145 47.4728C55.7638 47.7069 55.5007 47.9526 55.2238 48.1917C54.6795 48.6593 54.3018 49.1965 54.1288 49.809C53.9559 50.4209 53.997 51.0746 54.2336 51.7594C54.4146 52.3383 54.7129 52.8734 55.1098 53.331C55.3952 53.66 55.7272 53.9438 56.0944 54.1737L55.7471 54.522L56.7235 54.4551L56.7277 54.4549L57.9319 54.3724C57.7731 54.799 57.5043 55.0583 57.2051 55.1753C56.8363 55.3195 56.3419 55.2789 55.8056 54.9357Z" fill="#e4794a" stroke="#e4794a" stroke-width="0.735634"/><path d="M32.0098 27.4033C31.8698 27.2844 31.5731 27.1425 31.4612 26.9121C31.1579 26.3001 30.8869 25.6725 30.6493 25.0318C30.3973 24.4023 29.9882 24.0238 29.3023 23.9844C29.1123 23.9917 28.9234 23.9526 28.7517 23.8704C28.5172 23.7179 28.2081 23.5158 28.1586 23.2791C28.1439 23.1349 28.1632 22.9893 28.2149 22.854C28.2666 22.7187 28.3493 22.5976 28.4562 22.5003C29.5039 21.7777 29.8084 20.7899 29.7264 19.5716C29.7065 19.276 29.9189 18.7875 30.1499 18.7C30.4334 18.5837 30.8707 18.7286 31.1946 18.8687C31.3888 18.9523 31.5044 19.2372 31.6316 19.4454C32.1339 20.2747 32.7479 20.9278 33.7881 21.0293C34.2101 21.07 34.6257 21.2037 34.763 21.6872C34.9004 22.1708 34.6307 22.4926 34.3129 22.7861C33.2433 23.7735 32.6731 24.9564 32.828 26.4478C32.8683 26.9232 32.6691 27.2634 32.0098 27.4033ZM30.4794 22.663L30.6854 22.453L31.8104 23.5978L32.5667 22.3769L31.0835 21.3304C30.8875 21.782 30.6846 22.2235 30.4795 22.6651L30.4794 22.663Z" fill="white"/><path d="M35.3139 40.5875C35.3348 40.8978 35.3563 41.2165 35.3777 41.5352C35.4082 41.9882 35.3326 42.3915 34.814 42.5028C34.3801 42.5957 34.023 42.3042 33.8949 41.7716C33.8565 41.6057 33.8531 41.4311 33.8311 41.2599C33.8091 41.0886 33.7922 40.9613 33.7682 40.7923C33.2267 40.6882 32.6052 40.6718 32.5854 39.9106C32.5739 39.4901 32.8465 39.305 33.5825 39.1535C33.56 38.818 33.5204 38.4794 33.5144 38.1407C33.5097 37.5722 33.777 37.2148 34.2023 37.1815C34.6277 37.1481 34.9354 37.4536 35.0143 38.0338C35.0584 38.3467 35.0566 38.6628 35.0807 39.0214C35.6566 38.982 36.1913 38.8927 36.3436 39.5669C36.4511 40.0125 36.158 40.2979 35.3139 40.5875Z" fill="white"/><path d="M21.4362 21.894C21.9395 21.8975 22.3991 21.9376 22.4815 22.5071C22.5739 23.1327 22.0685 23.2853 21.6171 23.4615C21.6054 23.6919 21.6696 23.9614 21.5678 24.1305C21.4188 24.3767 21.1636 24.6954 20.9321 24.7133C20.7847 24.6985 20.6431 24.6475 20.5199 24.5649C20.3966 24.4822 20.2955 24.3704 20.2253 24.2393C20.0438 23.8157 19.9873 23.413 19.4798 23.1592C19.0311 22.9392 19.1104 22.3418 19.5218 22.0082C19.6613 21.8997 19.8457 21.7754 19.8794 21.6214C19.9716 21.217 20.1775 20.9438 20.5923 20.9406C21.0443 20.9286 21.2544 21.2471 21.3591 21.6507C21.3761 21.7169 21.4017 21.7868 21.4362 21.894Z" fill="white"/><path d="M25.7339 38.1494L25.5118 38.0538L23.9878 37.3977L23.6345 37.2455L23.8028 36.8992C24.223 36.035 24.0136 35.2562 23.5068 34.3769L25.7339 38.1494ZM25.7339 38.1494L25.9099 37.9831M25.7339 38.1494L25.9099 37.9831M25.9099 37.9831C28.053 35.958 27.6901 32.4635 25.1777 31.0098L25.9099 37.9831ZM24.2421 30.9358L24.2421 30.9358C24.3489 30.8623 24.4644 30.8442 24.5434 30.8403C24.6273 30.8362 24.7094 30.8464 24.7803 30.8608C24.9203 30.8893 25.0655 30.9447 25.1776 31.0097L24.2421 30.9358ZM24.2421 30.9358L24.2401 30.9372M24.2421 30.9358L24.2401 30.9372M24.2401 30.9372C23.7609 31.2718 23.4531 31.907 23.3201 32.5212M24.2401 30.9372L23.3201 32.5212M23.3201 32.5212C23.1867 33.1377 23.2036 33.8514 23.5067 34.3768L23.3201 32.5212ZM23.0591 40.1014L23.0591 40.1013L23.0499 40.1021C22.3684 40.1591 21.6825 40.0799 21.0317 39.8689C20.381 39.6578 19.7782 39.3192 19.2584 38.8724C18.7385 38.4257 18.3119 37.8796 18.0032 37.2658C17.6946 36.6521 17.5101 35.9827 17.4603 35.2966L17.4603 35.2965C17.2504 32.4087 19.5441 29.8094 22.5065 29.6066C25.4646 29.4041 27.8677 31.4988 28.0702 34.4116C28.1146 35.1162 28.0201 35.8228 27.792 36.4907C27.5638 37.1589 27.2066 37.7751 26.7408 38.3039C26.275 38.8327 25.7099 39.2637 25.0781 39.5721C24.4462 39.8806 23.7601 40.0605 23.0591 40.1014ZM23.9612 38.251C23.9505 38.2473 23.9397 38.2436 23.9291 38.2399C23.7969 38.1945 23.6718 38.1514 23.5454 38.1032C23.2053 37.9729 23.0039 37.7713 22.9151 37.5596C22.8289 37.3541 22.8275 37.0893 22.9832 36.7792C23.1516 36.4926 23.2326 36.1628 23.2164 35.8306C23.2 35.4964 23.0859 35.1745 22.8883 34.9051C22.5891 34.4641 22.4159 33.9488 22.3879 33.4153C22.3597 32.8796 22.479 32.3466 22.7324 31.8747L22.7326 31.8747L22.7378 31.8643C22.8467 31.6451 22.9491 31.418 23.0581 31.1762C23.1023 31.0783 23.1475 30.9779 23.1948 30.8747L23.436 30.3474L22.8564 30.3542C21.7919 30.3667 20.7629 30.7392 19.935 31.4108C19.7356 31.5393 19.5844 31.7309 19.5054 31.9551C19.4256 32.1818 19.4243 32.4286 19.5012 32.6557C19.6015 33.0536 19.7317 33.4432 19.8905 33.8213L19.8952 33.8325L19.9006 33.8433C20.5091 35.0609 20.4616 36.3277 20.0864 37.6368C20.0145 37.8854 19.9917 38.1472 20.1124 38.3899C20.23 38.6262 20.4455 38.7653 20.6559 38.8634L20.6565 38.8637C21.7133 39.3545 22.8172 39.5094 23.9887 39.04L24.387 39.1796L24.3495 38.6228L24.3493 38.6186L24.314 38.0951L23.9612 38.251ZM19.11 34.067L18.7841 34.1721L18.7448 33.9013L18.5019 33.9369L18.1413 33.9898L18.1904 34.3509L18.514 36.7302L18.5633 37.0933L18.9267 37.0448L19.1531 37.0145L19.3869 36.9833L19.4563 36.7577C19.594 36.3104 19.6343 35.8386 19.5745 35.3744C19.5148 34.9102 19.3564 34.4643 19.11 34.067Z" fill="#e4794a" stroke="#e4794a" stroke-width="0.735634"/><path d="M25.6571 37.7115L24.1331 37.0554C24.6319 36.027 24.3565 35.1105 23.8249 34.1884C23.3498 33.3573 23.7072 31.7529 24.4499 31.2344C24.56 31.1574 24.8398 31.2351 24.9925 31.3237C27.2847 32.6497 27.6341 35.8488 25.6571 37.7115Z" fill="#F2F7FF"/><path d="M18.7969 34.2611C19.0149 34.6133 19.1551 35.0084 19.2081 35.4198C19.2611 35.8312 19.2256 36.2492 19.104 36.6457L18.8776 36.676L18.554 34.2967L18.7969 34.2611Z" fill="#F2F7FF"/></svg>\n',Tm={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mt-4w fr-mx-4w fr-mb-3v"},Em={class:"fr-grid-row fr-m-0"},Pm={class:"bg-blue-100 text-blue-400 fr-hidden fr-unhidden-md fr-p-2w"},Am={class:"fr-grid-row fr-grid-row--middle fr-grid-row--gutters"},Dm=["innerHTML"],Mm={class:"fr-col"},Om={class:"fr-text--bold fr-m-0"},Lm={class:"fr-text--sm fr-m-0 f-italic"},Rm={class:"fr-col-auto fr-my-0"},Im=["href"],zm={class:"fr-table fr-table--no-background fr-p-0 fr-pt-0-5v fr-m-0"},Fm={class:"fr-mb-3w"},Bm={class:"fr-sr-only"},Nm={scope:"col"},Vm={class:"fr-grid-row fr-grid-row--middle col-width"},Wm=["onClick"],Hm={class:"fr-sr-only"},Um={class:"cell-padding"},jm={class:"fr-grid-row fr-grid-row--middle fr-text--xs w-100 style-cell"},qm={class:"fr-my-auto"},Ym={class:"fr-px-5v"},Gm=q({__name:"Preview",props:{resource:{}},setup(t){const e=t,{t:s}=ce(),n=M([]),i=M([]),o=M(!0),r=M(!1),a=M(null),l=M(0),c=it.tabular_page_size,u=M(1);function f(b){var $;return b===(($=a.value)==null?void 0:$.column)}async function p(b,$){try{const{data:w}=await gm(e.resource.id,b,$);"data"in w&&w.data&&w.data.length>0?(n.value=w.data,i.value=Object.keys(w.data[0]).filter(C=>C!=="__id"),l.value=w.meta.total,u.value=b,o.value=!1):(r.value=!0,o.value=!1)}catch(w){r.value=!0,o.value=!1}}function g(b){p(b,a.value)}function m(b){a.value&&a.value.column==b?a.value.type=="asc"?a.value.type="desc":a.value.type="asc":a.value?(a.value.column=b,a.value.type="asc"):a.value={column:b,type:"asc"},u.value=1,p(u.value,a.value)}const v=Ds(e.resource.extras["analysis:parsing:finished_at"]);return we(()=>{p(u.value)}),(b,$)=>(y(),k("div",null,[r.value?(y(),k("div",Tm,[d("p",Em,[$[0]||($[0]=d("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),W(" "+_(h(s)("The preview of this file failed to load.")),1)])])):o.value?(y(),N(ru,{key:1})):(y(),k(J,{key:2},[d("div",Pm,[d("div",Am,[d("div",{class:"fr-col-auto",innerHTML:h(Sm)},null,8,Dm),d("div",Mm,[d("p",Om,_(h(s)("Explore data in detail")),1),d("p",Lm,_(h(s)("Use our tool to get an overview of data, learn about different columns or perform filters and sorts.")),1)]),d("p",Rm,[d("a",{href:b.resource.preview_url,class:"fr-btn fr-btn--icon-right fr-icon-external-link-fill"},_(h(s)("Explore data")),9,Im)])])]),d("div",zm,[d("table",Fm,[d("caption",Bm,_(h(s)("Preview of {name}",{name:b.resource.title})),1),d("thead",null,[d("tr",null,[(y(!0),k(J,null,ve(i.value,w=>(y(),k("th",Nm,[d("div",Vm,[d("button",{class:Te(["fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-my-n1w",{"fr-btn--secondary-grey-500":!f(w),"fr-btn--icon-right":f(w),"fr-icon-arrow-down-line":f(w)&&a.value&&a.value.type=="desc","fr-icon-arrow-up-line":f(w)&&a.value&&a.value.type=="asc"}]),onClick:C=>m(w)},[W(_(w)+" ",1),d("span",Hm,_(a.value&&a.value.type=="desc"?h(s)("Sort ascending"):h(s)("Sort descending")),1)],10,Wm)])]))),256))])]),d("tbody",null,[(y(!0),k(J,null,ve(n.value,w=>(y(),k("tr",null,[(y(!0),k(J,null,ve(i.value,C=>(y(),k("td",Um,[d("div",jm,[d("div",qm,_(w[C]),1)])]))),256))]))),256))])])]),x(h(Bs),{class:"fr-mt-3w",page:u.value,pageSize:h(c),totalResults:l.value,onChange:g},null,8,["page","pageSize","totalResults"]),d("div",Ym,_(h(s)("Preview updated on {date}",{date:h(v)}))+" — "+_(h(s)("{count} columns",i.value.length))+" — "+_(h(s)("{count} rows",l.value)),1)],64))]))}}),Xm=pe(Gm,[["__scopeId","data-v-0d923ab9"]]),Km=q({__name:"EditButton",props:{datasetId:{},isCommunityResource:{type:Boolean,default:!1},resourceId:{}},setup(t){const e=t,{t:s}=ce(),n=e.isCommunityResource?"community-resource":"resource",i="".concat(it.admin_root,"dataset/").concat(e.datasetId,"/").concat(n,"/").concat(e.resourceId);return(o,r)=>(y(),k("a",{href:i,class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-icon-pencil-line fr-icon--sm","data-testid":"edit-button"},_(h(s)("Edit file")),1))}}),Zm="/_themes/gouvfr/assets/file.svg",Jm="/_themes/gouvfr/assets/code.svg",Qm="/_themes/gouvfr/assets/archive.svg",e1="/_themes/gouvfr/assets/documentation.svg",t1="/_themes/gouvfr/assets/link2.svg",s1="/_themes/gouvfr/assets/table.svg",n1="/_themes/gouvfr/assets/map.svg",i1="/_themes/gouvfr/assets/globe.svg";function au(t){var e,s;switch((s=(e=t.format)==null?void 0:e.trim())==null?void 0:s.toLowerCase()){case"txt":case"pdf":case"rtf":case"odt":case"doc":case"docx":case"epub":return e1;case"json":case"sql":case"xml":case"xsd":case"shp":case"kml":case"kmz":case"gpx":case"shx":case"ovr":case"gpkg":case"grib2":case"dbf":case"prj":case"sqlite":case"db":case"sbn":case"sbx":case"cpg":case"lyr":case"owl":case"dxf":case"ics":case"rdf":case"ttl":case"n3":return Jm;case"tar":case"gz":case"tgz":case"rar":case"zip":case"7z":case"xz":case"bz2":return Qm;case"url":return t1;case"csv":case"ods":case"xls":case"xlsx":case"parquet":case"csv.gz":return s1;case"geojson":return n1;case"ogc:wfs":case"ogc:wms":case"wfs":case"wms":return i1;default:return null}}function lu(t){return"resource-"+t.id+"-title"}const o1={class:"fr-icon-svg flex items-center"},r1=["src"],cu=q({__name:"ResourceIcon",props:{resource:{}},setup(t){const e=t,s=j(()=>au(e.resource)||Zm);return(n,i)=>(y(),k("div",o1,[d("img",{src:s.value,alt:""},null,8,r1)]))}}),a1={key:0,class:"inline-flex fr-mb-0 align-items-baseline fr-text--xs"},l1={class:"flex justify-between border-bottom"},c1={class:"fr-text--sm fr-my-0 fr-p-2v"},u1=["onClick","title"],d1={class:"fr-p-3v"},f1={key:0},h1={key:1},p1={key:2},g1={key:3,class:"text-default-warning flex items-center fr-mt-4v"},m1={key:4,class:"text-default-warning flex items-center fr-mt-4v"},v1={key:5,class:"text-default-warning flex items-center fr-mt-4v"},b1={key:6,class:"w-100 text-align-right fr-mt-5v",target:"_blank"},_1=["href"],y1={class:"fr-mr-1v text-grey-380"},w1={class:"flex items-center bg-error-950 rounded-sm"},$1={class:"fr-tag fr-tag--sm"},x1={key:0,class:"flex items-center padding-sm"},k1={key:1,class:"flex items-center text-warning-425 padding-sm"},C1=q({__name:"SchemaBadge",props:{resource:{}},setup(t){const e=t,{t:s}=ce(),n=M(null);we(async()=>{n.value=await Ac()});const i=j(()=>n.value?Ah(n.value,e.resource.schema):null),o=j(()=>i.value?Mh(e.resource,i.value):null),r=j(()=>i.value?Dh(i.value.name):null),a=j(()=>e.resource.schema?e.resource.schema.name||e.resource.schema.url:null),l=j(()=>e.resource.extras["validation-report:errors"]||[]),c=j(()=>l.value.filter(g=>[""].includes(g.code))),u=j(()=>l.value.filter(g=>["#body","#cell","#content","#row","#table"].some(m=>g.tags.includes(m)))),f=j(()=>l.value.filter(g=>["#head","#structure","#header"].some(m=>g.tags.includes(m)))),p=j(()=>l.value.length===0?"ok":l.value.length===c.value.length?"warnings":"ko");return(g,m)=>a.value?(y(),k("span",a1,[x(Wr,{position:"right",noMargin:"",class:"relative z-2"},{toggletip:P(({close:v})=>[d("div",l1,[d("h5",c1,_(g.$t("Data schema")),1),d("button",{type:"button",onClick:v,title:h(s)("Close"),class:"border-left close-button flex items-center justify-center"},"×",8,u1)]),d("div",d1,[p.value==="ok"?(y(),k("div",f1,[W(_(h(s)("This file is valid for the shema:"))+" ",1),(y(),N(xn(r.value?"a":"span"),{href:r.value,class:"fr-link fr-text--sm"},{default:P(()=>[W(_(a.value),1)]),_:1},8,["href"])),m[0]||(m[0]=W(". "))])):z("",!0),p.value==="warnings"?(y(),k("div",h1,[W(_(h(s)("This file is valid for the shema:"))+" ",1),(y(),N(xn(r.value?"a":"span"),{href:r.value,class:"fr-link fr-text--sm"},{default:P(()=>[W(_(a.value),1)]),_:1},8,["href"])),W(". "+_(h(s)("But its compliance could be improved.")),1)])):z("",!0),p.value==="ko"?(y(),k("div",p1,[W(_(h(s)("This file indicates to follow the schema:"))+" ",1),(y(),N(xn(r.value?"a":"span"),{href:r.value,class:"fr-link fr-text--sm"},{default:P(()=>[W(_(a.value),1)]),_:1},8,["href"])),W(". "+_(h(s)("But is not compliant.")),1)])):z("",!0),c.value.length?(y(),k("div",g1,[m[1]||(m[1]=d("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),d("span",null,_(c.value.length)+" "+_(h(s)("advices")),1)])):z("",!0),f.value.length?(y(),k("div",m1,[m[2]||(m[2]=d("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),d("span",null,_(f.value.length)+" "+_(h(s)("structure errors")),1)])):z("",!0),u.value.length?(y(),k("div",v1,[m[3]||(m[3]=d("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),d("span",null,_(u.value.length)+" "+_(h(s)("body errors")),1)])):z("",!0),o.value?(y(),k("div",b1,[d("a",{href:o.value},_(h(s)("See validation report")),9,_1)])):z("",!0)])]),_:1}),d("span",y1,_(h(s)("Schema:")),1),d("span",w1,[d("span",$1,_(a.value),1),p.value==="warnings"?(y(),k("span",x1,[m[4]||(m[4]=d("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),d("span",null,_(h(s)("Invalid")),1)])):z("",!0),p.value==="ko"?(y(),k("span",k1,[m[5]||(m[5]=d("span",{class:"fr-icon-error-line fr-icon--sm fr-mr-1v"},null,-1)),d("span",null,_(h(s)("Invalid")),1)])):z("",!0)])])):z("",!0)}}),S1=pe(C1,[["__scopeId","data-v-bf96ce2f"]]),T1={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},E1={key:0,class:"text-overflow-ellipsis"},Ft=q({__name:"DescriptionDetails",props:{withEllipsis:{type:Boolean,default:!0}},setup(t){return(e,s)=>(y(),k("dd",T1,[e.withEllipsis?(y(),k("div",E1,[Ke(e.$slots,"default")])):Ke(e.$slots,"default",{key:1})]))}}),P1={},A1={class:"fr-my-0"};function D1(t,e){return y(),k("dl",A1,[Ke(t.$slots,"default")])}const xo=pe(P1,[["render",D1]]),M1={},O1={class:"fr-text--sm fr-my-0 fr-text--bold"};function L1(t,e){return y(),k("dt",O1,[Ke(t.$slots,"default")])}const Bt=pe(M1,[["render",L1]]),R1={class:"flex gap-3rem flex-col-on-small"},I1={class:"code"},z1=["href"],F1={class:"code"},B1=["href"],N1={class:"code"},V1={class:"code"},W1={class:"code text-overflow-ellipsis"},H1=q({__name:"Metadata",props:{resource:{}},setup(t){const e=t,s=j(()=>Object.keys(e.resource.extras).length),n=j(()=>lu(e.resource)),{t:i}=ce();return(o,r)=>(y(),k("div",null,[d("div",R1,[x(xo,{class:"flex-1"},{default:P(()=>[x(Bt,null,{default:P(()=>[W(_(h(i)("URL"))+" ",1),x(Ts,{label:o.$t("Copy URL"),"copied-label":o.$t("URL copied!"),text:o.resource.url,"aria-describedby":n.value},null,8,["label","copied-label","text","aria-describedby"])]),_:1}),x(Ft,{"with-ellipsis":!1},{default:P(()=>[d("code",I1,[d("a",{href:o.resource.url},[x(h(ut),{"max-lines":1,autoresize:!0,text:o.resource.url},null,8,["text"])],8,z1)])]),_:1}),x(Bt,null,{default:P(()=>[W(_(h(i)("Stable URL"))+" ",1),x(Ts,{label:o.$t("Copy stable URL"),"copied-label":o.$t("Stable URL copied!"),text:o.resource.latest,"aria-describedby":n.value},null,8,["label","copied-label","text","aria-describedby"])]),_:1}),x(Ft,{"with-ellipsis":!1},{default:P(()=>[d("code",F1,[d("a",{href:o.resource.latest},[x(h(ut),{"max-lines":1,autoresize:!0,text:o.resource.latest},null,8,["text"])],8,B1)])]),_:1}),x(Bt,null,{default:P(()=>[W(_(h(i)("Identifier"))+" ",1),x(Ts,{label:o.$t("Copy ID"),"copied-label":o.$t("ID copied!"),text:o.resource.id,"aria-describedby":n.value},null,8,["label","copied-label","text","aria-describedby"])]),_:1}),x(Ft,{"with-ellipsis":!1},{default:P(()=>[d("code",N1,[x(h(ut),{"max-lines":1,autoresize:!0,text:o.resource.id},null,8,["text"])])]),_:1}),o.resource.checksum?(y(),k(J,{key:0},[x(Bt,null,{default:P(()=>[W(_(o.resource.checksum.type)+" ",1),x(Ts,{label:o.$t("Copy checksum"),"copied-label":o.$t("Checksum copied!"),text:o.resource.checksum.value,"aria-describedby":n.value},null,8,["label","copied-label","text","aria-describedby"])]),_:1}),x(Ft,{"with-ellipsis":!1},{default:P(()=>[d("code",V1,[x(h(ut),{"max-lines":1,autoresize:!0,text:o.resource.checksum.value},null,8,["text"])])]),_:1})],64)):z("",!0)]),_:1}),x(xo,{style:{"flex-shrink":"0"}},{default:P(()=>[x(Bt,null,{default:P(()=>[W(_(h(i)("Created on")),1)]),_:1}),x(Ft,null,{default:P(()=>[W(_(h(Ds)(o.resource.created_at)),1)]),_:1}),x(Bt,null,{default:P(()=>[W(_(h(i)("Modified on")),1)]),_:1}),x(Ft,null,{default:P(()=>[W(_(h(Ds)(o.resource.last_modified)),1)]),_:1})]),_:1}),x(xo,{style:{"flex-shrink":"0"}},{default:P(()=>[o.resource.filesize?(y(),k(J,{key:0},[x(Bt,null,{default:P(()=>[W(_(h(i)("Size")),1)]),_:1}),x(Ft,null,{default:P(()=>[W(_(h(Cn)(o.resource.filesize)),1)]),_:1})],64)):z("",!0),o.resource.mime?(y(),k(J,{key:1},[x(Bt,null,{default:P(()=>[W(_(h(i)("Type")),1)]),_:1}),x(Ft,null,{default:P(()=>[W(_(h(bc)(o.resource.type)),1)]),_:1})],64)):z("",!0),o.resource.mime?(y(),k(J,{key:2},[x(Bt,null,{default:P(()=>[W(_(h(i)("MIME Type")),1)]),_:1}),x(Ft,null,{default:P(()=>[d("code",W1,_(o.resource.mime),1)]),_:1})],64)):z("",!0)]),_:1})]),d("div",null,[s.value?(y(),N(rm,{key:0,class:"fr-pt-3w fr-mt-3w border-top border-default-grey","button-text":h(i)("See extras"),"title-text":h(i)("Resource Extras"),"title-level":"h5",extra:o.resource.extras},null,8,["button-text","title-text","extra"])):z("",!0)])]))}}),U1=pe(H1,[["__scopeId","data-v-f2a0bf07"]]),j1=q({__name:"TabGroup",props:{size:{default:"md"}},setup(t){return(e,s)=>(y(),N(h(Qp),{as:"div",class:Te({"tabs-sm":e.size==="sm"})},{default:P(()=>[Ke(e.$slots,"default")]),_:3},8,["class"]))}}),q1=q({__name:"TabList",setup(t){return(e,s)=>(y(),N(h(eg),{class:"fr-segmented__elements"},{default:P(()=>[Ke(e.$slots,"default",{},void 0,!0)]),_:3}))}}),Y1=pe(q1,[["__scopeId","data-v-999cc2d0"]]),G1={class:"inner"},X1=q({__name:"Tab",setup(t){return(e,s)=>(y(),N(h(tg),{as:"template"},{default:P(({selected:n})=>[d("button",{class:Te(["fr-segmented__element",{selected:n}])},[d("div",G1,[Ke(e.$slots,"default",{},void 0,!0)])],2)]),_:3}))}}),K1=pe(X1,[["__scopeId","data-v-80aca752"]]),Z1=q({__name:"TabPanels",setup(t){return(e,s)=>(y(),N(h(sg),null,{default:P(()=>[Ke(e.$slots,"default")]),_:3}))}}),J1=q({__name:"TabPanel",setup(t){return(e,s)=>(y(),N(h(ng),null,{default:P(()=>[Ke(e.$slots,"default")]),_:3}))}});function un(t){var e;(e=globalThis._paq)==null||e.push(["trackEvent",...t])}const Q1={class:"flex items-center fr-mb-1v"},ev=["id"],tv=["aria-expanded"],sv={class:"text-grey-380 subheaders-infos"},nv={class:"fr-text--xs fr-mb-0 dash-after"},iv={key:0,class:"fr-text--xs fr-mb-0 dash-after"},ov={class:"hidden show-on-small"},rv={key:0},av=["aria-label"],lv={class:"hidden show-on-small"},cv={key:0,class:"fr-mb-0 fr-mt-1v fr-text--xs text-grey-380"},uv=["href"],dv={class:"flex items-center fr-ml-4v buttons"},fv={key:0,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},hv=["href","title","aria-describedby"],pv={key:1,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},gv=["id","data-clipboard-text","aria-describedby"],mv={key:2,class:"fr-col-auto fr-ml-3v fr-m-0"},vv=["href","title","aria-describedby"],bv={class:"fr-sr-only"},_v={key:3,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},yv=["aria-labelledby"],wv={class:"fr-pl-4v fr-pr-4v fr-pb-4v"},$v={key:0},xv={key:1,class:"fr-pl-4v fr-pr-4v"},kv=["innerHTML"],Cv={key:2,class:"fr-pl-4v fr-pr-4v"},Sv={key:3,class:"fr-pl-4v fr-pr-4v"},Tv={key:4,class:"fr-pl-4v fr-pr-4v"},Ev={class:"fr-pl-0"},Pv={key:0,class:"font-bold fr-text--sm fr-mb-0"},Av={key:1,class:"font-bold fr-text--sm fr-mb-0"},Dv={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},Mv={key:0},Ov=["href"],Lv={key:1},Rv=["href"],Iv={key:0},zv={class:"font-bold fr-text--sm fr-mb-0"},Fv={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},Bv=["href"],Nv={key:0},Vv={key:5,class:"fr-pl-4v fr-pr-4v"},Wv=q({__name:"ResourceAccordion",props:{datasetId:{},expandedOnMount:{type:Boolean,default:!1},isCommunityResource:{type:Boolean,default:!1},resource:{},canEdit:{type:Boolean,default:!1}},setup(t){pc(ff,df);const e=["ogc:wfs","ogc:wms","wfs","wms"],s=t,n=uc(()=>_c(()=>import("./Swagger.6.1.4.js"),["js/Swagger.6.1.4.js","js/_commonjsHelpers.6.1.4.js","js/sentry.6.1.4.js"])),{t:i}=ce(),o=j(()=>it.tabular_api_url&&s.resource.extras["analysis:parsing:finished_at"]&&!s.resource.extras["analysis:parsing:error"]&&(it.tabular_allow_remote||s.resource.filetype==="file")),r=j(()=>au(s.resource)?s.resource.format:i("File")),a=j(()=>e.includes(s.resource.format)),l=M(s.expandedOnMount),c=()=>{l.value=!l.value,l.value?un(["Open resource",s.resource.id]):un(["Close resource",s.resource.id])},u=j(()=>{let E=[];return o.value&&E.push({key:"data",label:i("Data")}),s.resource.description&&E.push({key:"description",label:i("Description")}),o.value&&E.push({key:"data-structure",label:i("Data structure")}),E.push({key:"metadata",label:i("Metadata")}),E.push({key:"downloads",label:i("Downloads")}),o.value&&E.push({key:"swagger",label:i("Swagger")}),E}),f=E=>{const O=u.value[E];un(["View resource tab",s.resource.id,O.label]),O.key==="data"&&un(["Show preview",s.resource.id]),O.key==="data-structure"&&un(["Show data structure",s.resource.id])},p=j(()=>s.isCommunityResource?s.resource:null),g=uo(p.value),m=s.resource.last_modified,b=s.resource.extras&&"check:available"in s.resource.extras&&s.resource.extras["check:available"]===!1,$=b?i("The {certifier} robot failed to access this file - Download file as {format}",{certifier:it.title,format:r.value}):i("Download file as {format}",{format:r.value}),w=j(()=>"".concat(window.location.origin).concat(window.location.pathname,"#/").concat(s.isCommunityResource?"community-resources":"resources","/").concat(s.resource.id)),C="resource-"+s.resource.id,T="resource-"+s.resource.id+"-header",S=lu(s.resource);return(E,O)=>(y(),k("div",{class:Te(["border border-default-grey",{"fr-pb-4v":l.value}])},[d("header",{class:"fr-p-4v flex items-center justify-between relative",id:T},[d("div",null,[d("div",Q1,[d("h4",{class:"fr-m-0",id:h(S)},[d("button",{type:"button",onClick:c,class:"fr-p-0 flex items-center","data-testid":"expand-button","aria-expanded":l.value},[x(cu,{resource:E.resource,class:"fr-icon--xs fr-mr-1v"},null,8,["resource"]),d("span",{class:Te({"font-bold":l.value})},[x(h(ut),{"max-lines":1,text:E.resource.title||h(i)("Nameless file")},null,8,["text"])],2),O[0]||(O[0]=d("span",{class:"absolute inset-0 z-1"},null,-1))],8,tv)],8,ev),x(Ts,{label:E.$t("Copy link"),"copied-label":E.$t("Link copied!"),text:w.value,class:"z-2"},null,8,["label","copied-label","text"])]),d("div",sv,[x(S1,{resource:E.resource,class:"dash-after"},null,8,["resource"]),d("span",nv,_(h(i)("Updated {date}",{date:h(Gn)(h(m))})),1),E.resource.format?(y(),k("span",iv,[d("span",ov,_(h(i)("Format")),1),W(" "+_(E.resource.format.trim().toLowerCase())+" ",1),E.resource.filesize?(y(),k("span",rv,"("+_(h(Cn)(E.resource.filesize))+")",1)):z("",!0)])):z("",!0),d("span",{class:"inline-flex items-center fr-text--xs fr-mb-0","aria-label":h(i)("{n} downloads",E.resource.metrics.views)},[O[1]||(O[1]=d("span",{class:"fr-icon-download-line fr-icon--xs fr-mr-1v"},null,-1)),d("span",null,[W(_(h(Ys)(E.resource.metrics.views))+" ",1),d("span",lv,_(h(i)("downloads")),1)])],8,av)]),p.value?(y(),k("p",cv,[W(_(h(i)("From"))+" ",1),p.value.organization?(y(),k("a",{key:0,class:"fr-link fr-text--xs",href:p.value.organization.page},[x(Ms,{organization:p.value.organization},null,8,["organization"])],8,uv)):h(g)?(y(),k(J,{key:1},[W(_(h(g)),1)],64)):z("",!0)])):z("",!0)]),d("div",dv,[E.resource.format==="url"?(y(),k("p",fv,[d("a",{href:E.resource.latest,title:h(i)("File link - opens a new window"),"aria-describedby":h(S),rel:"ugc nofollow noopener",target:"_blank",class:"fr-btn fr-btn--sm"},_(E.$t("Visit")),9,hv)])):a.value?(y(),k("p",pv,[d("button",{id:E.resource.id+"-copy","data-clipboard-text":E.resource.url,"aria-describedby":h(S),class:"fr-btn fr-btn--sm"},[d("span",null,[x(h(kn),{height:16,width:16,name:"ri-file-copy-line",class:"copy-icon fr-mr-2v"})]),W(" "+_(h(i)("Copy link")),1)],8,gv)])):(y(),k("p",mv,[d("a",{href:E.resource.latest,rel:"ugc nofollow noopener",title:h($),download:"",class:"relative text-transform-uppercase fr-btn fr-btn--sm matomo_download z-2","aria-describedby":h(S)},[h(b)?(y(),N(h(kn),{key:0,height:16,width:16,name:"ri-file-warning-line",class:"fr-mr-2v"})):(y(),N(h(kn),{key:1,height:16,width:16,name:"ri-download-line",class:"fr-mr-2v"})),d("span",bv,_(h(i)("Download file as ")),1),W(_(r.value),1)],8,vv)])),E.canEdit?(y(),k("p",_v,[x(Km,{"dataset-id":E.datasetId,"resource-id":E.resource.id,"is-community-resource":E.isCommunityResource},null,8,["dataset-id","resource-id","is-community-resource"])])):z("",!0),d("div",{class:Te(["fr-icon--sm fr-ml-4v",{"fr-icon-arrow-up-s-line":l.value,"fr-icon-arrow-down-s-line":!l.value}])},null,2)])]),l.value?(y(),k("section",{key:0,"aria-labelledby":h(S),id:C},[x(j1,{size:"sm",onChange:f},{default:P(()=>[d("div",wv,[x(Y1,{style:{"max-width":"100%","overflow-y":"auto"}},{default:P(()=>[(y(!0),k(J,null,ve(u.value,A=>(y(),N(K1,{key:A.key},{default:P(()=>[W(_(A.label),1)]),_:2},1024))),128))]),_:1})]),x(Z1,null,{default:P(()=>[(y(!0),k(J,null,ve(u.value,A=>(y(),N(J1,{key:A.key},{default:P(()=>[A.key==="data"?(y(),k("div",$v,[x(Xm,{resource:E.resource},null,8,["resource"])])):z("",!0),A.key==="description"?(y(),k("div",xv,[d("div",{class:"fr-mt-0 markdown fr-text--sm text-mention-grey",innerHTML:h(hf)(E.resource.description||"")},null,8,kv)])):z("",!0),A.key==="data-structure"?(y(),k("div",Cv,[o.value?(y(),N(Cm,{key:0,resource:E.resource},null,8,["resource"])):z("",!0)])):z("",!0),A.key==="metadata"?(y(),k("div",Sv,[x(U1,{resource:E.resource},null,8,["resource"])])):z("",!0),A.key==="downloads"?(y(),k("div",Tv,[d("dl",Ev,[E.resource.format==="url"?(y(),k("dt",Pv,_(E.$t("Original URL")),1)):(y(),k("dt",Av,_(E.$t("Original format")),1)),d("dd",Dv,[E.resource.format==="url"?(y(),k("span",Mv,[d("a",{href:E.resource.latest,class:"fr-link no-icon-after",rel:"ugc nofollow noopener",target:"_blank"},[x(h(ut),{"auto-resize":!0,"max-lines":1,text:E.resource.url},{after:P(()=>O[2]||(O[2]=[d("span",{class:"fr-ml-1v fr-icon-external-link-line fr-icon--sm"},null,-1)])),_:1},8,["text"])],8,Ov)])):(y(),k("span",Lv,[O[3]||(O[3]=d("span",{class:"text-blue-400 fr-icon-download-line fr-icon--sm fr-mr-1v fr-mt-1v"},null,-1)),d("a",{href:E.resource.latest,class:"fr-link",rel:"ugc nofollow noopener"},[d("span",null,[W(_(E.$t("Format {format}",{format:E.resource.format})),1),E.resource.filesize?(y(),k("span",Iv," - "+_(h(Cn)(E.resource.filesize)),1)):z("",!0)])],8,Rv)])),x(Ts,{label:E.$t("Copy link"),"copied-label":E.$t("Link copied!"),text:E.resource.latest,class:"relative"},null,8,["label","copied-label","text"])]),E.resource.extras["analysis:parsing:parquet_url"]?(y(),k(J,{key:2},[d("dt",zv,_(E.$t("Auto-generated formats from {platform}",{platform:h(it).title})),1),d("dd",Fv,[d("span",null,[O[4]||(O[4]=d("span",{class:"text-blue-400 fr-icon-download-line fr-icon--sm fr-mr-1v fr-mt-1v"},null,-1)),d("a",{href:E.resource.extras["analysis:parsing:parquet_url"],class:"fr-link",rel:"ugc nofollow noopener"},[d("span",null,[W(_(E.$t("Format {format}",{format:"parquet"})),1),E.resource.extras["analysis:parsing:parquet_size"]?(y(),k("span",Nv," - "+_(h(Cn)(E.resource.extras["analysis:parsing:parquet_size"])),1)):z("",!0)])],8,Bv)]),x(Ts,{label:E.$t("Copy link"),"copied-label":E.$t("Link copied!"),text:E.resource.extras["analysis:parsing:parquet_url"],class:"relative"},null,8,["label","copied-label","text"])])],64)):z("",!0)])])):z("",!0),A.key==="swagger"?(y(),k("div",Vv,[d("div",null,_(h(i)("Swagger automatically generated by data.gouv.fr. This swagger allows you to query data by API by filtering it by column value.")),1),o.value?(y(),N(h(n),{key:0,url:"".concat(h(it).tabular_api_url,"/api/resources/").concat(s.resource.id,"/swagger/")},null,8,["url"])):z("",!0)])):z("",!0)]),_:2},1024))),128))]),_:1})]),_:1})],8,yv)):z("",!0)],2))}}),uu=pe(Wv,[["__scopeId","data-v-fe3144b8"]]),Hv=88,du=q({__name:"Loader",setup(t){return(e,s)=>(y(),N(h(gs),{width:1200,height:Hv,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>s[0]||(s[0]=[d("rect",{x:"20",y:"24",rx:"4",ry:"4",width:"16",height:"16"},null,-1),d("rect",{x:"52",y:"20",rx:"4",ry:"4",width:"536",height:"22"},null,-1),d("rect",{x:"52",y:"52",rx:"4",ry:"4",width:"374",height:"16"},null,-1),d("rect",{x:"1052",y:"30",rx:"4",ry:"4",width:"80",height:"20"},null,-1),d("rect",{x:"1154",y:"20",rx:"20",ry:"20",width:"40",height:"40"},null,-1)])),_:1}))}});function Uv(t){return{label:pf(async()=>{const s=_e(t),n=await Eh();return Ph(n,s)},"")}}const jv={class:"fr-card fr-card--no-icon fr-enlarge-link"},qv={class:"fr-card__body"},Yv={class:"fr-card__content fr-px-2w fr-py-1v"},Gv={class:"fr-card__title fr-text--md fr-mt-1v fr-mb-0"},Xv={class:"fr-card__desc fr-mt-0 text-mention-grey"},Kv={class:"fr-text--sm fr-mb-0 flex"},Zv={key:0,class:"not-enlarged"},Jv={class:"dash-before-sm text-overflow-ellipsis"},Qv={class:"fr-grid-row fr-grid-row--middle"},eb={class:"fr-text--sm fr-my-0 dash-after-sm"},tb=["aria-label"],sb=["aria-label"],nb={class:"fr-card__header"},ib={class:"fr-card__img"},ob={key:0,class:"fr-badges-group"},rb={key:0},ab={class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380"},lb={key:1},cb={class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380"},ub=q({__name:"ReuseCard",props:{reuse:{},reuseUrl:{},organizationUrl:{}},setup(t){const e=t,{t:s}=ce(),n=uo(e.reuse),{label:i}=Uv(()=>e.reuse.type);return(o,r)=>(y(),k("article",jv,[d("div",qv,[d("div",Yv,[d("h3",Gv,[x(Js,{class:"text-grey-500",to:o.reuseUrl},{default:P(()=>[x(h(ut),{"auto-resize":!0,text:o.reuse.title,"max-lines":1},null,8,["text"])]),_:1},8,["to"])]),d("div",Xv,[d("p",Kv,[o.reuse.organization?(y(),k("span",Zv,[o.organizationUrl?(y(),N(Js,{key:0,class:"fr-link",to:o.organizationUrl},{default:P(()=>[x(h(Ms),{organization:o.reuse.organization},null,8,["organization"])]),_:1},8,["to"])):(y(),N(h(Ms),{key:1,organization:o.reuse.organization},null,8,["organization"]))])):(y(),N(h(ut),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(n),"max-lines":1},null,8,["text"])),d("span",Jv,_(h(s)("published {date}",{date:h(Gn)(o.reuse.created_at)})),1)]),d("div",Qv,[d("p",eb,_(h(i)),1),d("p",{class:"fr-text--sm fr-my-0","aria-label":h(s)("{n} views",o.reuse.metrics.views)},[r[0]||(r[0]=d("span",{class:"fr-icon-eye-line fr-icon--xs fr-px-1v","aria-hidden":"true"},null,-1)),W(_(h(Ys)(o.reuse.metrics.views)),1)],8,tb),d("p",{class:"fr-text--sm fr-my-0","aria-label":h(s)("{n} followers",o.reuse.metrics.followers)},[r[1]||(r[1]=d("span",{class:"fr-icon-star-line fr-icon--xs fr-px-1v","aria-hidden":"true"},null,-1)),W(_(h(Ys)(o.reuse.metrics.followers)),1)],8,sb)])])])]),d("div",nb,[d("div",ib,[x(Go,{class:"fr-responsive-img reuse-ratio",alt:"",type:"reuse",src:o.reuse.image,size:320},null,8,["src"])]),o.reuse.private||o.reuse.archived?(y(),k("ul",ob,[o.reuse.private?(y(),k("li",rb,[d("p",ab,[r[2]||(r[2]=d("span",{class:"fr-icon-lock-line fr-icon--xs"},null,-1)),W(" "+_(h(s)("Draft")),1)])])):z("",!0),o.reuse.archived?(y(),k("li",lb,[d("p",cb,[r[3]||(r[3]=d("span",{class:"fr-icon-lock-line fr-icon--xs"},null,-1)),W(" "+_(h(s)("Archived")),1)])])):z("",!0)])):z("",!0)])]))}}),db=pe(ub,[["__scopeId","data-v-81c3bbfa"]]);/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Nt(){}const fb=(()=>{let t=0;return()=>t++})();function ye(t){return t===null||typeof t>"u"}function De(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Be(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function pt(t,e){return Be(t)?t:e}function de(t,e){return typeof t>"u"?e:t}const hb=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,fu=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Se(t,e,s,n){let i,o,r;if(De(t))if(o=t.length,n)for(i=o-1;i>=0;i--)e.call(s,t[i],i);else for(i=0;i<o;i++)e.call(s,t[i],i);else if(ge(t))for(r=Object.keys(t),o=r.length,i=0;i<o;i++)e.call(s,t[r[i]],r[i])}function Bi(t,e){let s,n,i,o;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],o=e[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Ni(t){if(De(t))return t.map(Ni);if(ge(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=Ni(t[s[i]]);return e}return t}function hu(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pb(t,e,s,n){if(!hu(t))return;const i=e[t],o=s[t];ge(i)&&ge(o)?Nn(i,o,n):e[t]=Ni(o)}function Nn(t,e,s){const n=De(e)?e:[e],i=n.length;if(!ge(t))return t;s=s||{};const o=s.merger||pb;let r;for(let a=0;a<i;++a){if(r=n[a],!ge(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],t,r,s)}return t}function An(t,e){return Nn(t,e,{merger:gb})}function gb(t,e,s){if(!hu(t))return;const n=e[t],i=s[t];ge(n)&&ge(i)?An(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ni(i))}const Aa={"":t=>t,x:t=>t.x,y:t=>t.y};function mb(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function vb(t){const e=mb(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function fs(t,e){return(Aa[e]||(Aa[e]=vb(e)))(t)}function Ur(t){return t.charAt(0).toUpperCase()+t.slice(1)}const $t=t=>typeof t<"u",hs=t=>typeof t=="function",Da=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function bb(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Re=Math.PI,Oe=2*Re,_b=Oe+Re,Vi=Number.POSITIVE_INFINITY,yb=Re/180,Ne=Re/2,bs=Re/4,Ma=Re*2/3,os=Math.log10,Lt=Math.sign;function Dn(t,e,s){return Math.abs(t-e)<s}function Oa(t){const e=Math.round(t);t=Dn(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(os(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function wb(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,o)=>i-o).pop(),e}function Qs(t){return!isNaN(parseFloat(t))&&isFinite(t)}function $b(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function pu(t,e,s){let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n][s],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Et(t){return t*(Re/180)}function jr(t){return t*(180/Re)}function La(t){if(!Be(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function gu(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*Re&&(o+=Oe),{angle:o,distance:i}}function rr(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xb(t,e){return(t-e+_b)%Oe-Re}function gt(t){return(t%Oe+Oe)%Oe}function Vn(t,e,s,n){const i=gt(t),o=gt(e),r=gt(s),a=gt(o-i),l=gt(r-i),c=gt(i-o),u=gt(i-r);return i===o||i===r||n&&o===r||a>l&&c<u}function Ge(t,e,s){return Math.max(e,Math.min(s,t))}function kb(t){return Ge(t,-32768,32767)}function Ut(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function qr(t,e,s){s=s||(r=>t[r]<e);let n=t.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const jt=(t,e,s,n)=>qr(t,s,n?i=>{const o=t[i][e];return o<s||o===s&&t[i+1][e]===s}:i=>t[i][e]<s),Cb=(t,e,s)=>qr(t,s,n=>t[n][e]>=s);function Sb(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const mu=["push","pop","shift","splice","unshift"];function Tb(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mu.forEach(s=>{const n="_onData"+Ur(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Ra(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(mu.forEach(o=>{delete t[o]}),delete t._chartjs)}function vu(t){const e=new Set;let s,n;for(s=0,n=t.length;s<n;++s)e.add(t[s]);return e.size===n?t:Array.from(e)}const bu=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function _u(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,bu.call(window,()=>{n=!1,t.apply(e,s)}))}}function Eb(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Yr=t=>t==="start"?"left":t==="end"?"right":"center",et=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,Pb=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function yu(t,e,s){const n=e.length;let i=0,o=n;if(t._sorted){const{iScale:r,_parsed:a}=t,l=r.axis,{min:c,max:u,minDefined:f,maxDefined:p}=r.getUserBounds();f&&(i=Ge(Math.min(jt(a,r.axis,c).lo,s?n:jt(e,l,r.getPixelForValue(c)).lo),0,n-1)),p?o=Ge(Math.max(jt(a,r.axis,u,!0).hi+1,s?0:jt(e,l,r.getPixelForValue(u),!0).hi+1),i,n)-i:o=n-i}return{start:i,count:o}}function wu(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const ri=t=>t===0||t===1,Ia=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Oe/s)),za=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Oe/s)+1,Mn={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ne)+1,easeOutSine:t=>Math.sin(t*Ne),easeInOutSine:t=>-.5*(Math.cos(Re*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ri(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ri(t)?t:Ia(t,.075,.3),easeOutElastic:t=>ri(t)?t:za(t,.075,.3),easeInOutElastic(t){return ri(t)?t:t<.5?.5*Ia(t*2,.1125,.45):.5+.5*za(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Mn.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Mn.easeInBounce(t*2)*.5:Mn.easeOutBounce(t*2-1)*.5+.5};function $u(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fa(t){return $u(t)?t:new yc(t)}function ko(t){return $u(t)?t:new yc(t).saturate(.5).darken(.1).hexString()}const Ab=["x","y","borderWidth","radius","tension"],Db=["color","borderColor","backgroundColor"];function Mb(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Db},numbers:{type:"number",properties:Ab}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Ob(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ba=new Map;function Lb(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Ba.get(s);return n||(n=new Intl.NumberFormat(t,e),Ba.set(s,n)),n}function Zn(t,e,s){return Lb(e,s).format(t)}const xu={values(t){return De(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,o=t;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=Rb(t,s)}const r=os(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zn(t,n,l)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(os(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?xu.numeric.call(this,t,e,s):""}};function Rb(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var fo={formatters:xu};function Ib(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zs=Object.create(null),ar=Object.create(null);function On(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];t=t[o]||(t[o]=Object.create(null))}return t}function Co(t,e,s){return typeof e=="string"?Nn(On(t,e),s):Nn(On(t,""),e)}class zb{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>ko(i.backgroundColor),this.hoverBorderColor=(n,i)=>ko(i.borderColor),this.hoverColor=(n,i)=>ko(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Co(this,e,s)}get(e){return On(this,e)}describe(e,s){return Co(ar,e,s)}override(e,s){return Co(zs,e,s)}route(e,s,n,i){const o=On(this,e),r=On(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return ge(l)?Object.assign({},c,l):de(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(s=>s(this))}}var We=new zb({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Mb,Ob,Ib]);function Fb(t){return!t||ye(t.size)||ye(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Wi(t,e,s,n,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,s.push(i)),o>n&&(n=o),n}function Bb(t,e,s,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=s.length;let l,c,u,f,p;for(l=0;l<a;l++)if(f=s[l],f!=null&&De(f)!==!0)r=Wi(t,i,o,r,f);else if(De(f))for(c=0,u=f.length;c<u;c++)p=f[c],p!=null&&!De(p)&&(r=Wi(t,i,o,r,p));t.restore();const g=o.length/2;if(g>s.length){for(l=0;l<g;l++)delete i[o[l]];o.splice(0,g)}return r}function _s(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function Na(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function lr(t,e,s,n){ku(t,e,s,n,null)}function ku(t,e,s,n,i){let o,r,a,l,c,u,f,p;const g=e.pointStyle,m=e.rotation,v=e.radius;let b=(m||0)*yb;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:i?t.ellipse(s,n,i/2,v,0,0,Oe):t.arc(s,n,v,0,Oe),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*v),b+=Ma,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*v),b+=Ma,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,r=Math.cos(b+bs)*l,f=Math.cos(b+bs)*(i?i/2-c:l),a=Math.sin(b+bs)*l,p=Math.sin(b+bs)*(i?i/2-c:l),t.arc(s-f,n-a,c,b-Re,b-Ne),t.arc(s+p,n-r,c,b-Ne,b),t.arc(s+f,n+a,c,b,b+Ne),t.arc(s-p,n+r,c,b+Ne,b+Re),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(s-u,n-l,2*u,2*l);break}b+=bs;case"rectRot":f=Math.cos(b)*(i?i/2:v),r=Math.cos(b)*v,a=Math.sin(b)*v,p=Math.sin(b)*(i?i/2:v),t.moveTo(s-f,n-a),t.lineTo(s+p,n-r),t.lineTo(s+f,n+a),t.lineTo(s-p,n+r),t.closePath();break;case"crossRot":b+=bs;case"cross":f=Math.cos(b)*(i?i/2:v),r=Math.cos(b)*v,a=Math.sin(b)*v,p=Math.sin(b)*(i?i/2:v),t.moveTo(s-f,n-a),t.lineTo(s+f,n+a),t.moveTo(s+p,n-r),t.lineTo(s-p,n+r);break;case"star":f=Math.cos(b)*(i?i/2:v),r=Math.cos(b)*v,a=Math.sin(b)*v,p=Math.sin(b)*(i?i/2:v),t.moveTo(s-f,n-a),t.lineTo(s+f,n+a),t.moveTo(s+p,n-r),t.lineTo(s-p,n+r),b+=bs,f=Math.cos(b)*(i?i/2:v),r=Math.cos(b)*v,a=Math.sin(b)*v,p=Math.sin(b)*(i?i/2:v),t.moveTo(s-f,n-a),t.lineTo(s+f,n+a),t.moveTo(s+p,n-r),t.lineTo(s-p,n+r);break;case"line":r=i?i/2:Math.cos(b)*v,a=Math.sin(b)*v,t.moveTo(s-r,n-a),t.lineTo(s+r,n+a);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(i?i/2:v),n+Math.sin(b)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Wn(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function ho(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function po(t){t.restore()}function Nb(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const o=(e.x+s.x)/2;t.lineTo(o,e.y),t.lineTo(o,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function Vb(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Fs(t,e,s,n,i,o={}){const r=De(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Wb(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Ub(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ye(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,s,n,o.maxWidth)),t.fillText(c,s,n,o.maxWidth),Hb(t,s,n,c,o),n+=i.lineHeight;t.restore()}function Wb(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ye(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Hb(t,e,s,n,i){if(i.strikethrough||i.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function Ub(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Hn(t,e){const{x:s,y:n,w:i,h:o,radius:r}=e;t.arc(s+r.topLeft,n+r.topLeft,r.topLeft,-Ne,Re,!0),t.lineTo(s,n+o-r.bottomLeft),t.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,Re,Ne,!0),t.lineTo(s+i-r.bottomRight,n+o),t.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Ne,0,!0),t.lineTo(s+i,n+r.topRight),t.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-Ne,!0),t.lineTo(s+r.topLeft,n)}const jb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qb=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yb(t,e){const s=(""+t).match(jb);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const Gb=t=>+t||0;function Gr(t,e){const s={},n=ge(e),i=n?Object.keys(e):e,o=ge(t)?n?r=>de(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of i)s[r]=Gb(o(r));return s}function Cu(t){return Gr(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ps(t){return Gr(t,["topLeft","topRight","bottomLeft","bottomRight"])}function st(t){const e=Cu(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qe(t,e){t=t||{},e=e||We.font;let s=de(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=de(t.style,e.style);n&&!(""+n).match(qb)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:de(t.family,e.family),lineHeight:Yb(de(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:de(t.weight,e.weight),string:""};return i.string=Fb(i),i}function mn(t,e,s,n){let i=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),s!==void 0&&De(a)&&(a=a[s%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function Xb(t,e,s){const{min:n,max:i}=t,o=fu(e,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function ms(t,e){return Object.assign(Object.create(t),e)}function Xr(t,e=[""],s=t,n,i=()=>t[0]){$t(n)||(n=Pu("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:n,_getTarget:i,override:r=>Xr([r,...t],e,s,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete t[0][a],!0},get(r,a){return Tu(r,a,()=>n_(a,e,t,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(r,a){return Wa(r).includes(a)},ownKeys(r){return Wa(r)},set(r,a,l){const c=r._storage||(r._storage=i());return r[a]=c[a]=l,delete r._keys,!0}})}function en(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Su(t,n),setContext:o=>en(t,o,s,n),override:o=>en(t.override(o),e,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return Tu(o,r,()=>Zb(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function Su(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:hs(s)?s:()=>s,isIndexable:hs(n)?n:()=>n}}const Kb=(t,e)=>t?t+Ur(e):e,Kr=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Tu(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=s();return t[e]=n,n}function Zb(t,e,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=t;let a=n[e];return hs(a)&&r.isScriptable(e)&&(a=Jb(e,a,t,s)),De(a)&&a.length&&(a=Qb(e,a,t,r.isIndexable)),Kr(e,a)&&(a=en(a,i,o&&o[e],r)),a}function Jb(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(o,r||n),a.delete(t),Kr(t,e)&&(e=Zr(i._scopes,i,t,e)),e}function Qb(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if($t(o.index)&&n(t))e=e[o.index%e.length];else if(ge(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=Zr(c,i,t,u);e.push(en(f,o,r&&r[t],a))}}return e}function Eu(t,e,s){return hs(t)?t(e,s):t}const e_=(t,e)=>t===!0?e:typeof t=="string"?fs(e,t):void 0;function t_(t,e,s,n,i){for(const o of e){const r=e_(s,o);if(r){t.add(r);const a=Eu(r._fallback,s,i);if($t(a)&&a!==s&&a!==n)return a}else if(r===!1&&$t(n)&&s!==n)return null}return!1}function Zr(t,e,s,n){const i=e._rootScopes,o=Eu(e._fallback,s,n),r=[...t,...i],a=new Set;a.add(n);let l=Va(a,r,s,o||s,n);return l===null||$t(o)&&o!==s&&(l=Va(a,r,o,l,n),l===null)?!1:Xr(Array.from(a),[""],i,o,()=>s_(e,s,n))}function Va(t,e,s,n,i){for(;s;)s=t_(t,e,s,n,i);return s}function s_(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return De(i)&&ge(s)?s:i||{}}function n_(t,e,s,n){let i;for(const o of e)if(i=Pu(Kb(o,t),s),$t(i))return Kr(t,i)?Zr(s,n,t,i):i}function Pu(t,e){for(const s of e){if(!s)continue;const n=s[t];if($t(n))return n}}function Wa(t){let e=t._keys;return e||(e=t._keys=i_(t._scopes)),e}function i_(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Au(t,e,s,n){const{iScale:i}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+s,u=e[c],r[a]={r:i.parse(fs(u,o),c)};return r}const o_=Number.EPSILON||1e-14,tn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Du=t=>t==="x"?"y":"x";function r_(t,e,s,n){const i=t.skip?e:t,o=e,r=s.skip?e:s,a=rr(o,i),l=rr(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=n*c,p=n*u;return{previous:{x:o.x-f*(r.x-i.x),y:o.y-f*(r.y-i.y)},next:{x:o.x+p*(r.x-i.x),y:o.y+p*(r.y-i.y)}}}function a_(t,e,s){const n=t.length;let i,o,r,a,l,c=tn(t,0);for(let u=0;u<n-1;++u)if(l=c,c=tn(t,u+1),!(!l||!c)){if(Dn(e[u],0,o_)){s[u]=s[u+1]=0;continue}i=s[u]/e[u],o=s[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=i*r*e[u],s[u+1]=o*r*e[u])}}function l_(t,e,s="x"){const n=Du(s),i=t.length;let o,r,a,l=tn(t,0);for(let c=0;c<i;++c){if(r=a,a=l,l=tn(t,c+1),!a)continue;const u=a[s],f=a[n];r&&(o=(u-r[s])/3,a["cp1".concat(s)]=u-o,a["cp1".concat(n)]=f-o*e[c]),l&&(o=(l[s]-u)/3,a["cp2".concat(s)]=u+o,a["cp2".concat(n)]=f+o*e[c])}}function c_(t,e="x"){const s=Du(e),n=t.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=tn(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=tn(t,r+1),!!l){if(c){const u=c[e]-l[e];i[r]=u!==0?(c[s]-l[s])/u:0}o[r]=a?c?Lt(i[r-1])!==Lt(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}a_(t,i,o),l_(t,o,e)}function ai(t,e,s){return Math.max(Math.min(t,s),e)}function u_(t,e){let s,n,i,o,r,a=Wn(t[0],e);for(s=0,n=t.length;s<n;++s)r=o,o=a,a=s<n-1&&Wn(t[s+1],e),o&&(i=t[s],r&&(i.cp1x=ai(i.cp1x,e.left,e.right),i.cp1y=ai(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=ai(i.cp2x,e.left,e.right),i.cp2y=ai(i.cp2y,e.top,e.bottom)))}function d_(t,e,s,n,i){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")c_(t,i);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=r_(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&u_(t,s)}function Mu(){return typeof window<"u"&&typeof document<"u"}function Jr(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Hi(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const go=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function f_(t,e){return go(t).getPropertyValue(e)}const h_=["top","right","bottom","left"];function As(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=h_[i];n[o]=parseFloat(t[e+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const p_=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function g_(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(p_(i,o,t.target))a=i,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function ks(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=go(s),o=i.boxSizing==="border-box",r=As(i,"padding"),a=As(i,"border","width"),{x:l,y:c,box:u}=g_(t,s),f=r.left+(u&&a.left),p=r.top+(u&&a.top);let{width:g,height:m}=e;return o&&(g-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-f)/g*s.width/n),y:Math.round((c-p)/m*s.height/n)}}function m_(t,e,s){let n,i;if(e===void 0||s===void 0){const o=Jr(t);if(!o)e=t.clientWidth,s=t.clientHeight;else{const r=o.getBoundingClientRect(),a=go(o),l=As(a,"border","width"),c=As(a,"padding");e=r.width-c.width-l.width,s=r.height-c.height-l.height,n=Hi(a.maxWidth,o,"clientWidth"),i=Hi(a.maxHeight,o,"clientHeight")}}return{width:e,height:s,maxWidth:n||Vi,maxHeight:i||Vi}}const li=t=>Math.round(t*10)/10;function v_(t,e,s,n){const i=go(t),o=As(i,"margin"),r=Hi(i.maxWidth,t,"clientWidth")||Vi,a=Hi(i.maxHeight,t,"clientHeight")||Vi,l=m_(t,e,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=As(i,"border","width"),g=As(i,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=li(Math.min(c,r,l.maxWidth)),u=li(Math.min(u,a,l.maxHeight)),c&&!u&&(u=li(c/2)),(e!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=li(Math.floor(u*n))),{width:c,height:u}}function Ha(t,e,s){const n=e||1,i=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height="".concat(t.height,"px"),r.style.width="".concat(t.width,"px")),t.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(t.currentDevicePixelRatio=n,r.height=i,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const b_=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function Ua(t,e){const s=f_(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Cs(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function __(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function y_(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=Cs(t,i,s),a=Cs(i,o,s),l=Cs(o,e,s),c=Cs(r,a,s),u=Cs(a,l,s);return Cs(c,u,s)}const w_=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},$_=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ks(t,e,s){return t?w_(e,s):$_()}function Ou(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Lu(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ru(t){return t==="angle"?{between:Vn,compare:xb,normalize:gt}:{between:Ut,compare:(e,s)=>e-s,normalize:e=>e}}function ja({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function x_(t,e,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Ru(n),l=e.length;let{start:c,end:u,loop:f}=t,p,g;if(f){for(c+=l,u+=l,p=0,g=l;p<g&&r(a(e[c%l][n]),i,o);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function Iu(t,e,s){if(!s)return[t];const{property:n,start:i,end:o}=s,r=e.length,{compare:a,between:l,normalize:c}=Ru(n),{start:u,end:f,loop:p,style:g}=x_(t,e,s),m=[];let v=!1,b=null,$,w,C;const T=()=>l(i,C,$)&&a(i,C)!==0,S=()=>a(o,$)===0||l(o,C,$),E=()=>v||T(),O=()=>!v||S();for(let A=u,L=u;A<=f;++A)w=e[A%r],!w.skip&&($=c(w[n]),$!==C&&(v=l($,i,o),b===null&&E()&&(b=a($,i)===0?A:L),b!==null&&O()&&(m.push(ja({start:b,end:A,loop:p,count:r,style:g})),b=null),L=A,C=$));return b!==null&&m.push(ja({start:b,end:f,loop:p,count:r,style:g})),m}function zu(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const o=Iu(n[i],t.points,e);o.length&&s.push(...o)}return s}function k_(t,e,s,n){let i=0,o=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}function C_(t,e,s,n){const i=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=s;++l){const c=t[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%i,end:(l-1)%i,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%i,end:r%i,loop:n}),o}function S_(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const o=!!t._loop,{start:r,end:a}=k_(s,i,o,n);if(n===!0)return qa(t,[{start:r,end:a,loop:o}],s,e);const l=a<r?a+i:a,c=!!t._fullLoop&&r===0&&a===i-1;return qa(t,C_(s,r,l,c),s,e)}function qa(t,e,s,n){return!n||!n.setContext||!s?e:T_(t,e,s,n)}function T_(t,e,s,n){const i=t._chart.getContext(),o=Ya(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=s.length,c=[];let u=o,f=e[0].start,p=f;function g(m,v,b,$){const w=a?-1:1;if(m!==v){for(m+=l;s[m%l].skip;)m-=w;for(;s[v%l].skip;)v+=w;m%l!==v%l&&(c.push({start:m%l,end:v%l,loop:b,style:$}),u=$,f=v%l)}}for(const m of e){f=a?f:m.start;let v=s[f%l],b;for(p=f+1;p<=m.end;p++){const $=s[p%l];b=Ya(n.setContext(ms(i,{type:"segment",p0:v,p1:$,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),E_(b,u)&&g(f,p-1,m.loop,u),v=$,u=b}f<p-1&&g(f,p-1,m.loop,u)}return c}function Ya(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function E_(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class P_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:e,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=bu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),o.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=o.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vt=new P_;const Ga="transparent",A_={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Fa(t||Ga),i=n.valid&&Fa(e||Ga);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class D_{constructor(e,s,n,i){const o=s[n];i=mn([e.to,i,o,e.from]);const r=mn([e.from,o,i]);this._active=!0,this._fn=e.fn||A_[e.type||typeof r],this._easing=Mn[e.easing]||Mn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=mn([e.to,s,i,e.from]),this._from=mn([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class Fu{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ge(e))return;const s=Object.keys(We.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!ge(o))return;const r={};for(const a of s)r[a]=o[a];(De(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,s){const n=s.options,i=O_(e,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&M_(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,s){const n=this._properties,i=[],o=e.$animations||(e.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,s));continue}const u=s[c];let f=o[c];const p=n.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}o[c]=f=new D_(p,e,c,u),i.push(f)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Vt.add(this._chart,n),!0}}function M_(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const o=t[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function O_(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Xa(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,o=s.max===void 0?e:0;return{start:n?o:i,end:n?i:o}}function L_(t,e,s){if(s===!1)return!1;const n=Xa(t,s),i=Xa(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function R_(t){let e,s,n,i;return ge(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function Bu(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function Ka(t,e,s,n={}){const i=t.keys,o=n.mode==="single";let r,a,l,c;if(e!==null){for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(n.all)continue;break}c=t.values[l],Be(c)&&(o||e===0||Lt(e)===Lt(c))&&(e+=c)}return e}}function I_(t){const e=Object.keys(t),s=new Array(e.length);let n,i,o;for(n=0,i=e.length;n<i;++n)o=e[n],s[n]={x:o,y:t[o]};return s}function Za(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function z_(t,e,s){return"".concat(t.id,".").concat(e.id,".").concat(s.stack||s.type)}function F_(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function B_(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Ja(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const o=t[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function Qa(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=z_(o,r,n),f=e.length;let p;for(let g=0;g<f;++g){const m=e[g],{[l]:v,[c]:b}=m,$=m._stacks||(m._stacks={});p=$[c]=B_(i,u,v),p[a]=b,p._top=Ja(p,r,!0,n.type),p._bottom=Ja(p,r,!1,n.type);const w=p._visualValues||(p._visualValues={});w[a]=b}}function So(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function N_(t,e){return ms(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function V_(t,e,s){return ms(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function dn(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const To=t=>t==="reset"||t==="none",el=(t,e)=>e?t:Object.assign({},t),W_=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Bu(s,!0),values:null};class Pt{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Za(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&dn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(f,p,g,m)=>f==="x"?p:f==="r"?m:g,o=s.xAxisID=de(n.xAxisID,So(e,"x")),r=s.yAxisID=de(n.yAxisID,So(e,"y")),a=s.rAxisID=de(n.rAxisID,So(e,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),u=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ra(this._data,this),e._stacked&&dn(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ge(s))this._data=I_(s);else if(n!==s){if(n){Ra(n,this);const i=this._cachedMeta;dn(i),i._parsed=[]}s&&Object.isExtensible(s)&&Tb(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=Za(s.vScale,s),s.stack!==n.stack&&(i=!0,dn(s),s.stack=n.stack),this._resyncElements(e),(i||o!==s._stacked)&&Qa(this,s._parsed)}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&s===i.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,f,p;if(this._parsing===!1)n._parsed=i,n._sorted=!0,p=i;else{De(i[e])?p=this.parseArrayData(n,i,e,s):ge(i[e])?p=this.parseObjectData(n,i,e,s):p=this.parsePrimitiveData(n,i,e,s);const g=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<s;++u)n._parsed[u+e]=f=p[u],l&&(g()&&(l=!1),c=f);n._sorted=l}r&&Qa(this,p)}parsePrimitiveData(e,s,n,i){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,f=new Array(i);let p,g,m;for(p=0,g=i;p<g;++p)m=p+n,f[p]={[a]:u||o.parse(c[m],m),[l]:r.parse(s[m],m)};return f}parseArrayData(e,s,n,i){const{xScale:o,yScale:r}=e,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+n,f=s[u],a[l]={x:o.parse(f[0],u),y:r.parse(f[1],u)};return a}parseObjectData(e,s,n,i){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,p,g;for(u=0,f=i;u<f;++u)p=u+n,g=s[p],c[u]={x:o.parse(fs(g,a),p),y:r.parse(fs(g,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,o=this._cachedMeta,r=s[e.axis],a={keys:Bu(i,!0),values:s._stacks[e.axis]._visualValues};return Ka(a,r,o.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=Ka(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&e===n.iScale,r=i.length,a=this._getOtherScale(e),l=W_(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=F_(a);let p,g;function m(){g=i[p];const v=g[a.axis];return!Be(g[e.axis])||u>v||f<v}for(p=0;p<r&&!(!m()&&(this.updateRangeFromParsed(c,e,g,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][e.axis],Be(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=R_(de(this.options.clip,L_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?r.push(f):f.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=V_(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=N_(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=e+"-"+s,a=o[r],l=this.enableOptionSharing&&$t(n);if(a)return el(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(We.elements[e]),m=()=>this.getContext(n,i,s),v=c.resolveNamedOptions(p,g,m,f);return v.$shared&&(v.$shared=l,o[r]=Object.freeze(el(v,l))),v}_resolveAnimations(e,s,n){const i=this.chart,o=this._cachedDataOpts,r="animation-".concat(s),a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,s),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,n,s))}const c=new Fu(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||To(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(e,s,n,i){To(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!To(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,s,n=!0){const i=this._cachedMeta,o=i.data,r=e+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&dn(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ee(Pt,"defaults",{}),ee(Pt,"datasetElementType",null),ee(Pt,"dataElementType",null);function H_(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=vu(n.sort((i,o)=>i-o))}return t._cache.$bar}function U_(t){const e=t.iScale,s=H_(e,t.type);let n=e._length,i,o,r,a;const l=()=>{r===32767||r===-32768||($t(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=e.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)r=e.getPixelForTick(i),l();return n}function j_(t,e,s,n){const i=s.barThickness;let o,r;return ye(i)?(o=e.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function q_(t,e,s,n){const i=e.pixels,o=i[t];let r=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function Y_(t,e,s,n){const i=s.parse(t[0],n),o=s.parse(t[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[s.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function Nu(t,e,s,n){return De(t)?Y_(t,e,s,n):e[s.axis]=s.parse(t,n),e}function tl(t,e,s,n){const i=t.iScale,o=t.vScale,r=i.getLabels(),a=i===o,l=[];let c,u,f,p;for(c=s,u=s+n;c<u;++c)p=e[c],f={},f[i.axis]=a||i.parse(r[c],c),l.push(Nu(p,f,o,c));return l}function Eo(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function G_(t,e,s){return t!==0?Lt(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function X_(t){let e,s,n,i,o;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:e,top:i,bottom:o}}function K_(t,e,s,n){let i=e.borderSkipped;const o={};if(!i){t.borderSkipped=o;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=X_(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(o[sl(u,r,a,l)]=!0,i=c)),o[sl(i,r,a,l)]=!0,t.borderSkipped=o}function sl(t,e,s,n){return n?(t=Z_(t,e,s),t=nl(t,s,e)):t=nl(t,e,s),t}function Z_(t,e,s){return t===e?s:t===s?e:t}function nl(t,e,s){return t==="start"?e:t==="end"?s:t}function J_(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class $i extends Pt{parsePrimitiveData(e,s,n,i){return tl(e,s,n,i)}parseArrayData(e,s,n,i){return tl(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,f=[];let p,g,m,v;for(p=n,g=n+i;p<g;++p)v=s[p],m={},m[o.axis]=o.parse(fs(v,c),p),f.push(Nu(fs(v,u),m,r,p));return f}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(e),r=o._custom,a=Eo(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(s,i);for(let g=s;g<s+n;g++){const m=this.getParsed(g),v=o||ye(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,u),$=(m._stacks||{})[a.axis],w={horizontal:c,base:v.base,enableBorderRadius:!$||Eo(m._custom)||r===$._top||r===$._bottom,x:c?v.head:b.center,y:c?b.center:v.head,height:c?b.size:Math.abs(v.size),width:c?Math.abs(v.size):b.size};p&&(w.options=f||this.resolveDataElementOptions(g,e[g].active?"active":i));const C=w.options||e[g].options;K_(w,C,$,r),J_(w,C,u.ratio),this.updateElement(e[g],g,w,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(s),u=c&&c[l.vScale.axis];if(ye(u)||isNaN(u))return!0};for(const l of i)if(!(s!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,s,n){const i=this._getStacks(e,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||U_(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,u=Eo(c);let f=l[s.axis],p=0,g=n?this.applyStack(s,l,n):f,m,v;g!==f&&(p=g-f,g=f),u&&(f=c.barStart,g=c.barEnd-c.barStart,f!==0&&Lt(f)!==Lt(c.barEnd)&&(p=0),p+=f);const b=!ye(o)&&!u?o:p;let $=s.getPixelForValue(b);if(this.chart.getDataVisibility(e)?m=s.getPixelForValue(p+g):m=$,v=m-$,Math.abs(v)<r){v=G_(v,s,a)*r,f===a&&($-=v/2);const w=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),T=Math.min(w,C),S=Math.max(w,C);$=Math.max(Math.min($,S),T),m=$+v,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel($))}if($===s.getPixelForValue(a)){const w=Lt(v)*s.getLineWidthForValue(a)/2;$+=w,v-=w}return{size:v,base:$,head:m,center:m+v/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,o=i.skipNull,r=de(i.maxBarThickness,1/0);let a,l;if(s.grouped){const c=o?this._getStackCount(e):s.stackCount,u=i.barThickness==="flex"?q_(e,s,i,c):j_(e,s,i,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*f+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&n[o].draw(this._ctx)}}ee($i,"id","bar"),ee($i,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ee($i,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class xi extends Pt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,i){const o=super.parsePrimitiveData(e,s,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,s,n,i){const o=super.parseArrayData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=de(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,s,n,i){const o=super.parseObjectData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=de(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(s,i),u=r.axis,f=a.axis;for(let p=s;p<s+n;p++){const g=e[p],m=!o&&this.getParsed(p),v={},b=v[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[u]),$=v[f]=o?a.getBasePixel():a.getPixelForValue(m[f]);v.skip=isNaN(b)||isNaN($),c&&(v.options=l||this.resolveDataElementOptions(p,g.active?"active":i),o&&(v.options.radius=0)),this.updateElement(g,p,v,i)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return s!=="active"&&(i.radius=0),i.radius+=de(n&&n._custom,o),i}}ee(xi,"id","bubble"),ee(xi,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ee(xi,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Q_(t,e,s){let n=1,i=1,o=0,r=0;if(e<Oe){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),p=Math.sin(l),g=(C,T,S)=>Vn(C,a,l,!0)?1:Math.max(T,T*s,S,S*s),m=(C,T,S)=>Vn(C,a,l,!0)?-1:Math.min(T,T*s,S,S*s),v=g(0,c,f),b=g(Ne,u,p),$=m(Re,c,f),w=m(Re+Ne,u,p);n=(v-$)/2,i=(b-w)/2,o=-(v+$)/2,r=-(b+w)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class Es extends Pt{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(ge(n[e])){const{key:l="value"}=this._parsing;o=c=>+fs(n[c],l)}let r,a;for(r=e,a=e+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Et(this.options.rotation-90)}_getCircumference(){return Et(this.options.circumference)}_getRotationExtents(){let e=Oe,s=-Oe;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();e=Math.min(e,o),s=Math.max(s,o+r)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(hb(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:m,offsetY:v}=Q_(f,u,l),b=(n.width-r)/p,$=(n.height-r)/g,w=Math.max(Math.min(b,$)/2,0),C=fu(this.options.radius,w),T=Math.max(C*l,0),S=(C-T)/this._getVisibleDatasetWeightTotal();this.offsetX=m*C,this.offsetY=v*C,i.total=this.calculateTotal(),this.outerRadius=C-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/Oe)}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,p=o&&c.animateScale,g=p?0:this.innerRadius,m=p?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(s,i);let $=this._getRotation(),w;for(w=0;w<s;++w)$+=this._circumference(w,o);for(w=s;w<s+n;++w){const C=this._circumference(w,o),T=e[w],S={x:u+this.offsetX,y:f+this.offsetY,startAngle:$,endAngle:$+C,circumference:C,outerRadius:m,innerRadius:g};b&&(S.options=v||this.resolveDataElementOptions(w,T.active?"active":i)),$+=C,this.updateElement(T,w,S,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Oe*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Zn(s._parsed[e],n.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,o,r,a,l;if(!e){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),e=r.data,a=r.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(de(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ee(Es,"id","doughnut"),ee(Es,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ee(Es,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),ee(Es,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class ki extends Pt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=yu(s,i,r);this._drawStart=a,this._drawCount=l,wu(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(s,i),p=r.axis,g=a.axis,{spanGaps:m,segment:v}=this.options,b=Qs(m)?m:Number.POSITIVE_INFINITY,$=this.chart._animationsDisabled||o||i==="none",w=s+n,C=e.length;let T=s>0&&this.getParsed(s-1);for(let S=0;S<C;++S){const E=e[S],O=$?E:{};if(S<s||S>=w){O.skip=!0;continue}const A=this.getParsed(S),L=ye(A[g]),B=O[p]=r.getPixelForValue(A[p],S),H=O[g]=o||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[g],S);O.skip=isNaN(B)||isNaN(H)||L,O.stop=S>0&&Math.abs(A[p]-T[p])>b,v&&(O.parsed=A,O.raw=c.data[S]),f&&(O.options=u||this.resolveDataElementOptions(S,E.active?"active":i)),$||this.updateElement(E,S,O,i),T=A}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ee(ki,"id","line"),ee(ki,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ee(ki,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ln extends Pt{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Zn(s._parsed[e].r,n.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,s,n,i){return Au.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,i=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,f=c.yCenter,p=c.getIndexAngle(0)-.5*Re;let g=p,m;const v=360/this.countVisibleElements();for(m=0;m<s;++m)g+=this._computeAngle(m,i,v);for(m=s;m<s+n;m++){const b=e[m];let $=g,w=g+this._computeAngle(m,i,v),C=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;g=w,o&&(l.animateScale&&(C=0),l.animateRotate&&($=w=p));const T={x:u,y:f,innerRadius:0,outerRadius:C,startAngle:$,endAngle:w,options:this.resolveDataElementOptions(m,b.active?"active":i)};this.updateElement(b,m,T,i)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?Et(this.resolveDataElementOptions(e,s).angle||n):0}}ee(Ln,"id","polarArea"),ee(Ln,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ee(Ln,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class cr extends Es{}ee(cr,"id","pie"),ee(cr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ci extends Pt{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,i){return Au.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta,n=s.dataset,i=s.data||[],o=s.iScale.getLabels();if(n.points=i,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,s,n,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=s;a<s+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=o.getPointPositionForValue(a,this.getParsed(a).r),f=r?o.xCenter:u.x,p=r?o.yCenter:u.y,g={x:f,y:p,angle:u.angle,skip:isNaN(f)||isNaN(p),options:c};this.updateElement(l,a,g,i)}}}ee(Ci,"id","radar"),ee(Ci,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ee(Ci,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Si extends Pt{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=yu(s,n,i);if(this._drawStart=o,this._drawCount=r,wu(s)&&(o=0,r=n.length),this.options.showLine){const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),f=this.getSharedOptions(u),p=this.includeOptions(i,f),g=r.axis,m=a.axis,{spanGaps:v,segment:b}=this.options,$=Qs(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||i==="none";let C=s>0&&this.getParsed(s-1);for(let T=s;T<s+n;++T){const S=e[T],E=this.getParsed(T),O=w?S:{},A=ye(E[m]),L=O[g]=r.getPixelForValue(E[g],T),B=O[m]=o||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[m],T);O.skip=isNaN(L)||isNaN(B)||A,O.stop=T>0&&Math.abs(E[g]-C[g])>$,b&&(O.parsed=E,O.raw=c.data[T]),p&&(O.options=f||this.resolveDataElementOptions(T,S.active?"active":i)),w||this.updateElement(S,T,O,i),C=E}this.updateSharedOptions(f,i,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}ee(Si,"id","scatter"),ee(Si,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ee(Si,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ey=Object.freeze({__proto__:null,BarController:$i,BubbleController:xi,DoughnutController:Es,LineController:ki,PolarAreaController:Ln,PieController:cr,RadarController:Ci,ScatterController:Si});function ys(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Qr{static override(e){Object.assign(Qr.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return ys()}parse(){return ys()}format(){return ys()}add(){return ys()}diff(){return ys()}startOf(){return ys()}endOf(){return ys()}}var ty={_date:Qr};function sy(t,e,s,n){const{controller:i,data:o,_sorted:r}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const l=a._reversePixels?Cb:jt;if(n){if(i._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const f=l(o,e,s-u),p=l(o,e,s+u);return{lo:f.lo,hi:p.hi}}}}else return l(o,e,s)}return{lo:0,hi:o.length-1}}function Jn(t,e,s,n,i){const o=t.getSortedVisibleDatasetMetas(),r=s[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:f,hi:p}=sy(o[a],e,r,i);for(let g=f;g<=p;++g){const m=u[g];m.skip||n(m,c,g)}}}function ny(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const o=e?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Po(t,e,s,n,i){const o=[];return!i&&!t.isPointInArea(e)||Jn(t,s,e,function(a,l,c){!i&&!Wn(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function iy(t,e,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:f}=gu(r,{x:e.x,y:e.y});Vn(f,c,u)&&i.push({element:r,datasetIndex:a,index:l})}return Jn(t,s,e,o),i}function oy(t,e,s,n,i,o){let r=[];const a=ny(s);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const g=u.inRange(e.x,e.y,i);if(n&&!g)return;const m=u.getCenterPoint(i);if(!(!!o||t.isPointInArea(m))&&!g)return;const b=a(e,m);b<l?(r=[{element:u,datasetIndex:f,index:p}],l=b):b===l&&r.push({element:u,datasetIndex:f,index:p})}return Jn(t,s,e,c),r}function Ao(t,e,s,n,i,o){return!o&&!t.isPointInArea(e)?[]:s==="r"&&!n?iy(t,e,s,i):oy(t,e,s,n,i,o)}function il(t,e,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return Jn(t,s,e,(l,c,u)=>{l[r](e[s],i)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),n&&!a?[]:o}var ry={evaluateInteractionItems:Jn,modes:{index(t,e,s,n){const i=ks(e,t),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?Po(t,i,o,n,r):Ao(t,i,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,s,n){const i=ks(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?Po(t,i,o,n,r):Ao(t,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,s,n){const i=ks(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return Po(t,i,o,n,r)},nearest(t,e,s,n){const i=ks(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return Ao(t,i,o,s.intersect,n,r)},x(t,e,s,n){const i=ks(e,t);return il(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=ks(e,t);return il(t,i,"y",s.intersect,n)}}};const Vu=["left","top","right","bottom"];function fn(t,e){return t.filter(s=>s.pos===e)}function ol(t,e){return t.filter(s=>Vu.indexOf(s.pos)===-1&&s.box.axis===e)}function hn(t,e){return t.sort((s,n)=>{const i=e?n:s,o=e?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function ay(t){const e=[];let s,n,i,o,r,a;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,e.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return e}function ly(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Vu.includes(i))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function cy(t,e){const s=ly(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&e.availableHeight)}return s}function uy(t){const e=ay(t),s=hn(e.filter(c=>c.box.fullSize),!0),n=hn(fn(e,"left"),!0),i=hn(fn(e,"right")),o=hn(fn(e,"top"),!0),r=hn(fn(e,"bottom")),a=ol(e,"x"),l=ol(e,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:fn(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function rl(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Wu(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function dy(t,e,s,n){const{pos:i,box:o}=s,r=t.maxPadding;if(!ge(i)){s.size&&(t[i]-=s.size);const f=n[s.stack]||{size:0,count:1};f.size=Math.max(f.size,s.horizontal?o.height:o.width),s.size=f.size/f.count,t[i]+=s.size}o.getPadding&&Wu(r,o.getPadding());const a=Math.max(0,e.outerWidth-rl(r,t,"left","right")),l=Math.max(0,e.outerHeight-rl(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function fy(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function hy(t,e){const s=e.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(e[r],s[r])}),o}return n(t?["left","right"]:["top","bottom"])}function vn(t,e,s,n){const i=[];let o,r,a,l,c,u;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,hy(a.horizontal,e));const{same:f,other:p}=dy(e,s,a,n);c|=f&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&vn(i,e,s,n)||u}function ci(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function al(t,e,s,n){const i=s.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;$t(c.start)&&(r=c.start),l.fullSize?ci(l,i.left,r,s.outerWidth-i.right-i.left,p):ci(l,e.left+c.placed,r,f,p),c.start=r,c.placed+=f,r=l.bottom}else{const f=e.h*u,p=c.size||l.width;$t(c.start)&&(o=c.start),l.fullSize?ci(l,o,i.top,p,s.outerHeight-i.bottom-i.top):ci(l,o,e.top+c.placed,p,f),c.start=o,c.placed+=f,o=l.right}}e.x=o,e.y=r}var tt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=st(t.options.layout.padding),o=Math.max(e-i.width,0),r=Math.max(s-i.height,0),a=uy(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),p=Object.assign({},i);Wu(p,st(n));const g=Object.assign({maxPadding:p,w:o,h:r,x:i.left,y:i.top},i),m=cy(l.concat(c),f);vn(a.fullSize,g,f,m),vn(l,g,f,m),vn(c,g,f,m)&&vn(l,g,f,m),fy(g),al(a.leftAndTop,g,f,m),g.x+=g.w,g.y+=g.h,al(a.rightAndBottom,g,f,m),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Se(a.chartArea,v=>{const b=v.box;Object.assign(b,t.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Hu{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class py extends Hu{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ti="$chartjs",gy={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ll=t=>t===null||t==="";function my(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ti]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",ll(i)){const o=Ua(t,"width");o!==void 0&&(t.width=o)}if(ll(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=Ua(t,"height");o!==void 0&&(t.height=o)}return t}const Uu=b_?{passive:!0}:!1;function vy(t,e,s){t.addEventListener(e,s,Uu)}function by(t,e,s){t.canvas.removeEventListener(e,s,Uu)}function _y(t,e){const s=gy[t.type]||t.type,{x:n,y:i}=ks(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Ui(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function yy(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Ui(a.addedNodes,n),r=r&&!Ui(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function wy(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Ui(a.removedNodes,n),r=r&&!Ui(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Un=new Map;let cl=0;function ju(){const t=window.devicePixelRatio;t!==cl&&(cl=t,Un.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function $y(t,e){Un.size||window.addEventListener("resize",ju),Un.set(t,e)}function xy(t){Un.delete(t),Un.size||window.removeEventListener("resize",ju)}function ky(t,e,s){const n=t.canvas,i=n&&Jr(n);if(!i)return;const o=_u((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(i),$y(t,o),r}function Do(t,e,s){s&&s.disconnect(),e==="resize"&&xy(t)}function Cy(t,e,s){const n=t.canvas,i=_u(o=>{t.ctx!==null&&s(_y(o,t))},t);return vy(n,e,i),i}class Sy extends Hu{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(my(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Ti])return!1;const n=s[Ti].initial;["height","width"].forEach(o=>{const r=n[o];ye(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[Ti],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),r={attach:yy,detach:wy,resize:ky}[s]||Cy;i[s]=r(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:Do,detach:Do,resize:Do}[s]||by)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return v_(e,s,n,i)}isAttached(e){const s=Jr(e);return!!(s&&s.isConnected)}}function Ty(t){return!Mu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?py:Sy}var wi;let Jt=(wi=class{constructor(){ee(this,"active",!1)}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Qs(this.x)&&Qs(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}},ee(wi,"defaults",{}),ee(wi,"defaultRoutes"),wi);function Ey(t,e){const s=t.options.ticks,n=Py(t),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?Dy(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return My(e,c,o,r/i),c;const u=Ay(o,e,i);if(r>0){let f,p;const g=r>1?Math.round((l-a)/(r-1)):null;for(ui(e,c,u,ye(g)?0:a-g,a),f=0,p=r-1;f<p;f++)ui(e,c,u,o[f],o[f+1]);return ui(e,c,u,l,ye(g)?e.length:l+g),c}return ui(e,c,u),c}function Py(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function Ay(t,e,s){const n=Oy(t),i=e.length/s;if(!n)return Math.max(i,1);const o=wb(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function Dy(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function My(t,e,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),i++,o=s[i*n])}function ui(t,e,s,n,i){const o=de(n,0),r=Math.min(de(i,t.length),t.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*s))}function Oy(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Ly=t=>t==="left"?"right":t==="right"?"left":t,ul=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,dl=(t,e)=>Math.min(e||t,t);function fl(t,e){const s=[],n=t.length/e,i=t.length;let o=0;for(;o<i;o+=n)s.push(t[Math.floor(o)]);return s}function Ry(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<o-a||l>r+a)))return l}function Iy(t,e){Se(t,s=>{const n=s.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function pn(t){return t.drawTicks?t.tickLength:0}function hl(t,e){if(!t.display)return 0;const s=qe(t.font,e),n=st(t.padding);return(De(t.text)?t.text.length:1)*s.lineHeight+n.height}function zy(t,e){return ms(t,{scale:e,type:"scale"})}function Fy(t,e,s){return ms(t,{tick:s,index:e,type:"tick"})}function By(t,e,s){let n=Yr(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Ly(n)),n}function Ny(t,e,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,g,m;const v=r-i,b=a-o;if(t.isHorizontal()){if(g=et(n,o,a),ge(s)){const $=Object.keys(s)[0],w=s[$];m=u[$].getPixelForValue(w)+v-e}else s==="center"?m=(c.bottom+c.top)/2+v-e:m=ul(t,s,e);p=a-o}else{if(ge(s)){const $=Object.keys(s)[0],w=s[$];g=u[$].getPixelForValue(w)-b+e}else s==="center"?g=(c.left+c.right)/2-b+e:g=ul(t,s,e);m=et(n,r,i),f=s==="left"?-Ne:Ne}return{titleX:g,titleY:m,maxWidth:p,rotation:f}}class Ns extends Jt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=pt(e,Number.POSITIVE_INFINITY),s=pt(s,Number.NEGATIVE_INFINITY),n=pt(n,Number.POSITIVE_INFINITY),i=pt(i,Number.NEGATIVE_INFINITY),{min:pt(e,n),max:pt(s,i),minDefined:Be(e),maxDefined:Be(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:pt(s,pt(n,s)),max:pt(n,pt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Xb(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?fl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Ey(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n],o.label=Pe(s.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=dl(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,g=Ge(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/n:g/(n-1),f+6>a&&(a=g/(n-(e.offset?.5:1)),l=this.maxHeight-pn(e.grid)-s.padding-hl(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),r=jr(Math.min(Math.asin(Ge((u.highest.height+6)/a,-1,1)),Math.asin(Ge(l/c,-1,1))-Math.asin(Ge(p/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=hl(i,s.options.font);if(a?(e.width=this.maxWidth,e.height=pn(o)+l):(e.height=this.maxHeight,e.width=pn(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),g=n.padding*2,m=Et(this.labelRotation),v=Math.cos(m),b=Math.sin(m);if(a){const $=n.mirror?0:b*f.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+$+g)}else{const $=n.mirror?0:v*f.width+b*p.height;e.width=Math.min(this.maxWidth,e.width+$+g)}this._calculatePadding(c,u,b,v)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=i*e.width,g=n*s.height):(p=n*e.height,g=i*s.width):o==="start"?g=s.width:o==="end"?p=e.width:o!=="inner"&&(p=e.width/2,g=s.width/2),this.paddingLeft=Math.max((p-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-f+r)*this.width/(this.width-f),0)}else{let u=s.height/2,f=e.height/2;o==="start"?(u=0,f=e.height):o==="end"&&(u=s.height,f=0),this.paddingTop=u+r,this.paddingBottom=f+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ye(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=fl(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/dl(s,n));let c=0,u=0,f,p,g,m,v,b,$,w,C,T,S;for(f=0;f<s;f+=l){if(m=e[f].label,v=this._resolveTickFontOptions(f),i.font=b=v.string,$=o[b]=o[b]||{data:{},gc:[]},w=v.lineHeight,C=T=0,!ye(m)&&!De(m))C=Wi(i,$.data,$.gc,C,m),T=w;else if(De(m))for(p=0,g=m.length;p<g;++p)S=m[p],!ye(S)&&!De(S)&&(C=Wi(i,$.data,$.gc,C,S),T+=w);r.push(C),a.push(T),c=Math.max(C,c),u=Math.max(T,u)}Iy(o,s);const E=r.indexOf(c),O=a.indexOf(u),A=L=>({width:r[L]||0,height:a[L]||0});return{first:A(0),last:A(s-1),widest:A(E),highest:A(O),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return kb(this._alignToPixels?_s(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=Fy(this.getContext(),e,n))}return this.$context||(this.$context=zy(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Et(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=pn(o),g=[],m=a.setContext(this.getContext()),v=m.display?m.width:0,b=v/2,$=function(Q){return _s(n,Q,v)};let w,C,T,S,E,O,A,L,B,H,D,V;if(r==="top")w=$(this.bottom),O=this.bottom-p,L=w-b,H=$(e.top)+b,V=e.bottom;else if(r==="bottom")w=$(this.top),H=e.top,V=$(e.bottom)-b,O=w+b,L=this.top+p;else if(r==="left")w=$(this.right),E=this.right-p,A=w-b,B=$(e.left)+b,D=e.right;else if(r==="right")w=$(this.left),B=e.left,D=$(e.right)-b,E=w+b,A=this.left+p;else if(s==="x"){if(r==="center")w=$((e.top+e.bottom)/2+.5);else if(ge(r)){const Q=Object.keys(r)[0],se=r[Q];w=$(this.chart.scales[Q].getPixelForValue(se))}H=e.top,V=e.bottom,O=w+b,L=O+p}else if(s==="y"){if(r==="center")w=$((e.left+e.right)/2);else if(ge(r)){const Q=Object.keys(r)[0],se=r[Q];w=$(this.chart.scales[Q].getPixelForValue(se))}E=w-b,A=E-p,B=e.left,D=e.right}const Y=de(i.ticks.maxTicksLimit,f),X=Math.max(1,Math.ceil(f/Y));for(C=0;C<f;C+=X){const Q=this.getContext(C),se=o.setContext(Q),G=a.setContext(Q),ie=se.lineWidth,le=se.color,oe=G.dash||[],U=G.dashOffset,I=se.tickWidth,F=se.tickColor,R=se.tickBorderDash||[],Z=se.tickBorderDashOffset;T=Ry(this,C,l),T!==void 0&&(S=_s(n,T,ie),c?E=A=B=D=S:O=L=H=V=S,g.push({tx1:E,ty1:O,tx2:A,ty2:L,x1:B,y1:H,x2:D,y2:V,width:ie,color:le,borderDash:oe,borderDashOffset:U,tickWidth:I,tickColor:F,tickBorderDash:R,tickBorderDashOffset:Z}))}return this._ticksLength=f,this._borderValue=w,g}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=o,p=pn(n.grid),g=p+u,m=f?-u:g,v=-Et(this.labelRotation),b=[];let $,w,C,T,S,E,O,A,L,B,H,D,V="middle";if(i==="top")E=this.bottom-m,O=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+m,O=this._getXAxisLabelAlignment();else if(i==="left"){const X=this._getYAxisLabelAlignment(p);O=X.textAlign,S=X.x}else if(i==="right"){const X=this._getYAxisLabelAlignment(p);O=X.textAlign,S=X.x}else if(s==="x"){if(i==="center")E=(e.top+e.bottom)/2+g;else if(ge(i)){const X=Object.keys(i)[0],Q=i[X];E=this.chart.scales[X].getPixelForValue(Q)+g}O=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")S=(e.left+e.right)/2-g;else if(ge(i)){const X=Object.keys(i)[0],Q=i[X];S=this.chart.scales[X].getPixelForValue(Q)}O=this._getYAxisLabelAlignment(p).textAlign}s==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const Y=this._getLabelSizes();for($=0,w=a.length;$<w;++$){C=a[$],T=C.label;const X=o.setContext(this.getContext($));A=this.getPixelForTick($)+o.labelOffset,L=this._resolveTickFontOptions($),B=L.lineHeight,H=De(T)?T.length:1;const Q=H/2,se=X.color,G=X.textStrokeColor,ie=X.textStrokeWidth;let le=O;r?(S=A,O==="inner"&&($===w-1?le=this.options.reverse?"left":"right":$===0?le=this.options.reverse?"right":"left":le="center"),i==="top"?c==="near"||v!==0?D=-H*B+B/2:c==="center"?D=-Y.highest.height/2-Q*B+B:D=-Y.highest.height+B/2:c==="near"||v!==0?D=B/2:c==="center"?D=Y.highest.height/2-Q*B:D=Y.highest.height-H*B,f&&(D*=-1),v!==0&&!X.showLabelBackdrop&&(S+=B/2*Math.sin(v))):(E=A,D=(1-H)*B/2);let oe;if(X.showLabelBackdrop){const U=st(X.backdropPadding),I=Y.heights[$],F=Y.widths[$];let R=D-U.top,Z=0-U.left;switch(V){case"middle":R-=I/2;break;case"bottom":R-=I;break}switch(O){case"center":Z-=F/2;break;case"right":Z-=F;break}oe={left:Z,top:R,width:F+U.width,height:I+U.height,color:X.backdropColor}}b.push({label:T,font:L,textOffset:D,options:{rotation:v,color:se,strokeColor:G,strokeWidth:ie,textAlign:le,textBaseline:V,translation:[S,E],backdrop:oe}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Et(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,u;return s==="left"?i?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,o,r),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=_s(e,this.left,r)-r/2,u=_s(e,this.right,a)+a/2,f=p=l):(f=_s(e,this.top,r)-r/2,p=_s(e,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,f),s.lineTo(u,p),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&ho(n,i);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Fs(n,c,0,u,l,a)}i&&po(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=qe(n.font),r=st(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||ge(s)?(l+=r.bottom,De(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=Ny(this,l,s,a);Fs(e,n.text,0,0,o,{color:n.color,maxWidth:f,rotation:p,textAlign:By(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=de(e.grid&&e.grid.z,-1),i=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ns.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return qe(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class di{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;Hy(s)&&(n=this.register(s));const i=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,Vy(e,r,n),this.override&&We.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in We[i]&&(delete We[i][n],this.override&&delete zs[n])}}function Vy(t,e,s){const n=Nn(Object.create(null),[s?We.get(s):{},We.get(e),t.defaults]);We.set(e,n),t.defaultRoutes&&Wy(e,t.defaultRoutes),t.descriptors&&We.describe(e,t.descriptors)}function Wy(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),o=[t].concat(n).join("."),r=e[s].split("."),a=r.pop(),l=r.join(".");We.route(o,i,l,a)})}function Hy(t){return"id"in t&&"defaults"in t}class Uy{constructor(){this.controllers=new di(Pt,"datasets",!0),this.elements=new di(Jt,"elements"),this.plugins=new di(Object,"plugins"),this.scales=new di(Ns,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Se(i,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,s,n){const i=Ur(e);Pe(n["before"+i],[],n),s[e](n),Pe(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Ot=new Uy;class jy{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),r=this._notify(o,e,s,n);return s==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,s,n,i){i=i||{};for(const o of e){const r=o.plugin,a=r[n],l=[s,i,o.options];if(Pe(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){ye(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=de(n.options&&n.options.plugins,{}),o=qy(n);return i===!1&&!s?[]:Gy(e,o,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function qy(t){const e={},s=[],n=Object.keys(Ot.plugins.items);for(let o=0;o<n.length;o++)s.push(Ot.getPlugin(n[o]));const i=t.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),e[r.id]=!0)}return{plugins:s,localIds:e}}function Yy(t,e){return!e&&t===!1?null:t===!0?{}:t}function Gy(t,{plugins:e,localIds:s},n,i){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=Yy(n[l],i);c!==null&&o.push({plugin:a,options:Xy(t.config,{plugin:a,local:s[l]},c,r)})}return o}function Xy(t,{plugin:e,local:s},n,i){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return s&&e.defaults&&r.push(e.defaults),t.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ur(t,e){const s=We.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function Ky(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Zy(t,e){return t===e?"_index_":"_value_"}function Jy(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ji(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||Jy(e.position)||t.length>1&&ji(t[0].toLowerCase(),e),t))return t;throw new Error("Cannot determine type of '".concat(name,"' axis. Please provide 'axis' or 'position' option."))}function Qy(t,e){const s=zs[t.type]||{scales:{}},n=e.scales||{},i=ur(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!ge(a))return console.error("Invalid scale configuration for scale: ".concat(r));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(r));const l=ji(r,a),c=Zy(l,i),u=s.scales||{};o[r]=An(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||ur(a,e),u=(zs[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=Ky(f,l),g=r[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),An(o[g],[{axis:p},n[g],u[f]])})}),Object.keys(o).forEach(r=>{const a=o[r];An(a,[We.scales[a.type],We.scale])}),o}function qu(t){const e=t.options||(t.options={});e.plugins=de(e.plugins,{}),e.scales=Qy(t,e)}function Yu(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function e0(t){return t=t||{},t.data=Yu(t.data),qu(t),t}const pl=new Map,Gu=new Set;function fi(t,e){let s=pl.get(t);return s||(s=e(),pl.set(t,s),Gu.add(s)),s}const gn=(t,e,s)=>{const n=fs(e,s);n!==void 0&&t.add(n)};class t0{constructor(e){this._config=e0(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Yu(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qu(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return fi(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,s){return fi("".concat(e,".transition.").concat(s),()=>[["datasets.".concat(e,".transitions.").concat(s),"transitions.".concat(s)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,s){return fi("".concat(e,"-").concat(s),()=>[["datasets.".concat(e,".elements.").concat(s),"datasets.".concat(e),"elements.".concat(s),""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return fi("".concat(n,"-plugin-").concat(s),()=>[["plugins.".concat(s),...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:o}=this,r=this._cachedScopes(e,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{e&&(l.add(e),u.forEach(f=>gn(l,e,f))),u.forEach(f=>gn(l,i,f)),u.forEach(f=>gn(l,zs[o]||{},f)),u.forEach(f=>gn(l,We,f)),u.forEach(f=>gn(l,ar,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Gu.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:e,type:s}=this;return[e,zs[s]||{},We.datasets[s]||{},{type:s},We,ar]}resolveNamedOptions(e,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=gl(this._resolverCache,e,i);let l=r;if(n0(r,s)){o.$shared=!1,n=hs(n)?n():n;const c=this.createResolver(e,n,a);l=en(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(e,s,n=[""],i){const{resolver:o}=gl(this._resolverCache,e,n);return ge(s)?en(o,s,void 0,i):o}}function gl(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let o=n.get(i);return o||(o={resolver:Xr(e,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const s0=t=>ge(t)&&Object.getOwnPropertyNames(t).reduce((e,s)=>e||hs(t[s]),!1);function n0(t,e){const{isScriptable:s,isIndexable:n}=Su(t);for(const i of e){const o=s(i),r=n(i),a=(r||o)&&t[i];if(o&&(hs(a)||s0(a))||r&&De(a))return!0}return!1}var i0="4.2.1";const o0=["top","bottom","left","right","chartArea"];function ml(t,e){return t==="top"||t==="bottom"||o0.indexOf(t)===-1&&e==="x"}function vl(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function bl(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Pe(s&&s.onComplete,[t],e)}function r0(t){const e=t.chart,s=e.options.animation;Pe(s&&s.onProgress,[t],e)}function Xu(t){return Mu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ei={},_l=t=>{const e=Xu(t);return Object.values(Ei).filter(s=>s.canvas===e).pop()};function a0(t,e,s){const n=Object.keys(t);for(const i of n){const o=+i;if(o>=e){const r=t[i];delete t[i],(s>0||o>e)&&(t[o+s]=r)}}}function l0(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}function c0(t){const{xScale:e,yScale:s}=t;if(e&&s)return{left:e.left,right:e.right,top:s.top,bottom:s.bottom}}var ts;let ea=(ts=class{static register(...e){Ot.add(...e),yl()}static unregister(...e){Ot.remove(...e),yl()}constructor(e,s){const n=this.config=new t0(s),i=Xu(e),o=_l(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Ty(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=fb(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jy,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Eb(f=>this.update(f),r.resizeDelay||0),this._dataChanges=[],Ei[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Vt.listen(this,"complete",bl),Vt.listen(this,"progress",r0),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return ye(e)?s&&o?o:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ot}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ha(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Na(this.canvas,this.ctx),this}stop(){return Vt.stop(this),this}resize(e,s){Vt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,e,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Ha(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Pe(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Se(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=ji(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Se(o,r=>{const a=r.options,l=a.id,c=ji(l,a),u=de(a.type,r.dtype);(a.position===void 0||ml(a.position,c)!==ml(r.dposition))&&(a.position=r.dposition),i[l]=!0;let f=null;if(l in n&&n[l].type===u)f=n[l];else{const p=Ot.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(a,e)}),Se(i,(r,a)=>{r||delete n[a]}),Se(n,r=>{tt.configure(this,r,r.options),tt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(vl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||ur(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Ot.getController(a),{datasetElementType:c,dataElementType:u}=We.datasets[a];Object.assign(l,{dataElementType:Ot.getElement(u),datasetElementType:c&&Ot.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&o.indexOf(f)===-1;f.buildOrUpdateElements(p),r=Math.max(+f.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Se(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vl("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{tt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Da(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;a0(e,i,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!Da(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tt.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Se(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,hs(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vt.has(this)?this.attached&&!Vt.running(this)&&Vt.start(this):(this.draw(),bl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resize(n,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n=e._clip,i=!n.disabled,o=c0(e)||this.chartArea,r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&ho(s,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),i&&po(s),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Wn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const o=ry.modes[s];return typeof o=="function"?o(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=ms(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,i);$t(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Vt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Na(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Ei[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),e[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Se(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(s.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Se(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Se(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Bi(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),r=o(s,e),a=n?e:o(e,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(e,i,n,r),l=bb(e),c=l0(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Pe(o.onHover,[e,a,this],this),l&&Pe(o.onClick,[e,a,this],this));const u=!Bi(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}},ee(ts,"defaults",We),ee(ts,"instances",Ei),ee(ts,"overrides",zs),ee(ts,"registry",Ot),ee(ts,"version",i0),ee(ts,"getChart",_l),ts);function yl(){return Se(ea.instances,t=>t._plugins.invalidate())}function u0(t,e,s){const{startAngle:n,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,r,a,n-c,s+c),l>i?(c=i/l,t.arc(o,r,l,s+c,n-c,!0)):t.arc(o,r,i,s+Ne,n-Ne),t.closePath(),t.clip()}function d0(t){return Gr(t,["outerStart","outerEnd","innerStart","innerEnd"])}function f0(t,e,s,n){const i=d0(t.options.borderRadius),o=(s-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(s-Math.min(o,l))*n/2;return Ge(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ge(i.innerStart,0,r),innerEnd:Ge(i.innerEnd,0,r)}}function Vs(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function qi(t,e,s,n,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,f=Math.max(e.outerRadius+n+s-c,0),p=u>0?u+n+s+c:0;let g=0;const m=i-l;if(n){const X=u>0?u-n:0,Q=f>0?f-n:0,se=(X+Q)/2,G=se!==0?m*se/(se+n):m;g=(m-G)/2}const v=Math.max(.001,m*f-s/Re)/f,b=(m-v)/2,$=l+b+g,w=i-b-g,{outerStart:C,outerEnd:T,innerStart:S,innerEnd:E}=f0(e,p,f,w-$),O=f-C,A=f-T,L=$+C/O,B=w-T/A,H=p+S,D=p+E,V=$+S/H,Y=w-E/D;if(t.beginPath(),o){const X=(L+B)/2;if(t.arc(r,a,f,L,X),t.arc(r,a,f,X,B),T>0){const ie=Vs(A,B,r,a);t.arc(ie.x,ie.y,T,B,w+Ne)}const Q=Vs(D,w,r,a);if(t.lineTo(Q.x,Q.y),E>0){const ie=Vs(D,Y,r,a);t.arc(ie.x,ie.y,E,w+Ne,Y+Math.PI)}const se=(w-E/p+($+S/p))/2;if(t.arc(r,a,p,w-E/p,se,!0),t.arc(r,a,p,se,$+S/p,!0),S>0){const ie=Vs(H,V,r,a);t.arc(ie.x,ie.y,S,V+Math.PI,$-Ne)}const G=Vs(O,$,r,a);if(t.lineTo(G.x,G.y),C>0){const ie=Vs(O,L,r,a);t.arc(ie.x,ie.y,C,$-Ne,L)}}else{t.moveTo(r,a);const X=Math.cos(L)*f+r,Q=Math.sin(L)*f+a;t.lineTo(X,Q);const se=Math.cos(B)*f+r,G=Math.sin(B)*f+a;t.lineTo(se,G)}t.closePath()}function h0(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){qi(t,e,s,n,l,i);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%Oe||Oe))}return qi(t,e,s,n,l,i),t.fill(),l}function p0(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,f=l.borderAlign==="inner";if(!c)return;f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(o){qi(t,e,s,n,p,i);for(let g=0;g<o;++g)t.stroke();isNaN(a)||(p=r+(a%Oe||Oe))}f&&u0(t,e,p),o||(qi(t,e,s,n,p,i),t.stroke())}class Pi extends Jt{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.getProps(["x","y"],n),{angle:o,distance:r}=gu(i,{x:e,y:s}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=this.options.spacing/2,m=de(f,l-a)>=Oe||Vn(o,a,l),v=Ut(r,c+p,u+p);return m&&v}getCenterPoint(e){const{x:s,y:n,startAngle:i,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(i+o)/2,f=(r+a+c+l)/2;return{x:s+Math.cos(u)*f,y:n+Math.sin(u)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,r=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Oe?Math.floor(n/Oe):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Re,n||0)),c=i*l;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,h0(e,this,c,o,r),p0(e,this,c,o,r),e.restore()}}ee(Pi,"id","arc"),ee(Pi,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ee(Pi,"defaultRoutes",{backgroundColor:"backgroundColor"});function Ku(t,e,s=e){t.lineCap=de(s.borderCapStyle,e.borderCapStyle),t.setLineDash(de(s.borderDash,e.borderDash)),t.lineDashOffset=de(s.borderDashOffset,e.borderDashOffset),t.lineJoin=de(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=de(s.borderWidth,e.borderWidth),t.strokeStyle=de(s.borderColor,e.borderColor)}function g0(t,e,s){t.lineTo(s.x,s.y)}function m0(t){return t.stepped?Nb:t.tension||t.cubicInterpolationMode==="monotone"?Vb:g0}function Zu(t,e,s={}){const n=t.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=e,l=Math.max(i,r),c=Math.min(o,a),u=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function v0(t,e,s,n){const{points:i,options:o}=e,{count:r,start:a,loop:l,ilen:c}=Zu(i,s,n),u=m0(o);let{move:f=!0,reverse:p}=n||{},g,m,v;for(g=0;g<=c;++g)m=i[(a+(p?c-g:g))%r],!m.skip&&(f?(t.moveTo(m.x,m.y),f=!1):u(t,v,m,p,o.stepped),v=m);return l&&(m=i[(a+(p?c:0))%r],u(t,v,m,p,o.stepped)),!!l}function b0(t,e,s,n){const i=e.points,{count:o,start:r,ilen:a}=Zu(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,f=0,p,g,m,v,b,$;const w=T=>(r+(c?a-T:T))%o,C=()=>{v!==b&&(t.lineTo(u,b),t.lineTo(u,v),t.lineTo(u,$))};for(l&&(g=i[w(0)],t.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=i[w(p)],g.skip)continue;const T=g.x,S=g.y,E=T|0;E===m?(S<v?v=S:S>b&&(b=S),u=(f*u+T)/++f):(C(),t.lineTo(T,S),m=E,f=0,v=b=S),$=S}C()}function dr(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?b0:v0}function _0(t){return t.stepped?__:t.tension||t.cubicInterpolationMode==="monotone"?y_:Cs}function y0(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),Ku(t,e.options),t.stroke(i)}function w0(t,e,s,n){const{segments:i,options:o}=e,r=dr(e);for(const a of i)Ku(t,o,a.style),t.beginPath(),r(t,e,a,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const $0=typeof Path2D=="function";function x0(t,e,s,n){$0&&!e.options.segment?y0(t,e,s,n):w0(t,e,s,n)}class rs extends Jt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;d_(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=S_(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],o=this.points,r=zu(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=_0(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:f,end:p}=r[c],g=o[f],m=o[p];if(g===m){a.push(g);continue}const v=Math.abs((i-g[s])/(m[s]-g[s])),b=l(g,m,v,n.stepped);b[s]=e[s],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,s,n){return dr(this)(e,this,s,n)}path(e,s,n){const i=this.segments,o=dr(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(e,this,a,{start:s,end:s+n-1});return!!r}draw(e,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),x0(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ee(rs,"id","line"),ee(rs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ee(rs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ee(rs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function wl(t,e,s,n){const i=t.options,{[s]:o}=t.getProps([s],n);return Math.abs(e-o)<i.radius+i.hitRadius}class Ai extends Jt{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(s-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return wl(this,e,"x",s)}inYRange(e,s){return wl(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!Wn(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,lr(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ee(Ai,"id","point"),ee(Ai,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ee(Ai,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ju(t,e){const{x:s,y:n,base:i,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-f,u=n+f):(f=o/2,a=s-f,l=s+f,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function as(t,e,s,n){return t?0:Ge(e,s,n)}function k0(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,o=Cu(n);return{t:as(i.top,o.top,0,s),r:as(i.right,o.right,0,e),b:as(i.bottom,o.bottom,0,s),l:as(i.left,o.left,0,e)}}function C0(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=Ps(i),r=Math.min(e,s),a=t.borderSkipped,l=n||ge(i);return{topLeft:as(!l||a.top||a.left,o.topLeft,0,r),topRight:as(!l||a.top||a.right,o.topRight,0,r),bottomLeft:as(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:as(!l||a.bottom||a.right,o.bottomRight,0,r)}}function S0(t){const e=Ju(t),s=e.right-e.left,n=e.bottom-e.top,i=k0(t,s/2,n/2),o=C0(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function Mo(t,e,s,n){const i=e===null,o=s===null,a=t&&!(i&&o)&&Ju(t,n);return a&&(i||Ut(e,a.left,a.right))&&(o||Ut(s,a.top,a.bottom))}function T0(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function E0(t,e){t.rect(e.x,e.y,e.w,e.h)}function Oo(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,o=(t.x+t.w!==s.x+s.w?e:0)-n,r=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+o,h:t.h+r,radius:t.radius}}class Di extends Jt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=S0(this),a=T0(r.radius)?Hn:E0;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,Oo(r,s,o)),e.clip(),a(e,Oo(o,-s,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Oo(o,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return Mo(this,e,s,n)}inXRange(e,s){return Mo(this,e,null,s)}inYRange(e,s){return Mo(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ee(Di,"id","bar"),ee(Di,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ee(Di,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var P0=Object.freeze({__proto__:null,ArcElement:Pi,LineElement:rs,PointElement:Ai,BarElement:Di});const fr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$l=fr.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Qu(t){return fr[t%fr.length]}function ed(t){return $l[t%$l.length]}function A0(t,e){return t.borderColor=Qu(e),t.backgroundColor=ed(e),++e}function D0(t,e){return t.backgroundColor=t.data.map(()=>Qu(e++)),e}function M0(t,e){return t.backgroundColor=t.data.map(()=>ed(e++)),e}function O0(t){let e=0;return(s,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof Es?e=D0(s,e):i instanceof Ln?e=M0(s,e):i&&(e=A0(s,e))}}function xl(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function L0(t){return t&&(t.borderColor||t.backgroundColor)}var R0={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:o}=i;if(!s.forceOverride&&(xl(n)||L0(i)||o&&xl(o)))return;const r=O0(t);n.forEach(r)}};function I0(t,e,s,n,i){const o=i.samples||n;if(o>=s)return t.slice(e,e+s);const r=[],a=(s-2)/(o-2);let l=0;const c=e+s-1;let u=e,f,p,g,m,v;for(r[l++]=t[u],f=0;f<o-2;f++){let b=0,$=0,w;const C=Math.floor((f+1)*a)+1+e,T=Math.min(Math.floor((f+2)*a)+1,s)+e,S=T-C;for(w=C;w<T;w++)b+=t[w].x,$+=t[w].y;b/=S,$/=S;const E=Math.floor(f*a)+1+e,O=Math.min(Math.floor((f+1)*a)+1,s)+e,{x:A,y:L}=t[u];for(g=m=-1,w=E;w<O;w++)m=.5*Math.abs((A-b)*(t[w].y-L)-(A-t[w].x)*($-L)),m>g&&(g=m,p=t[w],v=w);r[l++]=p,u=v}return r[l++]=t[c],r}function z0(t,e,s,n){let i=0,o=0,r,a,l,c,u,f,p,g,m,v;const b=[],$=e+s-1,w=t[e].x,T=t[$].x-w;for(r=e;r<e+s;++r){a=t[r],l=(a.x-w)/T*n,c=a.y;const S=l|0;if(S===u)c<m?(m=c,f=r):c>v&&(v=c,p=r),i=(o*i+a.x)/++o;else{const E=r-1;if(!ye(f)&&!ye(p)){const O=Math.min(f,p),A=Math.max(f,p);O!==g&&O!==E&&b.push({...t[O],x:i}),A!==g&&A!==E&&b.push({...t[A],x:i})}r>0&&E!==g&&b.push(t[E]),b.push(a),u=S,o=0,m=v=c,f=p=g=r}}return b}function td(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function kl(t){t.data.datasets.forEach(e=>{td(e)})}function F0(t,e){const s=e.length;let n=0,i;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Ge(jt(e,o.axis,r).lo,0,s-1)),c?i=Ge(jt(e,o.axis,a).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var B0={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){kl(t);return}const n=t.width;t.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=t.getDatasetMeta(o),c=r||i.data;if(mn([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:f,count:p}=F0(l,c);const g=s.threshold||4*n;if(p<=g){td(i);return}ye(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let m;switch(s.algorithm){case"lttb":m=I0(c,f,p,n,s);break;case"min-max":m=z0(c,f,p,n);break;default:throw new Error("Unsupported decimation algorithm '".concat(s.algorithm,"'"))}i._decimated=m})},destroy(t){kl(t)}};function N0(t,e,s){const n=t.segments,i=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=ta(l,c,i);const u=hr(s,i[l],i[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:i[l],end:i[c]});continue}const f=zu(e,u);for(const p of f){const g=hr(s,o[p.start],o[p.end],p.loop),m=Iu(a,i,g);for(const v of m)r.push({source:v,target:p,start:{[s]:Cl(u,g,"start",Math.max)},end:{[s]:Cl(u,g,"end",Math.min)}})}}return r}function hr(t,e,s,n){if(n)return;let i=e[t],o=s[t];return t==="angle"&&(i=gt(i),o=gt(o)),{property:t,start:i,end:o}}function V0(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=ta(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function ta(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Cl(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function sd(t,e){let s=[],n=!1;return De(t)?(n=!0,s=t):s=V0(t,e),s.length?new rs({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Sl(t){return t&&t.fill!==!1}function W0(t,e,s){let i=t[e].fill;const o=[e];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Be(i))return i;if(r=t[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function H0(t,e,s){const n=Y0(t);if(ge(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Be(i)&&Math.floor(i)===i?U0(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function U0(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function j0(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ge(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function q0(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ge(t)?n=t.value:n=e.getBaseValue(),n}function Y0(t){const e=t.options,s=e.fill;let n=de(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function G0(t){const{scale:e,index:s,line:n}=t,i=[],o=n.segments,r=n.points,a=X0(e,s);a.push(sd({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)K0(i,r[u],a)}return new rs({points:i,options:{}})}function X0(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===e)break;o.hidden||s.unshift(o.dataset)}return s}function K0(t,e,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=Z0(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function Z0(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],f=r[u.start][s],p=r[u.end][s];if(Ut(i,f,p)){a=i===f,l=i===p;break}}return{first:a,last:l,point:n}}class nd{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Oe},e.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,o=e.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function J0(t){const{chart:e,fill:s,line:n}=t;if(Be(s))return Q0(e,s);if(s==="stack")return G0(t);if(s==="shape")return!0;const i=e2(t);return i instanceof nd?i:sd(i,n)}function Q0(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function e2(t){return(t.scale||{}).getPointPositionForValue?s2(t):t2(t)}function t2(t){const{scale:e={},fill:s}=t,n=j0(s,e);if(Be(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function s2(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,r=q0(s,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new nd({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,r));return a}function Lo(t,e,s){const n=J0(e),{line:i,scale:o,axis:r}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};n&&i.points.length&&(ho(t,s),n2(t,{line:i,target:n,above:u,below:f,area:s,scale:o,axis:r}),po(t))}function n2(t,e){const{line:s,target:n,above:i,below:o,area:r,scale:a}=e,l=s._loop?"angle":e.axis;t.save(),l==="x"&&o!==i&&(Tl(t,n,r.top),El(t,{line:s,target:n,color:i,scale:a,property:l}),t.restore(),t.save(),Tl(t,n,r.bottom)),El(t,{line:s,target:n,color:o,scale:a,property:l}),t.restore()}function Tl(t,e,s){const{segments:n,points:i}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],f=i[ta(l,c,i)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(f.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function El(t,e){const{line:s,target:n,property:i,color:o,scale:r}=e,a=N0(s,n,i);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:p=o}={}}=l,g=n!==!0;t.save(),t.fillStyle=p,i2(t,r,g&&hr(i,u,f)),t.beginPath();const m=!!s.pathSegment(t,l);let v;if(g){m?t.closePath():Pl(t,n,f,i);const b=!!n.pathSegment(t,c,{move:m,reverse:!0});v=m&&b,v||Pl(t,n,u,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function i2(t,e,s){const{top:n,bottom:i}=e.chart.chartArea,{property:o,start:r,end:a}=s||{};o==="x"&&(t.beginPath(),t.rect(r,n,a-r,i-n),t.clip())}function Pl(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var o2={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof rs&&(l={visible:t.isDatasetVisible(r),index:r,fill:H0(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=W0(i,r,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&Lo(t.ctx,a,o))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Sl(o)&&Lo(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Sl(n)||s.drawTime!=="beforeDatasetDraw"||Lo(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Al=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},r2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Dl extends Jt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=qe(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Al(n,o);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=e;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((m,v)=>{const b=n+s/2+o.measureText(m.text).width;(v===0||c[c.length-1]+b+2*a>r)&&(f+=u,c[c.length-(v>0?0:1)]=0,g+=u,p++),l[v]={left:0,top:g,row:p,width:b,height:i},c[c.length-1]+=b+a}),f}_fitCols(e,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let f=a,p=0,g=0,m=0,v=0;return this.legendItems.forEach((b,$)=>{const{itemWidth:w,itemHeight:C}=a2(n,s,o,b,i);$>0&&g+C+2*a>u&&(f+=p+a,c.push({width:p,height:g}),m+=p+a,v++,p=g=0),l[$]={left:m,top:g,col:v,width:w,height:C},p=Math.max(p,w),g+=C+a}),f+=p,c.push({width:p,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=Ks(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=et(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=et(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=et(n,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=et(n,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ho(e,this),this._draw(),po(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=e,a=We.color,l=Ks(e.rtl,this.left,this.width),c=qe(r.font),{padding:u}=r,f=c.size,p=f/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:v,itemHeight:b}=Al(r,f),$=function(E,O,A){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;i.save();const L=de(A.lineWidth,1);if(i.fillStyle=de(A.fillStyle,a),i.lineCap=de(A.lineCap,"butt"),i.lineDashOffset=de(A.lineDashOffset,0),i.lineJoin=de(A.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=de(A.strokeStyle,a),i.setLineDash(de(A.lineDash,[])),r.usePointStyle){const B={radius:v*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:L},H=l.xPlus(E,m/2),D=O+p;ku(i,B,H,D,r.pointStyleWidth&&m)}else{const B=O+Math.max((f-v)/2,0),H=l.leftForLtr(E,m),D=Ps(A.borderRadius);i.beginPath(),Object.values(D).some(V=>V!==0)?Hn(i,{x:H,y:B,w:m,h:v,radius:D}):i.rect(H,B,m,v),i.fill(),L!==0&&i.stroke()}i.restore()},w=function(E,O,A){Fs(i,A.text,E,O+b/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},C=this.isHorizontal(),T=this._computeTitleHeight();C?g={x:et(o,this.left+u,this.right-n[0]),y:this.top+u+T,line:0}:g={x:this.left+u,y:et(o,this.top+T+u,this.bottom-s[0].height),line:0},Ou(this.ctx,e.textDirection);const S=b+u;this.legendItems.forEach((E,O)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;const A=i.measureText(E.text).width,L=l.textAlign(E.textAlign||(E.textAlign=r.textAlign)),B=m+p+A;let H=g.x,D=g.y;l.setWidth(this.width),C?O>0&&H+B+u>this.right&&(D=g.y+=S,g.line++,H=g.x=et(o,this.left+u,this.right-n[g.line])):O>0&&D+S>this.bottom&&(H=g.x=H+s[g.line].width+u,g.line++,D=g.y=et(o,this.top+T+u,this.bottom-s[g.line].height));const V=l.x(H);if($(V,D,E),H=Pb(L,H+m+p,C?H+B:this.right,e.rtl),w(l.x(H),D,E),C)g.x+=B+u;else if(typeof E.text!="string"){const Y=c.lineHeight;g.y+=id(E,Y)}else g.y+=S}),Lu(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=qe(s.font),i=st(s.padding);if(!s.display)return;const o=Ks(e.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=et(e.align,f,this.right-p);else{const m=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);u=c+et(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const g=et(a,f,f+p);r.textAlign=o.textAlign(Yr(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,Fs(r,s.text,g,u,n)}_computeTitleHeight(){const e=this.options.title,s=qe(e.font),n=st(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,o;if(Ut(e,this.left,this.right)&&Ut(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Ut(e,i.left,i.left+i.width)&&Ut(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!u2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=r2(i,n);i&&!o&&Pe(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!o&&Pe(s.onHover,[e,n,this],this)}else n&&Pe(s.onClick,[e,n,this],this)}}function a2(t,e,s,n,i){const o=l2(n,t,e,s),r=c2(i,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function l2(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),e+s.size/2+n.measureText(i).width}function c2(t,e,s){let n=t;return typeof e.text!="string"&&(n=id(e,s)),n}function id(t,e){const s=t.text?t.text.length+.5:0;return e*s}function u2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var d2={id:"legend",_element:Dl,start(t,e,s){const n=t.legend=new Dl({ctx:t.ctx,options:s,chart:t});tt.configure(t,n,s),tt.addBox(t,n)},stop(t){tt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;tt.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=st(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class sa extends Jt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=De(n.text)?n.text.length:1;this._padding=st(n.padding);const o=i*qe(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,u,f;return this.isHorizontal()?(u=et(a,n,o),f=s+e,c=o-n):(r.position==="left"?(u=n+e,f=et(a,i,s),l=Re*-.5):(u=o-e,f=et(a,s,i),l=Re*.5),c=i-s),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=qe(s.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Fs(e,s.text,0,0,n,{color:s.color,maxWidth:l,rotation:c,textAlign:Yr(s.align),textBaseline:"middle",translation:[r,a]})}}function f2(t,e){const s=new sa({ctx:t.ctx,options:e,chart:t});tt.configure(t,s,e),tt.addBox(t,s),t.titleBlock=s}var h2={id:"title",_element:sa,start(t,e,s){f2(t,s)},stop(t){const e=t.titleBlock;tt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;tt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hi=new WeakMap;var p2={id:"subtitle",start(t,e,s){const n=new sa({ctx:t.ctx,options:s,chart:t});tt.configure(t,n,s),tt.addBox(t,n),hi.set(t,n)},stop(t){tt.removeBox(t,hi.get(t)),hi.delete(t)},beforeUpdate(t,e,s){const n=hi.get(t);tt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bn={average(t){if(!t.length)return!1;let e,s,n=0,i=0,o=0;for(e=0,s=t.length;e<s;++e){const r=t[e].element;if(r&&r.hasValue()){const a=r.tooltipPosition();n+=a.x,i+=a.y,++o}}return{x:n/o,y:i/o}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=rr(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Mt(t,e){return e&&(De(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function g2(t,e){const{element:s,datasetIndex:n,index:i}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:t,label:r,parsed:o.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Ml(t,e){const s=t.chart.ctx,{body:n,footer:i,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=qe(e.bodyFont),c=qe(e.titleFont),u=qe(e.footerFont),f=o.length,p=i.length,g=n.length,m=st(e.padding);let v=m.height,b=0,$=n.reduce((T,S)=>T+S.before.length+S.lines.length+S.after.length,0);if($+=t.beforeBody.length+t.afterBody.length,f&&(v+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),$){const T=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*T+($-g)*l.lineHeight+($-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let w=0;const C=function(T){b=Math.max(b,s.measureText(T).width+w)};return s.save(),s.font=c.string,Se(t.title,C),s.font=l.string,Se(t.beforeBody.concat(t.afterBody),C),w=e.displayColors?r+2+e.boxPadding:0,Se(n,T=>{Se(T.before,C),Se(T.lines,C),Se(T.after,C)}),w=0,s.font=u.string,Se(t.footer,C),s.restore(),b+=m.width,{width:b,height:v}}function m2(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function v2(t,e,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(t==="left"&&i+o+r>e.width||t==="right"&&i-o-r<0)return!0}function b2(t,e,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),v2(c,t,e,s)&&(c="center"),c}function Ol(t,e,s){const n=s.yAlign||e.yAlign||m2(t,s);return{xAlign:s.xAlign||e.xAlign||b2(t,e,s,n),yAlign:n}}function _2(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function y2(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function Ll(t,e,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:g}=Ps(r);let m=_2(e,a);const v=y2(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,p)+i:a==="right"&&(m+=Math.max(f,g)+i),{x:Ge(m,0,n.width-e.width),y:Ge(v,0,n.height-e.height)}}function pi(t,e,s){const n=st(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Rl(t){return Mt([],Wt(t))}function w2(t,e,s){return ms(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Il(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const od={beforeTitle:Nt,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Nt,beforeBody:Nt,beforeLabel:Nt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ye(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Nt,afterBody:Nt,beforeFooter:Nt,footer:Nt,afterFooter:Nt};function rt(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?od[e].call(s,n):i}class pr extends Jt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new Fu(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=w2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=rt(n,"beforeTitle",this,e),o=rt(n,"title",this,e),r=rt(n,"afterTitle",this,e);let a=[];return a=Mt(a,Wt(i)),a=Mt(a,Wt(o)),a=Mt(a,Wt(r)),a}getBeforeBody(e,s){return Rl(rt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return Se(e,o=>{const r={before:[],lines:[],after:[]},a=Il(n,o);Mt(r.before,Wt(rt(a,"beforeLabel",this,o))),Mt(r.lines,rt(a,"label",this,o)),Mt(r.after,Wt(rt(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(e,s){return Rl(rt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=rt(n,"beforeFooter",this,e),o=rt(n,"footer",this,e),r=rt(n,"afterFooter",this,e);let a=[];return a=Mt(a,Wt(i)),a=Mt(a,Wt(o)),a=Mt(a,Wt(r)),a}_createItems(e){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(g2(this.chart,s[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,n))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,n))),Se(a,u=>{const f=Il(e.callbacks,u);i.push(rt(f,"labelColor",this,u)),o.push(rt(f,"labelPointStyle",this,u)),r.push(rt(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=bn[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=Ml(this,n),c=Object.assign({},a,l),u=Ol(this.chart,n,c),f=Ll(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const o=this.getCaretPosition(e,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=Ps(a),{x:p,y:g}=e,{width:m,height:v}=s;let b,$,w,C,T,S;return o==="center"?(T=g+v/2,i==="left"?(b=p,$=b-r,C=T+r,S=T-r):(b=p+m,$=b+r,C=T-r,S=T+r),w=b):(i==="left"?$=p+Math.max(l,u)+r:i==="right"?$=p+m-Math.max(c,f)-r:$=this.caretX,o==="top"?(C=g,T=C-r,b=$-r,w=$+r):(C=g+v,T=C+r,b=$+r,w=$-r),S=C),{x1:b,x2:$,x3:w,y1:C,y2:T,y3:S}}drawTitle(e,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=Ks(n.rtl,this.x,this.width);for(e.x=pi(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=qe(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=o,f=qe(o.bodyFont),p=pi(this,"left",o),g=i.x(p),m=l<f.lineHeight?(f.lineHeight-l)/2:0,v=s.y+m;if(o.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},$=i.leftForLtr(g,c)+c/2,w=v+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,lr(e,b,$,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,lr(e,b,$,w)}else{e.lineWidth=ge(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const b=i.leftForLtr(g,c-u),$=i.leftForLtr(i.xPlus(g,1),c-u-2),w=Ps(r.borderRadius);Object.values(w).some(C=>C!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Hn(e,{x:b,y:v,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Hn(e,{x:$,y:v+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(b,v,c,l),e.strokeRect(b,v,c,l),e.fillStyle=r.backgroundColor,e.fillRect($,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,f=qe(n.bodyFont);let p=f.lineHeight,g=0;const m=Ks(n.rtl,this.x,this.width),v=function(A){s.fillText(A,m.x(e.x+g),e.y+p/2),e.y+=p+o},b=m.textAlign(r);let $,w,C,T,S,E,O;for(s.textAlign=r,s.textBaseline="middle",s.font=f.string,e.x=pi(this,b,n),s.fillStyle=n.bodyColor,Se(this.beforeBody,v),g=a&&b!=="right"?r==="center"?c/2+u:c+2+u:0,T=0,E=i.length;T<E;++T){for($=i[T],w=this.labelTextColors[T],s.fillStyle=w,Se($.before,v),C=$.lines,a&&C.length&&(this._drawColorBox(s,e,T,m,n),p=Math.max(f.lineHeight,l)),S=0,O=C.length;S<O;++S)v(C[S]),p=f.lineHeight;Se($.after,v)}g=0,p=f.lineHeight,Se(this.afterBody,v),e.y-=o}drawFooter(e,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=Ks(n.rtl,this.x,this.width);for(e.x=pi(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=qe(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:m}=Ps(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+f,l),r==="top"&&this.drawCaret(e,s,n,i),s.lineTo(a+c-p,l),s.quadraticCurveTo(a+c,l,a+c,l+p),r==="center"&&o==="right"&&this.drawCaret(e,s,n,i),s.lineTo(a+c,l+u-m),s.quadraticCurveTo(a+c,l+u,a+c-m,l+u),r==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(a+g,l+u),s.quadraticCurveTo(a,l+u,a,l+u-g),r==="center"&&o==="left"&&this.drawCaret(e,s,n,i),s.lineTo(a,l+f),s.quadraticCurveTo(a,l,a+f,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=bn[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Ml(this,e),l=Object.assign({},r,this._size),c=Ol(s,e,l),u=Ll(e,l,c,s);(i._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=st(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,i,s),Ou(e,s.textDirection),o.y+=r.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),Lu(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Bi(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(e,o,s,n),a=this._positionChanged(r,e),l=s||!Bi(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,n,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return s;const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,s){const{caretX:n,caretY:i,options:o}=this,r=bn[o.position].call(this,e,s);return r!==!1&&(n!==r.x||i!==r.y)}}ee(pr,"positioners",bn);var $2={id:"tooltip",_element:pr,positioners:bn,afterInit(t,e,s){s&&(t.tooltip=new pr({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:od},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},x2=Object.freeze({__proto__:null,Colors:R0,Decimation:B0,Filler:o2,Legend:d2,SubTitle:p2,Title:h2,Tooltip:$2});const k2=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function C2(t,e,s,n){const i=t.indexOf(e);if(i===-1)return k2(t,e,s,n);const o=t.lastIndexOf(e);return i!==o?s:i}const S2=(t,e)=>t===null?null:Ge(Math.round(t),0,e);function zl(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class gr extends Ns{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:o}of s)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ye(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:C2(n,e,de(s,e),this._addedLabels),S2(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=s;r++)i.push({value:r});return i}getLabelForValue(e){return zl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ee(gr,"id","category"),ee(gr,"defaults",{ticks:{callback:zl}});function T2(t,e){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,g=o||1,m=u-1,{min:v,max:b}=e,$=!ye(r),w=!ye(a),C=!ye(c),T=(b-v)/(f+1);let S=Oa((b-v)/m/g)*g,E,O,A,L;if(S<1e-14&&!$&&!w)return[{value:v},{value:b}];L=Math.ceil(b/S)-Math.floor(v/S),L>m&&(S=Oa(L*S/m/g)*g),ye(l)||(E=Math.pow(10,l),S=Math.ceil(S*E)/E),i==="ticks"?(O=Math.floor(v/S)*S,A=Math.ceil(b/S)*S):(O=v,A=b),$&&w&&o&&$b((a-r)/o,S/1e3)?(L=Math.round(Math.min((a-r)/S,u)),S=(a-r)/L,O=r,A=a):C?(O=$?r:O,A=w?a:A,L=c-1,S=(A-O)/L):(L=(A-O)/S,Dn(L,Math.round(L),S/1e3)?L=Math.round(L):L=Math.ceil(L));const B=Math.max(La(S),La(O));E=Math.pow(10,ye(l)?B:l),O=Math.round(O*E)/E,A=Math.round(A*E)/E;let H=0;for($&&(p&&O!==r?(s.push({value:r}),O<r&&H++,Dn(Math.round((O+H*S)*E)/E,r,Fl(r,T,t))&&H++):O<r&&H++);H<L;++H)s.push({value:Math.round((O+H*S)*E)/E});return w&&p&&A!==a?s.length&&Dn(s[s.length-1].value,a,Fl(a,T,t))?s[s.length-1].value=a:s.push({value:a}):(!w||A===a)&&s.push({value:A}),s}function Fl(t,e,{horizontal:s,minRotation:n}){const i=Et(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class Yi extends Ns{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ye(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(e){const l=Lt(i),c=Lt(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(i-l)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(i," ticks. Limiting to 1000.")),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=T2(i,o);return e.bounds==="ticks"&&pu(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Zn(e,this.chart.options.locale,this.options.ticks.format)}}class mr extends Yi{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Be(e)?e:0,this.max=Be(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Et(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ee(mr,"id","linear"),ee(mr,"defaults",{ticks:{callback:fo.formatters.numeric}});const jn=t=>Math.floor(os(t)),ws=(t,e)=>Math.pow(10,jn(t)+e);function Bl(t){return t/Math.pow(10,jn(t))===1}function Nl(t,e,s){const n=Math.pow(10,s),i=Math.floor(t/n);return Math.ceil(e/n)-i}function E2(t,e){const s=e-t;let n=jn(s);for(;Nl(t,e,n)>10;)n++;for(;Nl(t,e,n)<10;)n--;return Math.min(n,jn(t))}function P2(t,{min:e,max:s}){e=pt(t.min,e);const n=[],i=jn(e);let o=E2(e,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,o)),p=pt(t.min,Math.round((l+u+f*Math.pow(10,o))*r)/r);for(;p<s;)n.push({value:p,major:Bl(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(o++,f=2,r=o>=0?1:r),p=Math.round((l+u+f*Math.pow(10,o))*r)/r;const g=pt(t.max,p);return n.push({value:g,major:Bl(g),significand:f}),n}class vr extends Ns{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Yi.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return Be(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Be(e)?Math.max(0,e):null,this.max=Be(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Be(this._userMin)&&(this.min=e===ws(this.min,0)?ws(this.min,-1):ws(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const o=a=>n=e?n:a,r=a=>i=s?i:a;n===i&&(n<=0?(o(1),r(10)):(o(ws(n,-1)),r(ws(i,1)))),n<=0&&o(ws(i,-1)),i<=0&&r(ws(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=P2(s,this);return e.bounds==="ticks"&&pu(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Zn(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=os(e),this._valueRange=os(this.max)-os(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(os(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}ee(vr,"id","logarithmic"),ee(vr,"defaults",{ticks:{callback:fo.formatters.logarithmic,major:{enabled:!0}}});function br(t){const e=t.ticks;if(e.display&&t.display){const s=st(e.backdropPadding);return de(e.font&&e.font.size,We.font.size)+s.height}return 0}function A2(t,e,s){return s=De(s)?s:[s],{w:Bb(t,e.string,s),h:s.length*e.lineHeight}}function Vl(t,e,s,n,i){return t===n||t===i?{start:e-s/2,end:e+s/2}:t<n||t>i?{start:e-s,end:e}:{start:e,end:e+s}}function D2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],i=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?Re/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),f=qe(c.font),p=A2(t.ctx,f,t._pointLabels[l]);n[l]=p;const g=gt(t.getIndexAngle(l)+a),m=Math.round(jr(g)),v=Vl(m,u.x,p.w,0,180),b=Vl(m,u.y,p.h,90,270);M2(s,e,g,v,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=O2(t,n,i)}function M2(t,e,s,n,i){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/r,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function O2(t,e,s){const n=[],i=t._pointLabels.length,o=t.options,r=br(o)/2,a=t.drawingArea,l=o.pointLabels.centerPointLabels?Re/i:0;for(let c=0;c<i;c++){const u=t.getPointPosition(c,a+r+s[c],l),f=Math.round(jr(gt(u.angle+Ne))),p=e[c],g=I2(u.y,p.h,f),m=L2(f),v=R2(u.x,p.w,m);n.push({x:u.x,y:g,textAlign:m,left:v,top:g,right:v+p.w,bottom:g+p.h})}return n}function L2(t){return t===0||t===180?"center":t<180?"left":"right"}function R2(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function I2(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function z2(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const o=n.setContext(t.getPointLabelContext(i)),r=qe(o.font),{x:a,y:l,textAlign:c,left:u,top:f,right:p,bottom:g}=t._pointLabelItems[i],{backdropColor:m}=o;if(!ye(m)){const v=Ps(o.borderRadius),b=st(o.backdropPadding);s.fillStyle=m;const $=u-b.left,w=f-b.top,C=p-u+b.width,T=g-f+b.height;Object.values(v).some(S=>S!==0)?(s.beginPath(),Hn(s,{x:$,y:w,w:C,h:T,radius:v}),s.fill()):s.fillRect($,w,C,T)}Fs(s,t._pointLabels[i],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function rd(t,e,s,n){const{ctx:i}=t;if(s)i.arc(t.xCenter,t.yCenter,e,0,Oe);else{let o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),i.lineTo(o.x,o.y)}}function F2(t,e,s,n,i){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),rd(t,s,r,n),o.closePath(),o.stroke(),o.restore())}function B2(t,e,s){return ms(t,{label:s,index:e,type:"pointLabel"})}class _n extends Yi{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=st(br(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Be(e)&&!isNaN(e)?e:0,this.max=Be(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/br(this.options))}generateTickLabels(e){Yi.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const i=Pe(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?D2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,i){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,i))}getIndexAngle(e){const s=Oe/(this._pointLabels.length||1),n=this.options.startAngle||0;return gt(e*s+Et(n))}getDistanceFromCenterForValue(e){if(ye(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ye(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return B2(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const i=this.getIndexAngle(e)-Ne+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:i,bottom:o}=this._pointLabelItems[e];return{left:s,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),rd(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:i,border:o}=s,r=this._pointLabels.length;let a,l,c;if(s.pointLabels.display&&z2(this,r),i.display&&this.ticks.forEach((u,f)=>{if(f!==0){l=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(f),g=i.setContext(p),m=o.setContext(p);F2(this,g,l,r,m)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:p}=u;!p||!f||(e.lineWidth=p,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!s.reverse)return;const c=n.setContext(this.getContext(l)),u=qe(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const f=st(c.backdropPadding);e.fillRect(-r/2-f.left,-o-u.size/2-f.top,r+f.width,u.size+f.height)}Fs(e,a.label,0,-o,u,{color:c.color})}),e.restore()}drawTitle(){}}ee(_n,"id","radialLinear"),ee(_n,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ee(_n,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ee(_n,"descriptors",{angleLines:{_fallback:"grid"}});const mo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},lt=Object.keys(mo);function N2(t,e){return t-e}function Wl(t,e){if(ye(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),Be(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(Qs(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function Hl(t,e,s,n){const i=lt.length;for(let o=lt.indexOf(t);o<i-1;++o){const r=mo[lt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-e)/(a*r.size))<=n)return lt[o]}return lt[i-1]}function V2(t,e,s,n,i){for(let o=lt.length-1;o>=lt.indexOf(s);o--){const r=lt[o];if(mo[r].common&&t._adapter.diff(i,n,r)>=e-1)return r}return lt[s?lt.indexOf(s):0]}function W2(t){for(let e=lt.indexOf(t)+1,s=lt.length;e<s;++e)if(mo[lt[e]].common)return lt[e]}function Ul(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=qr(s,e),o=s[n]>=e?s[n]:s[i];t[o]=!0}}function H2(t,e,s,n){const i=t._adapter,o=+i.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(e[l].major=!0);return e}function jl(t,e,s){const n=[],i={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:H2(t,n,i,s)}class qn extends Ns{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new ty._date(e.adapters.date);i.init(s),An(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Wl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Be(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=Be(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=Sb(i,o,r);return this._unit=s.unit||(n.autoSkip?Hl(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):V2(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:W2(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),jl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;s=Ge(s,0,r),n=Ge(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||Hl(o.minUnit,s,n,this._getLabelCapacity(s)),a=de(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Qs(l)||l===!0,u={};let f=s,p,g;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":r),e.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,g=0;p<n;p=+e.add(p,a,r),g++)Ul(u,p,m);return(p===n||i.bounds==="ticks"||g===1)&&Ul(u,p,m),Object.keys(u).sort((v,b)=>v-b).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(e,r)}_tickFormatFunction(e,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return Pe(r,[e,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=n[s],g=c&&f&&p&&p.major;return this._adapter.format(e,i||(g?f:u))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Et(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,jl(this,[e],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(Wl(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vu(e.sort(N2))}}ee(qn,"id","time"),ee(qn,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function gi(t,e,s){let n=0,i=t.length-1,o,r,a,l;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=jt(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=jt(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[i]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class _r extends qn{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=gi(s,this.min),this._tableRange=gi(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)u=i[r+1],l=i[r-1],c=i[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(gi(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return gi(this._table,n*this._tableRange+this._minPos,!0)}}ee(_r,"id","timeseries"),ee(_r,"defaults",qn.defaults);var U2=Object.freeze({__proto__:null,CategoryScale:gr,LinearScale:mr,LogarithmicScale:vr,RadialLinearScale:_n,TimeScale:qn,TimeSeriesScale:_r});const j2=[ey,P0,x2,U2];ea.register(...j2);const q2=q({props:{data:{type:Object,required:!0},type:{type:String,default:"bar"}},setup(t){const{id:e}=he("bar-chart"),s=Object.keys(t.data),n="MM/YY",i=Ds(s.shift()||"",n),o=Ds(s.pop()||"",n);return we(()=>{const r=document.getElementById(e),a=r==null?void 0:r.getContext("2d");if(!a)return;const l="#B6CFFB",c="#3558A2";let u={data:Object.values(t.data),type:t.type};if(t.type==="bar"){const f=u;f.barPercentage=1,f.categoryPercentage=.9,f.backgroundColor=f.data.map((p,g)=>g===f.data.length-1?c:l),u=f}new ea(a,{data:{labels:Object.keys(t.data),datasets:[u]},options:{animation:!1,responsive:!0,locale:gf,plugins:{legend:{display:!1},tooltip:{enabled:!1}},elements:{bar:{backgroundColor:l,borderRadius:2,hoverBackgroundColor:c},line:{backgroundColor:c,borderColor:c,borderJoinStyle:"round",tension:.35},point:{radius:0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}},layout:{padding:{top:1.5}}}})}),{id:e,startDate:i,endDate:o}}}),Y2=["id"],G2={class:"fr-grid-row justify-between"},X2={class:"text-xxs fr-m-0 text-mention-grey"},K2={class:"text-xxs fr-m-0 text-mention-grey"};function Z2(t,e,s,n,i,o){return y(),k(J,null,[d("canvas",{id:t.id,width:"120",height:"30"},null,8,Y2),d("div",G2,[d("p",X2,_(t.startDate),1),d("p",K2,_(t.endDate),1)])],64)}const J2=pe(q2,[["render",Z2]]),Q2=q({props:{author:{type:Object,required:!0},badge:Boolean}}),e3={class:"fr-text--sm fr-mb-0"},t3={key:0,class:"fr-badge fr-ml-3v"};function s3(t,e,s,n,i,o){return y(),k("span",e3,[W(_(t.author.first_name+" "+t.author.last_name)+" ",1),t.badge?(y(),k("span",t3,_(t.$t("Admin")),1)):z("",!0)])}const Gi=pe(Q2,[["render",s3]]),n3=q({emits:["click"],props:{primary:{type:Boolean,default:!1}}});function i3(t,e,s,n,i,o){return y(),k("button",{type:"button",class:Te(["fr-btn",{"fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-add-line fr-btn--icon-left":!t.primary}]),onClick:e[0]||(e[0]=Me(r=>t.$emit("click"),["prevent"]))},_(t.$t("Start a new discussion")),3)}const yr=pe(n3,[["render",i3]]),o3=q({expose:["displayForm"],components:{ThreadCreateButton:yr,Author:Gi,RequiredExplanation:wc},props:{showCreateButton:{type:Boolean,default:!1},subjectId:{type:String,required:!0},subjectClass:{type:String,required:!0},onSubmit:{type:Function,required:!0}},setup(t){const e=M(!1),s=M(!1),n=M(""),i=M("");return{loading:e,showForm:s,title:n,comment:i,user:Sn,displayForm:()=>{ps(),s.value=!0},hideForm:()=>{s.value=!1},submit:()=>{e.value=!0;const l={title:n.value,comment:i.value,subject:{id:t.subjectId,class:t.subjectClass}};t.onSubmit(l).finally(()=>{var c;e.value=!1,s.value=!1,n.value=i.value="",(c=document.querySelector("[data-no-discussion]"))==null||c.remove()})}}}}),r3={class:"thread-create fr-mt-2w"},a3={key:1,class:"bg-contrast-grey"},l3={class:"fr-grid-row fr-grid-row--middle fr-py-2w fr-px-3w"},c3={class:"fr-col fr-h6 fr-mb-0"},u3={class:"thread-comment fr-pb-3w fr-px-3w"},d3={class:"fr-input-group"},f3={for:"thread-title",class:"fr-label required"},h3=["placeholder"],p3={class:"fr-input-group"},g3={for:"thread-comment",class:"fr-label required"},m3=["placeholder"],v3={class:"fr-grid-row justify-between fr-grid-row--middle"},b3={class:"text-mention-grey fr-text--sm fr-mb-0"},_3=["value"];function y3(t,e,s,n,i,o){const r=me("ThreadCreateButton"),a=me("RequiredExplanation"),l=me("Author");return y(),k("div",r3,[t.showCreateButton&&!t.showForm?(y(),N(r,{key:0,onClick:t.displayForm},null,8,["onClick"])):z("",!0),t.showForm?(y(),k("div",a3,[d("div",l3,[d("div",c3,_(t.$t("New discussion")),1),d("div",null,[d("button",{class:"fr-btn--close fr-btn text-grey-500 fr-mr-0",onClick:e[0]||(e[0]=(...c)=>t.hideForm&&t.hideForm(...c))},_(t.$t("Close")),1)])]),d("div",u3,[d("form",{class:"form fr-p-0",onSubmit:e[3]||(e[3]=Me((...c)=>t.submit&&t.submit(...c),["prevent"]))},[x(a),d("div",d3,[d("label",f3,_(t.$t("Title")),1),wt(d("input",{class:"fr-input",type:"text",id:"thread-title","onUpdate:modelValue":e[1]||(e[1]=c=>t.title=c),placeholder:t.$t("Title"),required:!0},null,8,h3),[[ds,t.title]])]),d("div",p3,[d("label",g3,_(t.$t("Message")),1),wt(d("textarea",{id:"thread-comment","onUpdate:modelValue":e[2]||(e[2]=c=>t.comment=c),placeholder:t.$t("Comment"),class:"fr-input",required:!0},null,8,m3),[[ds,t.comment]])]),d("footer",v3,[d("span",b3,[W(_(t.$t("Reply as"))+" ",1),x(l,{author:t.user},null,8,["author"])]),d("input",{type:"submit",value:t.$t("Submit"),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500"},null,8,_3)])],32)])])):z("",!0)])}const ad=pe(o3,[["render",y3]]),w3=q({components:{Author:Gi,RequiredExplanation:wc},emits:["close"],props:{onSubmit:{type:Function,required:!0}},setup(t){const{t:e}=ce(),{toast:s}=xt(),n=M(!1),i=M("");return{comment:i,loading:n,submit:()=>{n.value=!0,t.onSubmit(i.value).catch(r=>{s.error(e("Error sending response"))}).finally(()=>{n.value=!1,i.value=""})},user:Sn}}}),$3={class:"thread-reply"},x3={class:"fr-grid-row fr-grid-row--middle fr-mb-3v"},k3={class:"fr-col fr-text--bold fr-mb-0"},C3={class:"fr-col-auto"},S3={class:"fr-input-group"},T3={class:"fr-label required",for:"textarea"},E3={class:"fr-grid-row justify-between fr-grid-row--middle"},P3={class:"text-mention-grey fr-text--sm fr-m-0"},A3=["value"];function D3(t,e,s,n,i,o){const r=me("RequiredExplanation"),a=me("Author");return y(),k("div",$3,[d("div",x3,[d("h4",k3,_(t.$t("Reply to the discussion")),1),d("div",C3,[d("button",{class:"fr-btn--close fr-btn text-grey-500 fr-mr-0",onClick:e[0]||(e[0]=l=>t.$emit("close"))},_(t.$t("Close")),1)])]),d("form",{class:"form fr-p-0",onSubmit:e[2]||(e[2]=Me((...l)=>t.submit&&t.submit(...l),["prevent"]))},[x(r),d("div",S3,[d("label",T3,_(t.$t("Comment")),1),wt(d("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.comment=l),required:"",class:"fr-input",id:"textarea"},null,512),[[ds,t.comment]])]),d("footer",E3,[d("p",P3,[W(_(t.$t("Reply as"))+" ",1),x(a,{author:t.user},null,8,["author"])]),d("input",{type:"submit",value:t.$t("Submit"),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500"},null,8,A3)])],32)])}const M3=pe(w3,[["render",D3]]),ql=q({__name:"MarkAsNoSpam",props:{url:{},spam:{}},setup(t){const e=t,s=()=>Ve.delete(e.url).then(()=>{window.location.reload()}),n=j(()=>e.spam&&e.spam.status&&e.spam.status==="potential_spam"&&Sn&&Sn.roles&&Sn.roles.includes("admin"));return(i,o)=>n.value?(y(),k("button",{key:0,class:"fr-btn fr-btn--sm fr-btn--icon-right fr-icon-feedback-fill",onClick:s},_(i.$t("Mark as no spam")),1)):z("",!0)}}),O3=["id"],L3={class:"fr-grid-row fr-grid-row--middle justify-between fr-py-2w fr-px-3w no-wrap wrap-md"},R3={key:0,class:"fr-col-auto text-default-warning fr-text--bold fr-pr-2w fr-my-0"},I3={class:"fr-col fr-mx-3v fr-mx-md-0 fr-h6 fr-mb-0"},z3={class:"fr-col-auto text-align-right"},F3=["id","data-clipboard-text"],B3={class:"fr-grid-row fr-grid-row--gutters"},N3={class:"fr-col-auto"},V3={class:"fr-col"},W3={class:"fr-my-0"},H3={class:"fr-text--sm text-mention-grey fr-m-0"},U3={class:"white-space-pre-wrap overflow-wrap-anywhere"},j3={class:"fr-my-0"},q3={key:0,class:"fr-py-2w fr-px-3w"},Y3={class:"fr-py-2w fr-px-3w"},G3={key:1,class:"text-grey-380"},X3={class:"fr-px-1v"},Yl=q({__name:"Thread",props:{thread:{}},setup(t){const e=t,{t:s}=ce(),n=M(!1),i=M([...e.thread.discussion]),o=M(!!e.thread.closed),r=j(()=>"discussions/"+e.thread.id),a=j(()=>{const u="#/"+r.value;return window.location.origin+window.location.pathname+u}),l=()=>{ps(),n.value=!0},c=u=>Ve.post("/discussions/"+e.thread.id+"/",{comment:u}).then(f=>f.data).then(f=>{i.value=f.discussion,n.value=!1});return(u,f)=>(y(),k("div",{class:"bg-contrast-grey fr-mt-2w",id:r.value},[d("header",L3,[u.thread.closed?(y(),k("p",R3,[d("span",null,_(h(s)("Discussion closed")),1)])):z("",!0),d("h3",I3,_(u.thread.title),1),d("div",z3,[x(ql,{url:"discussions/".concat(u.thread.id,"/spam"),spam:u.thread.spam,class:"fr-mr-3v"},null,8,["url","spam"]),d("button",{id:u.thread.id+"-copy","data-clipboard-text":a.value,class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-right fr-icon-links-fill"},_(h(s)("Copy discussion permalink")),9,F3)])]),d("div",null,[x(qd,{name:"list"},{default:P(()=>[o.value?z("",!0):(y(!0),k(J,{key:0},ve(i.value,(p,g)=>(y(),k("article",{class:"thread-comment fr-py-3w fr-px-3w fr-pr-5w",key:"comment-".concat(u.thread.id,"-").concat(g)},[d("div",B3,[d("div",N3,[x(h(vc),{user:p.posted_by},null,8,["user"])]),d("div",V3,[d("p",W3,[x(Gi,{author:p.posted_by,badge:!1},null,8,["author"])]),d("p",H3,_(h(Ds)(p.posted_on)),1),x(h(ou),{class:"fr-mt-3v"},{default:P(()=>[d("div",U3,[d("p",j3,_(p.content),1)])]),_:2},1024),x(ql,{url:"discussions/".concat(u.thread.id,"/comments/").concat(g,"/spam"),spam:p.spam,class:"fr-mt-3v"},null,8,["url","spam"])])])]))),128))]),_:1}),o.value?(y(),k("div",q3,[d("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",onClick:f[0]||(f[0]=Me(p=>o.value=!1,["prevent"]))},_(h(s)("See {n} messages",i.value.length)),1)])):z("",!0)]),d("footer",Y3,[!u.thread.closed&&!h(so)?(y(),k(J,{key:0},[n.value?(y(),N(M3,{key:1,subjectId:u.thread.id,onSubmit:c,onClose:f[1]||(f[1]=p=>n.value=!1)},null,8,["subjectId"])):(y(),k("button",{key:0,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-right fr-icon-arrow-right-s-line",onClick:Me(l,["stop"])},_(h(s)("Reply")),1))],64)):z("",!0),u.thread.closed?(y(),k("div",G3,[W(_(h(s)("The discussion was closed by"))+" ",1),d("strong",X3,[x(Gi,{author:u.thread.closed_by},null,8,["author"])]),W(" "+_(h(s)("on"))+" "+_(h(Ds)(u.thread.closed)),1)])):z("",!0)])],8,O3))}}),K3={components:{ContentLoader:gs}};function Z3(t,e,s,n,i,o){const r=me("ContentLoader");return y(),N(r,{width:280,height:180,speed:2,primaryColor:"#7c7c7c",secondaryColor:"#2d2d2d"},{default:P(()=>e[0]||(e[0]=[d("rect",{x:"104",y:"41",rx:"3",ry:"3",width:"162",height:"10"},null,-1),d("rect",{x:"105",y:"63",rx:"3",ry:"3",width:"139",height:"5"},null,-1),d("rect",{x:"26",y:"99",rx:"5",ry:"5",width:"60",height:"60"},null,-1),d("rect",{x:"104",y:"113",rx:"3",ry:"3",width:"162",height:"10"},null,-1),d("rect",{x:"105",y:"135",rx:"3",ry:"3",width:"139",height:"5"},null,-1),d("rect",{x:"26",y:"24",rx:"5",ry:"5",width:"60",height:"60"},null,-1)])),_:1})}const J3=pe(K3,[["render",Z3]]);function Q3(t){const e=M(null),s=()=>{const i=window.location.hash;for(const o of t){let[r,a,l]=o.exec(i)||[];if(a)return e.value=a}e.value=null},n=()=>{history.pushState(null,""," "),window.dispatchEvent(new HashChangeEvent("hashchange"))};return we(()=>{s(),window.addEventListener("hashchange",()=>s())}),{id:dc(e),resetHash:n}}const ew={key:0,class:"fr-grid-row fr-grid-row--middle"},tw={class:"fr-col"},sw={id:"community-discussions",class:"subtitle subtitle--uppercase"},nw={key:0,class:"fr-col-12 fr-col-md-6 fr-grid-row fr-grid-row--gutters fr-grid-row--middle fr-grid-row--right"},iw={class:"fr-col-auto"},ow=["aria-label"],rw=["value","selected"],aw={class:"fr-col-auto"},lw={key:1,class:"fr-grid-row fr-grid-row--center"},cw={key:0},uw={class:"fr-grid-row fr-grid-row--middle justify-between"},dw={class:"text-decoration-underline"},fw={key:1},hw={class:"fr-mb-5v"},Ro=5,pw=q({__name:"Threads",props:{subjectId:{},subjectClass:{}},setup(t,{expose:e}){const s=t,{t:n}=ce(),{toast:i}=xt(),o=M([]),r=/discussions\/([a-f0-9]{24})-?([0-9]+)?$/i,a=/discussion-([a-f0-9]{24})-?([0-9]+)?$/i,{id:l,resetHash:c}=Q3([r,a]),u=M(null),f=M(1),p=M(0),g=M(!0),m=[{name:n("Discussion creation"),key:"-created"},{name:n("Last reply"),key:"-discussion.posted_on"}],v=M(m[0]),b=M(null),$=()=>{w(l.value)},w=B=>{if(B)return g.value=!0,setTimeout(()=>{b.value&&b.value.scrollIntoView({behavior:"smooth"})},500),Ve.get("/discussions/"+B).then(H=>H.data).then(H=>{H&&(u.value=H,p.value=1)}).catch(()=>{i.error(n("An error occurred while fetching the discussion ")+B),C(1)}).finally(()=>{g.value=!1})},C=(B=1,H=!1)=>(B=_e(B),g.value=!0,H&&setTimeout(()=>{b.value&&b.value.scrollIntoView({behavior:"smooth"})},500),Ve.get("/discussions/",{params:{page:B,for:s.subjectId,sort:v.value.key,page_size:Ro}}).then(D=>D.data).then(D=>{D.data&&(o.value=D.data,p.value=D.total)}).catch(()=>{i.error(n("An error occurred while fetching discussions")),o.value=[]}).finally(()=>{g.value=!1})),T=M(null),S=()=>{E(),T.value&&T.value.$el.scrollIntoView()},E=()=>{T.value&&T.value.displayForm()},O=B=>Ve.post("/discussions/",B).then(()=>{f.value=1,C(1,!0)}).catch(H=>i.error(n("An error occurred while creating the discussion "),H)),A=(B,H=!0)=>{f.value=B,C(B,H)},L=B=>{v.value=B,C(f)};return we(()=>{C()}),_t(()=>{l.value&&$()}),Tt(p,B=>{const H=document.querySelectorAll(".discussions-count");H&&H.forEach(D=>D.innerHTML=B.toFixed(0))}),e({startThread:S}),(B,H)=>(y(),k("section",{class:"discussions-wrapper",ref_key:"top",ref:b},[p.value?(y(),k("div",ew,[d("div",tw,[d("h2",sw,_(h(n)("{n} discussions",p.value)),1)]),h(l)?z("",!0):(y(),k("div",nw,[d("div",iw,[wt(d("select",{name:"sortBy",id:"sortBy","aria-label":h(n)("Sort discussions by"),onChange:H[0]||(H[0]=D=>L(v.value)),"onUpdate:modelValue":H[1]||(H[1]=D=>v.value=D),class:"fr-select fr-select--no-border fr-select--blue"},[(y(),k(J,null,ve(m,D=>d("option",{value:D,selected:D===v.value},_(D.name),9,rw)),64))],40,ow),[[Tr,v.value]])]),d("div",aw,[x(yr,{onClick:E})])]))])):(y(),k("div",lw,[x(yr,{class:"fr-col--bottom",primary:!0,onClick:E})])),x(to,{mode:"out-in"},{default:P(()=>[g.value?(y(),N(J3,{key:0,class:"fr-mt-2w"})):(y(),k(J,{key:1},[h(l)?(y(),k("div",cw,[x(h($e),{type:"secondary",color:"success",class:"fr-mt-2w","data-cy":"threadFromURL"},{default:P(()=>[d("div",uw,[W(_(h(n)("You are seeing a specific discussion about this dataset."))+" ",1),d("button",{class:"fr-btn--close fr-btn fr-mr-0",onClick:H[2]||(H[2]=Me((...D)=>h(c)&&h(c)(...D),["prevent"]))},_(h(n)("Close")),1)])]),_:1}),u.value?(y(),N(Yl,{key:0,thread:u.value},null,8,["thread"])):(y(),N(h($e),{key:1,type:"secondary",color:"warning",class:"fr-mt-2w"},{default:P(()=>[W(_(B.$t("This discussion doesn't exist or was deleted.")),1)]),_:1})),d("button",{class:"nav-link nav-link--no-icon text-decoration-none fr-link fr-mt-9v fr-link--icon-left fr-icon-arrow-right-s-line",onClick:H[3]||(H[3]=Me((...D)=>h(c)&&h(c)(...D),["prevent"]))},[d("span",dw,_(h(n)("See all discussions about this dataset")),1)])])):(y(),k("div",fw,[h(so)?z("",!0):(y(),N(ad,{key:0,ref_key:"createThread",ref:T,onSubmit:O,subjectId:B.subjectId,subjectClass:B.subjectClass},null,8,["subjectId","subjectClass"])),d("ul",hw,[(y(!0),k(J,null,ve(o.value,D=>(y(),k("li",null,[x(Yl,{thread:D},null,8,["thread"])]))),256))]),p.value>Ro?(y(),N(h(Bs),{key:1,page:f.value,"page-size":Ro,"total-results":p.value,onChange:A},null,8,["page","total-results"])):z("",!0)]))],64))]),_:1})],512))}}),gw=["href"],mw={class:"fr-grid-row fr-grid-row--middle"},vw=q({__name:"MenuSearchOption",props:{icon:{},query:{},link:{},type:{}},setup(t){return(e,s)=>{const n=me("i18n-t");return y(),k("a",{class:"fr-nav__link unstyled",href:e.link},[d("div",mw,[d("span",{class:Te(["fr-icon--sm align-[-1px] fr-mr-1w",e.icon]),"aria-hidden":"true"},null,2),e.query?(y(),N(n,{key:0,keypath:"Search {query} in {type}",class:"fr-col",tag:"div",scope:"global"},{query:P(()=>[d("em",null,_(e.query),1)]),type:P(()=>[d("strong",null,_(e.type),1)]),_:1})):(y(),N(n,{key:1,keypath:"Start typing to search in X",class:"fr-col",tag:"div",scope:"global"},{type:P(()=>[d("strong",null,_(e.type),1)]),_:1})),s[0]||(s[0]=d("div",{"aria-hidden":"true",class:"fr-col-auto"},[d("span",{class:"fr-icon-arrow-right-s-line fr-icon--sm","aria-hidden":"true"})],-1))])],8,gw)}}});function ld(t){const e=j(()=>"".concat(mf,"?q=").concat(_e(t))),s=j(()=>"".concat(vf,"?q=").concat(_e(t))),n=j(()=>"".concat(Ko,"?q=").concat(_e(t))),i=j(()=>"".concat(bf,"?q=").concat(_e(t)));return{dataserviceUrl:s,datasetUrl:e,organizationUrl:n,reuseUrl:i}}function bw(){const t=on("collapse"),e=M(!1),s=()=>e.value=!0,n=()=>e.value=!1,i=()=>e.value=!e.value;let o=null;const r=(f,p,g)=>{const m=_e(f),v=_e(p),b=_e(g);o=c(m,v,b),document.body.addEventListener("pointerup",o,!0)},a=()=>{o&&document.body.removeEventListener("pointerup",o,!0)},l=(f,p)=>f?!f.contains(p):!0,c=(f,p,g)=>m=>{const v=m.target;l(f,v)&&l(p,v)&&l(g,v)&&n()};return{expanded:e,uid:t,show:s,hide:n,toggle:i,registerBackgroundEvent:r,removeBackgroundEvent:a,handleKeyPressForCollapse:f=>{switch(f.key){case"Alt":case"Control":case"Shift":case"CapsLock":break;case"Escape":case"Tab":n();break;default:s()}}}}function _w(t){const e=M(),s=j(()=>_e(t).find(p=>p.id===e.value)),n=p=>e.value===p,i=p=>{if(p===void 0)return r(0);e.value=p},o=()=>{e.value=void 0},r=p=>{let g=_e(t);g[p]&&i(g[p].id)},a=()=>{let p=0;e.value&&(p=_e(t).findIndex(g=>g.id===e.value),p++,p===_e(t).length&&(p=0)),r(p)},l=()=>{const p=_e(t).length-1;let g=p;e.value&&(g=_e(t).findIndex(m=>m.id===e.value),g--,g<0&&(g=p)),r(g)};return{select:i,selected:e,selectedOption:s,isSelected:n,focusOut:o,handleKeyPressForActiveDescendant:(p,g=!1)=>{switch(p.key){case"ArrowDown":!g&&!p.altKey&&a();break;case"ArrowUp":l();break;case"ArrowLeft":case"ArrowRight":case"Home":case"End":case"Escape":o();break}},ALREADY_MOVED_DOWN:!0,NOT_MOVED_YET:!1}}function cd(t,e){const s=M(null),n=M(null),i=M(null),{expanded:o,handleKeyPressForCollapse:r,hide:a,registerBackgroundEvent:l,removeBackgroundEvent:c,show:u,uid:f}=bw(),{focusOut:p,handleKeyPressForActiveDescendant:g,isSelected:m,select:v,selected:b,selectedOption:$,NOT_MOVED_YET:w,ALREADY_MOVED_DOWN:C}=_w(t);function T(){_e(e)&&(u(),v(b.value))}function S(){var L;o.value?E():((L=s.value)==null||L.focus(),T())}function E(){$.value&&(window.location.href=$.value.link)}function O(L){T();let B=w;o.value||(B=C),r(L),g(L,B)}function A(){p(),a()}return we(()=>{l(s,n,i)}),Gt(()=>{c()}),{buttonRef:i,expanded:o,focusOut:p,handleFocusOut:A,handleKeyDown:O,handleKeyPressForActiveDescendant:g,handleKeyPressForCollapse:r,hide:a,inputRef:s,isSelected:m,listRef:n,registerBackgroundEvent:l,removeBackgroundEvent:c,searchSelectedOption:E,select:v,selected:b,show:u,showAndFocus:S,showAndSelectIfQuery:T,uid:f,NOT_MOVED_YET:w,ALREADY_MOVED_DOWN:C}}const yw=["id"],ww=["for","id"],$w=["placeholder","aria-controls","aria-expanded","id","aria-activedescendant"],xw=["aria-controls","aria-expanded"],kw=["id","aria-labelledby"],Cw={class:"fr-menu__list",role:"listbox"},Sw=["id","aria-selected"],Tw=q({__name:"MenuSearch",setup(t){const{t:e}=ce(),s=M(""),{datasetUrl:n,dataserviceUrl:i,reuseUrl:o,organizationUrl:r}=ld(s),{id:a}=he("search"),l=j(()=>"".concat(a,"-input")),c=j(()=>"".concat(a,"-label")),u=M([{id:"dataset-option",icon:"fr-icon-database-line",type:e("datasets"),link:n},{id:"dataservice-option",icon:"fr-icon-code-s-slash-line",type:e("dataservices"),link:i},{id:"reuse-option",icon:"fr-icon-line-chart-line",type:e("reuses"),link:o},{id:"organization-option",icon:"fr-icon-government-line",type:e("organizations"),link:r}]),{buttonRef:f,expanded:p,handleFocusOut:g,handleKeyDown:m,inputRef:v,isSelected:b,listRef:$,searchSelectedOption:w,selected:C,showAndFocus:T,showAndSelectIfQuery:S,uid:E}=cd(u,s);return(O,A)=>(y(),k("div",{id:h(a),class:"fr-col fr-search-bar wrap",role:"search"},[d("label",{class:"fr-label",for:l.value,id:c.value},_(h(e)("Search for data")),9,ww),wt(d("input",{class:"fr-input fr-col",placeholder:h(e)("Search"),ref_key:"inputRef",ref:v,autocomplete:"off",role:"combobox","aria-autocomplete":"list","aria-controls":h(E),"aria-expanded":h(p),id:l.value,"data-cy":"search-input","aria-activedescendant":h(C),name:"q","onUpdate:modelValue":A[0]||(A[0]=L=>s.value=L),onClickCapture:A[1]||(A[1]=Me((...L)=>h(S)&&h(S)(...L),["stop"])),onKeydown:A[2]||(A[2]=(...L)=>h(m)&&h(m)(...L)),onKeypress:A[3]||(A[3]=Er(Me((...L)=>h(w)&&h(w)(...L),["prevent"]),["enter"])),onBlur:A[4]||(A[4]=(...L)=>h(g)&&h(g)(...L))},null,40,$w),[[ds,s.value]]),d("button",{type:"button",ref_key:"buttonRef",ref:f,class:"fr-btn",tabindex:"-1","aria-controls":h(E),"aria-expanded":h(p),onClickCapture:A[5]||(A[5]=Me((...L)=>h(T)&&h(T)(...L),["prevent","stop"]))},_(h(e)("Search")),41,xw),d("div",{class:"fr-menu fr-collapse autocomplete",id:h(E),ref_key:"listRef",ref:$,role:"listbox","aria-labelledby":c.value,onMousedown:A[6]||(A[6]=Me(()=>{},["prevent"]))},[d("ul",Cw,[(y(!0),k(J,null,ve(u.value,L=>(y(),k("li",{key:L.id,id:L.id,role:"option","aria-selected":h(b)(L.id)},[x(vw,{icon:L.icon,query:s.value,type:L.type,link:L.link},null,8,["icon","query","type","link"])],8,Sw))),128))])],40,kw)],8,yw))}}),Ew=q({emits:["change"],props:{value:{type:String,required:!0},placeholder:{type:String,required:!0}},setup(t,{emit:e}){const{id:s}=he("search-input"),n=M(t.value),i=M(null),o=()=>{var l;(l=i.value)==null||l.focus({preventScroll:!0})},r=()=>{n.value===""&&e("change",n.value)},a=l=>{const c=l.target;e("change",c.value)};return we(async()=>{await fc(),o()}),_t(()=>{n.value=t.value}),{id:s,input:i,onDelete:r,onInput:a,queryString:n}}}),Pw={class:"fr-search-bar fr-search-bar--lg w-100"},Aw=["for"],Dw=["id","value","aria-label","placeholder"],Mw={class:"fr-btn",type:"submit"};function Ow(t,e,s,n,i,o){return y(),k("section",Pw,[d("label",{class:"fr-label",for:t.id},_(t.$t("Search")),9,Aw),d("input",{id:t.id,type:"search",name:"q",value:t.queryString,onInput:e[0]||(e[0]=(...r)=>t.onInput&&t.onInput(...r)),onKeydown:e[1]||(e[1]=Er((...r)=>t.onDelete&&t.onDelete(...r),["delete"])),ref:"input",class:"fr-input","aria-label":t.placeholder||t.$t("Search..."),placeholder:t.placeholder||t.$t("Search..."),"data-cy":"search-input","data-testid":"search-input"},null,40,Dw),d("button",Mw,_(t.$t("Search")),1)])}const Lw=pe(Ew,[["render",Ow]]),Qn=q({__name:"card-lg",props:{dataset:{},style:{type:[Boolean,null,String,Object,Array]},showDescription:{type:Boolean,default:!0}},setup(t){return(e,s)=>{var n;return y(),N(h(zg),{dataset:e.dataset,style:nn(e.style),showDescription:e.showDescription,"dataset-url":e.dataset.page,"organization-url":(n=e.dataset.organization)==null?void 0:n.page},null,8,["dataset","style","showDescription","dataset-url","organization-url"])}}}),Rw=q({components:{ContentLoader:gs},setup(t){const e=Tn.resources_default_page_size,s=88;return{pageSize:e,height:s,getPosition:(i,o)=>(i-1)*s+o}}}),Iw=["y"],zw=["y"],Fw=["y"],Bw=["y"],Nw=["y"];function Vw(t,e,s,n,i,o){const r=me("ContentLoader");return y(),N(r,{width:1200,height:t.height*t.pageSize,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>[(y(!0),k(J,null,ve(t.pageSize,a=>(y(),k(J,null,[d("rect",{x:"20",y:t.getPosition(a,24),rx:"4",ry:"4",width:"16",height:"16"},null,8,Iw),d("rect",{x:"52",y:t.getPosition(a,20),rx:"4",ry:"4",width:"536",height:"22"},null,8,zw),d("rect",{x:"52",y:t.getPosition(a,52),rx:"4",ry:"4",width:"374",height:"16"},null,8,Fw),d("rect",{x:"1052",y:t.getPosition(a,30),rx:"4",ry:"4",width:"80",height:"20"},null,8,Bw),d("rect",{x:"1154",y:t.getPosition(a,20),rx:"20",ry:"20",width:"40",height:"40"},null,8,Nw)],64))),256))]),_:1},8,["height"])}const na=pe(Rw,[["render",Vw]]),ud=q({__name:"SchemaSelect",props:{allOption:{default:""},isBlue:{type:Boolean,default:!1},showExplanation:{type:Boolean,default:!0},values:{}},emits:["change"],setup(t,{emit:e}){const s=e,n=Ac().then(o=>o.map(r=>({label:r.name,value:r.name}))),i=o=>s("change",o);return(o,r)=>(y(),N(Ae,{placeholder:o.$t("Schema"),explanation:o.showExplanation?o.$t("Data schemas describe data models: what are the fields, how are data shown, what are the available values, etc. See schema.data.gouv.fr"):"",searchPlaceholder:o.$t("Search a schema..."),allOption:o.allOption?o.allOption:o.$t("All schemas"),initialOptions:h(n),values:o.values,onChange:i,isBlue:o.isBlue},null,8,["placeholder","explanation","searchPlaceholder","allOption","initialOptions","values","isBlue"]))}});function dd(){return $c("datasets/licenses/")}const Ww="/_themes/gouvfr/assets/magnifying_glass.svg",Hw=q({props:{actionsAlignment:{type:String,default:""},heading:{type:String,default:"h2"},icon:{type:String,required:!0},stretchHeight:{type:Boolean,default:!1},title:{type:String,required:!0},content:{type:String},type:{type:String,default:"default"}},setup(t){const e=j(()=>"fr-grid-row--".concat(_f(t.actionsAlignment))),s=j(()=>t.type==="primary"?"bg-contrast-blue-cumulus":"bg-white"),n=j(()=>t.type==="primary"),i=j(()=>t.type==="default");return{alignment:e,isDefault:i,isPrimary:n,type:s}}}),Uw={class:"fr-col-auto"},jw=["src"],qw={class:"fr-col-12 fr-col-sm fr-grid-row flex-direction-column justify-between"},Yw={class:"fr-mb-1w"},Gw={key:0,class:"fr-my-1w"};function Xw(t,e,s,n,i,o){return y(),k("div",{class:Te(["rounded-xxs fr-p-3w fr-grid-row flex-direction-column",{"h-100":t.stretchHeight,[t.type]:t.type,"border border-default-grey":!t.isPrimary}])},[d("div",{class:Te(["fr-col fr-grid-row fr-grid-row--gutters",{"text-blue-400":t.isPrimary}])},[d("div",Uw,[d("img",{class:"w-100",src:t.icon,alt:""},null,8,jw)]),d("div",qw,[d("div",Yw,[(y(),N(xn(t.heading),{class:Te(["fr-m-0 fr-mb-1w",{"fr-text--bold fr-text--md":t.isPrimary,"fr--h5":!t.isPrimary}])},{default:P(()=>[W(_(t.title),1)]),_:1},8,["class"])),t.content?(y(),k("p",Gw,_(t.content),1)):Ke(t.$slots,"default",{key:1})]),d("div",{class:Te(["fr-grid-row",t.alignment])},[Ke(t.$slots,"actions")],2)])],2)],2)}const ia=pe(Hw,[["render",Xw]]),Kw={class:"fr-mt-1v fr-mb-3v"},Zw=["href"],Xi=q({__name:"NoSearchResults",emits:["resetFilters"],setup(t){const{t:e}=ce();return(s,n)=>(y(),N(ia,{title:h(e)("Didn't find what you are looking for?"),icon:h(Ww),type:"primary"},{actions:P(()=>[d("button",{onClick:n[0]||(n[0]=i=>s.$emit("resetFilters")),class:"fr-btn fr-btn--secondary"},_(h(e)("Reset filters")),1),h(pa)?(y(),k("a",{key:0,href:h(pa),class:"fr-btn fr-btn--tertiary-no-outline fr-btn--icon-left fr-icon-lightbulb-line fr-ml-1w"},_(h(e)("Check our forum")),9,Zw)):z("",!0)]),default:P(()=>[d("p",Kw,[W(_(h(e)("Try resetting the filters to broaden your search.")),1),n[1]||(n[1]=d("br",null,null,-1)),W(" "+_(h(e)("You can also check ongoing requests and submit your own on our forum dedicated to data discovery and openness.")),1)])]),_:1},8,["title","icon"]))}}),Jw={class:"fr-grid-row fr-mt-1w fr-mt-md-5v"},Qw={class:"fr-col-12 fr-col-md-4 fr-col-lg-3"},e4={class:"fr-sidemenu","aria-labelledby":"fr-sidemenu-title"},t4={class:"fr-sidemenu__inner"},s4={class:"fr-sidemenu__btn fr-mt-1w",hidden:"","aria-controls":"fr-sidemenu-wrapper","aria-expanded":"false"},n4={class:"fr-collapse",id:"fr-sidemenu-wrapper"},i4={class:"fr-sidemenu__title fr-mb-3v",id:"fr-sidemenu-title"},o4={class:"fr-grid-row fr-grid-row--gutters"},r4={key:0,class:"fr-col-12"},a4={class:"fr-col-12"},l4={class:"fr-col-12"},c4={class:"fr-col-12"},u4={class:"fr-col-12"},d4={class:"fr-col-12"},f4={class:"fr-col-12"},h4={key:1,class:"fr-col-12 fr-mb-3w text-align-center"},p4=["href"],g4={key:0,class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-between fr-pb-1w"},m4={class:"fr-col-auto fr-my-0",role:"status"},v4={class:"fr-col-auto fr-grid-row fr-grid-row--middle"},b4={for:"sort-search",class:"fr-col-auto fr-text--sm fr-m-0 fr-mr-1w"},_4={class:"fr-col"},y4={value:""},w4=["value"],$4={key:0},x4={key:1},k4={class:"fr-mt-1w border-default-grey border-top relative z-2"},C4={key:2,class:"fr-mt-2w"},Io=20,mi=!0,S4=!1,T4=q({inheritAttrs:!1,__name:"Search",props:{downloadLink:{default:""},disableFirstSearch:{type:Boolean,default:!1},organization:{default:""},sorts:{default:()=>[]}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=new URL(window.location.href),o=new URLSearchParams(i.search),r=xc(),a=dd(),l=yf().filter(U=>U.type!==gc&&U.type!==wf).map(U=>({label:U.label,value:U.type})),c=Promise.resolve(l),u=M(""),{reuseUrl:f}=ld(u),p=M(""),g=M([]),m=M(0),v=M(1),b=M({organization:e.organization}),$=M(!1),w=M(null),C=M(null),T=M(null),S=(U=mi)=>{let I=new URL(window.location.href);const F={...G.value};e.organization&&(delete F.organization,delete F.organization_badge),I.search=new URLSearchParams(F).toString(),U&&window.history.pushState(null,"",I);let R=document.querySelectorAll("[data-q]");for(let Z of R)Z.href=f.value},E=$f((U=mi)=>{$.value=!0,w.value&&w.value.cancel(),w.value=Dr(),an.get("/datasets/search/",{cancelToken:w.value.token,params:{...G.value,page_size:Io}}).then(I=>I.data).then(I=>{g.value=I.data,m.value=I.total,$.value=!1,S(U)}).catch(I=>{rn.isCancel(I)||(n.error(s("Error getting search results.")),$.value=!1)})},Zo),O=U=>{u.value=U,v.value=1,E()},A=(U,I)=>{I?b.value[U]=I:b.value[U]=void 0,e.organization&&(b.value.organization=e.organization,b.value.organization_badge=void 0),v.value=1,E()},L=()=>{v.value=1,E()},B=U=>{v.value=U,E(),H()},H=()=>{T.value&&T.value.scrollIntoView({behavior:"smooth"})},D=({page:U=1,sort:I="",...F},R=mi)=>{b.value={...F,organization:e.organization||F.organization},v.value=U,p.value=I,E(R)},V=()=>{D({})},Y=()=>{X(),H()},X=({q:U="",...I}={},F=mi)=>{u.value=U,D(I,F)},Q=j(()=>Object.keys(b.value).some(I=>{var F;return((F=b.value[I])==null?void 0:F.length)&&(e.organization?I!=="organization":!0)})),se=j(()=>e.sorts.map(U=>({value:U.order=="asc"?U.value:"-"+U.value,label:U.label}))),G=j(()=>{let U={},I;for(I in b.value){const F=b.value[I];F&&(U[I]=F)}return v.value>1&&(U.page=v.value.toString()),u.value&&(U.q=u.value),p.value&&(U.sort=p.value),U}),ie=o.get("q");ie&&(u.value=ie,o.delete("q"));const le=o.get("page");le&&(v.value=parseInt(le),o.delete("page"));const oe=o.get("sort");return oe&&(p.value=oe,o.delete("sort")),b.value={...Object.fromEntries(o),organization:e.organization||o.get("organization")||""},e.disableFirstSearch?$.value=!0:E(),we(()=>{if(e.disableFirstSearch&&C.value){let U=C.value.dataset.totalResults;if(U&&parseInt(U)>0){let I=C.value.dataset.results;I&&(g.value=JSON.parse(I)),m.value=JSON.parse(U)}$.value=!1}addEventListener("popstate",()=>{const U=new URL(window.location.href),I={};for(const[F,R]of U.searchParams)I[F]=R;X(I,S4)})}),(U,I)=>(y(),k("form",{class:"fr-pt-3v",onSubmit:I[9]||(I[9]=Me((...F)=>h(E)&&h(E)(...F),["prevent"]))},[d("div",{class:"fr-grid-row fr-grid-row--middle justify-between",ref_key:"searchRef",ref:T,"data-cy":"search"},[x(Lw,{onChange:O,value:u.value,placeholder:h(s)("Ex. 2022 presidential election")},null,8,["value","placeholder"])],512),d("div",Jw,[d("div",Qw,[d("nav",e4,[d("div",t4,[d("button",s4,_(h(s)("Filter results")),1),d("div",n4,[d("div",i4,_(h(s)("Filters")),1),d("div",o4,[U.organization?z("",!0):(y(),k("div",r4,[x(Ae,{placeholder:h(s)("Organizations"),searchPlaceholder:h(s)("Search an organization..."),allOption:h(s)("All organizations"),listUrl:"/organizations/?sort=-followers",suggestUrl:"/organizations/suggest/",entityUrl:"/organizations/",values:b.value.organization,onChange:I[0]||(I[0]=F=>A("organization",F)),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"]),x(Ae,{initialOptions:h(c),placeholder:h(s)("Organization type"),searchPlaceholder:h(s)("Search an organization type..."),allOption:h(s)("All types"),values:b.value.organization_badge,onChange:I[1]||(I[1]=F=>A("organization_badge",F)),isBlue:!0},null,8,["initialOptions","placeholder","searchPlaceholder","allOption","values"])])),d("div",a4,[x(Ae,{placeholder:h(s)("Tags"),searchPlaceholder:h(s)("Search a tag..."),allOption:h(s)("All tags"),suggestUrl:"/tags/suggest/",values:b.value.tag,onChange:I[2]||(I[2]=F=>A("tag",F)),minimumCharacterBeforeSuggest:2,isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"])]),d("div",l4,[x(Ae,{placeholder:h(s)("Formats"),searchPlaceholder:h(s)("Search a format..."),allOption:h(s)("All formats"),listUrl:h(r),values:b.value.format,onChange:I[3]||(I[3]=F=>A("format",F)),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","listUrl","values"])]),d("div",c4,[x(Ae,{placeholder:h(s)("Licenses"),explanation:h(s)("Licenses define reuse rules for published datasets. See page data.gouv.fr/licences"),searchPlaceholder:h(s)("Search a license..."),allOption:h(s)("All licenses"),listUrl:h(a),values:b.value.license,onChange:I[4]||(I[4]=F=>A("license",F)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","listUrl","values"])]),d("div",u4,[x(ud,{values:b.value.schema||"",onChange:I[5]||(I[5]=F=>A("schema",F)),isBlue:!0},null,8,["values"])]),d("div",d4,[x(Ae,{placeholder:h(s)("Spatial coverage"),explanation:h(s)("Geographic areas covered by data and for which they are relevant."),searchPlaceholder:h(s)("Search a spatial coverage..."),allOption:h(s)("All coverages"),suggestUrl:"/spatial/zones/suggest/",entityUrl:"/spatial/zone/",values:b.value.geozone,onChange:I[6]||(I[6]=F=>A("geozone",F)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","values"])]),d("div",f4,[x(Ae,{placeholder:h(s)("Spatial granularity"),explanation:h(s)("Finest level of geographic detail covered by data."),searchPlaceholder:h(s)("Search a granularity..."),allOption:h(s)("All granularities"),listUrl:"/spatial/granularities/",values:b.value.granularity,onChange:I[7]||(I[7]=F=>A("granularity",F)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","values"])]),Q.value||U.downloadLink?(y(),k("div",h4,[Q.value?(y(),k("button",{key:0,class:"fr-btn fr-btn--secondary fr-icon-close-circle-line fr-btn--icon-left justify-center w-100",onClick:V},_(h(s)("Reset filters")),1)):U.downloadLink?(y(),k("a",{key:1,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-download-line fr-btn--icon-left justify-center w-100 matomo_download",href:U.downloadLink},_(h(s)("Download list as CSV")),9,p4)):z("",!0)])):z("",!0)])])])])]),d("section",us({class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-mt-2w fr-mt-md-0 search-results",ref_key:"resultsRef",ref:C},U.$attrs),[m.value?(y(),k("div",g4,[d("p",m4,_(h(s)("{count} results",m.value)),1),d("div",v4,[d("label",b4,_(h(s)("Sort by:")),1),d("div",_4,[wt(d("select",{id:"sort-search",class:"fr-select fr-select--blue",name:"sort","onUpdate:modelValue":I[8]||(I[8]=F=>p.value=F),onChange:L},[d("option",y4,_(h(s)("Relevance")),1),(y(!0),k(J,null,ve(se.value,({value:F,label:R})=>(y(),k("option",{value:F},_(R),9,w4))),256))],544),[[Tr,p.value]])])])])):z("",!0),x(to,{mode:"out-in"},{default:P(()=>[$.value?(y(),k("div",$4,[x(na)])):g.value.length?(y(),k("div",x4,[d("ul",k4,[(y(!0),k(J,null,ve(g.value,F=>(y(),k("li",{key:F.id},[x(Qn,{dataset:F},null,8,["dataset"])]))),128))]),m.value>Io?(y(),N(h(Bs),{key:0,page:v.value,pageSize:Io,totalResults:m.value,onChange:B,class:"fr-mt-2w"},null,8,["page","totalResults"])):(y(),N(Xi,{key:1,onResetFilters:Y}))])):(y(),k("div",C4,[x(Xi,{onResetFilters:Y})]))]),_:1})],16)])],32))}}),E4=["disabled","aria-controls"],P4=["id"],A4={class:"fr-container fr-container--fluid fr-container-md"},D4={class:"fr-grid-row fr-grid-row--center"},M4={class:"fr-col-12 fr-col-md-8 fr-col-lg-6"},O4={class:"fr-modal__body"},L4={class:"fr-modal__header"},R4=["aria-controls"],I4={class:"fr-modal__content"},z4={class:"fr-modal__footer"},F4={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},B4=q({__name:"DeleteButton",props:{url:{}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=so,o=on("delete-modal"),r=o+"-title";function a(){return ps(),Ve.delete(e.url).then(()=>window.location.reload()).catch(()=>n.error(s("An error occured during the deletion.")))}return(l,c)=>(y(),k(J,null,[d("button",{type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",disabled:h(i),"data-fr-opened":"false","aria-controls":h(o)},_(h(s)("Delete")),9,E4),(y(),N(Yn,{to:"body"},[d("dialog",{"aria-labelledby":r,id:h(o),class:"fr-modal",role:"dialog"},[d("div",A4,[d("div",D4,[d("div",M4,[d("div",O4,[d("div",L4,[d("button",{class:"fr-btn--close fr-btn","aria-controls":h(o)},_(h(s)("Close")),9,R4)]),d("div",I4,[d("h1",{id:r,class:"fr-modal__title"},[c[0]||(c[0]=d("span",{class:"fr-icon-delete-line fr-icon--lg"},null,-1)),W(" "+_(h(s)("Are you sure ?")),1)]),d("p",null,_(h(s)("The content will be permanently deleted.")),1)]),d("div",z4,[d("div",F4,[d("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:a},_(h(s)("Delete")),1)])])])])])])],8,P4)]))],64))}});function N4(t){return Ve.delete("users/".concat(t,"/"))}function V4(t){return Ve.delete("users/".concat(t,"/?no_mail=true"))}const W4=["disabled","aria-controls"],H4=["id"],U4={class:"fr-container fr-container--fluid fr-container-md"},j4={class:"fr-grid-row fr-grid-row--center"},q4={class:"fr-col-12 fr-col-md-8 fr-col-lg-6"},Y4={class:"fr-modal__body"},G4={class:"fr-modal__header"},X4=["aria-controls"],K4={class:"fr-modal__content"},Z4={class:"fr-grid-row fr-grid-row--middle fr-mb-2w"},J4={class:"avatar fr-mr-1w"},Q4=["src"],e5={class:"fr-modal__footer"},t5={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},s5=q({__name:"DeleteUserButton",props:{id:{},full_name:{},avatar_thumbnail:{}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=so,o=on("delete-modal"),r=o+"-title";function a(){return N4(e.id).then(()=>window.location.reload()).catch(()=>n.error(s("An error occured during the deletion.")))}function l(){return V4(e.id).then(()=>window.location.reload()).catch(()=>n.error(s("An error occured during the deletion.")))}return(c,u)=>(y(),k(J,null,[d("button",{type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",disabled:h(i),"data-fr-opened":"false","aria-controls":h(o)},_(h(s)("Delete")),9,W4),(y(),N(Yn,{to:"body"},[d("dialog",{"aria-labelledby":r,id:h(o),class:"fr-modal",role:"dialog"},[d("div",U4,[d("div",j4,[d("div",q4,[d("div",Y4,[d("div",G4,[d("button",{class:"fr-btn--close fr-btn","aria-controls":h(o)},_(h(s)("Close")),9,X4)]),d("div",K4,[d("h1",{id:r,class:"fr-modal__title"},[u[0]||(u[0]=d("span",{class:"fr-icon-delete-line fr-icon--lg"},null,-1)),W(" "+_(h(s)("Are you sure ?")),1)]),d("p",Z4,[d("div",J4,[d("img",{class:"rounded-circle border border-default-grey",src:e.avatar_thumbnail,width:"40",height:"40",loading:"lazy",alt:""},null,8,Q4)]),W(" "+_(e.full_name)+" "+_(h(s)("will be permanently deleted.")),1)])]),d("div",e5,[d("div",t5,[d("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:l},_(h(s)("Delete without sending mail")),1),d("button",{class:"fr-btn bg-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:a},_(h(s)("Delete")),1)])])])])])])],8,H4)]))],64))}}),n5=q({name:"featured-button",props:{subjectId:{type:String,required:!0},subjectType:{type:String,required:!0},featured:{type:Boolean,required:!0}},setup(t){const{t:e}=ce(),{toast:s}=xt(),n=M(t.featured),i=M(null),o=()=>{const r=n.value?"delete":"post",a="".concat(t.subjectType.toLowerCase(),"s/").concat(t.subjectId,"/featured/");Ve[r](a).then(l=>{n.value=!n.value}).catch(()=>s.error(e("An error occurred while featuring this subject.")))};return we(()=>{var r;return(r=i.value)==null?void 0:r.toggleAttribute("checked",n.value)}),{isFeatured:n,t:e,toggleFeatured:o,toggleInput:i}}}),i5={class:"fr-toggle fr-toggle--label-left"},o5=["checked"],r5=["data-fr-checked-label","data-fr-unchecked-label"];function a5(t,e,s,n,i,o){return y(),k("div",i5,[d("input",{ref:"toggleInput",onClick:e[0]||(e[0]=(...r)=>t.toggleFeatured&&t.toggleFeatured(...r)),type:"checkbox",class:"fr-toggle__input",id:"featured-toggle",checked:t.isFeatured},null,8,o5),d("label",{class:"fr-toggle__label",for:"featured-toggle","data-fr-checked-label":t.t("Featured"),"data-fr-unchecked-label":t.t("Standard")},_(t.t("Feature this content")),9,r5)])}const l5=pe(n5,[["render",a5]]),c5=q({props:{followers:Number,url:{type:String,required:!0},following:Boolean},setup(t){const e=M(!1),s=M(t.following),n=Tn.read_only_enabled;return{following:s,animating:e,readOnlyEnabled:n,toggleFollow:()=>{ps();let o;s.value?o=Ve.delete(t.url):o=Ve.post(t.url),o.then(()=>{s.value=!s.value,s.value&&(e.value=!0,setTimeout(()=>e.value=!1,1300))})}}}}),u5=["disabled"],d5={class:"fr-ml-1w"};function f5(t,e,s,n,i,o){return y(),k("button",{onClick:e[0]||(e[0]=Me((...r)=>t.toggleFollow&&t.toggleFollow(...r),["prevent"])),type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 follow-button",disabled:t.readOnlyEnabled},[d("span",{class:Te(["magic fr-grid-row",{active:t.animating}]),style:nn({color:t.following?"inherit":"transparent"})},e[1]||(e[1]=[d("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[d("path",{d:"M7.20703 1.24224L5.42968 4.87896L1.41015 5.45318C0.699214 5.56255 0.425776 6.43755 0.945308 6.95709L3.8164 9.77349L3.13281 13.7383C3.02343 14.4493 3.78906 14.9961 4.41796 14.668L8 12.7813L11.5547 14.668C12.1836 14.9961 12.9492 14.4493 12.8398 13.7383L12.1562 9.77349L15.0273 6.95709C15.5469 6.43755 15.2734 5.56255 14.5625 5.45318L10.5703 4.87896L8.76562 1.24224C8.46484 0.613336 7.53515 0.585992 7.20703 1.24224Z",stroke:"#161616"})],-1)]),6),d("span",d5,[t.following?(y(),k(J,{key:0},[W(_(t.$t("Remove from favourites")),1)],64)):(y(),k(J,{key:1},[W(_(t.$t("Add to favourites")),1)],64))])],8,u5)}const h5=pe(c5,[["render",f5]]),p5=q({props:{organization:{type:String,required:!0}},setup(t){const{t:e}=ce(),s=M("");return{askToJoinOrganization:()=>{ps(),s.value=prompt(e("You can add some details here for your membership request"))||"",Ve.post("organizations/"+t.organization+"/membership/",{comment:s.value}).then(i=>{alert(e("A request has been sent to the administrators")),window.location.reload()}).catch(i=>{alert(e("Error while requesting membership")),console.error(i)})},comment:s}}});function g5(t,e,s,n,i,o){return y(),k("button",{onClick:e[0]||(e[0]=Me((...r)=>t.askToJoinOrganization&&t.askToJoinOrganization(...r),["prevent"])),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-team-line"},_(t.$t("Ask to join the organization as a producer")),1)}const m5=pe(p5,[["render",g5]]);function fd(){const t=M(window.location.hash),e=()=>t.value=window.location.hash;return we(()=>window.addEventListener("hashchange",e)),Gt(()=>window.removeEventListener("hashchange",e)),{hash:t}}function Gl(){history.pushState(null,""," "),window.dispatchEvent(new HashChangeEvent("hashchange"))}const v5={key:0},b5={key:1},_5={class:"fr-grid-row fr-grid-row--middle justify-between"},y5={key:0},w5={key:1},$5=q({__name:"resourceFromHash",props:{canEdit:{type:Boolean},datasetId:{},communityResource:{type:Boolean,default:!1}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=M(null),o=M(null),r=M(!1),{hash:a}=fd(),l=j(()=>kc(a.value,e.communityResource)),c=j(()=>e.communityResource?"/datasets/community_resources/".concat(l.value):"/datasets/".concat(e.datasetId,"/resources/").concat(l.value));return _t(async()=>{if(l.value){r.value=!0;try{const f=await(await Ve.get(c.value)).data;f&&(o.value=f,i.value&&i.value.scrollIntoView())}catch(u){console.error(u),n.error(s("An error occurred while fetching the file ")+l.value)}finally{r.value=!1}}}),(u,f)=>l.value?(y(),k("section",{key:0,ref_key:"top",ref:i},[x(to,{mode:"out-in"},{default:P(()=>[r.value?(y(),k("div",v5,[x(h(du))])):(y(),k("div",b5,[x(h($e),{type:"secondary",color:"success",class:"fr-mb-2w"},{default:P(()=>[d("div",_5,[u.communityResource?(y(),k("span",y5,_(h(s)("You are seeing a specific community resource of this dataset")),1)):(y(),k("span",w5,_(h(s)("You are seeing a specific file of this dataset")),1)),d("button",{class:"fr-btn--close fr-btn fr-mr-0",onClick:f[0]||(f[0]=Me((...p)=>h(Gl)&&h(Gl)(...p),["prevent"]))},_(h(s)("Close")),1)])]),_:1}),o.value?(y(),N(h(uu),{key:0,id:"resource-"+l.value,datasetId:u.datasetId,expandedOnMount:!0,resource:o.value,canEdit:u.canEdit,isCommunityResource:u.communityResource},null,8,["id","datasetId","resource","canEdit","isCommunityResource"])):z("",!0)]))]),_:1})],512)):z("",!0)}}),oa=q({__name:"Reuse",props:{reuse:{}},setup(t){return(e,s)=>{var n;return y(),N(h(db),{reuse:e.reuse,reuseUrl:e.reuse.page,organizationUrl:(n=e.reuse.organization)==null?void 0:n.page},null,8,["reuse","reuseUrl","organizationUrl"])}}});function x5(t){return{all:t=t||new Map,on:function(e,s){var n=t.get(e);n?n.push(s):t.set(e,[s])},off:function(e,s){var n=t.get(e);n&&(s?n.splice(n.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var n=t.get(e);n&&n.slice().map(function(i){i(s)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,s)})}}}const wr="resourcesSearch",ra=x5(),k5=t=>{t.config.globalProperties.$bus=ra},C5=q({props:{eventName:{type:String,default:wr},type:{type:String}},setup(t){const e=xf("",Zo),s=()=>{ra.emit(t.eventName,{type:t.type,value:e.value})};kf&&Tt(e,s);let n;const i=()=>{n=setTimeout(()=>{s()},Zo)};return Gt(()=>clearTimeout(n)),{search:s,searchWithoutAutocomplete:i,searchValue:e}}}),S5=["aria-label"],T5=["for"],E5=["id"],P5={class:"fr-btn",type:"submit"};function A5(t,e,s,n,i,o){return y(),k("form",{onSubmit:e[1]||(e[1]=Me((...r)=>t.searchWithoutAutocomplete&&t.searchWithoutAutocomplete(...r),["prevent"]))},[d("div",{class:"fr-search-bar",role:"search","aria-label":t.$t("Search files")},[d("label",{class:"fr-label",for:t.eventName},_(t.$t("Search files")),9,T5),wt(d("input",{class:"fr-input",placeholder:"Rechercher",type:"search",id:t.eventName,"onUpdate:modelValue":e[0]||(e[0]=r=>t.searchValue=r)},null,8,E5),[[ds,t.searchValue]]),d("button",P5,_(t.$t("Search")),1)],8,S5)],32)}const D5=pe(C5,[["render",A5]]),M5={class:"fr-grid-row"},O5={class:"fr-col"},L5={key:0,class:"fr-col-auto"},R5=["href"],I5={key:0,class:"fr-my-3v"},z5={key:0},F5={key:1,class:"flex flex-direction-column gap-10px"},B5={key:0,class:"fr-my-0 fr-text--sm border-bottom",role:"status"},N5={key:1},Xl=!1,V5=q({__name:"resources",props:{canEdit:{type:Boolean,default:!1},canEditResources:{default:()=>({})},datasetId:{},showTotal:{type:Boolean,default:!0},type:{},typeLabel:{},firstGroup:{type:Boolean,default:!0}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=M(1),{hash:o}=fd(),r=j(()=>kc(o.value,e.type==="community")),a=M([]),l=Tn.resources_default_page_size,c=new URL(document.location.origin+Tn.admin_root+"community-resource/new/"),u=new URLSearchParams({dataset_id:e.datasetId});c.search=u.toString();const f=c.toString(),p=M(0),g=M(0),m=M(!0),v=M(null),b=M(""),$=M(e.type==="community"),w=j(()=>!$.value&&p.value>Tn.resources_min_count_to_show_search),C=j(()=>p.value!=g.value),T=(A=1,L=!1)=>{m.value=!0,L&&v.value&&v.value.scrollIntoView({behavior:"smooth"});let B;return $.value?B=Cf(e.datasetId,A,l):B=Sf(e.datasetId,e.type,A,l,b.value),B.then(H=>(H.data&&(a.value=H.data,g.value=H.total),H.total||0)).catch(()=>(n.error(s("An error occurred while fetching resources")),a.value=[],0)).finally(()=>{m.value=!1})},S=(A,L=!0)=>(i.value=A,T(A,L)),E=A=>e.canEdit?e.canEdit:e.canEditResources[A.id];$.value||ra.on(wr,({type:A,value:L})=>{A===e.type&&(b.value=L,S(1,Xl))});const O=()=>{S(1,Xl).then(A=>p.value=A)};return we(()=>O()),(A,L)=>r.value?z("",!0):(y(),k("section",{key:0,class:"fr-mb-3v",ref_key:"top",ref:v},[d("div",M5,[d("div",O5,[d("h2",{class:Te([{"fr-mt-4w":!A.firstGroup},"fr-mb-0 subtitle subtitle--uppercase"])},_(A.typeLabel),3)]),$.value?(y(),k("div",L5,[d("a",{class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-add-line fr-btn--icon-left",href:h(f)},_(h(s)("Add a community resource")),9,R5)])):z("",!0)]),w.value?(y(),k("div",I5,[x(D5,{eventName:h(wr),type:A.type},null,8,["eventName","type"])])):z("",!0),x(to,{mode:"out-in"},{default:P(()=>[m.value?(y(),k("div",z5,[(y(!0),k(J,null,ve(h(l),B=>(y(),N(h(du),{class:"fr-mt-2w"}))),256))])):(y(),k("div",F5,[C.value?(y(),k("p",B5,_(h(s)("{count} results",g.value)),1)):z("",!0),(y(!0),k(J,null,ve(a.value,B=>(y(),N(h(uu),{id:"resource-"+B.id,datasetId:A.datasetId,isCommunityResource:$.value,resource:B,canEdit:E(B)},null,8,["id","datasetId","isCommunityResource","resource","canEdit"]))),256)),g.value?g.value>h(l)?(y(),N(h(Bs),{key:2,class:"fr-mt-3w",page:i.value,"page-size":h(l),"total-results":g.value,onChange:S},null,8,["page","page-size","total-results"])):z("",!0):(y(),k("p",N5,_(h(s)("No files match your search.")),1))]))]),_:1})],512))}});const W5=pe(V5,[["__scopeId","data-v-9b5f7714"]]),hd="captchetat/";function pd(t){return an.get(hd,{params:t}).then(e=>e.data)}function H5(t){return pd({get:"html",c:t}).then(e=>e.replaceAll("/api/simple-captcha-endpoint",an.defaults.baseURL+hd))}function U5(t,e){return pd({get:"script-include",c:t,t:e}).then(s=>new Function(s)())}const j5=q({props:{captchaStyleName:{type:String,required:!0}},setup(t){const e=M(null),s=M(),n=M(),i=()=>{H5(t.captchaStyleName).then(a=>e.value=a).then(()=>{const a=document.querySelector("#BDC_VCID_"+t.captchaStyleName);a instanceof HTMLInputElement&&U5(t.captchaStyleName,a.value).then(()=>s.value=r.value)})},o=j(()=>{var a;return(a=window.botdetect)==null?void 0:a.getInstanceByStyleName(t.captchaStyleName)}),r=j(()=>{var a;return(a=o.value)==null?void 0:a.captchaId});return i(),we(()=>{var a;if(n.value instanceof HTMLInputElement){let l=(a=n.value.form)==null?void 0:a.querySelector('[type="submit"]');l instanceof HTMLButtonElement&&(l.disabled=!1)}}),{captchaHtml:e,id:s,input:n}}}),q5=["innerHTML"];function Y5(t,e,s,n,i,o){return y(),k(J,null,[d("div",{id:"BDC_CaptchaComponent",innerHTML:t.captchaHtml},null,8,q5),wt(d("input",{type:"hidden",name:"captcha_id","onUpdate:modelValue":e[0]||(e[0]=r=>t.id=r),ref:"input"},null,512),[[ds,t.id]])],64)}const G5=pe(j5,[["render",Y5]]),X5={key:0},K5=20,Z5=q({__name:"CardList",props:{datasets:{},loading:{type:Boolean,default:!1},totalResults:{},pageSize:{default:K5}},emits:["changePage"],setup(t,{emit:e}){const s=e,n=M(1),i=M();function o(){i.value&&i.value.scrollIntoView({behavior:"smooth"})}function r(a){n.value=a,s("changePage",a),o()}return(a,l)=>a.loading?(y(),k("div",X5,[x(na)])):a.totalResults?(y(),k(J,{key:1},[d("ul",{ref_key:"listRef",ref:i},[(y(!0),k(J,null,ve(a.datasets,c=>(y(),k("li",{key:c.id},[x(Qn,{dataset:c},null,8,["dataset"])]))),128))],512),a.totalResults>a.pageSize?(y(),N(h(Bs),{key:0,page:n.value,pageSize:a.pageSize,totalResults:a.totalResults,onChange:r,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):z("",!0)],64)):z("",!0)}}),J5={key:0,class:"subtitle subtitle--uppercase fr-mb-5v"},Q5=q({__name:"UserDatasetList",props:{owner:{}},setup(t){const{t:e}=ce(),{toast:s}=xt(),n=t,i=M([]),o=M(0),r=M(!1),a=M(null),l=3;function c(u){r.value=!0,a.value&&a.value.cancel(),a.value=Dr(),an.get("/datasets/search/",{cancelToken:a.value.token,params:{page:u,owner:n.owner,page_size:l}}).then(f=>f.data).then(f=>{i.value=f.data,o.value=f.total,r.value=!1}).catch(f=>{rn.isCancel(f)||(s.error(e("Error getting search results.")),r.value=!1)})}return we(()=>{c(1)}),(u,f)=>(y(),k(J,null,[o.value?(y(),k("h2",J5,_(h(e)("{n} datasets",o.value)),1)):z("",!0),x(Z5,{"page-size":l,datasets:i.value,loading:r.value,"total-results":o.value,onChangePage:c},null,8,["datasets","loading","total-results"])],64))}}),e8={components:{ContentLoader:gs}};function t8(t,e,s,n,i,o){const r=me("ContentLoader");return y(),N(r,{width:350,height:180,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>e[0]||(e[0]=[d("rect",{x:"43",y:"153",rx:"3",ry:"3",width:"97",height:"6"},null,-1),d("rect",{x:"44",y:"166",rx:"3",ry:"3",width:"97",height:"5"},null,-1),d("rect",{x:"184",y:"7",rx:"5",ry:"5",width:"130",height:"130"},null,-1),d("rect",{x:"198",y:"153",rx:"3",ry:"3",width:"97",height:"6"},null,-1),d("rect",{x:"199",y:"166",rx:"3",ry:"3",width:"97",height:"5"},null,-1),d("rect",{x:"27",y:"8",rx:"5",ry:"5",width:"130",height:"130"},null,-1)])),_:1})}const s8=pe(e8,[["render",t8]]),n8={key:0},i8=20,o8=q({__name:"ReuseList",props:{reuses:{},loading:{type:Boolean,default:!1},totalResults:{},pageSize:{default:i8}},emits:["changePage"],setup(t,{emit:e}){const s=e,n=M(1),i=M();function o(){i.value&&i.value.scrollIntoView({behavior:"smooth"})}function r(a){n.value=a,s("changePage",a),o()}return(a,l)=>a.loading?(y(),k("div",n8,[x(s8)])):a.totalResults?(y(),k(J,{key:1},[d("ul",{ref_key:"listRef",ref:i,class:"fr-grid-row fr-grid-row--gutters"},[(y(!0),k(J,null,ve(a.reuses,c=>(y(),k("li",{class:Te(["fr-col-12",{"fr-col-md-6":a.reuses.length<=2,"fr-col-md-4":a.reuses.length>=3}]),key:c.id},[x(oa,{reuse:c},null,8,["reuse"])],2))),128))],512),a.totalResults>a.pageSize?(y(),N(h(Bs),{key:0,page:n.value,pageSize:a.pageSize,totalResults:a.totalResults,onChange:r,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):z("",!0)],64)):z("",!0)}}),r8={key:0,class:"subtitle subtitle--uppercase fr-mb-5v"},a8=q({__name:"UserReuseList",props:{owner:{}},setup(t){const{t:e}=ce(),{toast:s}=xt(),n=t,i=M([]),o=M(0),r=M(!1),a=M(null),l=6;function c(u){r.value=!0,a.value&&a.value.cancel(),a.value=Dr(),an.get("/reuses/search/",{cancelToken:a.value.token,params:{page:u,owner:n.owner,page_size:l}}).then(f=>f.data).then(f=>{i.value=f.data,o.value=f.total,r.value=!1}).catch(f=>{rn.isCancel(f)||(s.error(e("Error getting search results.")),r.value=!1)})}return we(()=>{c(1)}),(u,f)=>(y(),k(J,null,[o.value?(y(),k("h2",r8,_(h(e)("{n} reuses",o.value)),1)):z("",!0),x(o8,{"page-size":l,reuses:i.value,loading:r.value,"total-results":o.value,onChangePage:c},null,8,["reuses","loading","total-results"])],64))}}),l8={class:"fr-stepper fr-mb-3w"},c8={class:"fr-stepper__title fr-mb-3v"},u8={class:"fr-stepper__state text-default-grey"},d8=["data-fr-current-step","data-fr-steps"],f8={key:0,class:"fr-stepper__details"},h8={class:"fr-text--bold"},kt=q({__name:"Stepper",props:{steps:{},currentStep:{}},setup(t){const e=t,s=j(()=>e.steps.length),n=j(()=>e.steps[e.currentStep]),i=j(()=>e.currentStep+1),o=j(()=>e.currentStep+1<e.steps.length),r=j(()=>o.value?e.steps[e.currentStep+1]:"");return(a,l)=>(y(),k("div",l8,[d("h2",c8,[W(_(n.value)+" ",1),d("span",u8,_(a.$t("Step {n} of {count}",{n:i.value,count:s.value})),1)]),d("div",{class:"fr-stepper__steps","data-fr-current-step":i.value,"data-fr-steps":s.value},null,8,d8),o.value?(y(),k("p",f8,[d("span",h8,_(a.$t("Next Step:")),1),W(" "+_(r.value),1)])):z("",!0)]))}}),p8=q({components:{ActionCard:ia,Container:ot,Stepper:kt,Well:$e},emits:["start"],props:{steps:{type:Array,required:!0}},setup(t){return{api_doc_external_link:Tf,catalog_url:Ef,demo_server_name:Pf,demo_server_url:Af,datasetIcon:Df,guides_harvesting_url:Mf,schemaIcon:Of,schema_publishing_url:Lf,support_url:Rf,title:ln}}}),g8={class:"fr-container"},m8={class:"subtitle subtitle--uppercase"},v8={class:"fr-grid-row fr-grid-row--gutters"},b8={class:"fr-col-12 fr-col-md-6"},_8={class:"fr-mt-3w","aria-labelledby":"documentation-links"},y8={id:"documentation-links",class:"fr-m-0 fr-mb-3v fr-text--md fr-text--bold"},w8={class:"fr-m-0 fr-mb-3v"},$8={class:"fr-grid-row fr-grid-row--gutters"},x8={class:"fr-col-auto"},k8={class:"fr-m-0"},C8=["href"];function S8(t,e,s,n,i,o){const r=me("Stepper"),a=me("ActionCard"),l=me("Container");return y(),k("div",g8,[x(r,{steps:t.steps,currentStep:0},null,8,["steps"]),x(l,null,{default:P(()=>[d("h1",m8,_(t.$t("Publishing type")),1),d("div",v8,[d("div",b8,[x(a,{title:t.$t("Publish a dataset"),content:t.$t("Administration or public society, everybody can publish on {site} !",{site:t.title}),icon:t.datasetIcon,actionsAlignment:"end",stretchHeight:!0},{actions:P(()=>[d("button",{class:"fr-btn",onClick:e[0]||(e[0]=c=>t.$emit("start"))},_(t.$t("Start publishing")),1)]),_:1},8,["title","content","icon"])])])]),_:1}),d("section",_8,[d("h2",y8,_(t.$t("Are you an administration and do you want to automate your data publishing ?")),1),d("p",w8,_(t.$t("You can automatically publish via API or by linking your open data portal to {site} with an harvester.",{site:t.title})),1),d("div",$8,[d("div",x8,[d("p",k8,[d("a",{class:"fr-link",href:t.support_url,target:"_blank"},_(t.$t("Contact us")),9,C8)])])])])])}const T8=pe(p8,[["render",S8]]),E8={key:0},P8={key:1},A8={key:2},D8={class:"fr-col bg-contrast-grey text-align-center fr-p-1w"},M8={class:"fr-text--md fr-text--bold fr-my-1w"},O8={class:"fr-text--sm fr-text--bold fr-m-0"},L8={class:"fr-text--sm fr-mb-1w"},R8={class:"fr-grid-row fr-grid-row--middle fr-pb-3v"},I8={class:"fr-col-6"},z8=["href"],F8={class:"fr-col-6"},aa=q({__name:"ProducerSelector",props:{user:{},hasError:{type:Boolean},errorText:{}},emits:["update:owned"],setup(t,{emit:e}){const{t:s}=ce(),n=t,i="".concat(Ko,"publishing-form/"),o=M(),r=M({organization:null,owner:n.user.id}),a=M([]),l=e,c=j(()=>{var m,v;return(v=(m=n.user.roles)==null?void 0:m.includes("admin"))!=null?v:!1}),u=j(()=>a.value.length>1),f=m=>{m==="user"?(r.value.organization=null,r.value.owner=n.user.id):(r.value.organization=m,r.value.owner=null),l("update:owned",_e(r))};function p(){const m={..._e(n.user),id:"user",name:"".concat(n.user.first_name," ").concat(n.user.last_name),logo:ga(_e(n.user),40),logo_thumbnail:ga(_e(n.user),40)};m&&(a.value=[...m.organizations],a.value.push(m))}function g(){!c.value&&a.value.length===1&&f("user")}return we(()=>{a.value=[],p(),g()}),(m,v)=>c.value?(y(),k("div",E8,[x(Ae,{required:!0,minimumCharacterBeforeSuggest:2,placeholder:h(s)("Check the identity with which you want to publish"),searchPlaceholder:h(s)("Select an organization"),suggestUrl:"/organizations/suggest/",initialOptions:a.value,values:o.value,onChange:f,hasError:n.hasError,errorText:n.errorText},null,8,["placeholder","searchPlaceholder","initialOptions","values","hasError","errorText"])])):u.value?(y(),k("div",P8,[x(Ae,{required:!0,minimumCharacterBeforeSuggest:2,placeholder:h(s)("Check the identity with which you want to publish"),searchPlaceholder:h(s)("Select an organization"),initialOptions:a.value,values:o.value,onChange:f,hasError:n.hasError,errorText:n.errorText},null,8,["placeholder","searchPlaceholder","initialOptions","values","hasError","errorText"])])):(y(),k("div",A8,[d("div",D8,[d("p",M8,_(h(s)("You belong to no organization")),1),d("p",O8,_(h(s)("You publish in your own name")),1),d("p",L8,_(h(s)("We advise you to publish under an organization if it's a professional activity")),1),d("div",R8,[d("div",I8,[d("a",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",href:h(Ko)},_(h(s)("Join an organization")),9,z8)]),d("div",F8,[d("a",{class:"fr-btn",href:i},_(h(s)("Create an organization")),1)])])])]))}}),gd="/_themes/gouvfr/assets/edit.svg",B8={class:"fr-container"},N8={class:"fr-grid-row"},V8={class:"fr-m-0"},W8={class:"fr-m-0"},H8={class:"markdown fr-m-0"},U8={class:"fr-m-0"},j8={class:"fr-mt-3v"},q8={class:"fr-mt-3v"},Y8={class:"fr-m-0"},G8={class:"fr-m-0"},X8={class:"fr-m-0"},K8={class:"fr-m-0"},Z8={class:"fr-m-0"},J8={class:"fr-col-12 fr-col-md-7"},Q8={class:"fr-grid-row"},e$={class:"fr-col-auto fr-mr-3v"},t$=["src"],s$={class:"fr-col"},n$={class:"fr-m-0 fr-text--bold"},i$={class:"fr-m-0 fr-text--xs"},o$={class:"fr-fieldset","aria-labelledby":"description-legend"},r$={class:"fr-fieldset__legend",id:"description-legend"},a$={class:"subtitle subtitle--uppercase fr-mb-3v"},l$={class:"fr-fieldset__element"},c$={class:"fr-fieldset min-width-0","aria-labelledby":"description-legend"},u$={class:"fr-fieldset__legend",id:"description-legend"},d$={class:"subtitle subtitle--uppercase fr-mb-3v"},f$={class:"fr-fieldset","aria-labelledby":"time-legend"},h$={class:"fr-fieldset__legend",id:"time-legend"},p$={class:"subtitle subtitle--uppercase fr-mb-3v"},g$={class:"fr-fieldset","aria-labelledby":"space-legend"},m$={class:"fr-fieldset__legend",id:"space-legend"},v$={class:"subtitle subtitle--uppercase fr-mb-3v"},b$={class:"fr-grid-row fr-grid-row--gutters"},_$={class:"fr-col-12"},y$={class:"fr-col-12"},w$={class:"fr-grid-row fr-grid-row--right"},$$=q({__name:"Step2DescribeDataset",props:{originalDataset:{},steps:{},granularities:{},user:{}},emits:["next"],setup(t,{emit:e}){var F;const s=t,n=e,{t:i}=ce(),{id:o}=he("accordion"),{id:r}=he("accordion"),{id:a}=he("accordion"),{id:l}=he("accordion"),{id:c}=he("accordion"),{id:u}=he("accordion"),{id:f}=he("accordion"),{id:p}=he("accordion"),g=At({...s.originalDataset});g.spatial||(g.spatial={zones:void 0,granularity:void 0});const m=If(),v=dd(),b=(F=zf)==null?void 0:F.map(([R,Z])=>({name:R,values:Z})),$=R=>R.map(ne=>{const Ze=s.granularities.find(zt=>zt.id===ne.level);return Ze?{...ne,description:Ze.name}:{...ne}}),w=Ff(i("The value must be different than unknown."),Bf("unknown")),C=Gs(i("Adding tags helps improve the SEO of your data.")),T=Gs(i("You did not provide the temporal coverage.")),S=Gs(i("You have not specified the spatial granularity.")),E=M(!1);function O(){return E.value}function A(R){g.organization=R.organization,g.owner=R.owner,E.value=!0}const L={description:{required:ke},frequency:{required:ke},title:{required:ke},owned:{custom:O}},B={acronym:{},description:{required:ke,minLengthValue:no(io)},frequency:{required:ke,notUnknown:w},license:{required:ke},spatial:{granularity:{required:S}},tags:{required:C},temporal_coverage:{required:T},title:{required:ke},owned:{custom:O}},{getErrorText:H,getFunctionalState:D,getWarningText:V,hasError:Y,hasWarning:X,validateRequiredRules:Q,v$:se,vWarning$:G}=Kt(g,L,B),ie=j(()=>({acronym:G.value.acronym.$dirty?"info":"disabled",title:D(G.value.title.$dirty,se.value.title.$invalid,G.value.title.$error),description:D(G.value.description.$dirty,se.value.description.$invalid,G.value.description.$error),tags:D(G.value.tags.$dirty,!1,G.value.tags.$error),license:D(G.value.license.$dirty,!1,G.value.license.$error),frequency:D(G.value.frequency.$dirty,se.value.frequency.$invalid,G.value.frequency.$error),temporal_coverage:D(G.value.temporal_coverage.$dirty,!1,G.value.temporal_coverage.$error),spatial_information:D(G.value.spatial.granularity.$dirty,!1,G.value.spatial.granularity.$error),owned:D(G.value.owned.$dirty,se.value.owned.$invalid,G.value.owned.$error)})),le=R=>Y(ie,R),oe=R=>X(ie,R);function U(R){g.spatial?g.spatial.granularity=R:g.spatial={granularity:R}}function I(){Q().then(R=>{R&&n("next",g)})}return(R,Z)=>(y(),k("div",B8,[x(kt,{steps:R.steps,currentStep:1},null,8,["steps"]),d("div",N8,[x(Xn,{class:"fr-col-12 fr-col-md-5",buttonText:R.$t("Help"),onRight:!0,fixed:!0},{title:P(()=>[Z[8]||(Z[8]=d("span",{class:"fr-icon--sm fr-icon-question-line","aria-hidden":"true"},null,-1)),W(" "+_(R.$t("Help")),1)]),default:P(()=>[x(oo,null,{default:P(()=>[x(Ce,{title:R.$t("Naming your dataset"),id:h(o),state:ie.value.title},{default:P(()=>[d("p",V8,[W(_(R.$t("The title of your dataset should be as precise and specific as possible."))+" ",1),Z[9]||(Z[9]=d("br",null,null,-1)),W(" "+_(R.$t("It should also correspond to the vocabulary used by users."))+" ",1),Z[10]||(Z[10]=d("br",null,null,-1)),W(" "+_(R.$t("They often search for data in a search engine.")),1)])]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Add an acronym to the dataset"),id:h(r),state:ie.value.acronym},{default:P(()=>[d("p",W8,_(R.$t("You have the option to add an acronym to your dataset. The letters that make up this acronym do not need to be separated by periods.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Write a good description"),id:h(a),state:ie.value.description},{default:P(()=>[d("div",H8,[d("p",U8,_(R.$t("The description of your dataset allows to obtain information about the content and structure of the published resources. You can provide:")),1),d("ul",j8,[d("li",null,_(R.$t("A list of the files available ;")),1),d("li",null,_(R.$t("A description of the file format ;")),1),d("li",null,_(R.$t("The update frequency.")),1)]),d("ul",q8,[d("li",null,_(R.$t("Motivations for creating the dataset ;")),1),d("li",null,_(R.$t("The composition of the dataset ;")),1),d("li",null,_(R.$t("The data collection process ;")),1),d("li",null,_(R.$t("Data preprocessing ;")),1),d("li",null,_(R.$t("Dataset dissemination ;")),1),d("li",null,_(R.$t("Dataset maintenance ;")),1),d("li",null,_(R.$t("Legal and ethical considerations.")),1)]),oe("description")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("description")),1)]),_:1})):z("",!0)])]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Use tags"),id:h(l),state:ie.value.tags},{default:P(()=>[d("p",Y8,_(R.$t("Tags characterize your dataset. They are public and improve the dataset's search engine optimization during a user search.")),1),oe("tags")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("tags")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Select a license"),id:h(c),state:ie.value.license},{default:P(()=>[d("p",G8,_(R.$t("Licenses define the rules for reuse. By choosing a reuse license, you ensure that the published dataset will be reused according to the usage conditions you have defined.")),1),oe("license")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("license")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Choose the update frequency"),id:h(u),state:ie.value.frequency},{default:P(()=>[d("p",X8,_(R.$t("The update frequency corresponds to how often you plan to update the published data. This update frequency is only indicative.")),1),oe("frequency")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("frequency")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Provide the temporal coverage"),id:h(f),state:ie.value.temporal_coverage},{default:P(()=>[d("p",K8,[W(_(R.$t("The temporal coverage indicates the time range of the published data."))+" ",1),Z[11]||(Z[11]=d("br",null,null,-1)),W(" "+_(R.$t("For example : from 2012 to 2015.")),1)]),oe("temporal_coverage")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("temporal_coverage")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:R.$t("Complete the spatial information"),id:h(p),state:ie.value.spatial_information},{default:P(()=>[d("p",Z8,[W(_(R.$t("The spatial granularity indicates the finest geographical level of detail that your data can cover."))+" ",1),Z[12]||(Z[12]=d("br",null,null,-1)),W(" "+_(R.$t("For example: at the department or municipality scale.")),1)]),oe("spatial_information")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("spatial")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"])]),_:1})]),_:1},8,["buttonText"]),d("div",J8,[x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",Q8,[d("div",e$,[d("img",{src:h(gd),alt:""},null,8,t$)]),d("div",s$,[d("p",n$,_(R.$t("What is a dataset?")),1),d("p",i$,_(R.$t("On {site}, a dataset is a set of files.",{site:h(ln)})),1)])])]),_:1}),d("fieldset",o$,[d("legend",r$,[d("h2",a$,_(R.$t("Producer")),1)]),d("div",l$,[x(aa,{user:R.user,hasError:le("owned"),errorText:R.$t("You need to select a Producer"),"onUpdate:owned":A},null,8,["user","hasError","errorText"])])]),d("fieldset",c$,[d("legend",u$,[d("h2",d$,_(R.$t("Description")),1)]),x(Ee,{class:"fr-fieldset__element",accordion:h(o),onBlur:h(G).title.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(o),label:R.$t("Dataset name"),required:!0,modelValue:g.title,"onUpdate:modelValue":Z[0]||(Z[0]=ne=>g.title=ne),hasError:le("title"),hasWarning:oe("title"),errorText:h(H)("title")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(r),onBlur:h(G).acronym.$touch},{default:P(()=>[x(ze,{label:R.$t("Acronym"),modelValue:g.acronym,"onUpdate:modelValue":Z[1]||(Z[1]=ne=>g.acronym=ne)},null,8,["label","modelValue"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element min-width-0",accordion:h(a),onBlur:h(G).description.$touch},{default:P(()=>[x(ze,{label:R.$t("Description"),required:!0,type:"markdown",modelValue:g.description,"onUpdate:modelValue":Z[2]||(Z[2]=ne=>g.description=ne),hasError:le("description"),hasWarning:oe("description"),errorText:h(H)("description")},null,8,["label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(l),onBlur:h(G).tags.$touch},{default:P(()=>[x(Ae,{minimumCharacterBeforeSuggest:2,onChange:Z[3]||(Z[3]=ne=>g.tags=ne),placeholder:R.$t("Tags"),searchPlaceholder:R.$t("Search a tag..."),suggestUrl:"/tags/suggest/",values:g.tags,hasWarning:oe("tags"),multiple:!0,addNewOption:!0},null,8,["placeholder","searchPlaceholder","values","hasWarning"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(c),onBlur:h(G).license.$touch},{default:P(()=>[x(Ae,{placeholder:R.$t("License"),searchPlaceholder:R.$t("Search a license..."),listUrl:h(v),values:g.license,onChange:Z[4]||(Z[4]=ne=>g.license=ne),allOption:R.$t("Select a license"),addAllOption:!1,groups:h(b),showDescription:!0},null,8,["placeholder","searchPlaceholder","listUrl","values","allOption","groups"])]),_:1},8,["accordion","onBlur"])]),d("fieldset",f$,[d("legend",h$,[d("h2",p$,_(R.$t("Time")),1)]),x(Ee,{accordion:h(u),onBlur:h(G).frequency.$touch,class:"fr-fieldset__element"},{default:P(()=>[x(Ae,{placeholder:R.$t("Update frequency"),searchPlaceholder:R.$t("Search a frequency..."),listUrl:h(m),values:g.frequency,onChange:Z[5]||(Z[5]=ne=>g.frequency=ne),required:!0,hasError:le("frequency"),hasWarning:oe("frequency"),errorText:h(H)("frequency"),allOption:R.$t("Select an option"),addAllOption:!1},null,8,["placeholder","searchPlaceholder","listUrl","values","hasError","hasWarning","errorText","allOption"])]),_:1},8,["accordion","onBlur"]),x(Ee,{accordion:h(f),onBlur:h(G).temporal_coverage.$touch,class:"fr-fieldset__element"},{default:P(()=>[x(ze,{label:R.$t("Temporal coverage"),type:"range",modelValue:g.temporal_coverage,"onUpdate:modelValue":Z[6]||(Z[6]=ne=>g.temporal_coverage=ne)},null,8,["label","modelValue"])]),_:1},8,["accordion","onBlur"])]),d("fieldset",g$,[d("legend",m$,[d("h2",v$,_(R.$t("Space")),1)]),x(Ee,{accordion:h(p),onBlur:h(G).spatial.$touch,class:"fr-fieldset__element"},{default:P(()=>{var ne,Ze;return[d("div",b$,[d("div",_$,[x(Ae,{placeholder:R.$t("Spatial coverage"),searchPlaceholder:R.$t("Search a spatial coverage..."),suggestUrl:"/spatial/zones/suggest/",entityUrl:"/spatial/zone/",values:(ne=g.spatial)==null?void 0:ne.zones,onChange:Z[7]||(Z[7]=zt=>g.spatial?g.spatial.zones=zt:g.spatial={zones:zt}),hasWarning:oe("spatial_information"),allOption:R.$t("e.g. France"),addAllOption:!1,multiple:!0,helperLabel:"Insee : ",onSuggest:$,showDescription:!0},null,8,["placeholder","searchPlaceholder","values","hasWarning","allOption"])]),d("div",y$,[x(Ae,{placeholder:R.$t("Spatial granularity"),searchPlaceholder:R.$t("Search a granularity..."),initialOptions:R.granularities,values:(Ze=g.spatial)==null?void 0:Ze.granularity,onChange:U,hasWarning:oe("spatial_information"),allOption:R.$t("Select an option"),addAllOption:!1},null,8,["placeholder","searchPlaceholder","initialOptions","values","hasWarning","allOption"])])])]}),_:1},8,["accordion","onBlur"])]),d("div",w$,[d("button",{class:"fr-btn",onClick:I},_(R.$t("Next")),1)])]),_:1})])])]))}}),x$=q({components:{ContentLoader:gs},props:{width:{type:Number,default:80}}}),k$=["width"];function C$(t,e,s,n,i,o){const r=me("content-loader");return y(),N(r,{width:t.width,height:"40",speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>[d("rect",{x:"0",y:"0",rx:"21",ry:"21",width:t.width,height:"40"},null,8,k$)]),_:1},8,["width"])}const Kl=pe(x$,[["render",C$]]),S$=q({components:{ContentLoader:gs}});function T$(t,e,s,n,i,o){const r=me("content-loader");return y(),N(r,{width:"88",height:"40",speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:P(()=>e[0]||(e[0]=[d("circle",{cx:"20",cy:"20",r:"20"},null,-1),d("circle",{cx:"68",cy:"20",r:"20"},null,-1)])),_:1})}const E$=pe(S$,[["render",T$]]),md="files";function vd(t){const{t:e}=ce(),s=Yd(t),n=j(()=>s.value.filetype==="remote"),i={url:{required:ma(n.value)},title:{required:ke},type:{required:ke},format:{required:ke},schema:{},mime:{}},o=Gs(e("It's advised to add a description.")),r={url:{required:ma(n.value)},title:{required:ke},type:{required:ke},format:{required:ke},description:{required:o,minLengthValue:no(io)}},{getErrorText:a,getWarningText:l,getFunctionalState:c,hasError:u,hasWarning:f,reset:p,validateRequiredRules:g,v$:m,vWarning$:v}=Kt(s,i,r,md),b=j(()=>({url:m.value.url.$dirty?"info":"disabled",title:c(m.value.title.$dirty,m.value.title.$error,!1),type:c(m.value.type.$dirty,m.value.type.$error,!1),format:c(m.value.format.$dirty,m.value.format.$error,!1),description:c(v.value.description.$dirty,!1,v.value.description.$error),schema:m.value.schema.$dirty?"info":"disabled",mime:m.value.mime.$dirty?"info":"disabled"})),$=S=>u(b,S),w=S=>f(b,S),C=j(()=>m.value.$errors.map(S=>_e(S.$message))),T=j(()=>v.value.$errors.map(S=>_e(S.$message)));return{fieldHasError:$,fieldHasWarning:w,getErrorText:a,getWarningText:l,isRemote:n,requiredRules:i,warningRules:r,reset:p,state:b,stateErrors:C,stateWarnings:T,validateRequiredRules:g,v$:m,vWarning$:v}}const P$=q({components:{FileLoader:E$,ResourceIcon:cu},emits:["delete","edit"],props:{showEditAndWarning:{type:Boolean,default:!0},hideActions:{type:Boolean,default:!1},file:{type:Object,required:!0}},setup(t){const e=M({...t.file}),s=j(()=>Nf(e.value)),n=j(()=>Vf(e.value)),{stateErrors:i,stateWarnings:o,validateRequiredRules:r}=vd(e);return we(()=>r()),Tt(t.file,()=>e.value={...t.file}),{file:e,format:t.file.format,formatFilesize:Cn,formatRelativeIfRecentDate:Gn,loaded:n,loading:s,stateErrors:i,stateWarnings:o}}}),A$={class:"border border-default-grey fr-p-1w"},D$={class:"fr-grid-row fr-grid-row--middle no-wrap wrap-md justify-between"},M$={class:"fr-col-auto min-width-0"},O$={class:"fr-grid-row no-wrap"},L$={class:"fr-col fr-m-0 fr-text--sm overflow-wrap-anywhere text-overflow-ellipsis"},R$={class:"fr-my-0 text-grey-380 fr-grid-row fr-grid-row--middle"},I$={key:0,class:"fr-text--xs fr-m-0 overflow-wrap-anywhere text-overflow-ellipsis dash-after"},z$={class:"fr-text--xs fr-m-0"},F$={key:1,class:"fr-text--xs fr-m-0 dash-before"},B$={key:0,class:"fr-col-auto"},N$={key:1,class:"fr-grid-row fr-grid-row--middle no-wrap wrap-md"},V$={class:"fr-col-auto fr-m-0"},W$={key:0,class:"fr-col-auto fr-ml-1w fr-m-0"},H$={class:"fr-mt-1w fr-mb-0 fr-text--xs text-default-error"},U$={class:"fr-mt-1w fr-mb-0 fr-text--xs text-default-warning"};function j$(t,e,s,n,i,o){var l,c,u,f;const r=me("ResourceIcon"),a=me("FileLoader");return y(),k("div",A$,[d("div",D$,[d("div",M$,[d("div",O$,[x(r,{class:"fr-col-auto fr-mr-1v fr-icon--sm",resource:t.file},null,8,["resource"]),d("h4",L$,_(t.file.title||t.$t("Nameless resource")),1)]),d("div",R$,[(l=t.file.file)!=null&&l.name?(y(),k("p",I$,_((c=t.file.file)==null?void 0:c.name),1)):z("",!0),d("p",z$,_(t.$t("Updated {date}",{date:t.formatRelativeIfRecentDate((u=t.file.file)==null?void 0:u.lastModified)})),1),t.file.format?(y(),k("p",F$,[W(_((f=t.file.format.trim())==null?void 0:f.toLowerCase())+" ",1),t.file.filesize?(y(),k(J,{key:0},[W("("+_(t.formatFilesize(t.file.filesize))+")",1)],64)):z("",!0)])):z("",!0)])]),!t.hideActions&&!t.loaded?(y(),k("div",B$,[t.loading?(y(),N(a,{key:0})):(y(),k("div",N$,[d("p",V$,[d("button",{type:"button",class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-delete-line fr-icon--sm",onClick:e[0]||(e[0]=p=>t.$emit("delete"))},_(t.$t("Remove file")),1)]),t.showEditAndWarning?(y(),k("p",W$,[d("button",{type:"button",class:"fr-btn fr-icon-pencil-line fr-icon--sm",onClick:e[1]||(e[1]=p=>t.$emit("edit"))},_(t.$t("Edit file")),1)])):z("",!0)]))])):z("",!0)]),t.stateErrors.length?(y(!0),k(J,{key:0},ve(t.stateErrors,p=>(y(),k("p",H$,[e[2]||(e[2]=d("span",{class:"fr-icon-error-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(p),1)]))),256)):t.stateWarnings.length&&t.showEditAndWarning?(y(!0),k(J,{key:1},ve(t.stateWarnings,p=>(y(),k("p",U$,[e[3]||(e[3]=d("span",{class:"fr-icon-warning-line fr-icon--sm","aria-hidden":"true"},null,-1)),W(" "+_(p),1)]))),256)):z("",!0)])}const la=pe(P$,[["render",j$]]),Zl=M([]),zo=M(null);function bd(){const{t}=ce(),e=M([]),s=o=>{const r=[..._e(o)];e.value=r},n=(o,r,a=0)=>a>3?Promise.reject(t("Failed to upload file "+r.title)):Hf(o,r).catch(l=>n(o,r,a+1)),i=o=>{const r=[];for(const a in e.value){const l=e.value[a];if(l.state==="loaded")continue;e.value[a].state="loading";let c=n(o,l).then(u=>(e.value[a].state="loaded",u)).catch(u=>(e.value[a].state="failed",Promise.reject(u)));r.push(c)}return Promise.allSettled(r)};return we(()=>{zo.value||(zo.value=Wf(),zo.value.then(o=>Zl.value=o))}),{allowedExtensions:dc(Zl),files:e,updateFiles:s,uploadFiles:i}}const q$=q({components:{Container:ot,FileCard:la,InputGroup:ze,UploadGroup:Cc},emits:["send"],inheritAttrs:!1,props:{id:{type:String,required:!0},multiple:{type:Boolean,default:!1}},setup(t,{emit:e}){const{t:s}=ce(),n=j(()=>t.id+"-title"),{allowedExtensions:i}=bd(),o=j(()=>i.value.map(L=>".".concat(L)).join(",")),r=Xo("modalRef"),a=M([]),c={modalFiles:{fileRequired:Gs(s("At least one file or link is required."))}},{getErrorText:u,getFunctionalState:f,hasError:p,reset:g,validateRequiredRules:m,v$:v}=Kt({modalFiles:a},c,c,md),b=j(()=>({modalFiles:f(v.value.modalFiles.$dirty,v.value.modalFiles.$error,!1)})),$=L=>p(b,L),w=j(()=>a.value.filter(L=>L.filetype==="file")),C=L=>{a.value=w.value;for(const B of L)a.value.push({file:B,description:"",format:T(B),filesize:B.size,filetype:"file",mime:B.type,title:B.name,type:"main",state:"none"})},T=L=>{const B=L.type.includes("/")?L.type.split("/").pop()||"":L.type;let H=i.value.includes(B)?B:"";if(!H){const D=L.name.includes(".")?L.name.split(".").pop()||"":L.name;H=i.value.includes(D)?D:""}return H},S=L=>{a.value=[],a.value.push({description:"",filetype:"remote",title:"",format:"",mime:"",type:"main",url:L,state:"none"})},E=L=>a.value.splice(L,1),O=()=>{a.value=[],globalThis.dsfr(r.value).modal.conceal(),g()};return{accept:o,allowedExtensions:i,close:O,fileModalTitleId:n,getErrorText:u,nonRemoteFiles:w,open,removeFile:E,send:()=>{m().then(L=>{L&&(e("send",a.value),O())})},setFileLink:S,setFiles:C,fieldHasError:$,validateRequiredRules:m}}}),Y$=["aria-labelledby","id"],G$={class:"fr-container fr-container--fluid fr-container-md"},X$={class:"fr-grid-row fr-grid-row--center"},K$={class:"fr-col-12 fr-col-md-8"},Z$={class:"fr-modal__body"},J$={class:"fr-modal__header"},Q$=["title","aria-controls"],ex={class:"fr-modal__content"},tx=["id"],sx={class:"fr-hr-or text-transform-lowercase fr-text--regular text-mention-grey fr-mt-3v"},nx={class:"fr-hr-or-text"},ix={class:"subtitle subtitle--uppercase fr-mb-1w"},ox={class:"fr-modal__footer"},rx={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left"},ax=["aria-controls"];function lx(t,e,s,n,i,o){const r=me("UploadGroup"),a=me("FileCard"),l=me("InputGroup");return y(),N(Yn,{to:"body"},[d("dialog",us(t.$attrs,{"aria-labelledby":t.fileModalTitleId,id:t.id,role:"dialog",class:"fr-modal",ref:"modalRef","aria-modal":"true"}),[d("div",G$,[d("div",X$,[d("div",K$,[d("div",Z$,[d("div",J$,[d("button",{class:"fr-btn--close fr-btn",title:t.$t("Close the modal dialog"),"aria-controls":t.id,target:"_self",onClick:e[0]||(e[0]=(...c)=>t.close&&t.close(...c))},_(t.$t("Close")),9,Q$)]),d("div",ex,[d("h2",{id:t.fileModalTitleId,class:"subtitle subtitle--uppercase fr-mb-1w"},_(t.$t("Add a file")),9,tx),x(r,{label:t.$t("Upload files"),type:"drop",accept:t.accept,multiple:t.multiple,onChange:t.setFiles,required:!0,hintText:t.multiple?t.$t("Max size: 420 Mb. Multiple files allowed."):t.$t("Max size: 420 Mb."),hasError:t.fieldHasError("modalFiles"),errorText:t.getErrorText("modalFiles")},null,8,["label","accept","multiple","onChange","hintText","hasError","errorText"]),(y(!0),k(J,null,ve(t.nonRemoteFiles,(c,u)=>(y(),N(a,{class:"fr-mb-3v",key:u,file:c,showEditAndWarning:!1,onDelete:f=>t.removeFile(u)},null,8,["file","onDelete"]))),128)),d("p",sx,[d("span",nx,_(t.$t("or")),1)]),d("h2",ix,_(t.$t("Add a link")),1),x(l,{label:t.$t("Exact link to the file"),hintText:t.$t("Type a valid url, starting with https://"),placeholder:"https://",onChange:t.setFileLink,type:"url",hasError:t.fieldHasError("modalFiles"),errorText:t.getErrorText("modalFiles")},null,8,["label","hintText","onChange","hasError","errorText"])]),d("div",ox,[d("div",rx,[d("button",{class:"fr-btn","aria-controls":t.id,target:"_self",onClickCapture:e[1]||(e[1]=Me((...c)=>t.send&&t.send(...c),["prevent","stop"]))},_(t.$t("Send")),41,ax)])])])])])])],16,Y$)])}const cx=pe(q$,[["render",lx]]),ux=q({components:{UploadModal:cx},emits:["change"],inheritAttrs:!1,props:{disabled:{type:Boolean,default:!1},errorText:{type:String,default:""},hasError:{type:Boolean,default:!1},groupClass:{type:String,default:""},isValid:{type:Boolean,default:!1},label:{type:String,required:!0},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},validText:{type:String,default:""}},setup(t,{emit:e}){const{id:s}=he("upload"),n=j(()=>s+"-desc-error"),i=j(()=>s+"-modal"),o=j(()=>s+"-desc-valid"),r=j(()=>{let c="";return t.isValid?c=o.value:t.hasError&&(c=n.value),c}),a=j(()=>({[t.groupClass]:!0,"fr-input-group--disabled":t.disabled,"fr-input-group--error":t.hasError,"fr-input-group--valid":t.isValid}));return{ariaDescribedBy:r,containerClass:a,errorTextId:n,id:s,modalId:i,onChange:c=>{e("change",c)},open,validTextId:o}}}),dx=["aria-describedby","aria-controls","disabled"],fx=["id"],hx=["id"];function px(t,e,s,n,i,o){const r=me("UploadModal");return y(),k("div",{class:Te(["fr-upload-group",t.containerClass])},[d("button",us({class:"fr-btn fr-btn--icon-left fr-icon-upload-line","aria-describedby":t.ariaDescribedBy,"data-fr-opened":"false","aria-controls":t.modalId,disabled:t.disabled},t.$attrs),_(t.label),17,dx),x(r,{id:t.modalId,multiple:!0,onSend:t.onChange},null,8,["id","onSend"]),t.isValid?(y(),k("p",{key:0,id:t.validTextId,class:"fr-valid-text fr-my-0"},_(t.validText),9,fx)):t.hasError?(y(),k("p",{key:1,id:t.errorTextId,class:"fr-error-text fr-my-0"},_(t.errorText),9,hx)):z("",!0)],2)}const Jl=pe(ux,[["render",px]]),gx={class:"fr-container"},mx={class:"fr-grid-row"},vx={class:"markdown fr-m-0"},bx={class:"fr-m-0 fr-mb-1w"},_x={class:"markdown fr-m-0"},yx={class:"fr-m-0 fr-mb-1w"},wx={class:"fr-col-12 fr-col-md-7"},$x={class:"fr-grid-row"},xx={class:"fr-col-auto fr-mr-3v"},kx=["src"],Cx={class:"fr-col"},Sx={class:"fr-m-0 fr-text--bold"},Tx={class:"fr-m-0 fr-text--xs"},Ex={class:"fr-fieldset min-width-0","aria-labelledby":"description-legend"},Px={class:"fr-fieldset__legend",id:"description-legend"},Ax={class:"subtitle subtitle--uppercase fr-mb-3v"},Dx={class:"fr-text--md fr-text--bold fr-m-0 fr-mb-2w"},Mx={class:"fr-grid-row fr-grid-row--center"},Ox={key:0},Lx={key:1},Rx={class:"fr-grid-row fr-grid-row--right"},Ix=q({__name:"Step3AddFiles",props:{errors:{},loading:{type:Boolean,default:!1},steps:{},originalFiles:{}},emits:["editFile","next"],setup(t,{emit:e}){const s=t,n=e,{t:i}=ce(),{id:o}=he("accordion"),{id:r}=he("accordion"),a=M([]);_t(()=>{a.value=[...s.originalFiles]});const l=Gs(i("At least one file is required.")),c=D=>D.reduce((V,Y)=>V||!Uf(Y.format),!1),u=(D,V)=>V.files.reduce((Y,X)=>{var Q;return Y||X.type==="documentation"||!!((Q=X.description)!=null&&Q.trim())},!1),f={files:{fileRequired:l}},p={files:{fileRequired:l,openFormat:va(i("You did not add a file with an open format."),c)},hasDocumentation:{hasDocumentation:va(i("You have not added a documentation file or described your files."),u)}},{getErrorText:g,getFunctionalState:m,getWarningText:v,hasError:b,hasWarning:$,validateRequiredRules:w,v$:C,vWarning$:T}=Kt({files:a,hasDocumentation:{}},f,p),S=D=>{a.value.push(...D),D.length===1&&D[0].filetype==="remote"&&n("editFile",_e(a),a.value.length-1)},E=D=>a.value.splice(D,1),O=j(()=>({files:m(T.value.files.$dirty,C.value.files.$invalid,T.value.files.$error),hasDocumentation:m(T.value.hasDocumentation.$dirty,!1,T.value.hasDocumentation.$error)})),A=()=>{C.value.files.$touch(),T.value.files.$touch(),T.value.hasDocumentation.$touch()},L=()=>{w().then(D=>{D&&n("next",_e(a))})},B=D=>b(O,D),H=D=>$(O,D);return(D,V)=>(y(),k("div",gx,[x(kt,{steps:D.steps,currentStep:2},null,8,["steps"]),d("div",mx,[x(Xn,{class:"fr-col-12 fr-col-md-5",buttonText:D.$t("Help"),onRight:!0,fixed:!0,showBorder:!1},{title:P(()=>[V[0]||(V[0]=d("span",{class:"fr-icon--sm fr-icon-question-line","aria-hidden":"true"},null,-1)),W(" "+_(D.$t("Help")),1)]),default:P(()=>[x(Ce,{title:D.$t("Choose the right format"),id:h(o),state:O.value.files,opened:!0},{default:P(()=>[d("div",vx,[d("p",bx,_(D.$t("Formats should be :")),1),d("ul",null,[d("li",null,_(D.$t("open : an open format doesn't add technical specifications that restrict data use (i.e. using a paid software) ;")),1),d("li",null,_(D.$t("easily reusable : a format easily reusable implies that anybody or server can reuse easily the dataset ;")),1),d("li",null,_(D.$t("usable in an automated processing system : an automated processing system allows to make automatic operations, related to data exploitation (i.e. a CSV file is easily usable by an automated system unlike a PDF file).")),1)])]),H("files")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(v)("files")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:D.$t("Add documentation"),id:h(r),state:O.value.hasDocumentation},{default:P(()=>[d("div",_x,[d("p",yx,_(D.$t("The description of a file facilitates the reuse of data. It includes, among others:")),1),d("ul",null,[d("li",null,_(D.$t("a general description of the dataset ;")),1),d("li",null,_(D.$t("a description of the data production mode ;")),1),d("li",null,_(D.$t("a description of the data model ;")),1),d("li",null,_(D.$t("a description of the data schema ;")),1),d("li",null,_(D.$t("a description of the metadata ;")),1),d("li",null,_(D.$t("a description of major changes.")),1)])]),H("hasDocumentation")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(v)("hasDocumentation")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"])]),_:1},8,["buttonText"]),d("div",wx,[x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",$x,[d("div",xx,[d("img",{src:h(gd),alt:""},null,8,kx)]),d("div",Cx,[d("p",Sx,_(D.$t("What is a file?")),1),d("p",Tx,_(D.$t("A dataset can contain multiple types of files (updates, history, documentation, source code, API, link, etc.)")),1)])])]),_:1}),d("fieldset",Ex,[d("legend",Px,[d("h2",Ax,_(D.$t("Files")),1)]),x(Ee,{class:"fr-fieldset__element min-width-0",accordion:h(o),onBlur:A},{default:P(()=>[a.value.length===0?(y(),N(ot,{key:0,color:"alt-grey",class:"fr-grid-row fr-grid-row--middle flex-direction-column"},{default:P(()=>[d("h3",Dx,_(D.$t("Add your first files")),1),x(Jl,{groupClass:"fr-grid-row flex-direction-column fr-grid-row--middle",label:D.$t("Add files"),title:D.$t("Add files (opens a modal dialog)"),multiple:!0,required:!0,hasError:B("files"),errorText:h(g)("files"),onChange:S},null,8,["label","title","hasError","errorText"])]),_:1})):(y(),k(J,{key:1},[(y(!0),k(J,null,ve(a.value,(Y,X)=>(y(),N(la,{class:"fr-mb-3v",file:Y,onDelete:Q=>E(X),onEdit:Q=>D.$emit("editFile",a.value,X)},null,8,["file","onDelete","onEdit"]))),256)),d("div",Mx,[D.loading?(y(),N(Kl,{key:0,width:114})):(y(),N(Jl,{key:1,label:D.$t("Add files"),title:D.$t("Add files (opens a modal dialog)"),multiple:!0,required:!0,hasError:B("files"),errorText:h(g)("files"),onChange:S},null,8,["label","title","hasError","errorText"]))])],64))]),_:1},8,["accordion"])]),D.errors.length?(y(),N(cn,{key:0,type:"error",class:"fr-mt-n2w fr-mb-2w"},{title:P(()=>[W(_(D.$t("An error occured | Some errors occured",D.errors.length)),1)]),default:P(()=>[D.errors.length>1?(y(),k("ul",Ox,[(y(!0),k(J,null,ve(D.errors,Y=>(y(),k("li",null,_(Y),1))),256))])):(y(),k("p",Lx,_(D.errors[0]),1))]),_:1})):z("",!0),d("div",Rx,[D.loading?(y(),N(Kl,{key:0,width:66})):(y(),k("button",{key:1,class:"fr-btn",onClick:L},_(D.$t("Next")),1))])]),_:1})])])]))}}),zx=q({components:{Accordion:Ce,AccordionGroup:oo,Container:ot,InputGroup:ze,FileCard:la,LinkedToAccordion:Ee,MultiSelect:Ae,SchemaSelect:ud,SelectGroup:Sc,Sidemenu:Xn,Stepper:kt,Well:$e},emits:["next"],props:{steps:{type:Array,required:!0},datasetFile:{type:Object,required:!0}},setup(t,{emit:e}){const{t:s}=ce(),{id:n}=he("accordion"),{id:i}=he("accordion"),{id:o}=he("accordion"),{id:r}=he("accordion"),{id:a}=he("accordion"),{id:l}=he("accordion"),{id:c}=he("accordion"),u=xc(),f=M({...t.datasetFile}),{isRemote:p,getErrorText:g,getWarningText:m,state:v,fieldHasError:b,fieldHasWarning:$,validateRequiredRules:w,v$:C,vWarning$:T}=vd(f),S=j(()=>p.value?s("Name a link"):s("Name a file")),E=j(()=>p.value?s("Link title"):s("File title")),O=jf.map(L=>({label:bc(L),value:L}));return{allowedExtensionsUrl:u,chooseTheCorrectLinkAccordionId:n,nameAFileAccordionId:i,chooseTheRightTypeOfFileAccordionId:o,chooseTheCorrectFormatAccordionId:r,writeAGoodDescriptionAccordionId:a,selectASchemaAccordionId:l,fileTypes:O,file:f,fileTitle:E,isRemote:p,nameAFile:S,schema_documentation_url:Tc,state:v,getErrorText:g,getWarningText:m,fieldHasError:b,fieldHasWarning:$,submit:()=>{w().then(L=>{L&&e("next",f)})},v$:C,vWarning$:T,whatIsAMimeTypeAccordionId:c}}}),Fx={class:"fr-container"},Bx={class:"fr-grid-row"},Nx={class:"markdown fr-m-0"},Vx={class:"fr-m-0 fr-mb-1w"},Wx={class:"markdown fr-m-0"},Hx={class:"fr-m-0 fr-mb-1w"},Ux={class:"markdown fr-m-0"},jx={class:"fr-m-0 fr-mb-1w"},qx={class:"markdown fr-m-0"},Yx={class:"fr-m-0 fr-mb-1w"},Gx=["href"],Xx={class:"fr-col-12 fr-col-md-7"},Kx={class:"fr-fieldset min-width-0","aria-labelledby":"description-legend"},Zx={class:"fr-fieldset__legend",id:"description-legend"},Jx={class:"subtitle subtitle--uppercase fr-mb-3v"},Qx={class:"fr-fieldset__element"},e6={class:"fr-grid-row fr-grid-row--right"};function t6(t,e,s,n,i,o){const r=me("Stepper"),a=me("Accordion"),l=me("Well"),c=me("i18n-t"),u=me("AccordionGroup"),f=me("Sidemenu"),p=me("FileCard"),g=me("InputGroup"),m=me("LinkedToAccordion"),v=me("SelectGroup"),b=me("MultiSelect"),$=me("SchemaSelect"),w=me("Container");return y(),k("div",Fx,[x(r,{steps:t.steps,currentStep:2},null,8,["steps"]),d("div",Bx,[x(f,{class:"fr-col-12 fr-col-md-5",buttonText:t.$t("Help"),onRight:!0,showBorder:!1},{title:P(()=>[e[8]||(e[8]=d("span",{class:"fr-icon--sm fr-icon-question-line","aria-hidden":"true"},null,-1)),W(" "+_(t.$t("Help")),1)]),default:P(()=>[x(u,null,{default:P(()=>[t.isRemote?(y(),N(a,{key:0,title:t.$t("Choose the correct link"),id:t.chooseTheCorrectLinkAccordionId,state:t.state.url},{default:P(()=>[W(_(t.$t("It's advised to put the link to the file itself instead of a web page to allow {site} to parse it.")),1)]),_:1},8,["title","id","state"])):z("",!0),x(a,{title:t.nameAFile,id:t.nameAFileAccordionId,state:t.state.title},{default:P(()=>[d("div",Nx,[d("p",Vx,_(t.$t("It is recommended to choose a title that can inform any user about the content of the file. Some practices to avoid:")),1),d("ul",null,[d("li",null,_(t.$t('giving a too generic title (e.g., "list.csv");')),1),d("li",null,_(t.$t("giving a too long title that would make the file manipulation difficult;")),1),d("li",null,_(t.$t("giving a title containing accents or special characters (file interoperability issues);")),1),d("li",null,_(t.$t("giving a title that is too technical and derived from business nomenclatures.")),1)])])]),_:1},8,["title","id","state"]),x(a,{title:t.$t("Publish the correct file types"),id:t.chooseTheRightTypeOfFileAccordionId,state:t.state.type},{default:P(()=>[d("div",Wx,[d("p",Hx,_(t.$t("You can choose from the following types:")),1),d("ul",null,[(y(!0),k(J,null,ve(t.fileTypes,C=>(y(),k("li",null,_(C.label),1))),256))])])]),_:1},8,["title","id","state"]),x(a,{title:t.$t("Choose the right format"),id:t.chooseTheCorrectFormatAccordionId,state:t.state.format},{default:P(()=>[d("div",Ux,[d("p",jx,_(t.$t("The formats must be:")),1),d("ul",null,[d("li",null,_(t.$t("open : an open format doesn't add technical specifications that restrict data use (i.e. using a paid software) ;")),1),d("li",null,_(t.$t("easily reusable : a format easily reusable implies that anybody or server can reuse easily the dataset ;")),1),d("li",null,_(t.$t("usable in an automated processing system : an automated processing system allows to make automatic operations, related to data exploitation (i.e. a CSV file is easily usable by an automated system unlike a PDF file).")),1)])])]),_:1},8,["title","id","state"]),x(a,{title:t.$t("Add documentation"),id:t.writeAGoodDescriptionAccordionId,state:t.state.description},{default:P(()=>[d("div",qx,[d("p",Yx,_(t.$t("The description of a file facilitates the reuse of data. It includes, among others:")),1),d("ul",null,[d("li",null,_(t.$t("a general description of the dataset ;")),1),d("li",null,_(t.$t("a description of the data production mode ;")),1),d("li",null,_(t.$t("a description of the data model ;")),1),d("li",null,_(t.$t("a description of the data schema ;")),1),d("li",null,_(t.$t("a description of the metadata ;")),1),d("li",null,_(t.$t("a description of major changes.")),1)])]),t.fieldHasWarning("description")?(y(),N(l,{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(t.getWarningText("description")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(a,{title:t.$t("Select a schema"),id:t.selectASchemaAccordionId,state:t.state.schema},{default:P(()=>[x(c,{keypath:"It is possible to identify an existing data schema by visiting the {schema} website, that references a list of existing data schema.",tag:"p",class:"fr-m-0 fr-mb-1w"},{schema:P(()=>[d("a",{href:t.schema_documentation_url},"schema.data.gouv.fr",8,Gx)]),_:1})]),_:1},8,["title","id","state"])]),_:1})]),_:1},8,["buttonText"]),d("div",Xx,[x(w,null,{default:P(()=>[d("fieldset",Kx,[d("legend",Zx,[d("h2",Jx,_(t.$t("File metadata")),1)]),d("div",Qx,[x(p,{class:"fr-mb-3v",file:t.file,hideActions:!0},null,8,["file"])]),t.isRemote?(y(),N(m,{key:0,class:"fr-fieldset__element min-width-0",accordion:t.chooseTheCorrectLinkAccordionId,onBlur:t.v$.url.$touch},{default:P(()=>[x(g,{label:t.$t("Link url"),required:!0,modelValue:t.file.url,"onUpdate:modelValue":e[0]||(e[0]=C=>t.file.url=C),hasError:t.fieldHasError("url"),errorText:t.getErrorText("url")},null,8,["label","modelValue","hasError","errorText"])]),_:1},8,["accordion","onBlur"])):z("",!0),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.nameAFileAccordionId,onBlur:t.v$.title.$touch},{default:P(()=>[x(g,{label:t.fileTitle,required:!0,modelValue:t.file.title,"onUpdate:modelValue":e[1]||(e[1]=C=>t.file.title=C),hasError:t.fieldHasError("title"),errorText:t.getErrorText("title")},null,8,["label","modelValue","hasError","errorText"])]),_:1},8,["accordion","onBlur"]),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.chooseTheRightTypeOfFileAccordionId,onBlur:t.v$.type.$touch},{default:P(()=>[x(v,{label:t.$t("Type"),required:!0,modelValue:t.file.type,"onUpdate:modelValue":e[2]||(e[2]=C=>t.file.type=C),hasError:t.fieldHasError("type"),errorText:t.getErrorText("type"),options:t.fileTypes},null,8,["label","modelValue","hasError","errorText","options"])]),_:1},8,["accordion","onBlur"]),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.chooseTheCorrectFormatAccordionId,onBlur:t.v$.format.$touch},{default:P(()=>[x(b,{placeholder:t.$t("Format"),searchPlaceholder:t.$t("Search a format..."),listUrl:t.allowedExtensionsUrl,suggestUrl:t.isRemote?"datasets/suggest/formats/":null,values:t.file.format,onChange:e[3]||(e[3]=C=>t.file.format=C),required:!0,hasError:t.fieldHasError("format"),hasWarning:t.fieldHasWarning("format"),errorText:t.getErrorText("format"),allOption:t.$t("Select a format"),addAllOption:!1,addNewOption:t.isRemote},null,8,["placeholder","searchPlaceholder","listUrl","suggestUrl","values","hasError","hasWarning","errorText","allOption","addNewOption"])]),_:1},8,["accordion","onBlur"]),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.writeAGoodDescriptionAccordionId,onBlur:t.vWarning$.description.$touch},{default:P(()=>[x(g,{label:t.$t("Description"),modelValue:t.file.description,"onUpdate:modelValue":e[4]||(e[4]=C=>t.file.description=C),hasWarning:t.fieldHasWarning("description"),errorText:t.getWarningText("description"),type:"textarea"},null,8,["label","modelValue","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.selectASchemaAccordionId,onBlur:t.v$.schema.$touch},{default:P(()=>[x($,{allOption:t.$t("Select a schema"),values:t.file.schema,onChange:e[5]||(e[5]=C=>t.file.schema=C),showExplanation:!1},null,8,["allOption","values"])]),_:1},8,["accordion","onBlur"]),x(m,{class:"fr-fieldset__element min-width-0",accordion:t.whatIsAMimeTypeAccordionId,onBlur:t.v$.mime.$touch},{default:P(()=>[x(b,{placeholder:t.$t("Mime type"),searchPlaceholder:t.$t("Search a mime type..."),suggestUrl:"datasets/suggest/mime/",values:t.file.mime,onChange:e[6]||(e[6]=C=>t.file.mime=C),allOption:t.$t("Select a mime type"),addAllOption:!1,addNewOption:t.isRemote},null,8,["placeholder","searchPlaceholder","values","allOption","addNewOption"])]),_:1},8,["accordion","onBlur"])]),d("div",e6,[d("button",{class:"fr-btn",onClick:e[7]||(e[7]=(...C)=>t.submit&&t.submit(...C))},_(t.$t("Next")),1)])]),_:1})])])])}const s6=pe(zx,[["render",t6]]),vo="/_themes/gouvfr/assets/success.svg",n6={class:"fr-container"},i6={class:"fr-grid-row"},o6={class:"fr-col-auto fr-mr-3v"},r6=["src"],a6={class:"fr-col"},l6={class:"fr-m-0 fr-text--bold"},c6={class:"fr-m-0 fr-text--xs"},u6={class:"fr-grid-row justify-between"},d6=["href"],f6={class:"fr-grid-row fr-grid-row--right"},h6=["href"],p6=q({__name:"Step4CompleteThePublication",props:{feedbackUrl:{},originalDataset:{},redirectDraftUrl:{},steps:{}},emits:["redirectToPublicUrl"],setup(t,{emit:e}){const s=e,i=At({...t.originalDataset,private:!1});function o(){s("redirectToPublicUrl")}return(r,a)=>(y(),k("div",n6,[x(kt,{steps:r.steps,currentStep:3},null,8,["steps"]),x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-n3v"},{default:P(()=>[d("div",i6,[d("div",o6,[d("img",{src:h(vo),alt:""},null,8,r6)]),d("div",a6,[d("p",l6,_(r.$t("Your dataset is created !")),1),d("p",c6,_(r.$t("You can now publish it or save it as a draft.")),1)])])]),_:1}),x(Qn,{dataset:i,showMetrics:!1},null,8,["dataset"]),d("div",u6,[d("a",{href:r.feedbackUrl,class:"fr-btn fr-btn--tertiary-no-outline fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-lightbulb-line"},_(r.$t("Give us your feedback on the publishing form")),9,d6),d("div",f6,[d("a",{href:r.redirectDraftUrl,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-mr-3v"},_(r.$t("Save as draft")),9,h6),d("button",{onClick:o,class:"fr-btn"},_(r.$t("Publish the dataset")),1)])])]),_:1})]))}}),g6=q({__name:"PublishingForm",props:{redirectDraftUrl:{}},setup(t){const e=t,{t:s}=ce(),{files:n,updateFiles:i,uploadFiles:o}=bd(),r=M([]),a=[s("Publish data on {site}",{site:ln}),s("Describe your dataset"),s("Add files"),s("Complete your publishing")],l=M(0),c=M(null),u=M(null),f=ps(),p=M({archived:!1,page:"",title:"",acronym:"",description:"",tags:null,license:"",frequency:"",temporal_coverage:"",frequency_date:null,private:!0,spatial:{zones:[],granularity:""},quality:{all_resources_available:!1,dataset_description_quality:!1,has_open_format:!1,has_resources:!1,license:!1,resources_documentation:!1,score:0,spatial:!1,temporal_coverage:!1,update_frequency:!1,update_fulfilled_in_time:!1},owner:f,organization:null}),g=M(null),m=M(null),v=M(!1),b=j(()=>n.value.reduce((D,V)=>D||V.state==="loading",v.value)),$=M([]),w=M(null),C=M(null),T=(D=null,V=!0)=>{if(c.value&&c.value.scrollIntoView({behavior:"smooth"}),D!==null&&(l.value=D,V)){let Y=new URL(window.location.href);const X="#/step-".concat(D+1);Y.hash=X,window.history.pushState(null,"",Y)}};we(async()=>{Mr().then(D=>{u.value=D});try{const D=await qf();r.value=D}catch(D){console.error("Error fetching granularities:",D)}});const S=D=>p.value=_e(D),E=D=>{S(D),T(2)},O=D=>g.value?Promise.resolve(g.value):Xf(D),A=D=>{i(D),$.value=[],v.value=!0,O(p).then(V=>{g.value=V,m.value=e.redirectDraftUrl+g.value.id,o(g.value.id).then(Y=>{let X=!0;for(let Q of Y)Q.status==="rejected"&&(X=!1,$.value.push(Q.reason));X&&T(3)})}).catch(V=>console.log(V)).finally(()=>v.value=!1)},L=()=>{g.value&&Gf(g.value).then(D=>window.open(D.page,"_self"))},B=(D,V)=>{i(D),w.value=_e(n)[V],C.value=V,T()},H=D=>{if(w.value=_e(D),w.value){const V=[..._e(n)];V[C.value||0]=w.value,i(V)}w.value=null,C.value=null,T()};return Yf(window,"hashchange",D=>{const Y=window.location.hash.substring(7),X=parseInt(Y,10)-1||0,Q=!1;if(w.value&&typeof C.value=="number"){if(!w.value.title||!w.value.format){const se=[..._e(n)];se.splice(C.value,1),i(se)}w.value=null,C.value=null,T()}else T(X,Q)}),(D,V)=>(y(),k("div",{ref_key:"containerRef",ref:c},[l.value===0?(y(),N(T8,{key:0,steps:a,onStart:V[0]||(V[0]=Y=>T(1))})):l.value===1?(y(),N($$,{key:1,originalDataset:p.value,steps:a,granularities:r.value,user:u.value,onNext:E},null,8,["originalDataset","granularities","user"])):l.value===2?(y(),k(J,{key:2},[w.value===null?(y(),N(Ix,{key:0,loading:b.value,errors:$.value,originalFiles:h(n),steps:a,onNext:A,onEditFile:B},null,8,["loading","errors","originalFiles"])):(y(),N(s6,{key:1,datasetFile:w.value,steps:a,onNext:H},null,8,["datasetFile"]))],64)):l.value===3?(y(),N(p6,{key:3,feedbackUrl:h(Or),steps:a,originalDataset:g.value,redirectDraftUrl:m.value,onRedirectToPublicUrl:L},null,8,["feedbackUrl","originalDataset","redirectDraftUrl"])):z("",!0)],512))}}),m6="/_themes/gouvfr/assets/reuse2.svg",v6={class:"fr-container"},b6={class:"fr-grid-row"},_6={class:"fr-m-0"},y6={class:"fr-m-0"},w6={class:"markdown fr-m-0"},$6={class:"fr-m-0"},x6={class:"fr-m-0"},k6={class:"fr-m-0"},C6={class:"fr-m-0"},S6={class:"fr-m-0"},T6={class:"fr-col-12 fr-col-md-7"},E6={class:"fr-grid-row"},P6={class:"fr-col-auto fr-mr-3v"},A6=["src"],D6={class:"fr-col"},M6={class:"fr-m-0 fr-text--bold"},O6={class:"fr-m-0 fr-text--xs"},L6={class:"fr-fieldset","aria-labelledby":"description-legend"},R6={class:"fr-fieldset__legend",id:"description-legend"},I6={class:"subtitle subtitle--uppercase fr-mb-3v"},z6={class:"fr-fieldset__element"},F6={class:"fr-fieldset","aria-labelledby":"description-legend"},B6={class:"fr-fieldset__legend",id:"description-legend"},N6={class:"subtitle subtitle--uppercase fr-mb-3v"},V6={class:"text-align-center"},W6={key:0},H6={key:1},U6={class:"fr-grid-row fr-grid-row--right"},j6=["disabled"],q6=q({__name:"Step1DescribeReuse",props:{reuse:{},steps:{},errors:{},loading:{type:Boolean},user:{}},emits:["next"],setup(t,{emit:e}){const s=t,n=e,{t:i}=ce(),{id:o}=he("accordion"),{id:r}=he("accordion"),{id:a}=he("accordion"),{id:l}=he("accordion"),{id:c}=he("accordion"),{id:u}=he("accordion"),{id:f}=he("accordion"),p=At({...s.reuse}),g=M(null),m=M(null),v=Th(),b=Pc(),$=M(!1);function w(){return g.value!==null}function C(){return $.value}function T(le){p.organization=le.organization,p.owner=le.owner,$.value=!0}const S={title:{required:ke},url:{required:ke,url:Xs},type:{required:ke},topic:{required:ke},description:{required:ke},tags:{},image:{custom:w},owned:{custom:C}},E={title:{required:ke},url:{required:ke,url:Xs},type:{required:ke},topic:{required:ke},description:{required:ke,minLengthValue:no(io)},tags:{},image:{custom:w},owned:{custom:C}},{getErrorText:O,getFunctionalState:A,getWarningText:L,hasError:B,hasWarning:H,validateRequiredRules:D,v$:V,vWarning$:Y}=Kt(p,S,E),X=j(()=>({title:A(Y.value.title.$dirty,V.value.title.$invalid,Y.value.title.$error),url:A(Y.value.url.$dirty,V.value.url.$invalid,Y.value.url.$error),type:A(Y.value.type.$dirty,V.value.type.$invalid,Y.value.type.$error),topic:A(Y.value.topic.$dirty,V.value.topic.$invalid,Y.value.topic.$error),description:A(Y.value.description.$dirty,V.value.description.$invalid,Y.value.description.$error),tags:A(Y.value.tags.$dirty,!1,Y.value.tags.$error),image:A(Y.value.image.$dirty,V.value.image.$invalid,Y.value.image.$error),owned:A(Y.value.owned.$dirty,V.value.owned.$invalid,Y.value.owned.$error)})),Q=le=>B(X,le),se=le=>H(X,le);function G(le){g.value=le[0],m.value&&(m.value.src=URL.createObjectURL(g.value))}function ie(){D().then(le=>{le&&g.value&&n("next",p,g.value)})}return(le,oe)=>(y(),k("div",v6,[x(kt,{steps:le.steps,currentStep:0},null,8,["steps"]),d("div",b6,[x(Xn,{class:"fr-col-12 fr-col-md-5",buttonText:h(i)("Help"),onRight:!0,fixed:!0},{title:P(()=>[oe[6]||(oe[6]=d("span",{class:"fr-icon--sm fr-icon-question-line","aria-hidden":"true"},null,-1)),W(" "+_(h(i)("Help")),1)]),default:P(()=>[x(oo,null,{default:P(()=>[x(Ce,{title:h(i)("Naming your reuse"),id:h(o),state:X.value.title},{default:P(()=>[d("p",_6,_(h(i)('Prefer a title that allows understanding of the use made of the data rather than the name of the website or application ("Search Engine for Company Agreements" rather than "Accords-entreprise.fr" for example).')),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("What link to provide"),id:h(r),state:X.value.url},{default:P(()=>[d("p",y6,_(h(i)("Enter the link of the page on which the reuse is visible. Point directly to the reuse itself rather than a homepage. Make sure the link is stable over time.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:"Choose a type",id:h(a),state:X.value.type},{default:P(()=>[d("div",w6,[d("p",$6,_(h(i)("Please indicate the type under which to categorize the reuse (API, application, news article, visualization, etc.).")),1),se("type")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(L)("type")),1)]),_:1})):z("",!0)])]),_:1},8,["id","state"]),x(Ce,{title:h(i)("Choose a theme"),id:h(l),state:X.value.topic},{default:P(()=>[d("p",x6,_(h(i)("Choose the theme associated with your reuse.")),1),se("topic")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(L)("topic")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Describe your reuse"),id:h(c),state:X.value.description},{default:P(()=>[d("p",k6,_(h(i)("You can provide information about the method of creating the reuse, what the reuse allows to do or show, or tell more about yourself and the context of this reuse. It is preferable to maintain a neutral tone: if the reuse resembles too much like a promotional message, we may delete it.")),1),se("description")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(L)("description")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Add keywords"),id:h(u),state:X.value.tags},{default:P(()=>[d("p",C6,_(h(i)("Keywords appear on the presentation page and improve search engine optimization when a user is searching. From each keyword, you can obtain a list of reuses for which the keyword has also been assigned.")),1),se("tags")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(L)("tags")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Choose an image"),id:h(f),state:X.value.image},{default:P(()=>[d("p",S6,_(h(i)('If your reuse takes the form of a graphical representation, you can provide a preview to other users through an image or screenshot. This image will appear in the "Reuses" section of the associated dataset page. When relevant, screenshots are more effective in conveying what the reuse is about, so they are preferable to logos or illustrations, for example.')),1),se("image")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(L)("image")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"])]),_:1})]),_:1},8,["buttonText"]),d("div",T6,[x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",E6,[d("div",P6,[d("img",{src:h(m6),alt:""},null,8,A6)]),d("div",D6,[d("p",M6,_(h(i)("What is a reuse?")),1),d("p",O6,_(h(i)("A reuse is an exemple of public data's usage."))+" "+_(h(i)("Publishing a reuse can allow you to gain visibility and start start a dialogue with the dataset producer.")),1)])])]),_:1}),d("fieldset",L6,[d("legend",R6,[d("h2",I6,_(h(i)("Producer")),1)]),d("div",z6,[x(aa,{user:le.user,hasError:Q("owned"),errorText:h(i)("You need to select a Producer"),"onUpdate:owned":T},null,8,["user","hasError","errorText"])])]),d("fieldset",F6,[d("legend",B6,[d("h2",N6,_(h(i)("Description")),1)]),x(Ee,{class:"fr-fieldset__element",accordion:h(o),onBlur:h(Y).title.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(o),label:h(i)("Reuse name"),required:!0,modelValue:p.title,"onUpdate:modelValue":oe[0]||(oe[0]=U=>p.title=U),hasError:Q("title"),hasWarning:se("title"),errorText:h(O)("title")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(r),onBlur:h(Y).url.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(r),label:h(i)("Link"),type:"url",placeholder:h(i)("https://..."),required:!0,modelValue:p.url,"onUpdate:modelValue":oe[1]||(oe[1]=U=>p.url=U),hasError:Q("url"),hasWarning:se("url"),errorText:h(O)("url")},null,8,["aria-describedby","label","placeholder","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(a),onBlur:h(Y).type.$touch},{default:P(()=>[x(Ae,{required:!0,placeholder:h(i)("Type"),searchPlaceholder:h(i)("Select a type"),listUrl:h(b),values:p.type,onChange:oe[2]||(oe[2]=U=>p.type=U),hasError:Q("type"),hasWarning:se("type"),errorText:h(O)("type")},null,8,["placeholder","searchPlaceholder","listUrl","values","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(l),onBlur:h(Y).topic.$touch},{default:P(()=>[x(Ae,{required:!0,placeholder:h(i)("Theme"),searchPlaceholder:h(i)("Select a theme..."),listUrl:h(v),values:p.topic,onChange:oe[3]||(oe[3]=U=>p.topic=U),hasError:Q("topic"),hasWarning:se("topic"),errorText:h(O)("topic")},null,8,["placeholder","searchPlaceholder","listUrl","values","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(c),onBlur:h(Y).description.$touch},{default:P(()=>[x(ze,{label:h(i)("Description"),required:!0,type:"markdown",modelValue:p.description,"onUpdate:modelValue":oe[4]||(oe[4]=U=>p.description=U),hasError:Q("description"),hasWarning:se("description"),errorText:h(O)("description")},null,8,["label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(u),onBlur:h(Y).tags.$touch},{default:P(()=>[x(Ae,{minimumCharacterBeforeSuggest:2,onChange:oe[5]||(oe[5]=U=>p.tags=U),placeholder:h(i)("Tags"),searchPlaceholder:h(i)("Search a tag..."),suggestUrl:"/tags/suggest/",values:p.tags,hasWarning:se("tags"),multiple:!0,addNewOption:!0},null,8,["placeholder","searchPlaceholder","values","hasWarning"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(f),onBlur:h(Y).image.$touch},{default:P(()=>{var U;return[x(Cc,{hintText:h(i)("Max size: 4Mo. Accepted formats: JPG, JPEG, PNG"),accept:".jpeg, .jpg, .png",label:h(i)("Cover picture"),isValid:!!g.value,required:!0,showLabel:!0,validText:h(i)("Your file is valid"),hasError:Q("image"),errorText:h(O)("image"),onChange:G},null,8,["hintText","label","isValid","validText","hasError","errorText"]),wt(d("div",V6,[d("img",{class:"fr-responsive-img fr-mx-1w fr-mb-1w",alt:"",ref_key:"imagePreview",ref:m,width:"300",height:"300"},null,512)],512),[[Gd,(U=m.value)==null?void 0:U.src]])]}),_:1},8,["accordion","onBlur"])]),le.errors.length?(y(),N(cn,{key:0,type:"error",class:"fr-mt-n2w fr-mb-2w"},{title:P(()=>[W(_(h(i)("An error occured | Some errors occured",le.errors.length)),1)]),default:P(()=>[le.errors.length>1?(y(),k("ul",W6,[(y(!0),k(J,null,ve(le.errors,U=>(y(),k("li",null,_(U),1))),256))])):(y(),k("p",H6,_(le.errors[0]),1))]),_:1})):z("",!0),d("div",U6,[d("button",{class:"fr-btn",onClick:ie,disabled:le.loading},_(h(i)("Next")),9,j6)])]),_:1})])])]))}});/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ql(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function It(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(s),!0).forEach(function(n){Y6(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ql(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Mi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mi=function(e){return typeof e}:Mi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(t)}function Y6(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Xt(){return Xt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Xt.apply(this,arguments)}function G6(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function X6(t,e){if(t==null)return{};var s=G6(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}var K6="1.15.3";function qt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qt=qt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ei=qt(/Edge/i),ec=qt(/firefox/i),Rn=qt(/safari/i)&&!qt(/chrome/i)&&!qt(/android/i),_d=qt(/iP(ad|od|hone)/i),yd=qt(/chrome/i)&&qt(/android/i),wd={capture:!1,passive:!1};function xe(t,e,s){t.addEventListener(e,s,!Qt&&wd)}function be(t,e,s){t.removeEventListener(e,s,!Qt&&wd)}function Ki(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(s){return!1}return!1}}function $d(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function St(t,e,s,n){if(t){s=s||document;do{if(e!=null&&(e[0]===">"?t.parentNode===s&&Ki(t,e):Ki(t,e))||n&&t===s)return t;if(t===s)break}while(t=$d(t))}return null}var tc=/\s+/g;function ft(t,e,s){if(t&&e)if(t.classList)t.classList[s?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(tc," ").replace(" "+e+" "," ");t.className=(n+(s?" "+e:"")).replace(tc," ")}}function re(t,e,s){var n=t&&t.style;if(n){if(s===void 0)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(s=t.currentStyle),e===void 0?s:s[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=s+(typeof s=="string"?"":"px")}}function Zs(t,e){var s="";if(typeof t=="string")s=t;else do{var n=re(t,"transform");n&&n!=="none"&&(s=n+" "+s)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(s)}function xd(t,e,s){if(t){var n=t.getElementsByTagName(e),i=0,o=n.length;if(s)for(;i<o;i++)s(n[i],i);return n}return[]}function Rt(){var t=document.scrollingElement;return t||document.documentElement}function Ue(t,e,s,n,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,a,l,c,u,f;if(t!==window&&t.parentNode&&t!==Rt()?(o=t.getBoundingClientRect(),r=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,f=o.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||s)&&t!==window&&(i=i||t.parentNode,!Qt))do if(i&&i.getBoundingClientRect&&(re(i,"transform")!=="none"||s&&re(i,"position")!=="static")){var p=i.getBoundingClientRect();r-=p.top+parseInt(re(i,"border-top-width")),a-=p.left+parseInt(re(i,"border-left-width")),l=r+o.height,c=a+o.width;break}while(i=i.parentNode);if(n&&t!==window){var g=Zs(i||t),m=g&&g.a,v=g&&g.d;g&&(r/=v,a/=m,f/=m,u/=v,l=r+u,c=a+f)}return{top:r,left:a,bottom:l,right:c,width:f,height:u}}}function sc(t,e,s){for(var n=ls(t,!0),i=Ue(t)[e];n;){var o=Ue(n)[s],r=void 0;if(s==="top"||s==="left"?r=i>=o:r=i<=o,!r)return n;if(n===Rt())break;n=ls(n,!1)}return!1}function sn(t,e,s,n){for(var i=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==ae.ghost&&(n||r[o]!==ae.dragged)&&St(r[o],s.draggable,t,!1)){if(i===e)return r[o];i++}o++}return null}function ca(t,e){for(var s=t.lastElementChild;s&&(s===ae.ghost||re(s,"display")==="none"||e&&!Ki(s,e));)s=s.previousElementSibling;return s||null}function yt(t,e){var s=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ae.clone&&(!e||Ki(t,e))&&s++;return s}function nc(t){var e=0,s=0,n=Rt();if(t)do{var i=Zs(t),o=i.a,r=i.d;e+=t.scrollLeft*o,s+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,s]}function Z6(t,e){for(var s in t)if(t.hasOwnProperty(s)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[s][n])return Number(s)}return-1}function ls(t,e){if(!t||!t.getBoundingClientRect)return Rt();var s=t,n=!1;do if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var i=re(s);if(s.clientWidth<s.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||s.clientHeight<s.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!s.getBoundingClientRect||s===document.body)return Rt();if(n||e)return s;n=!0}}while(s=s.parentNode);return Rt()}function J6(t,e){if(t&&e)for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function Fo(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var In;function kd(t,e){return function(){if(!In){var s=arguments,n=this;s.length===1?t.call(n,s[0]):t.apply(n,s),In=setTimeout(function(){In=void 0},e)}}}function Q6(){clearTimeout(In),In=void 0}function Cd(t,e,s){t.scrollLeft+=e,t.scrollTop+=s}function Sd(t){var e=window.Polymer,s=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):s?s(t).clone(!0)[0]:t.cloneNode(!0)}function Td(t,e,s){var n={};return Array.from(t.children).forEach(function(i){var o,r,a,l;if(!(!St(i,e.draggable,t,!1)||i.animated||i===s)){var c=Ue(i);n.left=Math.min((o=n.left)!==null&&o!==void 0?o:1/0,c.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ct="Sortable"+new Date().getTime();function e7(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(re(i,"display")==="none"||i===ae.ghost)){t.push({target:i,rect:Ue(i)});var o=It({},t[t.length-1].rect);if(i.thisAnimationDuration){var r=Zs(i,!0);r&&(o.top-=r.f,o.left-=r.e)}i.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Z6(t,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,r=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,f=Ue(c),p=c.prevFromRect,g=c.prevToRect,m=a.rect,v=Zs(c,!0);v&&(f.top-=v.f,f.left-=v.e),c.toRect=f,c.thisAnimationDuration&&Fo(p,f)&&!Fo(u,f)&&(m.top-f.top)/(m.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=s7(m,p,g,i.options)),Fo(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=i.options.animation),i.animate(c,m,f,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,i,o,r){if(r){re(n,"transition",""),re(n,"transform","");var a=Zs(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-o.left)/(l||1),f=(i.top-o.top)/(c||1);n.animatingX=!!u,n.animatingY=!!f,re(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=t7(n),re(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),re(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){re(n,"transition",""),re(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function t7(t){return t.offsetWidth}function s7(t,e,s,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-s.top,2)+Math.pow(e.left-s.left,2))*n.animation}var Ws=[],Bo={initializeByDefault:!0},ti={mount:function(e){for(var s in Bo)Bo.hasOwnProperty(s)&&!(s in e)&&(e[s]=Bo[s]);Ws.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ws.push(e)},pluginEvent:function(e,s,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=e+"Global";Ws.forEach(function(r){s[r.pluginName]&&(s[r.pluginName][o]&&s[r.pluginName][o](It({sortable:s},n)),s.options[r.pluginName]&&s[r.pluginName][e]&&s[r.pluginName][e](It({sortable:s},n)))})},initializePlugins:function(e,s,n,i){Ws.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,s,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xt(n,c.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);typeof r<"u"&&(e.options[o]=r)}},getEventProperties:function(e,s){var n={};return Ws.forEach(function(i){typeof i.eventProperties=="function"&&Xt(n,i.eventProperties.call(s[i.pluginName],e))}),n},modifyOption:function(e,s,n){var i;return Ws.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[s]=="function"&&(i=o.optionListeners[s].call(e[o.pluginName],n))}),i}};function n7(t){var e=t.sortable,s=t.rootEl,n=t.name,i=t.targetEl,o=t.cloneEl,r=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,p=t.originalEvent,g=t.putSortable,m=t.extraEventProperties;if(e=e||s&&s[ct],!!e){var v,b=e.options,$="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Qt&&!ei?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=r||s,v.from=a||s,v.item=i||s,v.clone=o,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=f,v.originalEvent=p,v.pullMode=g?g.lastPutMode:void 0;var w=It(It({},m),ti.getEventProperties(n,e));for(var C in w)v[C]=w[C];s&&s.dispatchEvent(v),b[$]&&b[$].call(e,v)}}var i7=["evt"],at=function(e,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,o=X6(n,i7);ti.pluginEvent.bind(ae)(e,s,It({dragEl:K,parentEl:Fe,ghostEl:ue,rootEl:Le,nextEl:Ss,lastDownEl:Oi,cloneEl:Ie,cloneHidden:ns,dragStarted:yn,putSortable:Je,activeSortable:ae.active,originalEvent:i,oldIndex:qs,oldDraggableIndex:zn,newIndex:ht,newDraggableIndex:ss,hideGhostForTarget:Dd,unhideGhostForTarget:Md,cloneNowHidden:function(){ns=!0},cloneNowShown:function(){ns=!1},dispatchSortableEvent:function(a){nt({sortable:s,name:a,originalEvent:i})}},o))};function nt(t){n7(It({putSortable:Je,cloneEl:Ie,targetEl:K,rootEl:Le,oldIndex:qs,oldDraggableIndex:zn,newIndex:ht,newDraggableIndex:ss},t))}var K,Fe,ue,Le,Ss,Oi,Ie,ns,qs,ht,zn,ss,vi,Je,js=!1,Zi=!1,Ji=[],$s,Ct,No,Vo,ic,oc,yn,Hs,Fn,Bn=!1,bi=!1,Li,Qe,Wo=[],$r=!1,Qi=[],bo=typeof document<"u",_i=_d,rc=ei||Qt?"cssFloat":"float",o7=bo&&!yd&&!_d&&"draggable"in document.createElement("div"),Ed=function(){if(bo){if(Qt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Pd=function(e,s){var n=re(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=sn(e,0,s),r=sn(e,1,s),a=o&&re(o),l=r&&re(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ue(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ue(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&n[rc]==="none"||r&&n[rc]==="none"&&c+u>i)?"vertical":"horizontal"},r7=function(e,s,n){var i=n?e.left:e.top,o=n?e.right:e.bottom,r=n?e.width:e.height,a=n?s.left:s.top,l=n?s.right:s.bottom,c=n?s.width:s.height;return i===a||o===l||i+r/2===a+c/2},a7=function(e,s){var n;return Ji.some(function(i){var o=i[ct].options.emptyInsertThreshold;if(!(!o||ca(i))){var r=Ue(i),a=e>=r.left-o&&e<=r.right+o,l=s>=r.top-o&&s<=r.bottom+o;if(a&&l)return n=i}}),n},Ad=function(e){function s(o,r){return function(a,l,c,u){var f=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(r||f))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return s(o(a,l,c,u),r)(a,l,c,u);var p=(r?a:l).options.group.name;return o===!0||typeof o=="string"&&o===p||o.join&&o.indexOf(p)>-1}}var n={},i=e.group;(!i||Mi(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=s(i.pull,!0),n.checkPut=s(i.put),n.revertClone=i.revertClone,e.group=n},Dd=function(){!Ed&&ue&&re(ue,"display","none")},Md=function(){!Ed&&ue&&re(ue,"display","")};bo&&!yd&&document.addEventListener("click",function(t){if(Zi)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Zi=!1,!1},!0);var xs=function(e){if(K){e=e.touches?e.touches[0]:e;var s=a7(e.clientX,e.clientY);if(s){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=s,n.preventDefault=void 0,n.stopPropagation=void 0,s[ct]._onDragOver(n)}}},l7=function(e){K&&K.parentNode[ct]._isOutsideThisEl(e.target)};function ae(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xt({},e),t[ct]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Pd(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ae.supportPointer!==!1&&"PointerEvent"in window&&!Rn,emptyInsertThreshold:5};ti.initializePlugins(this,t,s);for(var n in s)!(n in e)&&(e[n]=s[n]);Ad(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:o7,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?xe(t,"pointerdown",this._onTapStart):(xe(t,"mousedown",this._onTapStart),xe(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(xe(t,"dragover",this),xe(t,"dragenter",this)),Ji.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xt(this,e7())}ae.prototype={constructor:ae,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Hs=null)},_getDirection:function(e,s){return typeof this.options.direction=="function"?this.options.direction.call(this,e,s,K):this.options.direction},_onTapStart:function(e){if(e.cancelable){var s=this,n=this.el,i=this.options,o=i.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(m7(n),!K&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Rn&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=St(l,i.draggable,n,!1),!(l&&l.animated)&&Oi!==l)){if(qs=yt(l),zn=yt(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){nt({sortable:s,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),at("filter",s,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=St(c,f.trim(),n,!1),f)return nt({sortable:s,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),at("filter",s,{evt:e}),!0}),u)){o&&e.cancelable&&e.preventDefault();return}i.handle&&!St(c,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,s,n){var i=this,o=i.el,r=i.options,a=o.ownerDocument,l;if(n&&!K&&n.parentNode===o){var c=Ue(n);if(Le=o,K=n,Fe=K.parentNode,Ss=K.nextSibling,Oi=n,vi=r.group,ae.dragged=K,$s={target:K,clientX:(s||e).clientX,clientY:(s||e).clientY},ic=$s.clientX-c.left,oc=$s.clientY-c.top,this._lastX=(s||e).clientX,this._lastY=(s||e).clientY,K.style["will-change"]="all",l=function(){if(at("delayEnded",i,{evt:e}),ae.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!ec&&i.nativeDraggable&&(K.draggable=!0),i._triggerDragStart(e,s),nt({sortable:i,name:"choose",originalEvent:e}),ft(K,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){xd(K,u.trim(),Ho)}),xe(a,"dragover",xs),xe(a,"mousemove",xs),xe(a,"touchmove",xs),xe(a,"mouseup",i._onDrop),xe(a,"touchend",i._onDrop),xe(a,"touchcancel",i._onDrop),ec&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),at("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||s)&&(!this.nativeDraggable||!(ei||Qt))){if(ae.eventCanceled){this._onDrop();return}xe(a,"mouseup",i._disableDelayedDrag),xe(a,"touchend",i._disableDelayedDrag),xe(a,"touchcancel",i._disableDelayedDrag),xe(a,"mousemove",i._delayedDragTouchMoveHandler),xe(a,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&xe(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var s=e.touches?e.touches[0]:e;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Ho(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._disableDelayedDrag),be(e,"touchend",this._disableDelayedDrag),be(e,"touchcancel",this._disableDelayedDrag),be(e,"mousemove",this._delayedDragTouchMoveHandler),be(e,"touchmove",this._delayedDragTouchMoveHandler),be(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,s){s=s||e.pointerType=="touch"&&e,!this.nativeDraggable||s?this.options.supportPointer?xe(document,"pointermove",this._onTouchMove):s?xe(document,"touchmove",this._onTouchMove):xe(document,"mousemove",this._onTouchMove):(xe(K,"dragend",this),xe(Le,"dragstart",this._onDragStart));try{document.selection?Ri(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,s){if(js=!1,Le&&K){at("dragStarted",this,{evt:s}),this.nativeDraggable&&xe(document,"dragover",l7);var n=this.options;!e&&ft(K,n.dragClass,!1),ft(K,n.ghostClass,!0),ae.active=this,e&&this._appendGhost(),nt({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(Ct){this._lastX=Ct.clientX,this._lastY=Ct.clientY,Dd();for(var e=document.elementFromPoint(Ct.clientX,Ct.clientY),s=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ct.clientX,Ct.clientY),e!==s);)s=e;if(K.parentNode[ct]._isOutsideThisEl(e),s)do{if(s[ct]){var n=void 0;if(n=s[ct]._onDragOver({clientX:Ct.clientX,clientY:Ct.clientY,target:e,rootEl:s}),n&&!this.options.dragoverBubble)break}e=s}while(s=$d(s));Md()}},_onTouchMove:function(e){if($s){var s=this.options,n=s.fallbackTolerance,i=s.fallbackOffset,o=e.touches?e.touches[0]:e,r=ue&&Zs(ue,!0),a=ue&&r&&r.a,l=ue&&r&&r.d,c=_i&&Qe&&nc(Qe),u=(o.clientX-$s.clientX+i.x)/(a||1)+(c?c[0]-Wo[0]:0)/(a||1),f=(o.clientY-$s.clientY+i.y)/(l||1)+(c?c[1]-Wo[1]:0)/(l||1);if(!ae.active&&!js){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ue){r?(r.e+=u-(No||0),r.f+=f-(Vo||0)):r={a:1,b:0,c:0,d:1,e:u,f};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");re(ue,"webkitTransform",p),re(ue,"mozTransform",p),re(ue,"msTransform",p),re(ue,"transform",p),No=u,Vo=f,Ct=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ue){var e=this.options.fallbackOnBody?document.body:Le,s=Ue(K,!0,_i,!0,e),n=this.options;if(_i){for(Qe=e;re(Qe,"position")==="static"&&re(Qe,"transform")==="none"&&Qe!==document;)Qe=Qe.parentNode;Qe!==document.body&&Qe!==document.documentElement?(Qe===document&&(Qe=Rt()),s.top+=Qe.scrollTop,s.left+=Qe.scrollLeft):Qe=Rt(),Wo=nc(Qe)}ue=K.cloneNode(!0),ft(ue,n.ghostClass,!1),ft(ue,n.fallbackClass,!0),ft(ue,n.dragClass,!0),re(ue,"transition",""),re(ue,"transform",""),re(ue,"box-sizing","border-box"),re(ue,"margin",0),re(ue,"top",s.top),re(ue,"left",s.left),re(ue,"width",s.width),re(ue,"height",s.height),re(ue,"opacity","0.8"),re(ue,"position",_i?"absolute":"fixed"),re(ue,"zIndex","100000"),re(ue,"pointerEvents","none"),ae.ghost=ue,e.appendChild(ue),re(ue,"transform-origin",ic/parseInt(ue.style.width)*100+"% "+oc/parseInt(ue.style.height)*100+"%")}},_onDragStart:function(e,s){var n=this,i=e.dataTransfer,o=n.options;if(at("dragStart",this,{evt:e}),ae.eventCanceled){this._onDrop();return}at("setupClone",this),ae.eventCanceled||(Ie=Sd(K),Ie.removeAttribute("id"),Ie.draggable=!1,Ie.style["will-change"]="",this._hideClone(),ft(Ie,this.options.chosenClass,!1),ae.clone=Ie),n.cloneId=Ri(function(){at("clone",n),!ae.eventCanceled&&(n.options.removeCloneOnHide||Le.insertBefore(Ie,K),n._hideClone(),nt({sortable:n,name:"clone"}))}),!s&&ft(K,o.dragClass,!0),s?(Zi=!0,n._loopId=setInterval(n._emulateDragOver,50)):(be(document,"mouseup",n._onDrop),be(document,"touchend",n._onDrop),be(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,K)),xe(document,"drop",n),re(K,"transform","translateZ(0)")),js=!0,n._dragStartId=Ri(n._dragStarted.bind(n,s,e)),xe(document,"selectstart",n),yn=!0,Rn&&re(document.body,"user-select","none")},_onDragOver:function(e){var s=this.el,n=e.target,i,o,r,a=this.options,l=a.group,c=ae.active,u=vi===l,f=a.sort,p=Je||c,g,m=this,v=!1;if($r)return;function b(G,ie){at(G,m,It({evt:e,isOwner:u,axis:g?"vertical":"horizontal",revert:r,dragRect:i,targetRect:o,canSort:f,fromSortable:p,target:n,completed:w,onMove:function(oe,U){return yi(Le,s,K,i,oe,Ue(oe),e,U)},changed:C},ie))}function $(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function w(G){return b("dragOverCompleted",{insertion:G}),G&&(u?c._hideClone():c._showClone(m),m!==p&&(ft(K,Je?Je.options.ghostClass:c.options.ghostClass,!1),ft(K,a.ghostClass,!0)),Je!==m&&m!==ae.active?Je=m:m===ae.active&&Je&&(Je=null),p===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(n===K&&!K.animated||n===s&&!n.animated)&&(Hs=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(K.parentNode[ct]._isOutsideThisEl(e.target),!G&&xs(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function C(){ht=yt(K),ss=yt(K,a.draggable),nt({sortable:m,name:"change",toEl:s,newIndex:ht,newDraggableIndex:ss,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=St(n,a.draggable,s,!0),b("dragOver"),ae.eventCanceled)return v;if(K.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return w(!1);if(Zi=!1,c&&!a.disabled&&(u?f||(r=Fe!==Le):Je===this||(this.lastPutMode=vi.checkPull(this,c,K,e))&&l.checkPut(this,c,K,e))){if(g=this._getDirection(e,n)==="vertical",i=Ue(K),b("dragOverValid"),ae.eventCanceled)return v;if(r)return Fe=Le,$(),this._hideClone(),b("revert"),ae.eventCanceled||(Ss?Le.insertBefore(K,Ss):Le.appendChild(K)),w(!0);var T=ca(s,a.draggable);if(!T||f7(e,g,this)&&!T.animated){if(T===K)return w(!1);if(T&&s===e.target&&(n=T),n&&(o=Ue(n)),yi(Le,s,K,i,n,o,e,!!n)!==!1)return $(),T&&T.nextSibling?s.insertBefore(K,T.nextSibling):s.appendChild(K),Fe=s,C(),w(!0)}else if(T&&d7(e,g,this)){var S=sn(s,0,a,!0);if(S===K)return w(!1);if(n=S,o=Ue(n),yi(Le,s,K,i,n,o,e,!1)!==!1)return $(),s.insertBefore(K,S),Fe=s,C(),w(!0)}else if(n.parentNode===s){o=Ue(n);var E=0,O,A=K.parentNode!==s,L=!r7(K.animated&&K.toRect||i,n.animated&&n.toRect||o,g),B=g?"top":"left",H=sc(n,"top","top")||sc(K,"top","top"),D=H?H.scrollTop:void 0;Hs!==n&&(O=o[B],Bn=!1,bi=!L&&a.invertSwap||A),E=h7(e,n,o,g,L?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,bi,Hs===n);var V;if(E!==0){var Y=yt(K);do Y-=E,V=Fe.children[Y];while(V&&(re(V,"display")==="none"||V===ue))}if(E===0||V===n)return w(!1);Hs=n,Fn=E;var X=n.nextElementSibling,Q=!1;Q=E===1;var se=yi(Le,s,K,i,n,o,e,Q);if(se!==!1)return(se===1||se===-1)&&(Q=se===1),$r=!0,setTimeout(u7,30),$(),Q&&!X?s.appendChild(K):n.parentNode.insertBefore(K,Q?X:n),H&&Cd(H,0,D-H.scrollTop),Fe=K.parentNode,O!==void 0&&!bi&&(Li=Math.abs(O-Ue(n)[B])),C(),w(!0)}if(s.contains(K))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){be(document,"mousemove",this._onTouchMove),be(document,"touchmove",this._onTouchMove),be(document,"pointermove",this._onTouchMove),be(document,"dragover",xs),be(document,"mousemove",xs),be(document,"touchmove",xs)},_offUpEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._onDrop),be(e,"touchend",this._onDrop),be(e,"pointerup",this._onDrop),be(e,"touchcancel",this._onDrop),be(document,"selectstart",this)},_onDrop:function(e){var s=this.el,n=this.options;if(ht=yt(K),ss=yt(K,n.draggable),at("drop",this,{evt:e}),Fe=K&&K.parentNode,ht=yt(K),ss=yt(K,n.draggable),ae.eventCanceled){this._nulling();return}js=!1,bi=!1,Bn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xr(this.cloneId),xr(this._dragStartId),this.nativeDraggable&&(be(document,"drop",this),be(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rn&&re(document.body,"user-select",""),re(K,"transform",""),e&&(yn&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ue&&ue.parentNode&&ue.parentNode.removeChild(ue),(Le===Fe||Je&&Je.lastPutMode!=="clone")&&Ie&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),K&&(this.nativeDraggable&&be(K,"dragend",this),Ho(K),K.style["will-change"]="",yn&&!js&&ft(K,Je?Je.options.ghostClass:this.options.ghostClass,!1),ft(K,this.options.chosenClass,!1),nt({sortable:this,name:"unchoose",toEl:Fe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Le!==Fe?(ht>=0&&(nt({rootEl:Fe,name:"add",toEl:Fe,fromEl:Le,originalEvent:e}),nt({sortable:this,name:"remove",toEl:Fe,originalEvent:e}),nt({rootEl:Fe,name:"sort",toEl:Fe,fromEl:Le,originalEvent:e}),nt({sortable:this,name:"sort",toEl:Fe,originalEvent:e})),Je&&Je.save()):ht!==qs&&ht>=0&&(nt({sortable:this,name:"update",toEl:Fe,originalEvent:e}),nt({sortable:this,name:"sort",toEl:Fe,originalEvent:e})),ae.active&&((ht==null||ht===-1)&&(ht=qs,ss=zn),nt({sortable:this,name:"end",toEl:Fe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){at("nulling",this),Le=K=Fe=ue=Ss=Ie=Oi=ns=$s=Ct=yn=ht=ss=qs=zn=Hs=Fn=Je=vi=ae.dragged=ae.ghost=ae.clone=ae.active=null,Qi.forEach(function(e){e.checked=!0}),Qi.length=No=Vo=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":K&&(this._onDragOver(e),c7(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],s,n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)s=n[i],St(s,r.draggable,this.el,!1)&&e.push(s.getAttribute(r.dataIdAttr)||g7(s));return e},sort:function(e,s){var n={},i=this.el;this.toArray().forEach(function(o,r){var a=i.children[r];St(a,this.options.draggable,i,!1)&&(n[o]=a)},this),s&&this.captureAnimationState(),e.forEach(function(o){n[o]&&(i.removeChild(n[o]),i.appendChild(n[o]))}),s&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,s){return St(e,s||this.options.draggable,this.el,!1)},option:function(e,s){var n=this.options;if(s===void 0)return n[e];var i=ti.modifyOption(this,e,s);typeof i<"u"?n[e]=i:n[e]=s,e==="group"&&Ad(n)},destroy:function(){at("destroy",this);var e=this.el;e[ct]=null,be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart),be(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ji.splice(Ji.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ns){if(at("hideClone",this),ae.eventCanceled)return;re(Ie,"display","none"),this.options.removeCloneOnHide&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),ns=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ns){if(at("showClone",this),ae.eventCanceled)return;K.parentNode==Le&&!this.options.group.revertClone?Le.insertBefore(Ie,K):Ss?Le.insertBefore(Ie,Ss):Le.appendChild(Ie),this.options.group.revertClone&&this.animate(K,Ie),re(Ie,"display",""),ns=!1}}};function c7(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function yi(t,e,s,n,i,o,r,a){var l,c=t[ct],u=c.options.onMove,f;return window.CustomEvent&&!Qt&&!ei?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=s,l.draggedRect=n,l.related=i||e,l.relatedRect=o||Ue(e),l.willInsertAfter=a,l.originalEvent=r,t.dispatchEvent(l),u&&(f=u.call(c,l,r)),f}function Ho(t){t.draggable=!1}function u7(){$r=!1}function d7(t,e,s){var n=Ue(sn(s.el,0,s.options,!0)),i=Td(s.el,s.options,ue),o=10;return e?t.clientX<i.left-o||t.clientY<n.top&&t.clientX<n.right:t.clientY<i.top-o||t.clientY<n.bottom&&t.clientX<n.left}function f7(t,e,s){var n=Ue(ca(s.el,s.options.draggable)),i=Td(s.el,s.options,ue),o=10;return e?t.clientX>i.right+o||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>i.bottom+o||t.clientX>n.right&&t.clientY>n.top}function h7(t,e,s,n,i,o,r,a){var l=n?t.clientY:t.clientX,c=n?s.height:s.width,u=n?s.top:s.left,f=n?s.bottom:s.right,p=!1;if(!r){if(a&&Li<c*i){if(!Bn&&(Fn===1?l>u+c*o/2:l<f-c*o/2)&&(Bn=!0),Bn)p=!0;else if(Fn===1?l<u+Li:l>f-Li)return-Fn}else if(l>u+c*(1-i)/2&&l<f-c*(1-i)/2)return p7(e)}return p=p||r,p&&(l<u+c*o/2||l>f-c*o/2)?l>u+c/2?1:-1:0}function p7(t){return yt(K)<yt(t)?1:-1}function g7(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,s=e.length,n=0;s--;)n+=e.charCodeAt(s);return n.toString(36)}function m7(t){Qi.length=0;for(var e=t.getElementsByTagName("input"),s=e.length;s--;){var n=e[s];n.checked&&Qi.push(n)}}function Ri(t){return setTimeout(t,0)}function xr(t){return clearTimeout(t)}bo&&xe(document,"touchmove",function(t){(ae.active||js)&&t.cancelable&&t.preventDefault()});ae.utils={on:xe,off:be,css:re,find:xd,is:function(e,s){return!!St(e,s,e,!1)},extend:J6,throttle:kd,closest:St,toggleClass:ft,clone:Sd,index:yt,nextTick:Ri,cancelNextTick:xr,detectDirection:Pd,getChild:sn,expando:ct};ae.get=function(t){return t[ct]};ae.mount=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(ae.utils=It(It({},ae.utils),n.utils)),ti.mount(n)})};ae.create=function(t,e){return new ae(t,e)};ae.version=K6;var He=[],wn,kr,Cr=!1,Uo,jo,eo,$n;function v7(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(s){var n=s.originalEvent;this.sortable.nativeDraggable?xe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?xe(document,"pointermove",this._handleFallbackAutoScroll):n.touches?xe(document,"touchmove",this._handleFallbackAutoScroll):xe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var n=s.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?be(document,"dragover",this._handleAutoScroll):(be(document,"pointermove",this._handleFallbackAutoScroll),be(document,"touchmove",this._handleFallbackAutoScroll),be(document,"mousemove",this._handleFallbackAutoScroll)),ac(),Ii(),Q6()},nulling:function(){eo=kr=wn=Cr=$n=Uo=jo=null,He.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,n){var i=this,o=(s.touches?s.touches[0]:s).clientX,r=(s.touches?s.touches[0]:s).clientY,a=document.elementFromPoint(o,r);if(eo=s,n||this.options.forceAutoScrollFallback||ei||Qt||Rn){qo(s,this.options,a,n);var l=ls(a,!0);Cr&&(!$n||o!==Uo||r!==jo)&&($n&&ac(),$n=setInterval(function(){var c=ls(document.elementFromPoint(o,r),!0);c!==l&&(l=c,Ii()),qo(s,i.options,c,n)},10),Uo=o,jo=r)}else{if(!this.options.bubbleScroll||ls(a,!0)===Rt()){Ii();return}qo(s,this.options,ls(a,!1),!1)}}},Xt(t,{pluginName:"scroll",initializeByDefault:!0})}function Ii(){He.forEach(function(t){clearInterval(t.pid)}),He=[]}function ac(){clearInterval($n)}var qo=kd(function(t,e,s,n){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,a=e.scrollSpeed,l=Rt(),c=!1,u;kr!==s&&(kr=s,Ii(),wn=e.scroll,u=e.scrollFn,wn===!0&&(wn=ls(s,!0)));var f=0,p=wn;do{var g=p,m=Ue(g),v=m.top,b=m.bottom,$=m.left,w=m.right,C=m.width,T=m.height,S=void 0,E=void 0,O=g.scrollWidth,A=g.scrollHeight,L=re(g),B=g.scrollLeft,H=g.scrollTop;g===l?(S=C<O&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),E=T<A&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(S=C<O&&(L.overflowX==="auto"||L.overflowX==="scroll"),E=T<A&&(L.overflowY==="auto"||L.overflowY==="scroll"));var D=S&&(Math.abs(w-i)<=r&&B+C<O)-(Math.abs($-i)<=r&&!!B),V=E&&(Math.abs(b-o)<=r&&H+T<A)-(Math.abs(v-o)<=r&&!!H);if(!He[f])for(var Y=0;Y<=f;Y++)He[Y]||(He[Y]={});(He[f].vx!=D||He[f].vy!=V||He[f].el!==g)&&(He[f].el=g,He[f].vx=D,He[f].vy=V,clearInterval(He[f].pid),(D!=0||V!=0)&&(c=!0,He[f].pid=setInterval((function(){n&&this.layer===0&&ae.active._onTouchMove(eo);var X=He[this.layer].vy?He[this.layer].vy*a:0,Q=He[this.layer].vx?He[this.layer].vx*a:0;typeof u=="function"&&u.call(ae.dragged.parentNode[ct],Q,X,t,eo,He[this.layer].el)!=="continue"||Cd(He[this.layer].el,Q,X)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&p!==l&&(p=ls(p,!1)));Cr=c}},30),Od=function(e){var s=e.originalEvent,n=e.putSortable,i=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(s){var c=n||o;a();var u=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ua(){}ua.prototype={startIndex:null,dragStart:function(e){var s=e.oldDraggableIndex;this.startIndex=s},onSpill:function(e){var s=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=sn(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(s,i):this.sortable.el.appendChild(s),this.sortable.animateAll(),n&&n.animateAll()},drop:Od};Xt(ua,{pluginName:"revertOnSpill"});function da(){}da.prototype={onSpill:function(e){var s=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),i.animateAll()},drop:Od};Xt(da,{pluginName:"removeOnSpill"});ae.mount(new v7);ae.mount(da,ua);function Ld(t,e,s={}){let n;const{document:i=Qf,...o}=s,r={onUpdate:u=>{b7(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):Jf(t);!u||n!==void 0||(n=new ae(u,{...r,...o}))},l=()=>{n==null||n.destroy(),n=void 0},c=(u,f)=>{if(f!==void 0)n==null||n.option(u,f);else return n==null?void 0:n.option(u)};return Kf(a),Zf(l),{stop:l,start:a,option:c}}function b7(t,e,s){const n=Xd(t),i=n?[...ba(t)]:ba(t);if(s>=0&&s<i.length){const o=i.splice(e,1)[0];fc(()=>{i.splice(s,0,o),n&&(t.value=i)})}}const Rd="/_themes/gouvfr/assets/draggable.svg",_7={class:"fr-grid-row"},y7={class:"fr-col"},w7={class:"fr-m-0 fr-text--xs"},$7={class:"fr-fieldset min-width-0","aria-labelledby":"description-legend"},x7={key:0,class:"fr-fieldset__legend",id:"description-legend"},k7={class:"subtitle subtitle--uppercase fr-mb-0"},C7=["title"],S7=["src"],T7=["title","onClick"],E7={class:"fr-hr-or w-100 text-transform-lowercase fr-text--regular"},P7={class:"fr-hr-or-text"},A7={key:0},D7={key:1},M7={class:"fr-grid-row fr-grid-row--right"},O7=["disabled"],L7=q({__name:"Step2AddDatasets",props:{errors:{},steps:{},loading:{type:Boolean}},emits:["next"],setup(t,{emit:e}){const s=e,{t:n}=ce(),i=V=>({zIndex:o.datasets.length-V}),o=At({datasets:[],linkedDataset:""}),r=M(!1),a=M(null),l=M(null);Ld(l,o.datasets);const c=M(null);function u(){return o.datasets.length>0}const{withAsync:f}=Ec,p={datasets:{custom:u},linkedDataset:{linked:f(A)}},g={datasets:{},linkedDataset:{}},{getFunctionalState:m,validateRequiredRules:v,v$:b,hasWarning:$,hasError:w,vWarning$:C}=Kt(o,p,g),T=j(()=>({datasets:m(C.value.datasets.$dirty,b.value.datasets.$invalid,C.value.datasets.$error),linkedDataset:m(C.value.linkedDataset.$dirty,b.value.linkedDataset.$invalid,C.value.linkedDataset.$error)}));function S(V){return w(T,V)}function E(V){return $(T,V)}async function O(V){var Y;C.value.datasets.$touch(),V&&(L(V),(Y=c.value)==null||Y.selectOption(""))}async function A(V){if(V=="")return!0;if(V.includes("/datasets/"))try{r.value=!0;const Y=new URL(V),X=H(Y.pathname),se=(await Ve.get("datasets/".concat(X,"/"))).data.id;return L(se),o.linkedDataset="",!0}catch(Y){return!1}finally{r.value=!1}else return!1}async function L(V){if(!o.datasets.find(X=>X.id===V)){let X=await Ve.get("datasets/".concat(V,"/"));o.datasets.push(X.data)}}function B(V){o.datasets.splice(V,1)}function H(V){return V.split("/").filter(X=>X!=="").pop()}function D(){v().then(V=>{V&&s("next",_e(o.datasets))})}return(V,Y)=>(y(),N(ot,null,{default:P(()=>[x(kt,{steps:V.steps,currentStep:1},null,8,["steps"]),x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",_7,[Y[1]||(Y[1]=d("div",{class:"fr-col-auto fr-mr-3v"},[d("span",{class:"fr-icon-info-line","aria-hidden":"true"})],-1)),d("div",y7,[d("p",w7,_(h(n)("It is important to associate all the datasets used, as this allows to understand the cross-references and improve the visibility of your reuse.")),1)])])]),_:1}),d("fieldset",$7,[o.datasets.length>0?(y(),k("legend",x7,[d("h2",k7,_(h(n)("Associated datasets")),1)])):z("",!0),d("div",{class:"w-100",ref_key:"el",ref:l},[(y(!0),k(J,null,ve(o.datasets,(X,Q)=>(y(),k("div",{class:"fr-col fr-grid-row fr-grid-row--center w-100",key:X.id},[d("button",{type:"button",class:"fr-col-auto fr-btn fr-btn--xs fr-btn--tertiary-no-outline fr-icon-svg fr-icon--sm fr-my-auto fr-mr-1v",title:h(n)("Drag to move this content")},[d("img",{src:h(Rd),alt:""},null,8,S7)],8,C7),d("div",{class:"fr-col relative",style:nn(i(Q))},[x(Qn,{dataset:X},null,8,["dataset"]),d("button",{type:"button",class:"fr-btn fr-btn--tertiary-no-outline fr-btn--secondary--error fr-icon-close-line border-0 absolute top-3w right-1w",title:h(n)("Remove the dataset"),onClick:se=>B(Q)},_(h(n)("Remove the dataset")),9,T7)],4)]))),128))],512),x(Ae,{ref_key:"selectedDatasetRef",ref:c,placeholder:h(n)("Look for a dataset"),searchPlaceholder:h(n)("Search a dataset..."),minimumCharacterBeforeSuggest:2,suggestUrl:"/datasets/suggest/",required:!0,onChange:O,hasError:S("datasets"),errorText:h(n)("You need to provide at least one dataset"),allOption:h(n)("Select a dataset"),addAllOption:!1,values:a.value},null,8,["placeholder","searchPlaceholder","hasError","errorText","allOption","values"]),d("p",E7,[d("span",P7,_(h(n)("or")),1)]),x(ze,{label:h(n)("Link to the dataset"),placeholder:"https://...",class:"w-100",required:!0,modelValue:o.linkedDataset,"onUpdate:modelValue":Y[0]||(Y[0]=X=>o.linkedDataset=X),onChange:h(C).linkedDataset.$touch,hasError:S("linkedDataset"),hasWarning:E("linkedDataset"),errorText:h(n)("No dataset has been found on the provided url")},null,8,["label","modelValue","onChange","hasError","hasWarning","errorText"])]),V.errors.length?(y(),N(cn,{key:0,type:"error",class:"fr-mb-2w"},{title:P(()=>[W(_(h(n)("An error occured | Some errors occured",V.errors.length)),1)]),default:P(()=>[V.errors.length>1?(y(),k("ul",A7,[(y(!0),k(J,null,ve(V.errors,X=>(y(),k("li",null,_(X),1))),256))])):(y(),k("p",D7,_(V.errors[0]),1))]),_:1})):z("",!0),d("div",M7,[d("button",{class:"fr-btn",disabled:r.value||V.loading,onClick:D},_(h(n)("Next")),9,O7)])]),_:1}))}}),R7={components:{ContentLoader:gs}};function I7(t,e,s,n,i,o){const r=me("ContentLoader");return y(),N(r,{viewBox:"0 0 350 350",speed:2,primaryColor:"#EEEEEE",secondaryColor:"#ecebeb"},{default:P(()=>e[0]||(e[0]=[d("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"350",height:"200"},null,-1),d("rect",{x:"10",y:"240",rx:"0",ry:"0",width:"240",height:"15"},null,-1),d("rect",{x:"10",y:"280",rx:"0",ry:"0",width:"325",height:"12"},null,-1),d("rect",{x:"10",y:"320",rx:"0",ry:"0",width:"325",height:"12"},null,-1)])),_:1})}const lc=pe(R7,[["render",I7]]),z7={class:"fr-grid-row"},F7={class:"fr-col-auto fr-mr-3v"},B7=["src"],N7={class:"fr-col"},V7={class:"fr-m-0 fr-text--bold"},W7={class:"fr-m-0 fr-text--xs"},H7={ref:"listRef",class:"fr-grid-row fr-grid-row--gutters fr-mb-1w"},U7={class:"fr-col-12 fr-col-md-4"},j7={class:"fr-col-12 fr-col-md-4"},q7={class:"fr-col-12 fr-col-md-4"},Y7={class:"fr-grid-row justify-between"},G7=["href"],X7={class:"fr-grid-row fr-grid-row--right"},K7=["href"],Z7=q({__name:"Step3CompleteThePublication",props:{steps:{},feedbackUrl:{},originalReuse:{},redirectDraftUrl:{}},emits:["update"],setup(t,{emit:e}){const s=t,n=e,{t:i}=ce(),o=At({...s.originalReuse});function r(){o.private=!1,n("update",o)}return(a,l)=>(y(),N(ot,null,{default:P(()=>[x(kt,{steps:a.steps,currentStep:2},null,8,["steps"]),x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-1w"},{default:P(()=>[d("div",z7,[d("div",F7,[d("img",{src:h(vo),alt:""},null,8,B7)]),d("div",N7,[d("p",V7,_(h(i)("Your reuse is created !")),1),d("p",W7,_(h(i)("You can now publish it or save it as a draft.")),1)])])]),_:1}),d("ul",H7,[d("li",U7,[x(lc,{style:{"background-color":"#FAFAFA"}})]),d("li",j7,[x(oa,{reuse:o,reuseUrl:o.page},null,8,["reuse","reuseUrl"])]),d("li",q7,[x(lc,{style:{"background-color":"#FAFAFA"}})])],512),d("div",Y7,[d("a",{href:a.feedbackUrl,class:"fr-btn fr-btn--tertiary-no-outline fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-lightbulb-line"},_(h(i)("Give us your feedback on the publishing form")),9,G7),d("div",X7,[d("a",{href:a.redirectDraftUrl,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-mr-3v"},_(h(i)("Save as draft")),9,K7),d("button",{onClick:r,class:"fr-btn"},_(h(i)("Publish the reuse")),1)])])]),_:1}))}}),J7=q({__name:"ReusePublishingForm",props:{redirectDraftUrl:{}},setup(t){const e=t,{t:s}=ce(),n=[s("Describe your reuse"),s("Link datasets"),s("Complete your publishing")],i=M(0),o=M(!1),r=M(null),a=M(null),l=ps(),c=M({title:"",description:"",tags:null,url:"",datasets:[],topic:"",type:"",organization:null,owner:l.id,private:!0}),u=M(null),f=M([]),p=M(""),g=($,w=!0)=>{if(r.value&&r.value.scrollIntoView({behavior:"smooth"}),$!==null&&(i.value=$,w)){let C=new URL(window.location.href);const T="#/step-".concat($+1);C.hash=T,window.history.pushState(null,"",C)}};async function m($,w){var T;o.value=!0,f.value=[];let C=!1;try{u.value=await eh($),p.value=e.redirectDraftUrl+u.value.id,C=!0;try{const S=await th(u.value.id,w);u.value.image=S.data.image}catch(S){f.value.push(s("Failed to upload logo, you can upload it again in your management panel"))}}catch(S){f.value.push(s("An error occured while creating your reuse.")),S instanceof Error&&"response"in S&&(T=S.response)!=null&&T.data.errors.url&&(f.value.pop(),f.value.push(s("A reuse already exists for this URL.")))}finally{o.value=!1}C&&g(1)}async function v($){f.value=[];let w=!1;if(!u.value)return g(0);for(const C of $)u.value.datasets.push(C.id);try{u.value=await _a(u.value),w=!0}catch(C){C instanceof Error&&f.value.push(C.message)}w&&g(2)}async function b($){try{u.value=await _a($),window.open(u.value.page,"_self")}catch(w){w instanceof Error&&f.value.push(w.message)}}return we(async()=>{a.value=await Mr()}),($,w)=>{var C;return y(),k("div",{class:"fr-container",ref_key:"containerRef",ref:r},[i.value===0&&a.value?(y(),N(q6,{key:0,reuse:c.value,steps:n,errors:f.value,loading:o.value,user:a.value,onNext:m},null,8,["reuse","errors","loading","user"])):i.value===1?(y(),N(L7,{key:1,steps:n,errors:f.value,onNext:v},null,8,["errors"])):i.value===2&&u.value?(y(),N(Z7,{key:2,steps:n,feedbackUrl:(C=h(Or))!=null?C:"",redirectDraftUrl:p.value,originalReuse:u.value,onUpdate:b},null,8,["feedbackUrl","redirectDraftUrl","originalReuse"])):z("",!0)],512)}}}),Q7={class:"fr-grid-row fr-grid-row--middle fr-py-1w fr-enlarge-link border-default-grey border-bottom"},ek=["href"],tk={class:"fr-text--bold"},sk=q({__name:"OrganizationSearchOption",props:{logo:{},name:{},link:{}},setup(t){return(e,s)=>(y(),k("div",Q7,[x(Jo,{src:e.logo,type:"organization",size:30,class:"fr-col-auto fr-mx-1w"},null,8,["src"]),d("a",{class:"fr-col",href:e.link},[d("span",tk,_(e.name),1)],8,ek)]))}}),nk=["id"],ik=["for","id"],ok=["placeholder","aria-controls","aria-expanded","id","aria-activedescendant"],rk=["id","aria-labelledby"],ak={class:"w-100",role:"listbox"},lk=["id","aria-selected"],ck=q({__name:"OrganizationSearch",setup(t){const{t:e}=ce(),{toast:s}=xt(),n=M(""),{id:i}=he("search"),o=j(()=>"".concat(i,"-input")),r=j(()=>"".concat(i,"-label")),a=M([]);async function l(){try{const C=await Ve.get("/organizations/suggest/",{params:{q:n.value,size:50}});a.value=C.data.map(T=>({...T,id:T.id,page:"".concat(T.page,"#/information/membres"),link:T.page}))}catch(C){s.error(e("An error occurred while fetching the options."))}}const{expanded:c,handleFocusOut:u,handleKeyDown:f,inputRef:p,isSelected:g,listRef:m,selected:v,searchSelectedOption:b,showAndSelectIfQuery:$,uid:w}=cd(a,n);return sh(n,async(C,T)=>{C!==T&&await l()},{debounce:300}),(C,T)=>(y(),k("div",{id:h(i),class:"fr-col fr-search-bar relative wrap",role:"search"},[d("label",{class:"fr-label",for:o.value,id:r.value},_(h(e)("Search for data")),9,ik),T[6]||(T[6]=d("span",{class:"fr-icon-search-line absolute fr-m-1w","aria-hidden":"true"},null,-1)),wt(d("input",{class:"fr-input fr-col-12 fr-pl-10v",placeholder:h(e)("Search an organization on data.gouv.fr"),ref_key:"inputRef",ref:p,autocomplete:"off",role:"combobox","aria-autocomplete":"list","aria-controls":h(w),"aria-expanded":h(c),id:o.value,"data-cy":"search-input","aria-activedescendant":h(v),name:"q","onUpdate:modelValue":T[0]||(T[0]=S=>n.value=S),onClickCapture:T[1]||(T[1]=Me((...S)=>h($)&&h($)(...S),["stop"])),onKeydown:T[2]||(T[2]=(...S)=>h(f)&&h(f)(...S)),onKeypress:T[3]||(T[3]=Er(Me((...S)=>h(b)&&h(b)(...S),["prevent"]),["enter"])),onBlur:T[4]||(T[4]=(...S)=>h(u)&&h(u)(...S))},null,40,ok),[[ds,n.value]]),d("div",{class:"fr-collapse autocomplete w-100 fr-mt-1w shadow border-bottom-rounded",id:h(w),ref_key:"listRef",ref:m,role:"listbox","aria-labelledby":r.value,onMousedown:T[5]||(T[5]=Me(()=>{},["prevent"]))},[d("ul",ak,[(y(!0),k(J,null,ve(a.value,S=>(y(),k("li",{key:S.id,id:S.id,role:"option","aria-selected":h(g)(S.id)},[x(sk,{logo:S.image_url,name:S.name,link:S.page},null,8,["logo","name","link"])],8,lk))),128))])],40,rk)],8,nk))}});const uk=pe(ck,[["__scopeId","data-v-c5a237fe"]]),dk={class:"fr-grid-row fr-grid-row--top no-wrap wrap-md"},fk={class:"fr-col-12 fr-grid-row fr-grid-row--top relative"},hk={class:"fr-col-12 fr-col-lg-9 fr-py-1w"},pk={class:"fr-col-12 fr-col-lg-3 fr-ml-auto"},gk={class:"fr-grid-row fr-grid-row--middle no-wrap wrap-md"},mk={class:"fr-col-auto fr-ml-3v fr-m-0"},vk={class:"fr-col-auto fr-ml-3v fr-m-0"},bk=q({__name:"Step1CreateOrJoinOrganization",emits:["start"],setup(t,{emit:e}){const{t:s}=ce();return(n,i)=>(y(),k("div",dk,[x(ot,{class:"fr-mb-6v"},{default:P(()=>[x(ia,{title:h(s)("Join an Organization"),content:h(s)("An organization is an entity in which many users can collaborate. The published datasets on the organization's name can be edited by its members."),icon:h(nh),stretchHeight:!0},{actions:P(()=>[d("div",fk,[d("div",hk,[x(uk)]),d("div",pk,[d("div",gk,[d("p",mk,_(h(s)("or")),1),d("div",vk,[d("button",{class:"fr-btn fr-col-auto",onClick:i[0]||(i[0]=o=>n.$emit("start"))},_(h(s)("Create an organization")),1)])])])])]),_:1},8,["title","content","icon"])]),_:1})]))}}),_k={class:"fr-grid-row"},yk={class:"fr-col-auto fr-mr-3v"},wk=["src"],$k={class:"fr-col"},xk={class:"fr-m-0 fr-text--bold"},kk={class:"fr-m-0 fr-text--xs"},Ck={class:"fr-my-3w fr-p-3w border border-default-grey fr-enlarge-link"},Sk={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--top"},Tk={class:"fr-col-auto"},Ek={class:"fr-col"},Pk={class:"fr-mb-1v fr-grid-row"},Ak=["href"],Dk={key:0},Mk={class:"fr-grid-row fr-grid-row--right"},Ok=["href"],Lk=["href"],Rk=["href"],Ik={key:0},zk={key:1},Fk=q({__name:"Step3CompleteTheOrganization",props:{organization:{},errors:{},datasetLink:{},reuseLink:{}},setup(t){const{t:e}=ce();return(s,n)=>(y(),N(ot,null,{default:P(()=>{var i;return[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-n3v"},{default:P(()=>[d("div",_k,[d("div",yk,[d("img",{src:h(vo),alt:""},null,8,wk)]),d("div",$k,[d("p",xk,_(h(e)("Your organization is created !")),1),d("p",kk,_(h(e)("You can now publish content or incite members to join your organization.")),1)])])]),_:1}),d("article",Ck,[d("div",Sk,[d("div",Tk,[s.organization.logo_thumbnail?(y(),N(Jo,{key:0,type:"organization",src:s.organization.logo_thumbnail,alt:"",size:60},null,8,["src"])):(y(),N(Jo,{key:1,type:"organization",size:60}))]),d("div",Ek,[d("h4",Pk,[d("a",{href:s.organization.page,class:"text-grey-500"},[W(_(s.organization.name)+" ",1),s.organization.acronym?(y(),k("small",Dk,_(s.organization.acronym),1)):z("",!0)],8,Ak)]),(y(),N(Sr,null,{default:P(()=>[x(h(Lr),{class:"fr-mt-1w fr-mb-2w fr-hidden fr-unhidden-sm overflow-wrap-anywhere","auto-resize":!0,text:h(Ar)(s.organization.description),"max-lines":2},null,8,["text"])]),_:1}))])])]),d("div",Mk,[d("a",{href:s.organization.page,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-mr-3v"},_(h(e)("Manage the organization")),9,Ok),d("a",{href:s.reuseLink,class:"fr-btn fr-mr-3v"},_(h(e)("Publish a reuse")),9,Lk),d("a",{href:s.datasetLink,class:"fr-btn"},_(h(e)("Publish a dataset")),9,Rk)]),(i=s.errors)!=null&&i.length?(y(),N(cn,{key:0,type:"error",class:"fr-mt-2w fr-mb-2w"},{title:P(()=>[W(_(h(e)("An error occured | Some errors occured",s.errors.length)),1)]),default:P(()=>[s.errors.length>1?(y(),k("ul",Ik,[(y(!0),k(J,null,ve(s.errors,o=>(y(),k("li",null,_(o),1))),256))])):(y(),k("p",zk,_(s.errors[0]),1))]),_:1})):z("",!0)]}),_:1}))}}),Bk=q({__name:"OrganizationPublishingForm",setup(t){const{t:e}=ce(),s=[e("Create or join an organization on {site}",{site:ln}),e("Describe your organization"),e("Finalize your organization")],n="".concat(Qo,"reuse/new/"),i="".concat(Qo,"dataset/new/"),o=M(0),r=M(null),a=M({name:"",business_number_id:"",acronym:"",description:"",url:"",logo:""}),l=M(null),c=M([]),u=p=>{r.value&&r.value.scrollIntoView({behavior:"smooth"}),o.value=p};async function f(p,g){c.value=[];let m=!1;try{l.value=await oh(p),m=!0}catch(v){v instanceof Error&&c.value.push(v.message)}if(g&&l.value)try{const v=await rh(l.value.id,g);l.value.logo_thumbnail=v.image}catch(v){c.value.push(e("Failed to upload logo, you can upload it again in your management panel"))}m&&u(2)}return(p,g)=>(y(),k("div",{class:"fr-container",ref_key:"containerRef",ref:r},[x(kt,{steps:s,currentStep:o.value},null,8,["currentStep"]),o.value===0?(y(),N(bk,{key:0,onStart:g[0]||(g[0]=m=>u(1))})):o.value===1?(y(),N(ih,{key:1,organization:a.value,errors:c.value,onSubmit:f},null,8,["organization","errors"])):o.value===2&&l.value?(y(),N(Fk,{key:2,organization:l.value,errors:c.value,datasetLink:i,reuseLink:n},null,8,["organization","errors"])):z("",!0)],512))}}),Nk={key:0,class:"fr-fieldset__element"},Vk={key:1},Wk={key:0,class:"fr-fieldset__element"},Hk={key:1,class:"fr-fieldset__element"},Uk=q({__name:"ContactPointSelector",props:{oid:{}},emits:["update:contact","update:newcontact"],setup(t,{emit:e}){const{t:s}=ce();M(null);const n=M(null),i=M(null),o=M(null),r=M(!1),a=M({}),l=t,c=e,u=v=>{v=="new"?(r.value=!0,o.value=null,i.value=n.value,c("update:contact",r.value,o.value)):(r.value=!1,o.value=n.value.find(b=>b.id===v),i.value=n.value.filter(b=>b.id!=v),c("update:contact",r.value,o.value))},f=v=>{r.value=!0,c("update:contact",r.value,a.value)},p=async v=>{let b=await ah(v);n.value=b.data,n.value.push({id:"new",name:s("New Contact")}),i.value=n.value};we(async()=>{await p(l.oid)}),Tt(()=>l.oid,async v=>{await p(v)});const g=v=>{var b;return(b=a.value)!=null&&b.contact_form?!Xs.$validator(a.value.contact_form):!1},m=()=>{var v;return(v=a.value)!=null&&v.email?!lh.$validator(a.value.email):!1};return(v,b)=>{var $,w;return y(),k("div",null,[d("div",null,[x(Ae,{required:!0,minimumCharacterBeforeSuggest:2,placeholder:h(s)("Chose the contact point with which you want to publish"),searchPlaceholder:h(s)("Select a contact point"),initialOptions:i.value,onChange:u,hasError:l.hasError,errorText:l.errorText},null,8,["placeholder","searchPlaceholder","initialOptions","hasError","errorText"])]),b[3]||(b[3]=d("br",null,null,-1)),r.value?(y(),k("div",Nk,[x(ze,{label:h(s)("Contact Name"),modelValue:a.value.name,"onUpdate:modelValue":b[0]||(b[0]=C=>a.value.name=C),onChange:f},null,8,["label","modelValue"]),x(ze,{label:h(s)("Contact Email"),placeholder:h(s)("contact [at] organization.org"),modelValue:a.value.email,"onUpdate:modelValue":b[1]||(b[1]=C=>a.value.email=C),onChange:f,hasError:m(),errorText:h(s)("The value is not a valid email")},null,8,["label","placeholder","modelValue","hasError","errorText"]),x(ze,{type:"url",label:h(s)("Contact URL"),placeholder:h(s)("https://..."),modelValue:a.value.contact_form,"onUpdate:modelValue":b[2]||(b[2]=C=>a.value.contact_form=C),onChange:f,hasError:g(),errorText:h(s)("The value is not a valid URL address")},null,8,["label","placeholder","modelValue","hasError","errorText"])])):(y(),k("div",Vk,[($=o.value)!=null&&$.email?(y(),k("div",Wk,_(h(s)("Contact mail:"))+" "+_(o.value.email),1)):z("",!0),(w=o.value)!=null&&w.contact_form?(y(),k("div",Hk,_(h(s)("Contact link:"))+" "+_(o.value.contact_form),1)):z("",!0)]))])}}}),jk={class:"fr-container"},qk={class:"fr-grid-row"},Yk={class:"fr-m-0"},Gk={class:"fr-m-0"},Xk={class:"fr-m-0"},Kk={class:"fr-m-0"},Zk={class:"fr-m-0"},Jk={class:"fr-m-0"},Qk={class:"fr-m-0"},eC={class:"fr-m-0"},tC={class:"fr-m-0"},sC={class:"fr-m-0"},nC={class:"fr-m-0"},iC={class:"fr-col-12 fr-col-md-7"},oC={class:"fr-grid-row"},rC={class:"fr-col-auto fr-mr-3v"},aC=["src"],lC={class:"fr-col"},cC={class:"fr-m-0 fr-text--bold"},uC={class:"fr-m-0 fr-text--xs"},dC={class:"fr-fieldset","aria-labelledby":"description-legend"},fC={class:"fr-fieldset__legend",id:"description-legend"},hC={class:"subtitle subtitle--uppercase fr-mb-3v"},pC={class:"fr-fieldset__element"},gC={class:"fr-fieldset","aria-labelledby":"description-legend"},mC={class:"fr-fieldset__legend",id:"description-legend"},vC={class:"subtitle subtitle--uppercase fr-mb-3v"},bC={key:0,class:"fr-fieldset","aria-labelledby":"description-legend"},_C={class:"fr-fieldset__legend",id:"description-legend"},yC={class:"subtitle subtitle--uppercase fr-mb-3v"},wC=["accordion"],$C={class:"fr-fieldset","aria-labelledby":"description-legend"},xC={class:"fr-fieldset__legend",id:"description-legend"},kC={class:"subtitle subtitle--uppercase fr-mb-3v"},CC={key:0},SC={key:1},TC={class:"fr-grid-row fr-grid-row--right"},EC=["disabled"],PC=q({__name:"Step1DescribeDataservice",props:{dataservice:{},steps:{},errors:{},loading:{type:Boolean},user:{}},emits:["next"],setup(t,{emit:e}){const s=t,n=e,{t:i}=ce(),{id:o}=he("accordion"),{id:r}=he("accordion"),{id:a}=he("accordion");he("accordion");const{id:l}=he("accordion"),{id:c}=he("accordion"),{id:u}=he("accordion"),{id:f}=he("accordion"),{id:p}=he("accordion"),{id:g}=he("accordion"),{id:m}=he("accordion"),{id:v}=he("accordion"),b=At({...s.dataservice}),$=[{id:!1,label:i("Open")},{id:!0,label:i("Restricted")}],w=[{id:!0,label:i("Yes")},{id:!1,label:i("No")}];function C(I){b.organization=I.organization,b.owner=I.owner,E.value=!0}const T=M(!1),S=M(null),E=M(!1);function O(I,F){T.value=I,S.value=F}function A(){return E.value}const L={acronym:{},availability:{numeric:ya},base_api_url:{url:Xs},authorization_request_url:{url:Xs},endpoint_description_url:{url:Xs},rate_limiting:{},title:{required:ke},description:{required:ke},contact_point:{},owned:{custom:A}},B={acronym:{},availability:{numeric:ya},base_api_url:{},authorization_request_url:{},endpoint_description_url:{},has_token:{},license:{required:ke},is_restricted:{required:ke},rate_limiting:{},title:{required:ke},description:{required:ke,minLengthValue:no(io)},contact_point:{},owned:{custom:A}},{getErrorText:H,getFunctionalState:D,getWarningText:V,hasError:Y,hasWarning:X,validateRequiredRules:Q,v$:se,vWarning$:G}=Kt(b,L,B),ie=j(()=>({acronym:D(G.value.acronym.$dirty,se.value.acronym.$invalid,G.value.acronym.$error),availability:D(G.value.availability.$dirty,se.value.availability.$invalid,G.value.availability.$error),base_api_url:D(G.value.base_api_url.$dirty,se.value.base_api_url.$invalid,G.value.base_api_url.$error),authorization_request_url:D(G.value.authorization_request_url.$dirty,se.value.authorization_request_url.$invalid,G.value.authorization_request_url.$error),endpoint_description_url:D(G.value.endpoint_description_url.$dirty,se.value.endpoint_description_url.$invalid,G.value.endpoint_description_url.$error),has_token:D(G.value.has_token.$dirty,!1,G.value.has_token.$error),license:D(G.value.license.$dirty,!1,G.value.license.$error),is_restricted:D(G.value.is_restricted.$dirty,!1,G.value.is_restricted.$error),rate_limiting:D(G.value.rate_limiting.$dirty,se.value.rate_limiting.$invalid,G.value.rate_limiting.$error),title:D(G.value.title.$dirty,se.value.title.$invalid,G.value.title.$error),description:D(G.value.description.$dirty,se.value.description.$invalid,G.value.description.$error),contact_point:D(G.value.contact_point.$dirty,se.value.contact_point.$invalid,G.value.contact_point.$error),owned:D(G.value.owned.$dirty,se.value.owned.$invalid,G.value.owned.$error)})),le=I=>Y(ie,I),oe=I=>X(ie,I);function U(){Q().then(I=>{I&&n("next",b,T.value,S.value)})}return(I,F)=>(y(),k("div",jk,[x(kt,{steps:I.steps,currentStep:0},null,8,["steps"]),d("div",qk,[x(Xn,{class:"fr-col-12 fr-col-md-5",buttonText:h(i)("Help"),onRight:!0,fixed:!0},{title:P(()=>[F[10]||(F[10]=d("span",{class:"fr-icon--sm fr-icon-question-line","aria-hidden":"true"},null,-1)),W(" "+_(h(i)("Help")),1)]),default:P(()=>[x(oo,null,{default:P(()=>[x(Ce,{title:h(i)("Name your API"),id:h(o),state:ie.value.title},{default:P(()=>[d("p",Yk,_(h(i)("Give your API a relevant and explicit name to reflect its function or application domain. A good name helps users search for and identify the API easily.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Add an acronym to the API"),id:h(r),state:ie.value.acronym},{default:P(()=>[d("p",Gk,_(h(i)("You have the option to add an acronym to your API. The letters that make up this acronym do not need to be separated by periods.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Write a good description"),id:h(a),state:ie.value.description},{default:P(()=>[d("p",Xk,_(h(i)("Write a clear and precise description of the API. Users need to understand the purpose of the API, the data provided, the scope covered (is the data exhaustive, are there any gaps?), the frequency of data updates, as well as the parameters with which they can make a call.")),1),oe("description")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("description")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),b.organization?(y(),N(Ce,{key:0,title:I.$t("Define a point of contact"),id:h(v),state:ie.value.contact_point},{default:P(()=>[d("p",Kk,_(I.$t("Specify a contact point, such as an email or a link to a form, so users can reach you in case of issues or for questions.")),1)]),_:1},8,["title","id","state"])):z("",!0),x(Ce,{title:I.$t("Select an access type"),id:h(l),state:ie.value.is_restricted},{default:P(()=>[d("p",Zk,_(I.$t("Choose the access type (open or restricted). Select open if the data is open data.")),1),oe("is_restricted")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("is_restricted")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:I.$t("Access token"),id:h(c),state:ie.value.has_token},{default:P(()=>[d("p",Jk,_(I.$t("Please indicate whether the dataservice is freely accessible or whether a user requires a token to access the data.")),1),oe("has_token")?(y(),N(h($e),{key:0,class:"fr-mt-1w",color:"orange-terre-battue"},{default:P(()=>[W(_(h(V)("has_token")),1)]),_:1})):z("",!0)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Define the correct link to the API"),id:h(u),state:ie.value.base_api_url},{default:P(()=>[d("p",Qk,_(h(i)("The base URL of an API is the common entry point for all requests, often consisting of a domain or server address. It serves as the foundation to which specific paths (endpoints) are added to access the various resources of the API.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Add a link to the authorization"),id:h(f),state:ie.value.authorization_request_url},{default:P(()=>[d("p",eC,_(h(i)("If your API is restricted access, please add the link to the access request form. Are you an administration? The Datapass solution allows you to easily create and manage access request forms for data.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Add a link to the technical documentation"),id:h(p),state:ie.value.endpoint_description_url},{default:P(()=>[d("p",tC,_(h(i)("Ideally, provide an OpenAPI (swagger) link that allows developers to explore the endpoints, see the available methods, and test requests directly from the documentation. In the case of geographic services, you can provide a link to the service with a GetCapabilities request to obtain the service's metadata.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Set the rate limiting"),id:h(g),state:ie.value.rate_limiting},{default:P(()=>[d("p",sC,_(h(i)("You can specify the rate limiting for your API.")),1)]),_:1},8,["title","id","state"]),x(Ce,{title:h(i)("Availability"),id:h(m),state:ie.value.availability},{default:P(()=>[d("p",nC,_(h(i)("Specify the mean availability of your dataservice. Value should be a percentage.")),1)]),_:1},8,["title","id","state"])]),_:1})]),_:1},8,["buttonText"]),d("div",iC,[x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",oC,[d("div",rC,[d("img",{src:h(ch),alt:""},null,8,aC)]),d("div",lC,[d("p",cC,_(h(i)("What is a dataservice?")),1),d("p",uC,_(h(i)("A dataservice is a computer tool that allows a website or software to communicate with another computer and exchange data.")),1)])])]),_:1}),d("fieldset",dC,[d("legend",fC,[d("h2",hC,_(h(i)("Producer")),1)]),d("div",pC,[x(aa,{user:I.user,hasError:le("owned"),errorText:h(i)("You need to select a Producer"),"onUpdate:owned":C},null,8,["user","hasError","errorText"])])]),d("fieldset",gC,[d("legend",mC,[d("h2",vC,_(h(i)("Description")),1)]),x(Ee,{class:"fr-fieldset__element",accordion:h(o),onBlur:h(G).title.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(o),label:h(i)("Dataservice name"),required:!0,modelValue:b.title,"onUpdate:modelValue":F[0]||(F[0]=R=>b.title=R),hasError:le("title"),hasWarning:oe("title"),errorText:h(H)("title")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(r),onBlur:h(G).acronym.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(r),label:h(i)("Acronym"),required:!1,modelValue:b.acronym,"onUpdate:modelValue":F[1]||(F[1]=R=>b.acronym=R),hasError:le("acronym"),hasWarning:oe("acronym"),errorText:h(H)("acronym")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(a),onBlur:h(G).description.$touch},{default:P(()=>[x(ze,{label:h(i)("Description"),required:!0,type:"markdown",modelValue:b.description,"onUpdate:modelValue":F[2]||(F[2]=R=>b.description=R),hasError:le("description"),hasWarning:oe("description"),errorText:h(H)("description")},null,8,["label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"])]),b.organization?(y(),k("fieldset",bC,[d("legend",_C,[d("h2",yC,_(h(i)("Access Point")),1)]),d("div",{class:"fr-fieldset__element",accordion:h(v)},[x(Uk,{oid:b.organization,"onUpdate:contact":O},null,8,["oid"])],8,wC)])):z("",!0),d("fieldset",$C,[d("legend",xC,[d("h2",kC,_(h(i)("Access")),1)]),x(Ee,{class:"fr-fieldset__element",accordion:h(l),onBlur:h(G).is_restricted.$touch},{default:P(()=>[x(Ae,{placeholder:I.$t("Access type"),searchPlaceholder:I.$t("Chose an access type"),initialOptions:$,values:b.is_restricted,onChange:F[3]||(F[3]=R=>b.is_restricted=JSON.parse(R)),allOption:I.$t("Chose an access type"),addAllOption:!1,showDescription:!0},null,8,["placeholder","searchPlaceholder","values","allOption"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(c),onBlur:h(G).has_token.$touch},{default:P(()=>[x(Ae,{placeholder:I.$t("Access token"),searchPlaceholder:I.$t("Access token"),initialOptions:w,values:b.has_token,onChange:F[4]||(F[4]=R=>b.has_token=JSON.parse(R)),allOption:I.$t("Access token"),addAllOption:!1,showDescription:!0},null,8,["placeholder","searchPlaceholder","values","allOption"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(u),onBlur:h(G).base_api_url.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(u),label:h(i)("Dataservice Base URL"),type:"url",placeholder:h(i)("https://..."),required:!1,modelValue:b.base_api_url,"onUpdate:modelValue":F[5]||(F[5]=R=>b.base_api_url=R),hasError:le("base_api_url"),hasWarning:oe("base_api_url"),errorText:h(H)("base_api_url")},null,8,["aria-describedby","label","placeholder","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(f),onBlur:h(G).authorization_request_url.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(f),label:h(i)("Dataservice authorization request URL"),type:"url",placeholder:h(i)("https://..."),required:!1,modelValue:b.authorization_request_url,"onUpdate:modelValue":F[6]||(F[6]=R=>b.authorization_request_url=R),hasError:le("authorization_request_url"),hasWarning:oe("authorization_request_url"),errorText:h(H)("authorization_request_url")},null,8,["aria-describedby","label","placeholder","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(p),onBlur:h(G).endpoint_description_url.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(p),label:h(i)("Dataservice endpoint URL"),type:"url",placeholder:h(i)("https://..."),required:!1,modelValue:b.endpoint_description_url,"onUpdate:modelValue":F[7]||(F[7]=R=>b.endpoint_description_url=R),hasError:le("endpoint_description_url"),hasWarning:oe("endpoint_description_url"),errorText:h(H)("endpoint_description_url")},null,8,["aria-describedby","label","placeholder","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(g),onBlur:h(G).rate_limiting.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(g),label:h(i)("Rate limiting"),required:!1,modelValue:b.rate_limiting,"onUpdate:modelValue":F[8]||(F[8]=R=>b.rate_limiting=R),hasError:le("rate_limiting"),hasWarning:oe("rate_limiting"),errorText:h(H)("rate_limiting")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"]),x(Ee,{class:"fr-fieldset__element",accordion:h(m),onBlur:h(G).availability.$touch},{default:P(()=>[x(ze,{"aria-describedby":h(r),label:h(i)("Availability"),required:!1,modelValue:b.availability,"onUpdate:modelValue":F[9]||(F[9]=R=>b.availability=R),hasError:le("availability"),hasWarning:oe("availability"),errorText:h(H)("availability")},null,8,["aria-describedby","label","modelValue","hasError","hasWarning","errorText"])]),_:1},8,["accordion","onBlur"])]),I.errors.length?(y(),N(cn,{key:1,type:"error",class:"fr-mt-n2w fr-mb-2w"},{title:P(()=>[W(_(h(i)("An error occured | Some errors occured",I.errors.length)),1)]),default:P(()=>[I.errors.length>1?(y(),k("ul",CC,[(y(!0),k(J,null,ve(I.errors,R=>(y(),k("li",null,_(R),1))),256))])):(y(),k("p",SC,_(I.errors[0]),1))]),_:1})):z("",!0),d("div",TC,[d("button",{class:"fr-btn",onClick:U,disabled:I.loading},_(h(i)("Next")),9,EC)])]),_:1})])])]))}}),AC={class:"fr-grid-row"},DC={class:"fr-col"},MC={class:"fr-m-0 fr-text--xs"},OC={class:"fr-fieldset min-width-0","aria-labelledby":"description-legend"},LC={key:0,class:"fr-fieldset__legend",id:"description-legend"},RC={class:"subtitle subtitle--uppercase fr-mb-0"},IC=["title"],zC=["src"],FC=["title","onClick"],BC={class:"fr-hr-or w-100 text-transform-lowercase fr-text--regular"},NC={class:"fr-hr-or-text"},VC={key:0},WC={key:1},HC={class:"fr-grid-row fr-grid-row--right"},UC=["disabled"],jC=q({__name:"Step2AddDatasets",props:{errors:{},steps:{},loading:{type:Boolean}},emits:["next"],setup(t,{emit:e}){const s=e,{t:n}=ce(),i=D=>({zIndex:o.datasets.length-D}),o=At({datasets:[],linkedDataset:""}),r=M(!1),a=M(null),{withAsync:l}=Ec,c=M(null);Ld(c,o.datasets);const u=M(null),f={datasets:{},linkedDataset:{linked:l(B)}},p={datasets:{},linkedDataset:{}},{getFunctionalState:g,validateRequiredRules:m,v$:v,hasWarning:b,hasError:$,vWarning$:w}=Kt(o,f,p),C=j(()=>({datasets:g(w.value.datasets.$dirty,v.value.datasets.$invalid,w.value.datasets.$error),linkedDataset:g(w.value.linkedDataset.$dirty,v.value.linkedDataset.$invalid,w.value.linkedDataset.$error)}));function T(D){return $(C,D)}function S(D){return b(C,D)}async function E(D){var V;w.value.datasets.$touch(),D&&(O(D),(V=u.value)==null||V.selectOption(""))}async function O(D){if(!o.datasets.find(Y=>Y.id===D)){let Y=await Ve.get("datasets/".concat(D,"/"));o.datasets.push(Y.data)}}function A(D){o.datasets.splice(D,1)}function L(D){return D.split("/").filter(Y=>Y!=="").pop()}async function B(D){if(D=="")return!0;if(D.includes("/datasets/"))try{r.value=!0;const V=new URL(D),Y=L(V.pathname),Q=(await Ve.get("datasets/".concat(Y,"/"))).data.id;return O(Q),o.linkedDataset="",!0}catch(V){return!1}finally{r.value=!1}else return!1}function H(){m().then(D=>{D&&s("next",_e(o.datasets))})}return(D,V)=>(y(),N(ot,null,{default:P(()=>[x(kt,{steps:D.steps,currentStep:1},null,8,["steps"]),x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-2w"},{default:P(()=>[d("div",AC,[V[1]||(V[1]=d("div",{class:"fr-col-auto fr-mr-3v"},[d("span",{class:"fr-icon-info-line","aria-hidden":"true"})],-1)),d("div",DC,[d("p",MC,_(h(n)("It is important to associate all the datasets used, as this allows to understand the cross-references and improve the visibility of your dataservice.")),1)])])]),_:1}),d("fieldset",OC,[o.datasets.length>0?(y(),k("legend",LC,[d("h2",RC,_(h(n)("Associated datasets")),1)])):z("",!0),d("div",{class:"w-100",ref_key:"el",ref:c},[(y(!0),k(J,null,ve(o.datasets,(Y,X)=>(y(),k("div",{class:"fr-col fr-grid-row fr-grid-row--center w-100",key:Y.id},[d("button",{type:"button",class:"fr-col-auto fr-btn fr-btn--xs fr-btn--tertiary-no-outline fr-icon-svg fr-icon--sm fr-my-auto fr-mr-1v",title:h(n)("Drag to move this content")},[d("img",{src:h(Rd),alt:""},null,8,zC)],8,IC),d("div",{class:"fr-col relative",style:nn(i(X))},[x(Qn,{dataset:Y},null,8,["dataset"]),d("button",{type:"button",class:"fr-btn fr-btn--tertiary-no-outline fr-btn--secondary--error fr-icon-close-line border-0 absolute top-3w right-1w",title:h(n)("Remove the dataset"),onClick:Q=>A(X)},_(h(n)("Remove the dataset")),9,FC)],4)]))),128))],512),x(Ae,{ref_key:"selectedDatasetRef",ref:u,placeholder:h(n)("Look for a dataset"),searchPlaceholder:h(n)("Search a dataset..."),minimumCharacterBeforeSuggest:2,suggestUrl:"/datasets/suggest/",required:!0,onChange:E,hasError:T("datasets"),errorText:h(n)("You need to provide at least one dataset"),allOption:h(n)("Select a dataset"),addAllOption:!1,values:a.value},null,8,["placeholder","searchPlaceholder","hasError","errorText","allOption","values"]),d("p",BC,[d("span",NC,_(h(n)("or")),1)]),x(ze,{label:h(n)("Link to the dataset"),placeholder:"https://...",class:"w-100",required:!0,modelValue:o.linkedDataset,"onUpdate:modelValue":V[0]||(V[0]=Y=>o.linkedDataset=Y),onChange:h(w).linkedDataset.$touch,hasError:T("linkedDataset"),hasWarning:S("linkedDataset"),errorText:h(n)("No dataset has been found on the provided url")},null,8,["label","modelValue","onChange","hasError","hasWarning","errorText"])]),D.errors.length?(y(),N(cn,{key:0,type:"error",class:"fr-mb-2w"},{title:P(()=>[W(_(h(n)("An error occured | Some errors occured",D.errors.length)),1)]),default:P(()=>[D.errors.length>1?(y(),k("ul",VC,[(y(!0),k(J,null,ve(D.errors,Y=>(y(),k("li",null,_(Y),1))),256))])):(y(),k("p",WC,_(D.errors[0]),1))]),_:1})):z("",!0),d("div",HC,[d("button",{class:"fr-btn",disabled:r.value||D.loading,onClick:H},_(h(n)("Next")),9,UC)])]),_:1}))}}),qC={class:"fr-container"},YC={class:"fr-grid-row"},GC={class:"fr-col-auto fr-mr-3v"},XC=["src"],KC={class:"fr-col"},ZC={class:"fr-m-0 fr-text--bold"},JC={class:"fr-m-0 fr-text--xs"},QC={class:"fr-grid-row justify-between"},eS=["href"],tS={class:"fr-grid-row fr-grid-row--right"},sS=q({__name:"Step3CompleteThePublication",props:{feedbackUrl:{},originalDataservice:{},steps:{}},emits:["redirectToPublicUrl"],setup(t,{emit:e}){const s=e,n=t,i=At({...n.originalDataservice});At({...n.originalReuse});function o(){i.private=!0,s("update",i)}function r(){i.private=!1,s("update",i)}return(a,l)=>(y(),k("div",qC,[x(kt,{steps:a.steps,currentStep:2},null,8,["steps"]),x(ot,null,{default:P(()=>[x(h($e),{color:"blue-cumulus",weight:"regular",class:"fr-mb-n3v"},{default:P(()=>[d("div",YC,[d("div",GC,[d("img",{src:h(vo),alt:""},null,8,XC)]),d("div",KC,[d("p",ZC,_(a.$t("Your dataservice is created!")),1),d("p",JC,_(a.$t("You can now publish it or save it as a draft.")),1)])])]),_:1}),x(Hr,{dataservice:i,dataserviceUrl:i.self_web_url,"show-description":!1},null,8,["dataservice","dataserviceUrl"]),d("div",QC,[d("a",{href:a.feedbackUrl,class:"fr-btn fr-btn--tertiary-no-outline fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-lightbulb-line"},_(a.$t("Give us your feedback on the publishing form")),9,eS),d("div",tS,[d("a",{onClick:o,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-mr-3v"},_(a.$t("Save as draft")),1),d("button",{onClick:r,class:"fr-btn"},_(a.$t("Publish the dataservice")),1)])])]),_:1})]))}}),nS=q({__name:"DataservicePublishingForm",setup(t){const{t:e}=ce(),s=[e("Describe your dataservice"),e("Link datasets"),e("Complete your publishing")],n=M(0),i=M(!1),o=M(null),r=M(null),a=ps(),l=M({acronym:"",authorization_request_url:null,availability:null,base_api_url:null,datasets:[],description:"",endpoint_description_url:null,has_token:!1,is_restricted:!1,license:null,private:!0,rate_limiting:"",title:"",organization:null,owner:a.id,contact_points:[]}),c=M(null),u=M([]),f=(v,b=!0)=>{if(o.value&&o.value.scrollIntoView({behavior:"smooth"}),v!==null&&(n.value=v,b)){let $=new URL(window.location.href);const w="#/step-".concat(v+1);$.hash=w,window.history.pushState(null,"",$)}};async function p(v,b,$){var w;i.value=!0,u.value=[],v.availability&&(v.availability=Number(v.availability));try{if($)if(!b)v.contact_points=[$.id];else{let C=await uh(v.organization,$);v.contact_points=[C.id]}else v.contact_points=[];c.value=await dh(v),c.value.datasets=[],f(1)}catch(C){u.value.push(e("An error occured while creating your dataservice.")),C instanceof Error&&"response"in C&&(w=C.response)!=null&&w.data.errors.url&&(u.value.pop(),u.value.push(e("A dataservice already exists for this URL.")))}finally{i.value=!1}}async function g(v){u.value=[];let b=!1;if(!c.value)return f(0);for(const $ of v)c.value.datasets.push($.id);try{c.value=await wa(c.value),b=!0}catch($){$ instanceof Error&&u.value.push($.message)}b&&f(2)}async function m(v){try{delete v.datasets,c.value=await wa(v)}catch(b){b instanceof Error&&u.value.push(b.message)}}return we(async()=>{r.value=await Mr()}),(v,b)=>{var $;return y(),k("div",{class:"fr-container",ref_key:"containerRef",ref:o},[n.value===0&&r.value?(y(),N(PC,{key:0,dataservice:l.value,steps:s,errors:u.value,loading:i.value,user:r.value,onNext:p},null,8,["dataservice","errors","loading","user"])):n.value===1?(y(),N(jC,{key:1,steps:s,errors:u.value,onNext:g},null,8,["errors"])):n.value===2&&c.value?(y(),N(sS,{key:2,steps:s,feedbackUrl:($=h(Or))!=null?$:"",originalDataservice:c.value,onUpdate:m},null,8,["feedbackUrl","originalDataservice"])):z("",!0)],512)}}}),iS={key:0,class:"border border-blue-400 fr-p-2w bg-alt-grey"},oS={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},rS={class:"fr-col-12 fr-col-sm"},aS={class:"fr-h6 fr-mb-0 text-blue-400"},lS={class:"fr-col-auto flex"},cS=["href"],uS=["href"],dS={key:1,class:"border border-blue-400 fr-p-2w fr-dataservice__box fr-dataservice__swagger"},fS={class:"fr-h6 fr-mb-0 text-blue-400"},hS={class:"flex items-center fr-ml-4v"},pS={key:0},gS=q({__name:"DataserviceLinks",props:{dataservice:{}},setup(t){const e=t,{t:s}=ce(),n=M(!1),i=M(!1),o=uc(()=>_c(()=>import("./Swagger.6.1.4.js"),["js/Swagger.6.1.4.js","js/_commonjsHelpers.6.1.4.js","js/sentry.6.1.4.js"])),r=()=>{n.value=!n.value};function a(l){return l.endsWith(".json")||l.endsWith(".yaml")||l.endsWith(".yml")}return we(async()=>{e.dataservice.endpoint_description_url&&(i.value=a(e.dataservice.endpoint_description_url))}),(l,c)=>(y(),k("div",null,[!i.value&&l.dataservice.endpoint_description_url||l.dataservice.business_documentation_url?(y(),k("div",iS,[d("div",oS,[d("div",rS,[d("h2",aS,_(h(s)("API documentation")),1)]),d("div",lS,[!i.value&&l.dataservice.endpoint_description_url?(y(),k("a",{key:0,class:"fr-btn",href:l.dataservice.endpoint_description_url,target:"_blank",rel:"ugc nofollow noopener"},_(h(s)("Technical Documentation")),9,cS)):z("",!0),l.dataservice.business_documentation_url?(y(),k("a",{key:1,class:Te(["fr-btn",i.value?"":"fr-ml-3v fr-btn--secondary"]),href:l.dataservice.business_documentation_url,target:"_blank",rel:"ugc nofollow noopener"},_(h(s)("Business documentation")),11,uS)):z("",!0)])])])):z("",!0),c[0]||(c[0]=d("br",null,null,-1)),i.value?(y(),k("div",dS,[d("header",{class:"fr-p-2v flex items-center justify-between",onClick:r},[d("h2",fS,_(h(s)("Swagger")),1),d("div",hS,[d("div",{class:Te(["fr-icon--sm fr-ml-4v",{"fr-icon-arrow-up-s-line":n.value,"fr-icon-arrow-down-s-line":!n.value}])},null,2)])]),n.value&&l.dataservice.endpoint_description_url?(y(),k("div",pS,[x(h(o),{url:l.dataservice.endpoint_description_url},null,8,["url"])])):z("",!0)])):z("",!0)]))}});const mS=pe(gS,[["__scopeId","data-v-5e2bd783"]]),vS=document.querySelectorAll("[data-tabs]");vS.forEach(t=>{const e=t.querySelectorAll("[role=tab]");e.forEach(s=>{s.addEventListener("click",n=>{var a,l,c;n.preventDefault();const i=n.target,o=Array.from(e).find(u=>u.getAttribute("aria-selected")==="true");if(o){o.setAttribute("aria-selected","false");const u=o.getAttribute("aria-controls")||"";(a=document.getElementById(u))==null||a.classList.remove("fr-unhidden")}const r=i.getAttribute("aria-controls")||"";i.setAttribute("aria-selected","true"),(l=document.getElementById(r))==null||l.classList.add("fr-unhidden"),(c=globalThis._paq)==null||c.push(["trackEvent","Move page to tab",window.location.pathname,s.textContent])})})});const bS=document.querySelectorAll("[data-accordion-button]");bS.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const s=e.target;if(s instanceof HTMLElement){s.toggleAttribute("aria-expanded");const n=document.querySelector("#"+s.getAttribute("aria-controls"));n&&(n.classList.toggle("active"),Vc(n,s.hasAttribute("aria-expanded")))}})});var Id={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(t,e){(function(n,i){t.exports=i()})(Ch,function(){return function(){var s={686:function(o,r,a){a.d(r,{default:function(){return oe}});var l=a(279),c=a.n(l),u=a(370),f=a.n(u),p=a(817),g=a.n(p);function m(U){try{return document.execCommand(U)}catch(I){return!1}}var v=function(I){var F=g()(I);return m("cut"),F},b=v;function $(U){var I=document.documentElement.getAttribute("dir")==="rtl",F=document.createElement("textarea");F.style.fontSize="12pt",F.style.border="0",F.style.padding="0",F.style.margin="0",F.style.position="absolute",F.style[I?"right":"left"]="-9999px";var R=window.pageYOffset||document.documentElement.scrollTop;return F.style.top="".concat(R,"px"),F.setAttribute("readonly",""),F.value=U,F}var w=function(I,F){var R=$(I);F.container.appendChild(R);var Z=g()(R);return m("copy"),R.remove(),Z},C=function(I){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},R="";return typeof I=="string"?R=w(I,F):I instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(I==null?void 0:I.type)?R=w(I.value,F):(R=g()(I),m("copy")),R},T=C;function S(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(F){return typeof F}:S=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},S(U)}var E=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=I.action,R=F===void 0?"copy":F,Z=I.container,ne=I.target,Ze=I.text;if(R!=="copy"&&R!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(ne!==void 0)if(ne&&S(ne)==="object"&&ne.nodeType===1){if(R==="copy"&&ne.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(R==="cut"&&(ne.hasAttribute("readonly")||ne.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}else throw new Error('Invalid "target" value, use a valid Element');if(Ze)return T(Ze,{container:Z});if(ne)return R==="cut"?b(ne):T(ne,{container:Z})},O=E;function A(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(F){return typeof F}:A=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},A(U)}function L(U,I){if(!(U instanceof I))throw new TypeError("Cannot call a class as a function")}function B(U,I){for(var F=0;F<I.length;F++){var R=I[F];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(U,R.key,R)}}function H(U,I,F){return I&&B(U.prototype,I),F&&B(U,F),U}function D(U,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(I&&I.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),I&&V(U,I)}function V(U,I){return V=Object.setPrototypeOf||function(R,Z){return R.__proto__=Z,R},V(U,I)}function Y(U){var I=se();return function(){var R=G(U),Z;if(I){var ne=G(this).constructor;Z=Reflect.construct(R,arguments,ne)}else Z=R.apply(this,arguments);return X(this,Z)}}function X(U,I){return I&&(A(I)==="object"||typeof I=="function")?I:Q(U)}function Q(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(U){return!1}}function G(U){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},G(U)}function ie(U,I){var F="data-clipboard-".concat(U);if(I.hasAttribute(F))return I.getAttribute(F)}var le=function(U){D(F,U);var I=Y(F);function F(R,Z){var ne;return L(this,F),ne=I.call(this),ne.resolveOptions(Z),ne.listenClick(R),ne}return H(F,[{key:"resolveOptions",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof Z.action=="function"?Z.action:this.defaultAction,this.target=typeof Z.target=="function"?Z.target:this.defaultTarget,this.text=typeof Z.text=="function"?Z.text:this.defaultText,this.container=A(Z.container)==="object"?Z.container:document.body}},{key:"listenClick",value:function(Z){var ne=this;this.listener=f()(Z,"click",function(Ze){return ne.onClick(Ze)})}},{key:"onClick",value:function(Z){var ne=Z.delegateTarget||Z.currentTarget,Ze=this.action(ne)||"copy",zt=O({action:Ze,container:this.container,target:this.target(ne),text:this.text(ne)});this.emit(zt?"success":"error",{action:Ze,text:zt,trigger:ne,clearSelection:function(){ne&&ne.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(Z){return ie("action",Z)}},{key:"defaultTarget",value:function(Z){var ne=ie("target",Z);if(ne)return document.querySelector(ne)}},{key:"defaultText",value:function(Z){return ie("text",Z)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(Z){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(Z,ne)}},{key:"cut",value:function(Z){return b(Z)}},{key:"isSupported",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],ne=typeof Z=="string"?[Z]:Z,Ze=!!document.queryCommandSupported;return ne.forEach(function(zt){Ze=Ze&&!!document.queryCommandSupported(zt)}),Ze}}]),F}(c()),oe=le},828:function(o){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==r;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}o.exports=l},438:function(o,r,a){var l=a(828);function c(p,g,m,v,b){var $=f.apply(this,arguments);return p.addEventListener(m,$,b),{destroy:function(){p.removeEventListener(m,$,b)}}}function u(p,g,m,v,b){return typeof p.addEventListener=="function"?c.apply(null,arguments):typeof m=="function"?c.bind(null,document).apply(null,arguments):(typeof p=="string"&&(p=document.querySelectorAll(p)),Array.prototype.map.call(p,function($){return c($,g,m,v,b)}))}function f(p,g,m,v){return function(b){b.delegateTarget=l(b.target,g),b.delegateTarget&&v.call(p,b)}}o.exports=u},879:function(o,r){r.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},r.nodeList=function(a){var l=Object.prototype.toString.call(a);return a!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in a&&(a.length===0||r.node(a[0]))},r.string=function(a){return typeof a=="string"||a instanceof String},r.fn=function(a){var l=Object.prototype.toString.call(a);return l==="[object Function]"}},370:function(o,r,a){var l=a(879),c=a(438);function u(m,v,b){if(!m&&!v&&!b)throw new Error("Missing required arguments");if(!l.string(v))throw new TypeError("Second argument must be a String");if(!l.fn(b))throw new TypeError("Third argument must be a Function");if(l.node(m))return f(m,v,b);if(l.nodeList(m))return p(m,v,b);if(l.string(m))return g(m,v,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(m,v,b){return m.addEventListener(v,b),{destroy:function(){m.removeEventListener(v,b)}}}function p(m,v,b){return Array.prototype.forEach.call(m,function($){$.addEventListener(v,b)}),{destroy:function(){Array.prototype.forEach.call(m,function($){$.removeEventListener(v,b)})}}}function g(m,v,b){return c(document.body,m,v,b)}o.exports=u},817:function(o){function r(a){var l;if(a.nodeName==="SELECT")a.focus(),l=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),l=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(a),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}o.exports=r},279:function(o){function r(){}r.prototype={on:function(a,l,c){var u=this.e||(this.e={});return(u[a]||(u[a]=[])).push({fn:l,ctx:c}),this},once:function(a,l,c){var u=this;function f(){u.off(a,f),l.apply(c,arguments)}return f._=l,this.on(a,f,c)},emit:function(a){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(a,l){var c=this.e||(this.e={}),u=c[a],f=[];if(u&&l)for(var p=0,g=u.length;p<g;p++)u[p].fn!==l&&u[p].fn._!==l&&f.push(u[p]);return f.length?c[a]=f:delete c[a],this}},o.exports=r,o.exports.TinyEmitter=r}},n={};function i(o){if(n[o])return n[o].exports;var r=n[o]={exports:{}};return s[o](r,r.exports,i),r.exports}return function(){i.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(r,{a:r}),r}}(),function(){i.d=function(o,r){for(var a in r)i.o(r,a)&&!i.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:r[a]})}}(),function(){i.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)}}(),i(686)}().default})})(Id);var _S=Id.exports;const yS=Sh(_S);new yS('[id$="-copy"]');function wS(t){t&&t.classList.remove("fr-hidden")}function $S(t){t&&t.classList.add("fr-hidden"),window.localStorage.setItem(t.id,"true")}function xS(t,e=3,s="/"){const n=window.location.pathname,i=t.id;if(window.localStorage.getItem(i)||!1||n.indexOf(s)===-1)return;const r="pv-"+i;let a=parseInt(window.sessionStorage.getItem(r)||"0",10);a>=e&&wS(t),a++,window.sessionStorage.setItem(r,a.toFixed(0))}const kS=document.querySelectorAll("[data-dialogs]");kS.forEach(t=>{xS(t),t.querySelectorAll("[data-dialogs-close]").forEach(s=>{s instanceof HTMLElement&&s.addEventListener("click",()=>$S(t))})});const CS=document.querySelectorAll("[data-select-sort]");CS.forEach(t=>{t.querySelectorAll("option").forEach(s=>{s.disabled=!1}),t.form&&(t.addEventListener("change",s=>{var n;(n=t.form)==null||n.dispatchEvent(new Event("submit"))}),t.form.addEventListener("submit",s=>{var n,i;s.preventDefault(),t.value||(t.disabled=!0),(n=t.form)==null||n.submit(),(i=globalThis._paq)==null||i.push(["trackEvent","Search","Sort",t.value])}))});function zd(t){return"#/".concat(t.dataset.updateUrl||t.getAttribute("aria-controls"))}function cc(t){t.forEach(e=>{const s=zd(e),n="#".concat(e.dataset.previousUrl);if(n&&window.location.hash.startsWith(n)){const i=window.location.hash.slice(n.length);window.location.hash="".concat(s,"/").concat(i)}if(window.location.hash.includes(s)){const i=e.getAttribute("aria-controls");i||console.error("TabButton without `aria-controls` ID.",e);const o=document.getElementById(i);o||console.error("Unknown TabPanel with id '".concat(i,"'."),e),dsfr(o).tabPanel.disclose()}})}function SS(){const t=document.querySelectorAll("[data-update-url]");window.addEventListener("hashchange",()=>{cc(t)}),t.forEach(e=>{const s=zd(e);e.addEventListener("click",()=>{var n;if(!window.location.hash.includes(s)){let i=new URL(window.location.href);i.hash=s,window.history.pushState(null,"",i),(n=globalThis._paq)==null||n.push(["trackEvent","Move page to hash",window.location.pathname,s])}})}),setTimeout(()=>{cc(t)},100)}async function TS(){return(await Ve.get($c("reports/reasons/"))).data}async function ES(t,e,s,n){return(await Ve.post("/reports/",{subject:{id:e,class:t},reason:s,message:n})).data}const PS=["aria-labelledby","id"],AS={class:"fr-container fr-container--fluid fr-container-md"},DS={class:"fr-grid-row fr-grid-row--center"},MS={class:"fr-col-12 fr-col-md-8"},OS={class:"fr-modal__body"},LS={class:"fr-modal__header"},RS=["title","aria-controls","disabled"],IS={class:"fr-modal__content"},zS=["id"],FS=["href"],BS={class:"fr-modal__footer"},NS={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left"},VS=["aria-controls"],WS={class:"fr-modal__content"},HS=["id"],US=["href"],jS={class:"fr-modal__footer"},qS={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left"},YS=["aria-controls","disabled"],GS=q({__name:"ReportModal",props:{id:{},loading:{type:Boolean},succeeded:{type:Boolean}},emits:["send"],setup(t,{emit:e}){const s=e,{t:n}=ce(),i=on("modal-title"),o=M(),r={reason:"",message:""},a=At({...r}),l=M([]),c={reason:{required:ke},message:{required:ke}},{getErrorText:u,getFunctionalState:f,hasError:p,reset:g,validateRequiredRules:m,v$:v}=Kt(a,c,c),b=T=>p($,T),$=j(()=>({reason:f(v.value.reason.$dirty,v.value.reason.$error,!1),message:f(v.value.message.$dirty,v.value.message.$error,!1)}));function w(){globalThis.dsfr(o.value).modal.conceal(),a.message=r.message,a.reason=r.reason,g()}function C(){m().then(T=>{T&&s("send",{...a})})}return we(async()=>{l.value=await TS()}),(T,S)=>{const E=me("i18n-t");return y(),N(Yn,{to:"body"},[d("dialog",us(T.$attrs,{"aria-labelledby":h(i),id:T.id,role:"dialog",class:"fr-modal",ref_key:"modalRef",ref:o}),[d("div",AS,[d("div",DS,[d("div",MS,[d("div",OS,[d("div",LS,[d("button",{class:"fr-btn--close fr-btn",title:h(n)("Close the modal dialog"),"aria-controls":T.id,target:"_self",disabled:T.loading,onClick:w},_(h(n)("Close")),9,RS)]),T.succeeded?(y(),k(J,{key:0},[d("div",IS,[d("h2",{id:h(i),class:"fr-mb-2w"},[S[2]||(S[2]=d("span",{class:"fr-icon-success-line fr-icon--lg"},null,-1)),W(_(h(n)("Thanks for reporting this content")),1)],8,zS),x(E,{keypath:"{site} team will examine the content to check if it breaks our {markup}. Thanks for your help.",tag:"p",class:"fr-mt-0 fr-mb-1w fr-text--xs",scope:"global"},{site:P(()=>[W(_(h(ln)),1)]),markup:P(()=>[d("a",{href:h($a)},_(h(n)("usage policy")),9,FS)]),_:1})]),d("div",BS,[d("div",NS,[d("button",{class:"fr-btn","aria-controls":T.id,target:"_self",onClickCapture:Me(w,["prevent","stop"])},_(h(n)("Close")),41,VS)])])],64)):(y(),k(J,{key:1},[d("div",WS,[d("h2",{id:h(i),class:"fr-mb-2w"},_(h(n)("Report this content")),9,HS),x(h($e),{class:"fr-mb-2w",color:"warning",weight:"regular"},{default:P(()=>[S[3]||(S[3]=d("span",{class:"fr-icon-warning-line fr-mr-1v","aria-hidden":"true"},null,-1)),W(" "+_(h(n)("Please only report in case of serious concern."))+" ",1),d("a",{href:h($a)},_(h(n)("See our usage policy")),9,US)]),_:1}),x(Sc,{label:h(n)("Report reason"),required:!0,modelValue:a.reason,"onUpdate:modelValue":S[0]||(S[0]=O=>a.reason=O),hasError:b("reason"),errorText:h(u)("reason"),options:l.value},null,8,["label","modelValue","hasError","errorText","options"]),x(ze,{type:"textarea",label:h(n)("Message"),required:!0,hasError:b("message"),errorText:h(u)("message"),modelValue:a.message,"onUpdate:modelValue":S[1]||(S[1]=O=>a.message=O),placeholder:h(n)("Reason of your report.{newline}Don't include any personal data.")},null,8,["label","hasError","errorText","modelValue","placeholder"])]),d("div",jS,[d("div",qS,[d("button",{class:"fr-btn","aria-controls":T.id,target:"_self",disabled:T.loading,onClickCapture:Me(C,["prevent","stop"])},_(h(n)("Send")),41,YS)])])],64))])])])])],16,PS)])}}}),XS=["aria-controls","disabled","title"],KS=q({__name:"ReportModalButton",props:{objectType:{},objectId:{}},setup(t){const e=t,{t:s}=ce(),{toast:n}=xt(),i=M(!1),o=M(!1),r=on();async function a(l){try{i.value=!0,await ES(e.objectType,e.objectId,l.reason,l.message),o.value=!0}catch(c){n.error(s("An unexpected error occured while reporting this content."))}finally{i.value=!1}}return(l,c)=>(y(),k(J,null,[d("button",us({class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-flag-line","data-fr-opened":"false","aria-controls":h(r)},l.$attrs,{disabled:i.value,title:h(s)("Make a report")}),_(h(s)("Make a report")),17,XS),x(GS,{id:h(r),loading:i.value,succeeded:o.value,onSend:a},null,8,["id","loading","succeeded"])],64))}}),ZS={class:"fr-grid-row fr-grid-row--middle justify-between","data-cy":"search"},JS={class:"fr-search-bar fr-search-bar--lg w-100"},QS=["for"],e9=["id","aria-label","placeholder"],t9={class:"fr-btn",type:"submit"},s9={class:"fr-grid-row fr-mt-1w fr-mt-md-5v"},n9={class:"fr-col-12 fr-col-md-4 fr-col-lg-3"},i9={class:"fr-sidemenu","aria-labelledby":"fr-sidemenu-title"},o9={class:"fr-sidemenu__inner"},r9={class:"fr-sidemenu__btn fr-mt-1w",hidden:"","aria-controls":"fr-sidemenu-wrapper","aria-expanded":"false"},a9={class:"fr-collapse",id:"fr-sidemenu-wrapper"},l9={class:"fr-sidemenu__title fr-mb-3v",id:"fr-sidemenu-title"},c9={class:"fr-grid-row fr-grid-row--gutters"},u9={key:0,class:"fr-col-12"},d9={class:"fr-col-12"},f9={class:"fr-select-group"},h9=["for"],p9=["id"],g9={value:null},m9={value:!1},v9={value:!0},b9={key:1,class:"fr-col-12 fr-mb-3w text-align-center"},_9={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-mt-2w fr-mt-md-0 search-results"},y9={key:0},w9={key:1,class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-between fr-pb-1w"},$9={class:"fr-col-auto fr-my-0",role:"status"},x9={key:2},k9={class:"fr-mt-1w border-default-grey border-top relative z-2"},C9={key:3,class:"fr-mt-2w"},S9=q({__name:"DataservicesSearch",props:{organization:{default:""}},setup(t){const e=t,{t:s}=ce(),{toast:n}=vg(),i=M(null);Tt(i,()=>a.value=1);const o=M(null);Tt(o,()=>a.value=1);const r=fa(),a=M(1),l=j(()=>i.value||o.value!==null),c=()=>{i.value="",o.value=null},u=()=>{p.value="",c(),v()},f=fa(),p=M(""),g=fh(p,500),m=Kd("searchInputRef"),v=()=>{m.value&&m.value.scrollIntoView({behavior:"smooth"})},b=j(()=>{const A={};return i.value&&(A.organization=i.value),g.value&&(A.q=g.value),o.value!==null&&(A.is_restricted=o.value.toString()),e.organization&&(A.organization=e.organization),a.value&&a.value!==1&&(A.page=a.value.toString()),new URLSearchParams(A)}),{ignoreUpdates:$}=hh(b,()=>{let A=new URL(window.location.href);A.search=b.value.toString(),window.history.pushState(null,"",A)}),w=j(()=>"/dataservices/search/?".concat(b.value)),C=M(null),T=M(null);Tt(p,()=>{T.value&&T.value.abort(),a.value=1});const S=async()=>{C.value=null,T.value=new AbortController;try{const A=await an.get(w.value,{signal:T.value.signal});T.value=null,C.value=A.data}catch(A){rn.isCancel(A)||n.error(s("Error getting search results."))}},E=()=>{const A=new URL(window.location.href);i.value=A.searchParams.get("organization"),p.value=A.searchParams.get("q")||"",A.searchParams.get("is_restricted")==="true"?o.value=!0:A.searchParams.get("is_restricted")==="false"?o.value=!1:o.value=null,a.value=parseInt(A.searchParams.get("page")||"1")};we(()=>{var A;E(),S(),(A=m.value)==null||A.focus(),window.addEventListener("popstate",()=>{$(()=>{E()})})}),Tt(w,()=>{S()});const O=A=>{a.value=A};return(A,L)=>(y(),k("form",{class:"fr-pt-3v",onSubmit:Me(S,["prevent"])},[d("div",ZS,[d("section",JS,[d("label",{class:"fr-label",for:h(f)},_(h(s)("Search")),9,QS),wt(d("input",{id:h(f),type:"search","onUpdate:modelValue":L[0]||(L[0]=B=>p.value=B),ref:"searchInputRef",class:"fr-input","aria-label":h(s)("Search..."),placeholder:h(s)("Search..."),"data-cy":"search-input","data-testid":"search-input"},null,8,e9),[[ds,p.value]]),d("button",t9,_(h(s)("Search")),1)])]),d("div",s9,[d("div",n9,[d("nav",i9,[d("div",o9,[d("button",r9,_(h(s)("Filter results")),1),d("div",a9,[d("div",l9,_(h(s)("Filters")),1),d("div",c9,[e.organization?z("",!0):(y(),k("div",u9,[x(Ae,{placeholder:h(s)("Organizations"),searchPlaceholder:h(s)("Search an organization..."),allOption:h(s)("All organizations"),listUrl:"/organizations/?sort=-followers",suggestUrl:"/organizations/suggest/",entityUrl:"/organizations/",values:i.value,onChange:L[1]||(L[1]=B=>i.value=B),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"])])),d("div",d9,[d("div",f9,[d("label",{class:"fr-label",for:h(r)},_(h(s)("Access terms")),9,h9),wt(d("select",{class:Te(["fr-select",{"text-mention-grey":o.value===null}]),id:h(r),"onUpdate:modelValue":L[2]||(L[2]=B=>o.value=B)},[d("option",g9,_(h(s)("All access terms")),1),d("option",m9,_(h(s)("Open APIs to everyone")),1),d("option",v9,_(h(s)("Restricted access APIs")),1)],10,p9),[[Tr,o.value]])])]),l.value?(y(),k("div",b9,[d("button",{class:"fr-btn fr-btn--secondary fr-icon-close-circle-line fr-btn--icon-left justify-center w-100",onClick:c},_(h(s)("Reset filters")),1)])):z("",!0)])])])])]),d("section",_9,[C.value===null?(y(),k("div",y9,[x(na)])):z("",!0),C.value!==null?(y(),k("div",w9,[d("p",$9,_(h(s)("{count} API",C.value.total)),1)])):z("",!0),C.value!==null&&C.value.data.length?(y(),k("div",x9,[d("ul",k9,[(y(!0),k(J,null,ve(C.value.data,B=>(y(),k("li",{key:B.id},[x(h(Hr),{dataservice:B,dataserviceUrl:B.self_web_url},null,8,["dataservice","dataserviceUrl"])]))),128))]),C.value!==null&&C.value.total>C.value.page_size?(y(),N(h(Bs),{key:0,page:a.value,pageSize:C.value.page_size,totalResults:C.value.total,onChange:O,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):(y(),N(Xi,{key:1,onResetFilters:u}))])):z("",!0),C.value!==null&&C.value.data.length===0?(y(),k("div",C9,[x(Xi,{onResetFilters:u})])):z("",!0)])])],32))}});ph({admin_root:Qo,api_root:gh,api_2_root:mh,default_lang:er.global.locale.value,only_locales:er.global.locale.value,schema_documentation_url:Tc,schema_validata_url:vh,show_copy_resource_permalink:!0,tabular_api_dataservice_id:bh,tabular_api_url:_h,tabular_page_size:yh,title:ln});const T9=t=>{const e=Zd({});wh(e),e.use($h),e.use(k5),e.use(xh),e.use(er),e.component("captcha",G5),e.component("chart",J2),e.component("dataset-resources",W5),e.component("dataset-resource-from-hash",$5),e.component("dataservice-card",Hr),e.component("dataservice-links",mS),e.component("delete-button",B4),e.component("delete-user-button",s5),e.component("discussion-threads",pw),e.component("discussion-create",ad),e.component("featured-button",l5),e.component("follow-button",h5),e.component("menu-search",Tw),e.component("organization-publishing-form",Bk),e.component("owner-type",kh),e.component("owner-type-icon",mc),e.component("publishing-form",g6),e.component("read-more",ou),e.component("reuse-publishing-form",J7),e.component("report-button",KS),e.component("request-membership",m5),e.component("reuse-card",oa),e.component("search",T4),e.component("dataservices-search",S9),e.component("toggletip",Wr),e.component("user-dataset-list",Q5),e.component("user-reuse-list",a8),e.component("dataservice-publishing-form",nS),e.config.compilerOptions.delimiters=["",""],e.mount(t)},E9=document.querySelectorAll(".vuejs");E9.forEach(t=>{const e=t.innerHTML;try{T9(t)}catch(s){throw t.innerHTML=e,console.log("VueJS template compilation failed for element ".concat(t.className,".\n      Aborted the process and rolled back the HTML.\n      See error(s) above and below (probably won't help you tho) :")),console.log(t),console.error(s),s}});globalThis.dsfr.start();console.log("JS is injected !");SS();export{D9 as __vite_legacy_guard};
