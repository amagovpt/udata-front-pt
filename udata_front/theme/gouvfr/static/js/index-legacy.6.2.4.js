!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["vue","./sentry-legacy.6.2.4.js","vue-content-loader","./_commonjsHelpers-legacy.6.2.4.js"],(function(t,n){"use strict";var r,i,o,s,a,l,c,d,u,h,p,f,m,g,v,y,b,w,x,k,C,_,S,M,T,O,D,E,A,N,P,L,R,I,$,z,B,F,V,j,H,W,q,U,Y,K,J,G,X,Z,Q,ee,te,ne,re,ie,oe,se,ae,le,ce,de,ue,he,pe,fe,me,ge,ve,ye,be,we,xe,ke,Ce,_e,Se,Me,Te,Oe,De,Ee,Ae,Ne,Pe,Le,Re,Ie,$e,ze,Be,Fe,Ve,je,He,We,qe,Ue,Ye,Ke,Je,Ge,Xe,Ze,Qe,et,tt,nt,rt,it,ot,st,at,lt,ct,dt,ut,ht,pt,ft,mt,gt,vt,yt,bt,wt,xt,kt,Ct,_t,St,Mt,Tt,Ot,Dt,Et,At,Nt,Pt,Lt,Rt,It,$t,zt,Bt,Ft;return{setters:[e=>{r=e.defineComponent,i=e.inject,o=e.useAttrs,s=e.computed,a=e.openBlock,l=e.createElementBlock,c=e.mergeProps,d=e.renderSlot,u=e.createBlock,h=e.unref,p=e.normalizeProps,f=e.withCtx,m=e.withAsyncContext,g=e.createCommentVNode,v=e.normalizeClass,y=e.ref,b=e.createVNode,w=e.createElementVNode,x=e.toDisplayString,k=e.toValue,C=e.watch,_=e.onMounted,S=e.nextTick,M=e.getCurrentInstance,T=e.getCurrentScope,O=e.onScopeDispose,D=e.customRef,E=e.onUpdated,A=e.isRef,N=e.shallowRef,P=e.watchEffect,L=e.Fragment,R=e.createTextVNode,I=e.cloneVNode,$=e.h,z=e.provide,B=e.onUnmounted,F=e.Teleport,V=e.reactive,j=e.Suspense,H=e.normalizeStyle,W=e.resolveDynamicComponent,q=e.renderList,U=e.withModifiers,Y=e.defineAsyncComponent,K=e.readonly,J=e.resolveComponent,G=e.withDirectives,X=e.vModelText,Z=e.onBeforeMount,Q=e.onBeforeUnmount,ee=e.Transition,te=e.vShow,ne=e.render,re=e.TransitionGroup,ie=e.vModelSelect,oe=e.withKeys,se=e.isReactive,ae=e.isReadonly,le=e.pushScopeId,ce=e.popScopeId,de=e.markRaw,ue=e.toRaw,he=e.useId,pe=e.useTemplateRef,fe=e.createApp},e=>{me=e.a,ge=e.g,ve=e.c,ye=e.r,be=e.R,we=e.y,xe=e.b,ke=e.d,Ce=e._,_e=e.e,Se=e.s,Me=e.p,Te=e.f,Oe=e.h,De=e.i,Ee=e.j,Ae=e.k,Ne=e.n,Pe=e.t,Le=e.l,Re=e.u,Ie=e.m,$e=e.Z,ze=e.o,Be=e.q,Fe=e.v,Ve=e.w,je=e.x,He=e.z,We=e.A,qe=e.B,Ue=e.C,Ye=e.D,Ke=e.E,Je=e.F,Ge=e.G,Xe=e.H,Ze=e.I,Qe=e.J,et=e.K,tt=e.L,nt=e.M,rt=e.N,it=e.O,ot=e.P,st=e.Q,at=e.S,lt=e.T,ct=e.U,dt=e.V,ut=e.W,ht=e.X,pt=e.Y,ft=e.$,mt=e.a0,gt=e.a1,vt=e.a2,yt=e.a3,bt=e.a4,wt=e.a5,xt=e.a6,kt=e.a7,Ct=e.a8,_t=e.a9,St=e.aa,Mt=e.ab,Tt=e.ac,Ot=e.ad,Dt=e.ae,Et=e.af,At=e.ag,Nt=e.ah,Pt=e.ai,Lt=e.aj,Rt=e.ak,It=e.al,$t=e.am},e=>{zt=e.ContentLoader},e=>{Bt=e.c,Ft=e.g}],execute:function(){var Vt,jt;t({_:tw,a:nw,b:pw});let Ht=null;async function Wt(){if(Ht)return Ht;const e=me.get(ge("reuses/types/")),t=await e;return Ht=t.data,Ht}let qt=null;async function Ut(){return qt||(qt=me.get("datasets/schemas/").then((e=>e.data)),qt)}const Yt=["href"],Kt=r({__name:"AppLink",props:{to:{},custom:{type:Boolean},activeClass:{},exactActiveClass:{},ariaCurrentValue:{default:"page"},replace:{type:Boolean}},setup(e){const t=i(ye,null),n=o(),r=s((()=>({...n,target:t?"_blank":n.target})));return(e,n)=>function(e){return!t||"string"==typeof e&&e.startsWith("http")}(e.to)?(a(),l("a",c({key:0},r.value,{href:e.to}),[d(e.$slots,"default")],16,Yt)):(a(),u(h(be),p(c({key:1},e.$props)),{default:f((()=>[d(e.$slots,"default")])),_:3},16))}}),Jt=r({__name:"AsyncTextClamp",props:{maxLines:{},text:{}},async setup(e){let t,n;const r=e,i=([t,n]=m((()=>r.text)),t=await t,n(),t);return(e,t)=>h(i)?(a(),u(h(we),{key:0,text:h(i),"max-lines":e.maxLines},null,8,["text","max-lines"])):g("",!0)}});const Gt=["src","width","height"],Xt=r({__name:"Avatar",props:{rounded:{type:Boolean,default:!1},size:{default:40},user:{}},setup(e){const t=e,n=s((()=>function(e,t){return e.avatar_thumbnail||(n=e.id,r=t,`${ve.api_root}avatars/${n}/${r}`);var n,r}(t.user,t.size)));return(e,t)=>(a(),l("img",{class:v({"rounded-circle border border-default-grey":e.rounded}),src:n.value,width:e.size,height:e.size,loading:"lazy",alt:""},null,10,Gt))}}),Zt={name:"ri-bank-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M2 20h20v2H2v-2zm2-8h2v7H4v-7zm5 0h2v7H9v-7zm4 0h2v7h-2v-7zm5 0h2v7h-2v-7zM2 7l10-5 10 5v4H2V7zm2 1.236V9h16v-.764l-8-4-8 4zM12 8a1 1 0 110-2 1 1 0 010 2z"/>'},Qt={name:"ri-building-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M3 19V5.7a1 1 0 01.658-.94l9.671-3.516a.5.5 0 01.671.47v4.953l6.316 2.105a1 1 0 01.684.949V19h2v2H1v-2h2zm2 0h7V3.855L5 6.401V19zm14 0v-8.558l-5-1.667V19h5z"/>'},en={name:"ri-check-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414z"/>'},tn={name:"ri-clipboard-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M7 4V2h10v2h3.007c.548 0 .993.445.993.993v16.014a.994.994 0 01-.993.993H3.993A.994.994 0 013 21.007V4.993C3 4.445 3.445 4 3.993 4H7zm0 2H5v14h14V6h-2v2H7V6zm2-2v2h6V4H9z"/>'},nn={name:"ri-community-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M21 21H3a1 1 0 01-1-1v-7.513a1 1 0 01.343-.754L6 8.544V4a1 1 0 011-1h14a1 1 0 011 1v16a1 1 0 01-1 1zM9 19h3v-6.058L8 9.454l-4 3.488V19h3v-4h2v4zm5 0h6V5H8v2.127c.234 0 .469.082.657.247l5 4.359a1 1 0 01.343.754V19zm2-8h2v2h-2v-2zm0 4h2v2h-2v-2zm0-8h2v2h-2V7zm-4 0h2v2h-2V7z"/>'},rn={name:"ri-download-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M3 19h18v2H3v-2zm10-5.828L19.071 7.1l1.414 1.414L12 17 3.515 8.515 4.929 7.1 11 13.17V2h2v11.172z"/>'},on={name:"ri-file-copy-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M7 6V3a1 1 0 011-1h12a1 1 0 011 1v14a1 1 0 01-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1.001 1.001 0 013 21l.003-14c0-.552.45-1 1.007-1H7zM5.003 8L5 20h10V8H5.003zM9 6h8v10h2V4H9v2z"/>'},sn={name:"ri-file-warning-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M15 4H5v16h14V8h-4V4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0120.007 22H3.993A1 1 0 013 21.008V2.992zM11 15h2v2h-2v-2zm0-8h2v6h-2V7z"/>'},an={name:"ri-government-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M20 6h3v2h-1v11h1v2H1v-2h1V8H1V6h3V4a1 1 0 011-1h14a1 1 0 011 1v2zm0 2H4v11h3v-7h2v7h2v-7h2v7h2v-7h2v7h3V8zM6 5v1h12V5H6z"/>'},ln={name:"ri-user-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M4 22a8 8 0 1116 0h-2a6 6 0 10-12 0H4zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>'},cn={key:0,style:{color:"#3558a2"}},dn={key:1},un=r({__name:"CopyButton",props:{text:{},label:{},copiedLabel:{},hideLabel:{type:Boolean,default:!1}},setup(e){xe(en,tn,on);const t=e,n=y(!1),r=()=>{navigator.clipboard.writeText(t.text),n.value=!0,setTimeout((()=>n.value=!1),2e3)};return(e,t)=>(a(),l("button",{type:"button",onClick:r,class:v(["fr-text--sm fr-mb-0 whitespace-nowrap relative fr-p-1v text-mention-grey line-height-1",{"border bg-white rounded-xxs text-grey-500":e.hideLabel}])},[n.value?(a(),l("span",cn,[b(h(ke),{height:16,width:16,name:"ri-check-line"}),w("span",{class:v(["fr-ml-1v copy-label",{"fr-sr-only":e.hideLabel}])},x(e.copiedLabel),3)])):g("",!0),n.value?g("",!0):(a(),l("span",dn,[b(h(ke),{height:16,width:16,name:e.hideLabel?"ri-clipboard-line":"ri-file-copy-line",class:"copy-icon"},null,8,["name"]),w("span",{class:v(["fr-ml-1v copy-link copy-label",{"fr-sr-only":e.hideLabel}])},x(e.label),3)]))],2))}}),hn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},pn=hn(un,[["__scopeId","data-v-4d7d7e27"]]);var fn,mn=function(e){var t=e.onRead,n=e.onRender,r=e.uncachedValues,i=void 0===r?new Set:r,o=e.useCache,s=void 0===o||o;return function(e){void 0===e&&(e={});var r=Ce(e,[]),o={},a=[],l=!1;function c(e,t){e.startsWith("--")&&(r.hasCSSVariable=!0);var n=o[e];o[e]=t,o[e]!==n&&(-1===a.indexOf(e)&&a.push(e),l||(l=!0,Se.render(d.render)))}var d={get:function(e,n){return void 0===n&&(n=!1),!n&&s&&!i.has(e)&&void 0!==o[e]?o[e]:t(e,r)},set:function(e,t){if("string"==typeof e)c(e,t);else for(var n in e)c(n,e[n]);return this},render:function(e){return void 0===e&&(e=!1),(l||!0===e)&&(n(o,r,a),l=!1,a.length=0),this}};return d}},gn=/([a-z])([A-Z])/g,vn=function(e){return e.replace(gn,"$1-$2").toLowerCase()},yn=new Map,bn=new Map,wn=["Webkit","Moz","O","ms",""],xn=wn.length,kn="undefined"!=typeof document,Cn=function(e,t){return bn.set(e,vn(t))},_n=function(e,t){void 0===t&&(t=!1);var n=t?bn:yn;return n.has(e)||(kn?function(e){fn=fn||document.createElement("div");for(var t=0;t<xn;t++){var n=wn[t],r=""===n,i=r?e:n+e.charAt(0).toUpperCase()+e.slice(1);if(i in fn.style||r){if(r&&"clipPath"===e&&bn.has(e))return;yn.set(e,i),Cn(e,(r?"":"-")+vn(i))}}}(e):function(e){Cn(e,e)}(e)),n.get(e)||e},Sn=["","X","Y","Z"],Mn=["translate","scale","rotate","skew","transformPerspective"].reduce((function(e,t){return Sn.reduce((function(e,n){return e.push(t+n),e}),e)}),["x","y","z"]),Tn=Mn.reduce((function(e,t){return e[t]=!0,e}),{});function On(e){return!0===Tn[e]}function Dn(e,t){return Mn.indexOf(e)-Mn.indexOf(t)}var En=new Set(["originX","originY","originZ"]);function An(e){return En.has(e)}var Nn=_e(_e({},Ne),{transform:Math.round}),Pn={color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,size:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,rotate:Oe,rotateX:Oe,rotateY:Oe,rotateZ:Oe,scale:De,scaleX:De,scaleY:De,scaleZ:De,skew:Oe,skewX:Oe,skewY:Oe,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,opacity:Ee,originX:Ae,originY:Ae,originZ:Me,zIndex:Nn,fillOpacity:Ee,strokeOpacity:Ee,numOctaves:Nn},Ln=function(e){return Pn[e]},Rn=function(e,t){return t&&"number"==typeof e?t.transform(e):e},In="scrollLeft",$n="scrollTop",zn=new Set([In,$n]),Bn=new Set([In,$n,"transform"]),Fn={x:"translateX",y:"translateY",z:"translateZ"};function Vn(e){return"function"==typeof e}function jn(e,t,n,r,i,o,s,a){void 0===t&&(t=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={}),void 0===o&&(o=[]),void 0===s&&(s=!1),void 0===a&&(a=!0);var l=!0,c=!1,d=!1;for(var u in e){var h=e[u],p=Ln(u),f=Rn(h,p);On(u)?(c=!0,r[u]=f,o.push(u),l&&(p.default&&h!==p.default||!p.default&&0!==h)&&(l=!1)):An(u)?(i[u]=f,d=!0):Bn.has(u)&&Vn(f)||(n[_n(u,s)]=f)}return(c||"function"==typeof e.transform)&&(n.transform=function(e,t,n,r,i,o){void 0===o&&(o=!0);var s="",a=!1;n.sort(Dn);for(var l=n.length,c=0;c<l;c++){var d=n[c];s+=(Fn[d]||d)+"("+t[d]+") ",a="z"===d||a}return!a&&i?s+="translateZ(0)":s=s.trim(),Vn(e.transform)?s=e.transform(t,r?"":s):o&&r&&(s="none"),s}(e,r,o,l,t,a)),d&&(n.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0)),n}function Hn(e){var t=void 0===e?{}:e,n=t.enableHardwareAcceleration,r=void 0===n||n,i=t.isDashCase,o=void 0===i||i,s=t.allowTransformNone,a=void 0===s||s,l={},c={},d={},u=[];return function(e){return u.length=0,jn(e,r,l,c,d,u,o,a),l}}var Wn=mn({onRead:function(e,t){var n=t.element,r=t.preparseOutput,i=Ln(e);if(On(e))return i&&i.default||0;if(zn.has(e))return n[e];var o=window.getComputedStyle(n,null).getPropertyValue(_n(e,!0))||0;return r&&i&&i.test(o)&&i.parse?i.parse(o):o},onRender:function(e,t,n){var r=t.element,i=t.buildStyles,o=t.hasCSSVariable;if(Object.assign(r.style,i(e)),o)for(var s=n.length,a=0;a<s;a++){var l=n[a];l.startsWith("--")&&r.style.setProperty(l,e[l])}-1!==n.indexOf(In)&&(r[In]=e[In]),-1!==n.indexOf($n)&&(r[$n]=e[$n])},uncachedValues:zn});var qn=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Un=.5,Yn=function(){return{style:{}}},Kn=function(e,t){return Me.transform(e*t)},Jn={x:0,y:0,width:0,height:0};function Gn(e,t,n){return"string"==typeof e?e:Me.transform(t+n*e)}var Xn={enableHardwareAcceleration:!1,isDashCase:!1};function Zn(e,t,n,r,i,o){void 0===t&&(t=Jn),void 0===r&&(r=Hn(Xn)),void 0===i&&(i=Yn()),void 0===o&&(o=!0);var s=e.attrX,a=e.attrY,l=e.originX,c=e.originY,d=e.pathLength,u=e.pathSpacing,h=void 0===u?1:u,p=e.pathOffset,f=void 0===p?0:p,m=r(Ce(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var g in m){if("transform"===g)i.style.transform=m[g];else i[o&&!qn.has(g)?vn(g):g]=m[g]}return(void 0!==l||void 0!==c||m.transform)&&(i.style.transformOrigin=function(e,t,n){return Gn(t,e.x,e.width)+" "+Gn(n,e.y,e.height)}(t,void 0!==l?l:Un,void 0!==c?c:Un)),void 0!==s&&(i.x=s),void 0!==a&&(i.y=a),void 0!==n&&void 0!==d&&(i[o?"stroke-dashoffset":"strokeDashoffset"]=Kn(-f,n),i[o?"stroke-dasharray":"strokeDasharray"]=Kn(d,n)+" "+Kn(h,n)),i}function Qn(e,t,n){void 0===n&&(n=!0);var r=Yn(),i=Hn(Xn);return function(o){return Zn(o,e,t,i,r,n)}}var er=mn({onRead:function(e,t){var n=t.element;if(On(e=qn.has(e)?e:vn(e))){var r=Ln(e);return r&&r.default||0}return n.getAttribute(e)},onRender:function(e,t){var n=t.element,r=(0,t.buildAttrs)(e);for(var i in r)"style"===i?Object.assign(n.style,r.style):n.setAttribute(i,r[i])}}),tr=mn({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,n=void 0===t?0:t,r=e.scrollLeft,i=void 0===r?0:r;return window.scrollTo(i,n)}}),nr=new WeakMap,rr=function(e,t){var n,r,i,o;return e===window?n=tr(e):!function(e){return e instanceof HTMLElement||"function"==typeof e.click}(e)?function(e){return e instanceof SVGElement||"ownerSVGElement"in e}(e)&&(i=function(e){try{return function(e){return"function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}(e)}catch(OI){return{x:0,y:0,width:0,height:0}}}(r=e),o=function(e){return"path"===e.tagName}(r)&&r.getTotalLength?r.getTotalLength():void 0,n=er({element:r,buildAttrs:Qn(i,o)})):n=function(e,t){void 0===t&&(t={});var n=t.enableHardwareAcceleration,r=t.allowTransformNone,i=Ce(t,["enableHardwareAcceleration","allowTransformNone"]);return Wn(_e({element:e,buildStyles:Hn({enableHardwareAcceleration:n,allowTransformNone:r}),preparseOutput:!0},i))}(e,t),nr.set(e,n),n},ir=function(e,t){return nr.has(e)?nr.get(e):rr(e,t)};function or(e,t){var n="string"==typeof e?document.querySelector(e):e;return ir(n,t)}function sr(e,t,n=0){if(e){const r=or(e);t?(r.set({display:"block"}),r.render(!0),Pe({from:{height:0,padding:0},to:{height:e.scrollHeight+2*n,padding:n},duration:300,ease:Le}).start({update:r.set,complete:()=>r.set({height:"auto"})})):Pe({from:{height:e.scrollHeight,padding:n},to:{height:0,padding:0},duration:300,ease:Le}).start({update:r.set,complete:()=>r.set({height:0,display:"none"})})}}const ar="public-service",lr="association",cr="company",dr="local-authority",ur="other",hr="user";function pr(e,t){return fr(e,t)}function fr(e,t){return k(e).badges.some((e=>e.kind===t))}function mr(){const{t:e}=Re();return[{type:ar,label:e("Public service"),icon:"ri-bank-line"},{type:dr,label:e("Local authority"),icon:"ri-government-line"},{type:lr,label:e("Association"),icon:"ri-community-line"},{type:cr,label:e("Company"),icon:"ri-building-2-line"},{type:ur,label:e("Other"),icon:""},{type:hr,label:e("User"),icon:"ri-user-line"}]}function gr(e){return mr().find((t=>t.type===e))}const vr=hn(r({__name:"OwnerTypeIcon",props:{type:{}},setup(e){xe(Zt,Qt,nn,an,ln);const t=e,n=s((()=>gr(t.type).icon));return(e,t)=>n.value?(a(),u(h(ke),{key:0,height:14,width:14,name:n.value},null,8,["name"])):g("",!0)}}),[["__scopeId","data-v-7acefa45"]]);const yr=["title"],br=r({__name:"OrganizationNameWithCertificate",props:{organization:{},showType:{type:Boolean,default:!0}},setup(e){const{t:t}=Re(),n=e,{type:r}=function(e){const t=s((()=>pr(e,ar))),n=s((()=>pr(e,lr))),r=s((()=>pr(e,dr))),i=s((()=>pr(e,cr)));return{type:s((()=>r.value?dr:t.value?ar:n.value?lr:i.value?cr:ur))}}(n.organization),{organizationCertified:i}=(o=n.organization,{organizationCertified:s((()=>{const e=k(o);return!!e&&fr(e,"certified")&&(pr(e,ar)||pr(e,dr))}))});var o;return(e,n)=>(a(),l("span",{class:v(["inline-flex",h(r)!==h(ur)||h(i)?"fr-grid-row--middle":"align-items-baseline"])},[w("span",null,[e.showType?(a(),u(vr,{key:0,type:h(r)},null,8,["type"])):g("",!0)]),b(h(we),{class:"fr-mx-1v","auto-resize":!0,text:e.organization.name,"max-lines":1},null,8,["text"]),h(i)?(a(),l("span",{key:0,class:"fr-icon-success-line fr-icon--sm",title:h(t)("The identity of this public service is certified by {certifier}",{certifier:h(ve).title}),"aria-hidden":"true"},null,8,yr)):g("",!0)],2))}});function wr(e){return"function"==typeof e?e():h(e)}const xr="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const kr=()=>{};function Cr(e,t){return function(...n){return new Promise(((r,i)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(r).catch(i)}))}}const _r=e=>e();function Sr(e,t=200,n={}){return Cr(function(e,t={}){let n,r,i=kr;const o=e=>{clearTimeout(e),i(),i=kr};return s=>{const a=wr(e),l=wr(t.maxWait);return n&&o(n),a<=0||void 0!==l&&l<=0?(r&&(o(r),r=null),Promise.resolve(s())):new Promise(((e,c)=>{i=t.rejectOnCancel?c:e,l&&!r&&(r=setTimeout((()=>{n&&o(n),r=null,e(s())}),l)),n=setTimeout((()=>{r&&o(r),r=null,e(s())}),a)}))}}(t,n),e)}function Mr(e,t=!0,n){const r=function(e){return e||M()}();r?_(e,n):t?e():S(e)}function Tr(e,t,n){let r;r=A(n)?{evaluating:n}:n||{};const{lazy:i=!1,evaluating:o,shallow:a=!0,onError:l=kr}=r,c=y(!i),d=a?N(t):y(t);let u=0;return P((async t=>{if(!c.value)return;u++;const n=u;let r=!1;o&&Promise.resolve().then((()=>{o.value=!0}));try{const i=await e((e=>{t((()=>{o&&(o.value=!1),r||e()}))}));n===u&&(d.value=i)}catch(OI){l(OI)}finally{o&&n===u&&(o.value=!1),r=!0}})),i?s((()=>(c.value=!0,d.value))):d}function Or(e){var t;const n=wr(e);return null!=(t=null==n?void 0:n.$el)?t:n}const Dr=xr?window:void 0;function Er(e,t=null){const n=M();let r=()=>{};const i=D(((i,o)=>(r=o,{get(){var r,o;return i(),null!=(o=null==(r=null==n?void 0:n.proxy)?void 0:r.$refs[e])?o:t},set(){}})));return Mr(r),E(r),i}function Ar(e){const t=function(){const e=y(!1),t=M();return t&&_((()=>{e.value=!0}),t),e}();return s((()=>(t.value,Boolean(e()))))}function Nr(e,t,n={}){const{window:r=Dr,...i}=n;let o;const a=Ar((()=>r&&"ResizeObserver"in r)),l=()=>{o&&(o.disconnect(),o=void 0)},c=s((()=>Array.isArray(e)?e.map((e=>Or(e))):[Or(e)])),d=C(c,(e=>{if(l(),a.value&&r){o=new ResizeObserver(t);for(const t of e)t&&o.observe(t,i)}}),{immediate:!0,flush:"post"}),u=()=>{l(),d()};var h;return h=u,T()&&O(h),{isSupported:a,stop:u}}const Pr=["src","alt","width","height"],Lr=r({__name:"Placeholder",props:{type:{},src:{},alt:{},size:{}},setup(e){const t=e,r=async()=>{const e=await((e,t)=>{const n=e[t];return n?"function"==typeof n?n():Promise.resolve(n):new Promise(((e,n)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))}))})(Object.assign({"../../assets/img/placeholders/author.png":()=>Ie((()=>n.import("./author-legacy.6.2.4.js")),void 0),"../../assets/img/placeholders/dataset.png":()=>Ie((()=>n.import("./dataset-legacy.6.2.4.js")),void 0),"../../assets/img/placeholders/news.png":()=>Ie((()=>n.import("./news-legacy.6.2.4.js")),void 0),"../../assets/img/placeholders/organization.png":()=>Ie((()=>n.import("./organization-legacy.6.2.4.js")),void 0),"../../assets/img/placeholders/reuse.png":()=>Ie((()=>n.import("./reuse-legacy.6.2.4.js")),void 0)}),`../../assets/img/placeholders/${t.type}.png`);return t.src?t.src:e.default},i=s((()=>t.src?t.alt:"")),o=Tr((()=>r()));return(e,t)=>(a(),l("img",c({loading:"lazy",src:h(o),alt:i.value,width:e.size,height:e.size},e.$attrs),null,16,Pr))}}),Rr=["value"],Ir=r({__name:"QualityScore",props:{score:{},class:{default:""}},setup(e){const t=e,n=2/3,{t:r,locale:i}=Re(),o=s((()=>new Intl.NumberFormat(i.value,{style:"percent"}).format(t.score)));return(e,i)=>(a(),l("meter",{class:v(["quality-score",t.class]),min:"0",low:"0",high:n,max:1,optimum:1,value:e.score},[e.score>=n?(a(),l(L,{key:0},[R(x(h(r)("Good")),1)],64)):(a(),l(L,{key:1},[R(x(h(r)("To improve")),1)],64)),R("("+x(o.value)+") ",1)],10,Rr))}}),$r={key:0,class:"fr-my-0"},zr={key:1,class:"fr-my-0 text-mention-grey"},Br=r({__name:"QualityItem",props:{passed:{type:Boolean},messagePassed:{},messageFailed:{}},setup:e=>(e,t)=>(a(),l("li",null,[e.passed?(a(),l("p",$r,[t[0]||(t[0]=w("span",{class:"fr-icon-check-line","aria-hidden":"true"},null,-1)),R(" "+x(e.messagePassed),1)])):(a(),l("p",zr,[t[1]||(t[1]=w("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),R(" "+x(e.messageFailed),1)]))]))});let Fr=Symbol("headlessui.useid"),Vr=0;function jr(){return i(Fr,(()=>""+ ++Vr))()}function Hr(e){var t;if(null==e||null==e.value)return null;let n=null!=(t=e.value.$el)?t:e.value;return n instanceof Node?n:null}function Wr(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Wr),r}var qr=Object.defineProperty,Ur=(e,t,n)=>(((e,t,n)=>{t in e?qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Yr=new class{constructor(){Ur(this,"current",this.detect()),Ur(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}};function Kr(e){if(Yr.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=Hr(e);if(t)return t.ownerDocument}return document}let Jr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Gr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Gr||{}),Xr=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Xr||{}),Zr=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Zr||{});function Qr(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Jr)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var ei=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ei||{});function ti(e,t=0){var n;return e!==(null==(n=Kr(e))?void 0:n.body)&&Wr(t,{0:()=>e.matches(Jr),1(){let t=e;for(;null!==t;){if(t.matches(Jr))return!0;t=t.parentElement}return!1}})}var ni=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ni||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let ri=["textarea","input"].join(",");function ii(e,t=(e=>e)){return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function oi(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){var o;let s=null!=(o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?o:document,a=Array.isArray(e)?n?ii(e):e:Qr(e);i.length>0&&a.length>1&&(a=a.filter((e=>!i.includes(e)))),r=null!=r?r:s.activeElement;let l,c=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,a.indexOf(r))-1;if(4&t)return Math.max(0,a.indexOf(r))+1;if(8&t)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},h=0,p=a.length;do{if(h>=p||h+p<=0)return 0;let e=d+h;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}l=a[e],null==l||l.focus(u),h+=c}while(l!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,ri))&&n}(l)&&l.select(),2}function si(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0||/Android/gi.test(window.navigator.userAgent)}function ai(e,t,n){Yr.isServer||P((r=>{document.addEventListener(e,t,n),r((()=>document.removeEventListener(e,t,n)))}))}function li(e,t,n){Yr.isServer||P((r=>{window.addEventListener(e,t,n),r((()=>window.removeEventListener(e,t,n)))}))}function ci(e,t){if(e)return e;let n=null!=t?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function di(e,t){let n=y(ci(e.value.type,e.value.as));return _((()=>{n.value=ci(e.value.type,e.value.as)})),P((()=>{var e;n.value||Hr(t)&&Hr(t)instanceof HTMLButtonElement&&(null==(e=Hr(t))||!e.hasAttribute("type"))&&(n.value="button")})),n}var ui=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ui||{}),hi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hi||{});function pi({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...i}){var o;let s=gi(r,n),a=Object.assign(i,{props:s});if(e||2&t&&s.static)return fi(a);if(1&t){return Wr(null==(o=s.unmount)||o?0:1,{0:()=>null,1:()=>fi({...i,props:{...s,hidden:!0,style:{display:"none"}}})})}return fi(a)}function fi({props:e,attrs:t,slots:n,slot:r,name:i}){var o,s;let{as:a,...l}=vi(e,["unmount","static"]),c=null==(o=n.default)?void 0:o.call(n,r),d={};if(r){let e=!1,t=[];for(let[n,i]of Object.entries(r))"boolean"==typeof i&&(e=!0),!0===i&&t.push(n);e&&(d["data-headlessui-state"]=t.join(" "))}if("template"===a){if(c=mi(null!=c?c:[]),Object.keys(l).length>0||Object.keys(t).length>0){let[e,...n]=null!=c?c:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||n.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(t)).map((e=>e.trim())).filter(((e,t,n)=>n.indexOf(e)===t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let r=gi(null!=(s=e.props)?s:{},l,d),o=I(e,r,!0);for(let t in r)t.startsWith("on")&&(o.props||(o.props={}),o.props[t]=r[t]);return o}return Array.isArray(c)&&1===c.length?c[0]:c}return $(a,Object.assign({},l,d),{default:()=>c})}function mi(e){return e.flatMap((e=>e.type===L?mi(e.children):[e]))}function gi(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map((e=>[e,void 0]))));for(let r in n)Object.assign(t,{[r](e,...t){let i=n[r];for(let n of i){if(e instanceof Event&&e.defaultPrevented)return;n(e,...t)}}});return t}function vi(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}var yi=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(yi||{});let bi=r({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{var r;let{features:i,...o}=e;return pi({ourProps:{"aria-hidden":2==(2&i)||(null!=(r=o["aria-hidden"])?r:void 0),hidden:4==(4&i)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&i)&&2!=(2&i)&&{display:"none"}}},theirProps:o,slot:{},attrs:n,slots:t,name:"Hidden"})}}),wi=Symbol("Context");var xi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(xi||{});function ki(){return i(wi,null)}var Ci=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ci||{});var _i=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(_i||{});function Si(){let e=y(0);return li("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}let Mi=Symbol("ForcePortalRootContext");r({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:n})=>(z(Mi,e.force),()=>{let{force:r,...i}=e;return pi({theirProps:i,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})})});const Ti=new WeakMap;function Oi(e,t){let n=t(function(e){var t;return null!=(t=Ti.get(e))?t:0}(e));return n<=0?Ti.delete(e):Ti.set(e,n),n}r({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=y(null),o=s((()=>Kr(r))),a=i(Mi,!1),l=i(Ei,null),c=y(!0===a||null==l?function(e){let t=Kr(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}(r.value):l.resolveTarget());c.value&&Oi(c.value,(e=>e+1));let d=y(!1);_((()=>{d.value=!0})),P((()=>{a||null!=l&&(c.value=l.resolveTarget())}));let u=i(Di,null),h=!1,p=M();return C(r,(()=>{if(h||!u)return;let e=Hr(r);e&&(B(u.register(e),p),h=!0)})),B((()=>{var e,t;let n=null==(e=o.value)?void 0:e.getElementById("headlessui-portal-root");!n||c.value!==n||Oi(c.value,(e=>e-1))||c.value.children.length>0||null==(t=c.value.parentElement)||t.removeChild(c.value)})),()=>{if(!d.value||null===c.value)return null;let i={ref:r,"data-headlessui-portal":""};return $(F,{to:c.value},pi({ourProps:i,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}});let Di=Symbol("PortalParentContext");let Ei=Symbol("PortalGroupContext");r({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=V({resolveTarget:()=>e.target});return z(Ei,r),()=>{let{target:r,...i}=e;return pi({theirProps:i,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}});var Ai=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ai||{});let Ni=Symbol("PopoverContext");function Pi(e){let t=i(Ni,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <${$i.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Pi),t}return t}let Li=Symbol("PopoverGroupContext");function Ri(){return i(Li,null)}let Ii=Symbol("PopoverPanelContext");let $i=r({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n,expose:o}){var a;let l=y(null);o({el:l,$el:l});let c=y(1),d=y(null),u=y(null),h=y(null),p=y(null),f=s((()=>Kr(l))),m=s((()=>{var e,t;if(!Hr(d)||!Hr(p))return!1;for(let l of document.querySelectorAll("body > *"))if(Number(null==l?void 0:l.contains(Hr(d)))^Number(null==l?void 0:l.contains(Hr(p))))return!0;let n=Qr(),r=n.indexOf(Hr(d)),i=(r+n.length-1)%n.length,o=(r+1)%n.length,s=n[i],a=n[o];return!(null!=(e=Hr(p))&&e.contains(s)||null!=(t=Hr(p))&&t.contains(a))})),g={popoverState:c,buttonId:y(null),panelId:y(null),panel:p,button:d,isPortalled:m,beforePanelSentinel:u,afterPanelSentinel:h,togglePopover(){c.value=Wr(c.value,{0:1,1:0})},closePopover(){1!==c.value&&(c.value=1)},close(e){g.closePopover();let t=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?Hr(e):Hr(g.button):Hr(g.button);null==t||t.focus()}};z(Ni,g),function(e){z(wi,e)}(s((()=>Wr(c.value,{0:xi.Open,1:xi.Closed}))));let v={buttonId:g.buttonId,panelId:g.panelId,close(){g.closePopover()}},b=Ri(),w=null==b?void 0:b.registerPopover,[x,k]=function(){let e=i(Di,null),t=y([]);function n(n){let r=t.value.indexOf(n);-1!==r&&t.value.splice(r,1),e&&e.unregister(n)}let o={register:function(r){return t.value.push(r),e&&e.register(r),()=>n(r)},unregister:n,portals:t};return[t,r({name:"PortalWrapper",setup:(e,{slots:t})=>(z(Di,o),()=>{var e;return null==(e=t.default)?void 0:e.call(t)})})]}(),C=function({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let r=y(null),i=Kr(r);function o(){var n,o,s;let a=[];for(let t of e)null!==t&&(t instanceof HTMLElement?a.push(t):"value"in t&&t.value instanceof HTMLElement&&a.push(t.value));if(null!=t&&t.value)for(let e of t.value)a.push(e);for(let e of null!=(n=null==i?void 0:i.querySelectorAll("html > *, body > *"))?n:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(Hr(r))||e.contains(null==(s=null==(o=Hr(r))?void 0:o.getRootNode())?void 0:s.host)||a.some((t=>e.contains(t)))||a.push(e));return a}return{resolveContainers:o,contains:e=>o().some((t=>t.contains(e))),mainTreeNodeRef:r,MainTreeNode:()=>null!=n?null:$(bi,{features:yi.Hidden,ref:r})}}({mainTreeNodeRef:null==b?void 0:b.mainTreeNodeRef,portals:x,defaultContainers:[d,p]});return P((()=>null==w?void 0:w(v))),function(e,t,n,r){Yr.isServer||P((i=>{(e=null!=e?e:window).addEventListener(t,n,r),i((()=>e.removeEventListener(t,n,r)))}))}(null==(a=f.value)?void 0:a.defaultView,"focus",(e=>{var t,n;e.target!==window&&e.target instanceof HTMLElement&&0===c.value&&(function(){var e,t,n,r;return null!=(r=null==b?void 0:b.isFocusWithinPopoverGroup())?r:(null==(e=f.value)?void 0:e.activeElement)&&((null==(t=Hr(d))?void 0:t.contains(f.value.activeElement))||(null==(n=Hr(p))?void 0:n.contains(f.value.activeElement)))}()||d&&p&&(C.contains(e.target)||null!=(t=Hr(g.beforePanelSentinel))&&t.contains(e.target)||null!=(n=Hr(g.afterPanelSentinel))&&n.contains(e.target)||g.closePopover()))}),!0),function(e,t,n=s((()=>!0))){function r(r,i){if(!n.value||r.defaultPrevented)return;let o=i(r);if(null===o||!o.getRootNode().contains(o))return;let s=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of s){if(null===e)continue;let t=e instanceof HTMLElement?e:Hr(e);if(null!=t&&t.contains(o)||r.composed&&r.composedPath().includes(t))return}return!ti(o,ei.Loose)&&-1!==o.tabIndex&&r.preventDefault(),t(r,o)}let i=y(null);ai("pointerdown",(e=>{var t,r;n.value&&(i.value=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),ai("mousedown",(e=>{var t,r;n.value&&(i.value=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),ai("click",(e=>{si()||i.value&&(r(e,(()=>i.value)),i.value=null)}),!0),ai("touchend",(e=>r(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),li("blur",(e=>r(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}(C.resolveContainers,((e,t)=>{var n;g.closePopover(),ti(t,ei.Loose)||(e.preventDefault(),null==(n=Hr(d))||n.focus())}),s((()=>0===c.value))),()=>{let r={open:0===c.value,close:g.close};return $(L,[$(k,{},(()=>pi({theirProps:{...e,...n},ourProps:{ref:l},slot:r,slots:t,attrs:n,name:"Popover"}))),$(C.MainTreeNode)])}}}),zi=r({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){var o;let a=null!=(o=e.id)?o:`headlessui-popover-button-${jr()}`,l=Pi("PopoverButton"),c=s((()=>Kr(l.button)));r({el:l.button,$el:l.button}),_((()=>{l.buttonId.value=a})),B((()=>{l.buttonId.value=null}));let d=Ri(),u=null==d?void 0:d.closeOthers,h=i(Ii,null),p=s((()=>null!==h&&h.value===l.panelId.value)),f=y(null),m=`headlessui-focus-sentinel-${jr()}`;p.value||P((()=>{l.button.value=Hr(f)}));let g=di(s((()=>({as:e.as,type:t.type}))),f);function v(e){var t,n,r,i,o;if(p.value){if(1===l.popoverState.value)return;switch(e.key){case Ci.Space:case Ci.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),l.closePopover(),null==(r=Hr(l.button))||r.focus()}}else switch(e.key){case Ci.Space:case Ci.Enter:e.preventDefault(),e.stopPropagation(),1===l.popoverState.value&&(null==u||u(l.buttonId.value)),l.togglePopover();break;case Ci.Escape:if(0!==l.popoverState.value)return null==u?void 0:u(l.buttonId.value);if(!Hr(l.button)||null!=(i=c.value)&&i.activeElement&&(null==(o=Hr(l.button))||!o.contains(c.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),l.closePopover()}}function b(e){p.value||e.key===Ci.Space&&e.preventDefault()}function w(t){var n,r;e.disabled||(p.value?(l.closePopover(),null==(n=Hr(l.button))||n.focus()):(t.preventDefault(),t.stopPropagation(),1===l.popoverState.value&&(null==u||u(l.buttonId.value)),l.togglePopover(),null==(r=Hr(l.button))||r.focus()))}function x(e){e.preventDefault(),e.stopPropagation()}let k=Si();function C(){let e=Hr(l.panel);e&&Wr(k.value,{[_i.Forwards]:()=>oi(e,Gr.First),[_i.Backwards]:()=>oi(e,Gr.Last)})===Xr.Error&&oi(Qr().filter((e=>"true"!==e.dataset.headlessuiFocusGuard)),Wr(k.value,{[_i.Forwards]:Gr.Next,[_i.Backwards]:Gr.Previous}),{relativeTo:Hr(l.button)})}return()=>{let r=0===l.popoverState.value,i={open:r},{...o}=e,s=p.value?{ref:f,type:g.value,onKeydown:v,onClick:w}:{ref:f,id:a,type:g.value,"aria-expanded":0===l.popoverState.value,"aria-controls":Hr(l.panel)?l.panelId.value:void 0,disabled:!!e.disabled||void 0,onKeydown:v,onKeyup:b,onClick:w,onMousedown:x};return $(L,[pi({ourProps:s,theirProps:{...t,...o},slot:i,attrs:t,slots:n,name:"PopoverButton"}),r&&!p.value&&l.isPortalled.value&&$(bi,{id:m,features:yi.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C})])}}});r({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n}){let r=Pi("PopoverOverlay"),i=`headlessui-popover-overlay-${jr()}`,o=ki(),a=s((()=>null!==o?(o.value&xi.Open)===xi.Open:0===r.popoverState.value));function l(){r.closePopover()}return()=>{let o={open:0===r.popoverState.value};return pi({ourProps:{id:i,"aria-hidden":!0,onClick:l},theirProps:e,slot:o,attrs:t,slots:n,features:ui.RenderStrategy|ui.Static,visible:a.value,name:"PopoverOverlay"})}}});let Bi=r({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){var i;let o=null!=(i=e.id)?i:`headlessui-popover-panel-${jr()}`,{focus:a}=e,l=Pi("PopoverPanel"),c=s((()=>Kr(l.panel))),d=`headlessui-focus-sentinel-before-${jr()}`,u=`headlessui-focus-sentinel-after-${jr()}`;r({el:l.panel,$el:l.panel}),_((()=>{l.panelId.value=o})),B((()=>{l.panelId.value=null})),z(Ii,l.panelId),P((()=>{var e,t;if(!a||0!==l.popoverState.value||!l.panel)return;let n=null==(e=c.value)?void 0:e.activeElement;null!=(t=Hr(l.panel))&&t.contains(n)||oi(Hr(l.panel),Gr.First)}));let h=ki(),p=s((()=>null!==h?(h.value&xi.Open)===xi.Open:0===l.popoverState.value));function f(e){var t,n;if(e.key===Ci.Escape){if(0!==l.popoverState.value||!Hr(l.panel)||c.value&&(null==(t=Hr(l.panel))||!t.contains(c.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),l.closePopover(),null==(n=Hr(l.button))||n.focus()}}function m(e){var t,n,r,i,o;let s=e.relatedTarget;s&&Hr(l.panel)&&(null!=(t=Hr(l.panel))&&t.contains(s)||(l.closePopover(),(null!=(r=null==(n=Hr(l.beforePanelSentinel))?void 0:n.contains)&&r.call(n,s)||null!=(o=null==(i=Hr(l.afterPanelSentinel))?void 0:i.contains)&&o.call(i,s))&&s.focus({preventScroll:!0})))}let g=Si();function v(){let e=Hr(l.panel);e&&Wr(g.value,{[_i.Forwards]:()=>{var t;oi(e,Gr.First)===Xr.Error&&(null==(t=Hr(l.afterPanelSentinel))||t.focus())},[_i.Backwards]:()=>{var e;null==(e=Hr(l.button))||e.focus({preventScroll:!0})}})}function y(){let e=Hr(l.panel);e&&Wr(g.value,{[_i.Forwards]:()=>{let e=Hr(l.button),t=Hr(l.panel);if(!e)return;let n=Qr(),r=n.indexOf(e),i=n.slice(0,r+1),o=[...n.slice(r+1),...i];for(let s of o.slice())if("true"===s.dataset.headlessuiFocusGuard||null!=t&&t.contains(s)){let e=o.indexOf(s);-1!==e&&o.splice(e,1)}oi(o,Gr.First,{sorted:!1})},[_i.Backwards]:()=>{var t;oi(e,Gr.Previous)===Xr.Error&&(null==(t=Hr(l.button))||t.focus())}})}return()=>{let r={open:0===l.popoverState.value,close:l.close},{focus:i,...s}=e;return pi({ourProps:{ref:l.panel,id:o,onKeydown:f,onFocusout:a&&0===l.popoverState.value?m:void 0,tabIndex:-1},theirProps:{...t,...s},attrs:t,slot:r,slots:{...n,default:(...e)=>{var t;return[$(L,[p.value&&l.isPortalled.value&&$(bi,{id:d,ref:l.beforePanelSentinel,features:yi.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:v}),null==(t=n.default)?void 0:t.call(n,...e),p.value&&l.isPortalled.value&&$(bi,{id:u,ref:l.afterPanelSentinel,features:yi.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:y})])]}},features:ui.RenderStrategy|ui.Static,visible:p.value,name:"PopoverPanel"})}}});r({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n,expose:r}){let i=y(null),o=N([]),a=s((()=>Kr(i))),l=function(){let e=y(null);return{mainTreeNodeRef:e,MainTreeNode:()=>$(bi,{features:yi.Hidden,ref:e})}}();function c(e){let t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}return r({el:i,$el:i}),z(Li,{registerPopover:function(e){return o.value.push(e),()=>{c(e)}},unregisterPopover:c,isFocusWithinPopoverGroup:function(){var e;let t=a.value;if(!t)return!1;let n=t.activeElement;return!(null==(e=Hr(i))||!e.contains(n))||o.value.some((e=>{var r,i;return(null==(r=t.getElementById(e.buttonId.value))?void 0:r.contains(n))||(null==(i=t.getElementById(e.panelId.value))?void 0:i.contains(n))}))},closeOthers:function(e){for(let t of o.value)t.buttonId.value!==e&&t.close()},mainTreeNodeRef:l.mainTreeNodeRef}),()=>$(L,[pi({ourProps:{ref:i},theirProps:{...e,...t},slot:{},attrs:t,slots:n,name:"PopoverGroup"}),$(l.MainTreeNode)])}});let Fi=r({props:{onFocus:{type:Function,required:!0}},setup(e){let t=y(!0);return()=>t.value?$(bi,{as:"button",type:"button",features:yi.Focusable,onFocus(n){n.preventDefault();let r,i=50;r=requestAnimationFrame((function n(){var o;if(!(i--<=0))return null!=(o=e.onFocus)&&o.call(e)?(t.value=!1,void cancelAnimationFrame(r)):void(r=requestAnimationFrame(n));r&&cancelAnimationFrame(r)}))}}):null}});var Vi=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Vi||{}),ji=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ji||{});let Hi=Symbol("TabsContext");function Wi(e){let t=i(Hi,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Wi),t}return t}let qi=Symbol("TabsSSRContext"),Ui=r({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:r}){var i;let o=y(null!=(i=e.selectedIndex)?i:e.defaultIndex),a=y([]),l=y([]),c=s((()=>null!==e.selectedIndex)),d=s((()=>c.value?e.selectedIndex:o.value));function u(e){var t;let n=ii(h.tabs.value,Hr),r=ii(h.panels.value,Hr),i=n.filter((e=>{var t;return!(null!=(t=Hr(e))&&t.hasAttribute("disabled"))}));if(e<0||e>n.length-1){let t=Wr(null===o.value?0:Math.sign(e-o.value),{[-1]:()=>1,0:()=>Wr(Math.sign(e),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),s=Wr(t,{0:()=>n.indexOf(i[0]),1:()=>n.indexOf(i[i.length-1])});-1!==s&&(o.value=s),h.tabs.value=n,h.panels.value=r}else{let s=n.slice(0,e),a=[...n.slice(e),...s].find((e=>i.includes(e)));if(!a)return;let l=null!=(t=n.indexOf(a))?t:h.selectedIndex.value;-1===l&&(l=h.selectedIndex.value),o.value=l,h.tabs.value=n,h.panels.value=r}}let h={selectedIndex:s((()=>{var t,n;return null!=(n=null!=(t=o.value)?t:e.defaultIndex)?n:null})),orientation:s((()=>e.vertical?"vertical":"horizontal")),activation:s((()=>e.manual?"manual":"auto")),tabs:a,panels:l,setSelectedIndex(e){d.value!==e&&r("change",e),c.value||u(e)},registerTab(e){var t;if(a.value.includes(e))return;let n=a.value[o.value];if(a.value.push(e),a.value=ii(a.value,Hr),!c.value){let e=null!=(t=a.value.indexOf(n))?t:o.value;-1!==e&&(o.value=e)}},unregisterTab(e){let t=a.value.indexOf(e);-1!==t&&a.value.splice(t,1)},registerPanel(e){l.value.includes(e)||(l.value.push(e),l.value=ii(l.value,Hr))},unregisterPanel(e){let t=l.value.indexOf(e);-1!==t&&l.value.splice(t,1)}};z(Hi,h);let p=y({tabs:[],panels:[]}),f=y(!1);_((()=>{f.value=!0})),z(qi,s((()=>f.value?null:p.value)));let m=s((()=>e.selectedIndex));return _((()=>{C([m],(()=>{var t;return u(null!=(t=e.selectedIndex)?t:e.defaultIndex)}),{immediate:!0})})),P((()=>{if(!c.value||null==d.value||h.tabs.value.length<=0)return;let e=ii(h.tabs.value,Hr);e.some(((e,t)=>Hr(h.tabs.value[t])!==Hr(e)))&&h.setSelectedIndex(e.findIndex((e=>Hr(e)===Hr(h.tabs.value[d.value]))))})),()=>{let r={selectedIndex:o.value};return $(L,[a.value.length<=0&&$(Fi,{onFocus:()=>{for(let e of a.value){let t=Hr(e);if(0===(null==t?void 0:t.tabIndex))return t.focus(),!0}return!1}}),pi({theirProps:{...n,...vi(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:r,slots:t,attrs:n,name:"TabGroup"})])}}}),Yi=r({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let r=Wi("TabList");return()=>{let i={selectedIndex:r.selectedIndex.value};return pi({ourProps:{role:"tablist","aria-orientation":r.orientation.value},theirProps:e,slot:i,attrs:t,slots:n,name:"TabList"})}}}),Ki=r({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:r}){var o;let a=null!=(o=e.id)?o:`headlessui-tabs-tab-${jr()}`,l=Wi("Tab"),c=y(null);r({el:c,$el:c}),_((()=>l.registerTab(c))),B((()=>l.unregisterTab(c)));let d=i(qi),u=s((()=>{if(d.value){let e=d.value.tabs.indexOf(a);return-1===e?d.value.tabs.push(a)-1:e}return-1})),h=s((()=>{let e=l.tabs.value.indexOf(c);return-1===e?u.value:e})),p=s((()=>h.value===l.selectedIndex.value));function f(e){var t;let n=e();if(n===Xr.Success&&"auto"===l.activation.value){let e=null==(t=Kr(c))?void 0:t.activeElement,n=l.tabs.value.findIndex((t=>Hr(t)===e));-1!==n&&l.setSelectedIndex(n)}return n}function m(e){let t=l.tabs.value.map((e=>Hr(e))).filter(Boolean);if(e.key===Ci.Space||e.key===Ci.Enter)return e.preventDefault(),e.stopPropagation(),void l.setSelectedIndex(h.value);switch(e.key){case Ci.Home:case Ci.PageUp:return e.preventDefault(),e.stopPropagation(),f((()=>oi(t,Gr.First)));case Ci.End:case Ci.PageDown:return e.preventDefault(),e.stopPropagation(),f((()=>oi(t,Gr.Last)))}return f((()=>Wr(l.orientation.value,{vertical:()=>e.key===Ci.ArrowUp?oi(t,Gr.Previous|Gr.WrapAround):e.key===Ci.ArrowDown?oi(t,Gr.Next|Gr.WrapAround):Xr.Error,horizontal:()=>e.key===Ci.ArrowLeft?oi(t,Gr.Previous|Gr.WrapAround):e.key===Ci.ArrowRight?oi(t,Gr.Next|Gr.WrapAround):Xr.Error})))===Xr.Success?e.preventDefault():void 0}let g=y(!1);function v(){var t;g.value||(g.value=!0,!e.disabled&&(null==(t=Hr(c))||t.focus({preventScroll:!0}),l.setSelectedIndex(h.value),function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}((()=>{g.value=!1}))))}function b(e){e.preventDefault()}let w=di(s((()=>({as:e.as,type:t.type}))),c);return()=>{var r,i;let o={selected:p.value,disabled:null!=(r=e.disabled)&&r},{...s}=e;return pi({ourProps:{ref:c,onKeydown:m,onMousedown:b,onClick:v,id:a,role:"tab",type:w.value,"aria-controls":null==(i=Hr(l.panels.value[h.value]))?void 0:i.id,"aria-selected":p.value,tabIndex:p.value?0:-1,disabled:!!e.disabled||void 0},theirProps:s,slot:o,attrs:t,slots:n,name:"Tab"})}}}),Ji=r({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=Wi("TabPanels");return()=>{let i={selectedIndex:r.selectedIndex.value};return pi({theirProps:e,ourProps:{},slot:i,attrs:n,slots:t,name:"TabPanels"})}}}),Gi=r({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:t,slots:n,expose:r}){var o;let a=null!=(o=e.id)?o:`headlessui-tabs-panel-${jr()}`,l=Wi("TabPanel"),c=y(null);r({el:c,$el:c}),_((()=>l.registerPanel(c))),B((()=>l.unregisterPanel(c)));let d=i(qi),u=s((()=>{if(d.value){let e=d.value.panels.indexOf(a);return-1===e?d.value.panels.push(a)-1:e}return-1})),h=s((()=>{let e=l.panels.value.indexOf(c);return-1===e?u.value:e})),p=s((()=>h.value===l.selectedIndex.value));return()=>{var r;let i={selected:p.value},{tabIndex:o,...s}=e,d={ref:c,id:a,role:"tabpanel","aria-labelledby":null==(r=Hr(l.tabs.value[h.value]))?void 0:r.id,tabIndex:p.value?o:-1};return p.value||!e.unmount||e.static?pi({ourProps:d,theirProps:s,slot:i,attrs:t,slots:n,features:ui.Static|ui.RenderStrategy,visible:p.value,name:"TabPanel"}):$(bi,{as:"span","aria-hidden":!0,...d})}}});const Xi=r({__name:"ToggletipButton",props:{size:{default:"xs"},icon:{default:"fr-icon-information-line"}},setup(e){const t=e,n=s((()=>"md"===t.size?"":"xs"===t.size?`fr-btn--${t.size} fr-icon--sm`:`fr-btn--${t.size}`));return(e,t)=>(a(),l("button",{class:v(`fr-btn fr-btn--tertiary-no-outline text-grey-380 fr-btn--darker-hover align-middle ${n.value} ${e.icon}`)},null,2))}}),Zi=r({inheritAttrs:!1,__name:"Toggletip",props:{noMargin:{type:Boolean,default:!1},position:{default:"left"}},setup:e=>(e,t)=>(a(),u(h($i),{class:"relative text-grey-500",focus:!0},{default:f((()=>[b(h(zi),c(e.$attrs,{ref:"button",as:Xi}),{default:f((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3},16),b(h(Bi),{class:v(["toggletip",{"fr-p-0":e.noMargin,"left-0":"right"===e.position}]),ref:"toggletip"},{default:f((({close:t})=>[d(e.$slots,"toggletip",{close:t},void 0,!0)])),_:3},8,["class"])])),_:3}))}),Qi=hn(Zi,[["__scopeId","data-v-3bf812ef"]]),eo={class:"fr-m-0 fr-grid-row fr-grid-row--middle fr-text--sm text-mention-grey"},to={class:"fr-grid-row fr-grid-row--middle"},no={class:"fr-text--sm fr-my-0"},ro={class:"list-style-none fr-m-0 fr-p-0"},io={class:"fr-grid-row fr-grid-row--right not-enlarged"},oo=["href","title"],so={class:"fr-my-0 fr-mr-1v text-mention-grey fr-text--sm"},ao={class:"fr-grid-row fr-grid-row--middle fr-mr-1v"},lo=r({__name:"QualityComponentInline",props:{quality:{}},setup:e=>(e,t)=>(a(),l("div",eo,[w("div",to,[b(h(Qi),{class:"relative z-2"},{toggletip:f((()=>[w("h5",no,x(e.$t("Metadata quality:")),1),w("ul",ro,[b(h(Br),{passed:e.quality.dataset_description_quality,messagePassed:e.$t("Data description filled"),messageFailed:e.$t("Data description empty"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.resources_documentation,messagePassed:e.$t("Files documented"),messageFailed:e.$t("Files documentation missing"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.license,messagePassed:e.$t("License filled"),messageFailed:e.$t("No license set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.update_frequency&&!!e.quality.update_fulfilled_in_time,messagePassed:e.$t("Update frequency followed"),messageFailed:e.quality.update_frequency?e.$t("Update frequency not followed"):e.$t("Update frequency not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.has_open_format,messagePassed:e.$t("File formats are open"),messageFailed:e.$t("File formats are closed"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.temporal_coverage,messagePassed:e.$t("Temporal coverage filled"),messageFailed:e.$t("Temporal coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.spatial,messagePassed:e.$t("Spatial coverage filled"),messageFailed:e.$t("Spatial coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),b(h(Br),{passed:e.quality.all_resources_available,messagePassed:e.$t("All files are available"),messageFailed:e.$t("Some files are unavailable"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"])]),w("div",io,[w("a",{href:h(ve).guides_quality_url,target:"_blank",rel:"noopener",title:e.$t("Learn more about this indicator - opens a new window")},x(e.$t("Learn more about this indicator")),9,oo)])])),_:1}),w("p",so,x(e.$t("Metadata :")),1),w("div",ao,[b(h(Ir),{score:e.quality.score},null,8,["score"])])])]))});const co=$e({duration:!1,dismissible:!0});function uo(e){return s((()=>{const t=k(e);if(t)return t.organization?t.organization.name:t.owner.first_name+" "+t.owner.last_name}))}const ho={class:"fr-my-2w fr-p-2w border border-default-grey fr-enlarge-link"},po={key:0,class:"absolute top-0 fr-grid-row fr-grid-row--middle fr-mt-n3v fr-ml-n1v"},fo={key:0,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},mo={key:1,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},go={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--top"},vo={class:"fr-col-auto"},yo={class:"logo"},bo={class:"fr-col-12 fr-col-sm"},wo={class:"fr-text--md fr-mb-0 fr-grid-row"},xo={key:0,class:"fr-col-auto fr-ml-1w"},ko={key:0,class:"fr-text--sm fr-m-0 inline-flex"},Co={key:0,class:"not-enlarged fr-mr-1v"},_o={class:"text-mention-grey dash-before-sm whitespace-nowrap"},So={class:"fr-mx-0 fr-mb-n1v fr-grid-row fr-grid-row--middle fr-text--sm text-mention-grey"},Mo={class:"fr-hidden flex-sm dash-after-sm text-grey-500"},To={class:"fr-grid-row fr-grid-row--middle fr-mr-1v"},Oo=["aria-label"],Do=["aria-label"],Eo=["aria-label"],Ao=r({__name:"DatasetCard",props:{dataset:{},datasetUrl:{},organizationUrl:{},showDescription:{type:Boolean,default:!0}},setup(e){const t=e,{t:n}=Re(),r=uo(t.dataset);return(e,t)=>(a(),l("div",ho,[e.dataset.private||e.dataset.archived?(a(),l("div",po,[e.dataset.private?(a(),l("p",fo,[t[0]||(t[0]=w("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("Draft")),1)])):g("",!0),e.dataset.archived?(a(),l("p",mo,[t[1]||(t[1]=w("span",{class:"fr-icon-archive-line fr-icon--sm","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("Archived")),1)])):g("",!0)])):g("",!0),w("div",go,[w("div",vo,[w("div",yo,[e.dataset.organization?(a(),u(h(Lr),{key:0,type:"dataset",src:e.dataset.organization.logo_thumbnail,alt:"",size:40},null,8,["src"])):e.dataset.owner?(a(),u(Xt,{key:1,user:e.dataset.owner,size:40},null,8,["user"])):(a(),u(h(Lr),{key:2,type:"dataset",size:40}))])]),w("div",bo,[w("h4",wo,[d(e.$slots,"datasetUrl",{dataset:e.dataset,datasetUrl:e.datasetUrl},(()=>[b(Kt,{to:e.datasetUrl,class:"text-grey-500 fr-grid-row"},{default:f((()=>[b(h(we),{class:"fr-col","auto-resize":!0,text:e.dataset.title,"max-lines":1},null,8,["text"]),e.dataset.acronym?(a(),l("small",xo,x(e.dataset.acronym),1)):g("",!0)])),_:1},8,["to"])]))]),e.dataset.organization||e.dataset.owner?(a(),l("div",ko,[e.dataset.organization?(a(),l("span",Co,[e.organizationUrl?(a(),u(Kt,{key:0,class:"fr-link fr-text--sm inline-flex items-center",to:e.organizationUrl},{default:f((()=>[b(br,{organization:e.dataset.organization},null,8,["organization"])])),_:1},8,["to"])):(a(),u(br,{key:1,organization:e.dataset.organization},null,8,["organization"]))])):(a(),u(h(we),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(r),"max-lines":1},null,8,["text"])),w("span",_o,x(e.$t("Updated {date}",{date:h(ze)(e.dataset.last_update)})),1)])):g("",!0),w("div",So,[w("div",Mo,[b(h(lo),{quality:e.dataset.quality},null,8,["quality"])]),w("div",To,[w("p",{class:"fr-text--sm fr-my-0","aria-label":h(n)("{n} resources downloads",e.dataset.metrics.resources_downloads)},[t[2]||(t[2]=w("span",{class:"fr-icon-download-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),R(x(h(Be)(e.dataset.metrics.resources_downloads)),1)],8,Oo),w("p",{class:"fr-text--sm fr-my-0","aria-label":h(n)("{n} followers",e.dataset.metrics.followers)},[t[3]||(t[3]=w("span",{class:"fr-icon-star-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),R(x(h(Be)(e.dataset.metrics.followers)),1)],8,Do),w("p",{class:"fr-text--sm fr-my-0","aria-label":h(n)("{n} reuses",e.dataset.metrics.reuses)},[t[4]||(t[4]=w("span",{class:"fr-icon-line-chart-line fr-icon--sm fr-px-1v","aria-hidden":"true"},null,-1)),R(x(h(Be)(e.dataset.metrics.reuses)),1)],8,Eo)])]),e.showDescription?(a(),u(j,{key:1},{default:f((()=>[b(Jt,{class:"fr-text--sm fr-mt-1w fr-mb-0 overflow-wrap-anywhere","auto-resize":!0,text:h(Fe)(e.dataset.description),"max-lines":2},null,8,["text"])])),_:1})):g("",!0)])])]))}}),No={key:0,class:"absolute top-0 fr-grid-row fr-grid-row--middle fr-mt-n3v fr-ml-n1v"},Po={key:0,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Lo={key:1,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Ro={key:2,class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380 fr-mr-1w"},Io={class:"fr-text--md fr-mb-0"},$o={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",class:"fr-mr-1v",style:{width:"1rem"}},zo={key:1,class:"fr-icon-terminal-line fr-icon--sm fr-mr-1v","aria-hidden":"true"},Bo={key:1,class:"fr-text--sm text-mention-grey inline-flex fr-mt-1v fr-mb-0"},Fo={key:0,class:"not-enlarged"},Vo={class:"dash-before whitespace-nowrap"},jo={class:"fr-text--sm text-mention-grey fr-my-0 fr-mt-1v"},Ho={class:"text-grey-400"},Wo=r({__name:"DataserviceCard",props:{dataservice:{},dataserviceUrl:{},organizationUrl:{},showDescription:{type:Boolean,default:!0}},setup(e){const t=e,{t:n}=Re(),r=uo(t.dataservice),i=s((()=>ve.tabular_api_dataservice_id===t.dataservice.id));return(e,o)=>(a(),l("article",{class:v(["fr-my-2w fr-p-2w border fr-enlarge-link",{"border-tabular-api":i.value}]),style:H(t.style)},["restricted"===e.dataservice.access_type||e.dataservice.private||e.dataservice.archived_at?(a(),l("div",No,["restricted"===e.dataservice.access_type?(a(),l("p",Po,[o[0]||(o[0]=w("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("Restricted access")),1)])):g("",!0),e.dataservice.private?(a(),l("p",Lo,[o[1]||(o[1]=w("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("Draft")),1)])):g("",!0),e.dataservice.archived_at?(a(),l("p",Ro,[o[2]||(o[2]=w("span",{class:"fr-icon-lock-line fr-icon--sm","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("Archived")),1)])):g("",!0)])):g("",!0),w("h4",Io,[d(e.$slots,"dataserviceUrl",{dataservice:e.dataservice,dataserviceUrl:e.dataserviceUrl},(()=>[i.value?(a(),l("svg",$o,o[3]||(o[3]=[w("path",{d:"M17.0007 1.20825 18.3195 3.68108 20.7923 4.99992 18.3195 6.31876 17.0007 8.79159 15.6818 6.31876 13.209 4.99992 15.6818 3.68108 17.0007 1.20825ZM10.6673 9.33325 15.6673 11.9999 10.6673 14.6666 8.00065 19.6666 5.33398 14.6666.333984 11.9999 5.33398 9.33325 8.00065 4.33325 10.6673 9.33325ZM11.4173 11.9999 9.18905 10.8115 8.00065 8.58325 6.81224 10.8115 4.58398 11.9999 6.81224 13.1883 8.00065 15.4166 9.18905 13.1883 11.4173 11.9999ZM19.6673 16.3333 18.0007 13.2083 16.334 16.3333 13.209 17.9999 16.334 19.6666 18.0007 22.7916 19.6673 19.6666 22.7923 17.9999 19.6673 16.3333Z"},null,-1)]))):(a(),l("span",zo)),b(Kt,{class:"inline-flex",to:e.dataserviceUrl},{default:f((()=>[b(h(we),{"auto-resize":!0,text:e.dataservice.title,"max-lines":1},null,8,["text"])])),_:1},8,["to"])]),!0)]),e.dataservice.organization||e.dataservice.owner?(a(),l("p",Bo,[e.dataservice.organization?(a(),l("span",Fo,[e.organizationUrl?(a(),u(Kt,{key:0,class:"fr-link fr-text--sm",to:e.organizationUrl},{default:f((()=>[b(br,{organization:e.dataservice.organization},null,8,["organization"])])),_:1},8,["to"])):(a(),u(br,{key:1,organization:e.dataservice.organization},null,8,["organization"]))])):(a(),u(h(we),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(r),"max-lines":1},null,8,["text"])),w("span",Vo,x(h(n)("Updated {date}",{date:h(ze)(e.dataservice.metadata_modified_at)})),1)])):g("",!0),w("p",jo,[o[4]||(o[4]=w("span",{class:"fr-icon-information-line fr-icon--sm text-grey-380"},null,-1)),R(" "+x(h(n)("Availability :"))+" ",1),w("span",Ho,[e.dataservice.availability?(a(),l(L,{key:0},[R(x(h(n)("{n}%",e.dataservice.availability)),1)],64)):(a(),l(L,{key:1},[R(x(h(n)("unknown")),1)],64))])]),e.showDescription?(a(),u(j,{key:2},{default:f((()=>[b(Jt,{class:"fr-text--sm fr-mt-1w fr-mb-0 overflow-wrap-anywhere","auto-resize":!0,text:h(Fe)(e.dataservice.description),"max-lines":2},null,8,["text"])])),_:1})):g("",!0)],6))}}),qo=hn(Wo,[["__scopeId","data-v-47254e37"]]),Uo={class:"fr-grid-row fr-grid-row--middle fr-pb-3w fr-mb-3w border-bottom border-default-grey"},Yo={class:"fr-col"},Ko={class:"fr-col-auto"},Jo=["aria-expanded","aria-controls"],Go=["id"],Xo={class:"fr-pb-3w fr-mb-3w border-bottom border-default-grey"},Zo={class:"fr-grid-row fr-grid-row--gutters fr-text--sm fr-m-0","data-testid":"extra-list"},Qo={class:"subtitle fr-mb-1v"},es={class:"fr-text--sm fr-m-0 text-mention-grey overflow-wrap-anywhere"},ts=r({__name:"ExtraAccordion",props:{buttonText:{},titleText:{},extra:{},titleLevel:{}},setup(e){const t=Ve("accordion"),{expanded:n,expand:r}=function(e){const t=y(!1);return{expanded:t,expand:function(){t.value=!t.value;const n=document.getElementById(e);n&&sr(n,t.value)}}}(t);return(e,i)=>(a(),l("div",null,[w("header",Uo,[w("div",Yo,[(a(),u(W(e.titleLevel),{class:"subtitle subtitle--uppercase fr-m-0"},{default:f((()=>[R(x(e.titleText),1)])),_:1}))]),w("div",Ko,[w("button",{onClick:i[0]||(i[0]=(...e)=>h(r)&&h(r)(...e)),role:"button","aria-expanded":h(n),"aria-controls":h(t),class:v(["fr-btn fr-btn--tertiary-no-outline fr-btn--icon-left fr-btn--secondary-grey-500",{"fr-icon-arrow-up-s-line":h(n),"fr-icon-arrow-down-s-line":!h(n)}]),"data-testid":"button"},[h(n)?(a(),l(L,{key:0},[R(x(e.$t("Close details")),1)],64)):(a(),l(L,{key:1},[R(x(e.buttonText),1)],64))],10,Jo)])]),w("div",{class:"accordion-content",id:h(t)},[w("div",Xo,[w("div",Zo,[(a(!0),l(L,null,q(e.extra,((e,t)=>(a(),l("div",{key:t,class:"fr-col-12 fr-col-sm-6 fr-col-md-4"},[w("h3",Qo,x(t),1),w("p",es,x(e),1)])))),128))])])],8,Go)]))}}),ns=r({__name:"OwnerType",props:{type:{},size:{default:"sm"},color:{default:"grey"}},setup(e){const t=e,n=s((()=>{switch(t.color){case"black":return"text-grey-500";case"grey":return"text-mention-grey"}})),r=s((()=>gr(t.type).label));return(e,t)=>(a(),l("p",{class:v(`${n.value} fr-text--${e.size} fr-my-0`)},[b(vr,{type:e.type},null,8,["type"]),R(" "+x(r.value),1)],2))}}),rs=3;function is(e,t=1){return[...Array(e).keys()].map((e=>e+t))}function ss(e,t){const n=function(e){return is(e)}(t),r=function(e){return Math.max(e-rs,2)}(e);if(t<=2)return[];let i=is(function(e,t){return Math.min(2*rs+1,e.length-2,rs+t-1,rs+e.length-t)}(n,e),r);return i.includes(2)||i.unshift(null),i.includes(t-1)||i.push(null),i}const as=["aria-label"],ls={class:"fr-pagination__list"},cs=["href"],ds=["href"],us=["aria-current","href","title"],hs=["aria-current","href","title","onClick","data-testid"],ps={key:1,class:"fr-pagination__link fr-hidden fr-unhidden-lg"},fs=["aria-current","href","title","data-testid"],ms=["href"],gs=["href"],vs=r({__name:"Pagination",props:{page:{default:1},pageSize:{default:20},totalResults:{}},emits:["change"],setup(e,{emit:t}){const n=t,r=e,{t:i}=Re(),o=s((()=>Math.ceil(r.totalResults/r.pageSize))),c=s((()=>ss(r.page,o.value))),d=e=>{if(e!==r.page)return n("change",e)},u=()=>{const e=r.page+1;if(e<=o.value)return n("change",e)},p=()=>{const e=r.page-1;if(e>0)return n("change",e)};return(e,t)=>e.totalResults>e.pageSize?(a(),l("nav",{key:0,role:"navigation",class:"fr-pagination fr-pagination--centered","aria-label":h(i)("Pagination")},[w("ul",ls,[w("li",null,[w("a",{href:1===e.page?void 0:"#",class:"fr-pagination__link fr-pagination__link--first",onClick:t[0]||(t[0]=U((e=>d(1)),["prevent"])),"data-testid":"first-page"},x(h(i)("First page")),9,cs)]),w("li",null,[w("a",{href:1===e.page?void 0:"#",class:"fr-pagination__link fr-pagination__link--prev fr-pagination__link--lg-label",onClick:U(p,["prevent"]),"data-testid":"previous-page"},x(h(i)("Previous page")),9,ds)]),w("li",null,[w("a",{"aria-current":1===e.page?"page":void 0,href:1===e.page?void 0:"#",class:v(["fr-pagination__link",{"fr-hidden fr-unhidden-sm":e.page>1}]),title:h(i)("Page {nb}",{nb:1}),onClick:t[1]||(t[1]=U((e=>d(1)),["prevent"])),"data-testid":1}," 1 ",10,us)]),(a(!0),l(L,null,q(c.value,(t=>(a(),l("li",null,[t?(a(),l("a",{key:0,class:v(["fr-pagination__link",{"fr-hidden fr-unhidden-lg":t<e.page-1||t>e.page+1}]),"aria-current":e.page===t?"page":void 0,href:e.page===t?void 0:"#",title:h(i)("Page {nb}",{nb:t}),onClick:U((e=>d(t)),["prevent"]),"data-testid":t},x(t),11,hs)):(a(),l("a",ps," … "))])))),256)),w("li",null,[w("a",{class:"fr-pagination__link","aria-current":e.page===o.value?"page":void 0,href:e.page===o.value?void 0:"#",title:h(i)("Page {nb}",{nb:o.value}),onClick:t[2]||(t[2]=U((e=>d(o.value)),["prevent"])),"data-testid":o.value},x(o.value),9,fs)]),w("li",null,[w("a",{class:"fr-pagination__link fr-pagination__link--next fr-pagination__link--lg-label",href:e.page===o.value?void 0:"#",onClick:U(u,["prevent"]),"data-testid":"next-page"},x(h(i)("Next page")),9,ms)]),w("li",null,[w("a",{class:"fr-pagination__link fr-pagination__link--last",href:e.page===o.value?void 0:"#",onClick:t[3]||(t[3]=U((e=>d(o.value)),["prevent"])),"data-testid":"last-page"},x(h(i)("Last page")),9,gs)])])],8,as)):g("",!0)}}),ys={class:"relative"},bs=r({__name:"ReadMore",props:{maxHeight:{default:""}},setup(e){const t=e,n=y(!1),r=y(!1),i=Er("containerRef"),o=Er("readMoreRef"),{height:c}=function(e,t={width:0,height:0},n={}){const{window:r=Dr,box:i="content-box"}=n,o=s((()=>{var t,n;return null==(n=null==(t=Or(e))?void 0:t.namespaceURI)?void 0:n.includes("svg")})),a=y(t.width),l=y(t.height),{stop:c}=Nr(e,(([t])=>{const n="border-box"===i?t.borderBoxSize:"content-box"===i?t.contentBoxSize:t.devicePixelContentBoxSize;if(r&&o.value){const t=Or(e);if(t){const e=t.getBoundingClientRect();a.value=e.width,l.value=e.height}}else if(n){const e=Array.isArray(n)?n:[n];a.value=e.reduce(((e,{inlineSize:t})=>e+t),0),l.value=e.reduce(((e,{blockSize:t})=>e+t),0)}else a.value=t.contentRect.width,l.value=t.contentRect.height}),n);Mr((()=>{const n=Or(e);n&&(a.value="offsetWidth"in n?n.offsetWidth:t.width,l.value="offsetHeight"in n?n.offsetHeight:t.height)}));const d=C((()=>Or(e)),(e=>{a.value=e?t.width:0,l.value=e?t.height:0}));return{width:a,height:l,stop:function(){c(),d()}}}(i),u=y(284),h=e=>{const t=getComputedStyle(e);return parseFloat(t.getPropertyValue("height"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))},p=()=>{const e=document.querySelector(`[data-read-more-max-height="${t.maxHeight}"]`);return e?Array.from(e.children).map(h).reduce(((e,t)=>e+t),0):284},f=()=>{if(!o.value)return;const e=or(o.value);n.value?Pe({from:{height:o.value.scrollHeight},to:{height:p()},duration:300,ease:Le}).start({update:e.set,complete:()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})}}):Pe({from:{height:p()},to:{height:o.value.scrollHeight},duration:300,ease:Le}).start({update:e.set,complete:()=>e.set({height:"auto"})}),n.value=!n.value};return C(c,(e=>{u.value=p(),r.value=e>u.value,r.value||(u.value=e)})),(e,t)=>(a(),l("div",ys,[w("div",{class:v(["read-more",{expand:n.value}]),ref_key:"readMoreRef",ref:o,style:H({height:u.value+"px"})},[w("div",{ref_key:"containerRef",ref:i},[d(e.$slots,"default")],512)],6),r.value?(a(),l("div",{key:0,class:"read-more__bottom",onClick:U(f,["prevent"])},[w("button",{role:"button",class:"fr-btn fr-btn--tertiary-no-outline",onClick:U(f,["prevent","stop"])},[n.value?(a(),l(L,{key:0},[R(x(e.$t("Read less")),1)],64)):(a(),l(L,{key:1},[R(x(e.$t("Read more")),1)],64))])])):g("",!0)]))}}),ws=["y"],xs=["y"],ks=["y"],Cs=["y"],_s=["y"],Ss=["y"],Ms=["y"],Ts=r({__name:"Loader",setup(e){function t(e){return 20+56*e}return(e,n)=>(a(),u(h(zt),{width:1124,height:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:f((()=>[n[0]||(n[0]=w("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"112",height:"24"},null,-1)),n[1]||(n[1]=w("rect",{x:"160",y:"16",rx:"4",ry:"4",width:"116",height:"24"},null,-1)),n[2]||(n[2]=w("rect",{x:"308",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1)),n[3]||(n[3]=w("rect",{x:"480",y:"16",rx:"4",ry:"4",width:"106",height:"24"},null,-1)),n[4]||(n[4]=w("rect",{x:"618",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1)),n[5]||(n[5]=w("rect",{x:"790",y:"16",rx:"4",ry:"4",width:"144",height:"24"},null,-1)),n[6]||(n[6]=w("rect",{x:"966",y:"16",rx:"4",ry:"4",width:"142",height:"24"},null,-1)),n[7]||(n[7]=w("rect",{x:"4",y:"56",rx:"4",ry:"4",width:"1116",height:"4"},null,-1)),(a(),l(L,null,q(5,(e=>(a(),l(L,null,[w("rect",{x:"16",y:t(e),rx:"4",ry:"4",width:"112",height:"32"},null,8,ws),w("rect",{x:"160",y:t(e),rx:"4",ry:"4",width:"116",height:"32"},null,8,xs),w("rect",{x:"308",y:t(e),rx:"4",ry:"4",width:"140",height:"32"},null,8,ks),w("rect",{x:"480",y:t(e),rx:"4",ry:"4",width:"106",height:"32"},null,8,Cs),w("rect",{x:"618",y:t(e),rx:"4",ry:"4",width:"140",height:"32"},null,8,_s),w("rect",{x:"790",y:t(e),rx:"4",ry:"4",width:"144",height:"32"},null,8,Ss),w("rect",{x:"966",y:t(e),rx:"4",ry:"4",width:"142",height:"32"},null,8,Ms)],64)))),64))])),_:1}))}});const Os={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},Ds={class:"fr-grid-row fr-m-0"},Es={key:2,class:"fr-grid-row fr-grid-row--gutters"},As={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},Ns={class:"fr-grid-row fr-m-0"},Ps={class:"fr-col-12 fr-col-sm-6 fr-col-md-4 fr-col-lg-3"},Ls={class:"fr-text--sm fr-text--bold fr-mt-0 fr-mb-1v"},Rs={class:"code"},Is=r({__name:"DataStructure",props:{resource:{}},setup(e){const t=e,n=y([]),r=y({}),i=y(!0),o=y(!1),s=y(!1);return _((async()=>{try{const{data:e}=await function(e){const t=`${ve.tabular_api_url}/api/resources/${e}/profile/`;return je.get(t)}(t.resource.id);"profile"in e&&e.profile?(n.value=Object.keys(e.profile.columns),r.value=e.profile.columns,s.value=!0,i.value=!1):(o.value=!0,i.value=!1)}catch(e){o.value=!0,i.value=!1}})),(e,t)=>o.value?(a(),l("div",Os,[w("p",Ds,[t[0]||(t[0]=w("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),R(" "+x(e.$t("The data structure of this file failed to load.")),1)])])):i.value?(a(),u(Ts,{key:1})):(a(),l("div",Es,[s.value?g("",!0):(a(),l("div",As,[w("p",Ns,[t[1]||(t[1]=w("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),R(" "+x(e.$t("No data structure found for this file.")),1)])])),s.value?(a(!0),l(L,{key:1},q(n.value,(e=>(a(),l("div",Ps,[w("h5",Ls,x(e),1),w("code",Rs,x(r.value[e].format),1)])))),256)):g("",!0)]))}}),$s={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mt-4w fr-mx-4w fr-mb-3v"},zs={class:"fr-grid-row fr-m-0"},Bs={class:"bg-blue-100 text-blue-400 fr-hidden fr-unhidden-md fr-p-2w"},Fs={class:"fr-grid-row fr-grid-row--middle fr-grid-row--gutters"},Vs=["innerHTML"],js={class:"fr-col"},Hs={class:"fr-text--bold fr-m-0"},Ws={class:"fr-text--sm fr-m-0 f-italic"},qs={class:"fr-col-auto fr-my-0"},Us=["href"],Ys={class:"fr-table fr-table--no-background fr-p-0 fr-pt-0-5v fr-m-0"},Ks={class:"fr-mb-3w"},Js={class:"fr-sr-only"},Gs={scope:"col"},Xs={class:"fr-grid-row fr-grid-row--middle col-width"},Zs=["onClick"],Qs={class:"fr-sr-only"},ea={class:"cell-padding"},ta={class:"fr-grid-row fr-grid-row--middle fr-text--xs w-100 style-cell"},na={class:"fr-my-auto"},ra={class:"fr-px-5v"},ia=r({__name:"Preview",props:{resource:{}},setup(e){const t=e,{t:n}=Re(),r=y([]),i=y([]),o=y(!0),s=y(!1),c=y(null),d=y(0),p=ve.tabular_page_size,f=y(1);function m(e){var t;return e===(null===(t=c.value)||void 0===t?void 0:t.column)}async function g(e,n){try{const{data:a}=await function(e,t,n){let r=`${ve.tabular_api_url}/api/resources/${e}/data/?page=${t}&page_size=${ve.tabular_page_size}`;return n&&(r+=`&${n.column}__sort=${n.type}`),je.get(r)}(t.resource.id,e,n);"data"in a&&a.data&&a.data.length>0?(r.value=a.data,i.value=Object.keys(a.data[0]).filter((e=>"__id"!==e)),d.value=a.meta.total,f.value=e,o.value=!1):(s.value=!0,o.value=!1)}catch(a){s.value=!0,o.value=!1}}function k(e){g(e,c.value)}const C=He(t.resource.extras["analysis:parsing:finished_at"]);return _((()=>{g(f.value)})),(e,t)=>(a(),l("div",null,[s.value?(a(),l("div",$s,[w("p",zs,[t[0]||(t[0]=w("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1)),R(" "+x(h(n)("The preview of this file failed to load.")),1)])])):o.value?(a(),u(Ts,{key:1})):(a(),l(L,{key:2},[w("div",Bs,[w("div",Fs,[w("div",{class:"fr-col-auto",innerHTML:h('<svg width="64" height="64" viewBox="0 0 64 64" aria-hidden="true" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_677_1834" fill="white"><path d="M47.6364 31.7323C47.8391 31.8153 48.0153 31.8812 48.1901 31.9556C49.3599 32.4569 50.0394 33.3352 50.1277 34.6162C50.1983 35.6647 50.2292 36.7158 50.2371 37.7685C50.2523 39.8635 51.2789 41.4763 52.6657 42.8981C53.5865 43.842 53.6661 44.3716 52.7286 45.2974C51.1332 46.8812 49.3827 48.2165 47.1329 48.7665C44.8819 49.3216 42.5083 49.0548 40.4357 48.0138C39.4892 47.5604 38.5265 47.3019 37.5309 47.7071C37.071 47.9103 36.6618 48.214 36.3331 48.596C36.0111 48.9977 35.7367 49.4357 35.5154 49.9011C35.0548 50.75 34.2981 51.2484 33.4773 51.6648C33.2122 51.7978 32.9196 51.8661 32.6233 51.8641C32.3271 51.862 32.0355 51.7897 31.7724 51.653C31.4776 51.521 31.2044 51.3451 30.9618 51.1313C29.8211 50.0656 28.445 49.7385 26.9352 49.6965C24.2186 49.5962 21.5474 48.9671 19.0698 47.8441C18.4504 47.5532 17.8641 47.1957 17.3213 46.7778C16.6911 46.3217 16.5988 45.9152 16.8344 45.1807C17.1056 44.3195 17.3992 43.4821 17.6453 42.6226C17.6638 42.5251 17.6598 42.4247 17.6338 42.329C17.6077 42.2333 17.5603 42.1449 17.495 42.0705C16.4777 41.1564 16.4698 41.1632 15.3346 41.8919C12.2675 43.8671 9.1983 45.8419 6.12697 47.816C5.39573 48.2874 5.04746 48.1891 4.61497 47.4308C4.33147 46.9348 4.052 46.4365 3.77656 45.9357C3.18563 44.8787 3.26602 44.5782 4.27115 43.9407C7.48797 41.9067 10.6834 39.8658 13.9015 37.8507C14.3035 37.5956 14.4007 37.3572 14.3108 36.8936C13.6776 33.714 14.5417 30.9795 16.8278 28.6954C16.9816 28.5764 17.0894 28.4073 17.1328 28.2171C17.1763 28.027 17.1526 27.8277 17.0658 27.6532C16.5668 26.2486 15.7792 25.1355 14.3525 24.5233C13.5227 24.1467 12.7175 23.7178 11.9416 23.2391C10.7864 22.5922 9.89092 21.5619 9.40841 20.3243C9.31335 20.0822 9.28169 19.8197 9.31644 19.5617C9.3512 19.3037 9.45121 19.059 9.60692 18.8509C10.6377 17.2552 12.2625 16.7311 13.9773 16.7337C15.3337 16.7378 16.6957 17.1374 18.0435 17.418C19.2594 17.6697 19.3451 17.666 19.9235 16.5752C20.1987 16.055 20.4163 15.4882 20.7251 14.9994C21.2758 14.1191 21.9105 13.926 22.8624 14.3348C23.2938 14.516 23.7286 14.7474 24.1486 14.9462C24.9684 15.324 25.7026 15.2084 26.3461 14.585C26.6077 14.3351 26.842 14.0578 27.045 13.7578C27.8829 12.5231 28.9904 11.4969 30.2827 10.7576C31.7264 9.85971 32.9011 8.58535 33.6818 7.07013C34.0043 6.47507 34.6284 6.37336 35.1547 6.87449C36.1787 7.85765 37.2353 8.82594 38.1708 9.8952C39.6137 11.5828 41.5324 12.7905 43.6733 13.3587C45.1679 13.7661 46.5788 14.4553 48.045 14.97C49.8289 15.5957 51.624 16.1995 53.4326 16.7561C54.4429 17.0682 54.7071 17.4125 54.4318 18.4614C53.8032 20.8525 53.1633 23.2416 52.512 25.6287C52.2313 26.6591 51.5044 27.3829 50.6757 27.9621C49.3363 28.9134 48.2845 30.2182 47.6364 31.7323ZM19.0829 43.0845C18.8621 43.7906 18.688 44.4745 18.4321 45.1261C18.2675 45.546 18.3981 45.7414 18.7452 45.9473C21.1132 47.3103 23.6962 47.8813 26.3813 48.163C27.5256 48.2847 28.6999 48.356 29.785 48.6883C30.5876 48.9346 31.287 49.5481 32.0035 50.0404C32.41 50.3202 32.7838 50.4547 33.176 50.0845C33.6071 49.6961 34.0124 49.2799 34.3896 48.8386C34.6545 48.4664 34.8964 48.0784 35.1142 47.6767C35.6541 46.8224 36.438 46.3537 37.4121 46.1269C38.6063 45.8473 39.8607 46.0113 40.9435 46.5887C43.5843 47.9246 46.236 47.8653 48.8 46.4721C49.8779 45.8886 50.796 44.9852 51.8339 44.1811C49.2935 41.8756 48.4762 39.073 48.724 35.8709C48.7321 35.4135 48.6838 34.9569 48.5801 34.5115C48.4556 33.8144 47.9893 33.425 47.3285 33.2617C47.0897 33.2022 46.8401 33.1982 46.5981 33.1537C45.8078 32.9971 45.5014 32.4304 45.8734 31.7287C46.8901 29.7991 47.9735 27.9259 49.8707 26.6837C50.2318 26.4528 50.5403 26.1477 50.7759 25.7885C51.0114 25.4292 51.1688 25.0241 51.2375 24.5995C51.4742 23.351 51.8317 22.1215 52.1618 20.8919C52.3982 20.012 52.6732 19.1464 52.9439 18.2473C52.0883 17.992 51.2364 17.7912 50.4176 17.4913C48.2143 16.6752 46.0306 15.8094 43.8326 14.9782C42.7874 14.5843 41.7022 14.2815 40.6869 13.8328C38.9215 13.0457 37.6898 11.5944 36.4238 10.1918C35.887 9.59656 35.273 9.06983 34.7665 8.58209C33.7652 9.61965 32.9772 10.7416 31.9168 11.4609C30.2571 12.5878 28.7721 13.8207 27.6019 15.4618C27.008 16.2924 26.1005 16.6368 25.0653 16.6718C24.1996 16.7016 23.4937 16.3034 22.7614 15.9491C22.0637 15.6113 22.0795 15.6271 21.7115 16.3264C21.3435 17.0257 20.9463 17.727 20.5177 18.3967C20.3427 18.6865 20.0779 18.9105 19.764 19.0344C19.45 19.1582 19.1044 19.1751 18.7801 19.0823C17.7876 18.8694 16.7939 18.6383 15.799 18.389C14.442 18.0468 13.0074 18.2086 11.7591 18.8447C10.8519 19.286 10.659 19.8764 11.3125 20.6174C11.7995 21.1706 12.3573 21.6566 12.9713 22.0626C13.7107 22.5281 14.4823 22.9399 15.2802 23.2949C16.2898 23.744 17.1328 24.5015 17.6895 25.4597C18.0248 26.0498 18.3157 26.6661 18.629 27.2724C23.4786 24.8338 27.9071 26.9763 29.9508 29.657C31.1027 31.1657 31.7438 33.0057 31.7801 34.9075C31.8164 36.8093 31.2461 38.6732 30.1526 40.2264C28.1536 43.0702 23.9809 45.1654 19.0829 43.0845ZM23.4376 42.3861C27.4778 42.1222 30.5404 38.6684 30.2798 34.6712C30.16 32.7164 29.2747 30.8892 27.8175 29.5894C26.3603 28.2897 24.4499 27.6232 22.5043 27.7359C21.536 27.7825 20.5865 28.0224 19.7111 28.4416C18.8358 28.8608 18.0522 29.4508 17.4059 30.1773C16.7596 30.9039 16.2636 31.7523 15.9469 32.6733C15.6301 33.5943 15.4988 34.5693 15.5608 35.5416C15.6227 36.5139 15.8766 37.4639 16.3076 38.3364C16.7387 39.2089 17.3382 39.9863 18.0714 40.6234C18.8045 41.2604 19.6566 41.7444 20.5779 42.047C21.4992 42.3497 22.4713 42.465 23.4376 42.3861ZM5.73574 46.2692L15.5443 39.9311L14.9626 38.9176L5.11278 45.1722L5.73574 46.2692Z"/></mask><path d="M47.6364 31.7323C47.8391 31.8153 48.0153 31.8812 48.1901 31.9556C49.3599 32.4569 50.0394 33.3352 50.1277 34.6162C50.1983 35.6647 50.2292 36.7158 50.2371 37.7685C50.2523 39.8635 51.2789 41.4763 52.6657 42.8981C53.5865 43.842 53.6661 44.3716 52.7286 45.2974C51.1332 46.8812 49.3827 48.2165 47.1329 48.7665C44.8819 49.3216 42.5083 49.0548 40.4357 48.0138C39.4892 47.5604 38.5265 47.3019 37.5309 47.7071C37.071 47.9103 36.6618 48.214 36.3331 48.596C36.0111 48.9977 35.7367 49.4357 35.5154 49.9011C35.0548 50.75 34.2981 51.2484 33.4773 51.6648C33.2122 51.7978 32.9196 51.8661 32.6233 51.8641C32.3271 51.862 32.0355 51.7897 31.7724 51.653C31.4776 51.521 31.2044 51.3451 30.9618 51.1313C29.8211 50.0656 28.445 49.7385 26.9352 49.6965C24.2186 49.5962 21.5474 48.9671 19.0698 47.8441C18.4504 47.5532 17.8641 47.1957 17.3213 46.7778C16.6911 46.3217 16.5988 45.9152 16.8344 45.1807C17.1056 44.3195 17.3992 43.4821 17.6453 42.6226C17.6638 42.5251 17.6598 42.4247 17.6338 42.329C17.6077 42.2333 17.5603 42.1449 17.495 42.0705C16.4777 41.1564 16.4698 41.1632 15.3346 41.8919C12.2675 43.8671 9.1983 45.8419 6.12697 47.816C5.39573 48.2874 5.04746 48.1891 4.61497 47.4308C4.33147 46.9348 4.052 46.4365 3.77656 45.9357C3.18563 44.8787 3.26602 44.5782 4.27115 43.9407C7.48797 41.9067 10.6834 39.8658 13.9015 37.8507C14.3035 37.5956 14.4007 37.3572 14.3108 36.8936C13.6776 33.714 14.5417 30.9795 16.8278 28.6954C16.9816 28.5764 17.0894 28.4073 17.1328 28.2171C17.1763 28.027 17.1526 27.8277 17.0658 27.6532C16.5668 26.2486 15.7792 25.1355 14.3525 24.5233C13.5227 24.1467 12.7175 23.7178 11.9416 23.2391C10.7864 22.5922 9.89092 21.5619 9.40841 20.3243C9.31335 20.0822 9.28169 19.8197 9.31644 19.5617C9.3512 19.3037 9.45121 19.059 9.60692 18.8509C10.6377 17.2552 12.2625 16.7311 13.9773 16.7337C15.3337 16.7378 16.6957 17.1374 18.0435 17.418C19.2594 17.6697 19.3451 17.666 19.9235 16.5752C20.1987 16.055 20.4163 15.4882 20.7251 14.9994C21.2758 14.1191 21.9105 13.926 22.8624 14.3348C23.2938 14.516 23.7286 14.7474 24.1486 14.9462C24.9684 15.324 25.7026 15.2084 26.3461 14.585C26.6077 14.3351 26.842 14.0578 27.045 13.7578C27.8829 12.5231 28.9904 11.4969 30.2827 10.7576C31.7264 9.85971 32.9011 8.58535 33.6818 7.07013C34.0043 6.47507 34.6284 6.37336 35.1547 6.87449C36.1787 7.85765 37.2353 8.82594 38.1708 9.8952C39.6137 11.5828 41.5324 12.7905 43.6733 13.3587C45.1679 13.7661 46.5788 14.4553 48.045 14.97C49.8289 15.5957 51.624 16.1995 53.4326 16.7561C54.4429 17.0682 54.7071 17.4125 54.4318 18.4614C53.8032 20.8525 53.1633 23.2416 52.512 25.6287C52.2313 26.6591 51.5044 27.3829 50.6757 27.9621C49.3363 28.9134 48.2845 30.2182 47.6364 31.7323ZM19.0829 43.0845C18.8621 43.7906 18.688 44.4745 18.4321 45.1261C18.2675 45.546 18.3981 45.7414 18.7452 45.9473C21.1132 47.3103 23.6962 47.8813 26.3813 48.163C27.5256 48.2847 28.6999 48.356 29.785 48.6883C30.5876 48.9346 31.287 49.5481 32.0035 50.0404C32.41 50.3202 32.7838 50.4547 33.176 50.0845C33.6071 49.6961 34.0124 49.2799 34.3896 48.8386C34.6545 48.4664 34.8964 48.0784 35.1142 47.6767C35.6541 46.8224 36.438 46.3537 37.4121 46.1269C38.6063 45.8473 39.8607 46.0113 40.9435 46.5887C43.5843 47.9246 46.236 47.8653 48.8 46.4721C49.8779 45.8886 50.796 44.9852 51.8339 44.1811C49.2935 41.8756 48.4762 39.073 48.724 35.8709C48.7321 35.4135 48.6838 34.9569 48.5801 34.5115C48.4556 33.8144 47.9893 33.425 47.3285 33.2617C47.0897 33.2022 46.8401 33.1982 46.5981 33.1537C45.8078 32.9971 45.5014 32.4304 45.8734 31.7287C46.8901 29.7991 47.9735 27.9259 49.8707 26.6837C50.2318 26.4528 50.5403 26.1477 50.7759 25.7885C51.0114 25.4292 51.1688 25.0241 51.2375 24.5995C51.4742 23.351 51.8317 22.1215 52.1618 20.8919C52.3982 20.012 52.6732 19.1464 52.9439 18.2473C52.0883 17.992 51.2364 17.7912 50.4176 17.4913C48.2143 16.6752 46.0306 15.8094 43.8326 14.9782C42.7874 14.5843 41.7022 14.2815 40.6869 13.8328C38.9215 13.0457 37.6898 11.5944 36.4238 10.1918C35.887 9.59656 35.273 9.06983 34.7665 8.58209C33.7652 9.61965 32.9772 10.7416 31.9168 11.4609C30.2571 12.5878 28.7721 13.8207 27.6019 15.4618C27.008 16.2924 26.1005 16.6368 25.0653 16.6718C24.1996 16.7016 23.4937 16.3034 22.7614 15.9491C22.0637 15.6113 22.0795 15.6271 21.7115 16.3264C21.3435 17.0257 20.9463 17.727 20.5177 18.3967C20.3427 18.6865 20.0779 18.9105 19.764 19.0344C19.45 19.1582 19.1044 19.1751 18.7801 19.0823C17.7876 18.8694 16.7939 18.6383 15.799 18.389C14.442 18.0468 13.0074 18.2086 11.7591 18.8447C10.8519 19.286 10.659 19.8764 11.3125 20.6174C11.7995 21.1706 12.3573 21.6566 12.9713 22.0626C13.7107 22.5281 14.4823 22.9399 15.2802 23.2949C16.2898 23.744 17.1328 24.5015 17.6895 25.4597C18.0248 26.0498 18.3157 26.6661 18.629 27.2724C23.4786 24.8338 27.9071 26.9763 29.9508 29.657C31.1027 31.1657 31.7438 33.0057 31.7801 34.9075C31.8164 36.8093 31.2461 38.6732 30.1526 40.2264C28.1536 43.0702 23.9809 45.1654 19.0829 43.0845ZM23.4376 42.3861C27.4778 42.1222 30.5404 38.6684 30.2798 34.6712C30.16 32.7164 29.2747 30.8892 27.8175 29.5894C26.3603 28.2897 24.4499 27.6232 22.5043 27.7359C21.536 27.7825 20.5865 28.0224 19.7111 28.4416C18.8358 28.8608 18.0522 29.4508 17.4059 30.1773C16.7596 30.9039 16.2636 31.7523 15.9469 32.6733C15.6301 33.5943 15.4988 34.5693 15.5608 35.5416C15.6227 36.5139 15.8766 37.4639 16.3076 38.3364C16.7387 39.2089 17.3382 39.9863 18.0714 40.6234C18.8045 41.2604 19.6566 41.7444 20.5779 42.047C21.4992 42.3497 22.4713 42.465 23.4376 42.3861ZM5.73574 46.2692L15.5443 39.9311L14.9626 38.9176L5.11278 45.1722L5.73574 46.2692Z" fill="#e4794a" stroke="#e4794a" stroke-width="1.47127" mask="url(#path-1-inside-1_677_1834)"/><path d="M55.8056 54.9357L55.8053 54.9356C53.9679 53.7622 53.1178 52.0475 53.3058 49.8972C53.3294 49.6381 53.4447 49.3591 53.6234 49.051C53.749 48.8346 53.8901 48.6287 54.0361 48.4157C54.1014 48.3203 54.1677 48.2235 54.2341 48.1238L54.2342 48.1235C54.8237 47.2354 55.4726 46.374 56.1353 45.5437C56.3434 45.2859 56.6122 45.0845 56.9172 44.9578L56.9172 44.9579L56.923 44.9553C56.9599 44.9393 57 44.9321 57.04 44.9343C57.0801 44.9366 57.1192 44.9482 57.1542 44.9684L57.3381 44.6496L57.1542 44.9684C57.1892 44.9885 57.2192 45.0168 57.2417 45.0509C57.2643 45.0851 57.2786 45.1242 57.2835 45.1651L57.2856 45.1826L57.2894 45.1999C57.6104 46.6687 57.9003 48.1378 58.1967 49.6402C58.2648 49.9854 58.3332 50.3324 58.4025 50.6815C58.3661 51.0327 58.3381 51.3785 58.3105 51.7205C58.2462 52.5158 58.1835 53.291 58.0196 54.0677C58.0039 54.1413 57.9855 54.2112 57.9646 54.2774L57.2274 53.9288C57.2588 53.8551 57.2859 53.7789 57.3096 53.7024C57.3862 53.4552 57.4388 53.1657 57.4739 52.8556C57.5443 52.235 57.5488 51.4924 57.5128 50.7585C57.4768 50.0228 57.3995 49.2844 57.3024 48.6685C57.2079 48.0695 57.0879 47.5396 56.9499 47.2536L56.7354 46.8089L56.3706 47.1425C56.2548 47.2485 56.1361 47.3593 56.0145 47.4728C55.7638 47.7069 55.5007 47.9526 55.2238 48.1917C54.6795 48.6593 54.3018 49.1965 54.1288 49.809C53.9559 50.4209 53.997 51.0746 54.2336 51.7594C54.4146 52.3383 54.7129 52.8734 55.1098 53.331C55.3952 53.66 55.7272 53.9438 56.0944 54.1737L55.7471 54.522L56.7235 54.4551L56.7277 54.4549L57.9319 54.3724C57.7731 54.799 57.5043 55.0583 57.2051 55.1753C56.8363 55.3195 56.3419 55.2789 55.8056 54.9357Z" fill="#e4794a" stroke="#e4794a" stroke-width="0.735634"/><path d="M32.0098 27.4033C31.8698 27.2844 31.5731 27.1425 31.4612 26.9121C31.1579 26.3001 30.8869 25.6725 30.6493 25.0318C30.3973 24.4023 29.9882 24.0238 29.3023 23.9844C29.1123 23.9917 28.9234 23.9526 28.7517 23.8704C28.5172 23.7179 28.2081 23.5158 28.1586 23.2791C28.1439 23.1349 28.1632 22.9893 28.2149 22.854C28.2666 22.7187 28.3493 22.5976 28.4562 22.5003C29.5039 21.7777 29.8084 20.7899 29.7264 19.5716C29.7065 19.276 29.9189 18.7875 30.1499 18.7C30.4334 18.5837 30.8707 18.7286 31.1946 18.8687C31.3888 18.9523 31.5044 19.2372 31.6316 19.4454C32.1339 20.2747 32.7479 20.9278 33.7881 21.0293C34.2101 21.07 34.6257 21.2037 34.763 21.6872C34.9004 22.1708 34.6307 22.4926 34.3129 22.7861C33.2433 23.7735 32.6731 24.9564 32.828 26.4478C32.8683 26.9232 32.6691 27.2634 32.0098 27.4033ZM30.4794 22.663L30.6854 22.453L31.8104 23.5978L32.5667 22.3769L31.0835 21.3304C30.8875 21.782 30.6846 22.2235 30.4795 22.6651L30.4794 22.663Z" fill="white"/><path d="M35.3139 40.5875C35.3348 40.8978 35.3563 41.2165 35.3777 41.5352C35.4082 41.9882 35.3326 42.3915 34.814 42.5028C34.3801 42.5957 34.023 42.3042 33.8949 41.7716C33.8565 41.6057 33.8531 41.4311 33.8311 41.2599C33.8091 41.0886 33.7922 40.9613 33.7682 40.7923C33.2267 40.6882 32.6052 40.6718 32.5854 39.9106C32.5739 39.4901 32.8465 39.305 33.5825 39.1535C33.56 38.818 33.5204 38.4794 33.5144 38.1407C33.5097 37.5722 33.777 37.2148 34.2023 37.1815C34.6277 37.1481 34.9354 37.4536 35.0143 38.0338C35.0584 38.3467 35.0566 38.6628 35.0807 39.0214C35.6566 38.982 36.1913 38.8927 36.3436 39.5669C36.4511 40.0125 36.158 40.2979 35.3139 40.5875Z" fill="white"/><path d="M21.4362 21.894C21.9395 21.8975 22.3991 21.9376 22.4815 22.5071C22.5739 23.1327 22.0685 23.2853 21.6171 23.4615C21.6054 23.6919 21.6696 23.9614 21.5678 24.1305C21.4188 24.3767 21.1636 24.6954 20.9321 24.7133C20.7847 24.6985 20.6431 24.6475 20.5199 24.5649C20.3966 24.4822 20.2955 24.3704 20.2253 24.2393C20.0438 23.8157 19.9873 23.413 19.4798 23.1592C19.0311 22.9392 19.1104 22.3418 19.5218 22.0082C19.6613 21.8997 19.8457 21.7754 19.8794 21.6214C19.9716 21.217 20.1775 20.9438 20.5923 20.9406C21.0443 20.9286 21.2544 21.2471 21.3591 21.6507C21.3761 21.7169 21.4017 21.7868 21.4362 21.894Z" fill="white"/><path d="M25.7339 38.1494L25.5118 38.0538L23.9878 37.3977L23.6345 37.2455L23.8028 36.8992C24.223 36.035 24.0136 35.2562 23.5068 34.3769L25.7339 38.1494ZM25.7339 38.1494L25.9099 37.9831M25.7339 38.1494L25.9099 37.9831M25.9099 37.9831C28.053 35.958 27.6901 32.4635 25.1777 31.0098L25.9099 37.9831ZM24.2421 30.9358L24.2421 30.9358C24.3489 30.8623 24.4644 30.8442 24.5434 30.8403C24.6273 30.8362 24.7094 30.8464 24.7803 30.8608C24.9203 30.8893 25.0655 30.9447 25.1776 31.0097L24.2421 30.9358ZM24.2421 30.9358L24.2401 30.9372M24.2421 30.9358L24.2401 30.9372M24.2401 30.9372C23.7609 31.2718 23.4531 31.907 23.3201 32.5212M24.2401 30.9372L23.3201 32.5212M23.3201 32.5212C23.1867 33.1377 23.2036 33.8514 23.5067 34.3768L23.3201 32.5212ZM23.0591 40.1014L23.0591 40.1013L23.0499 40.1021C22.3684 40.1591 21.6825 40.0799 21.0317 39.8689C20.381 39.6578 19.7782 39.3192 19.2584 38.8724C18.7385 38.4257 18.3119 37.8796 18.0032 37.2658C17.6946 36.6521 17.5101 35.9827 17.4603 35.2966L17.4603 35.2965C17.2504 32.4087 19.5441 29.8094 22.5065 29.6066C25.4646 29.4041 27.8677 31.4988 28.0702 34.4116C28.1146 35.1162 28.0201 35.8228 27.792 36.4907C27.5638 37.1589 27.2066 37.7751 26.7408 38.3039C26.275 38.8327 25.7099 39.2637 25.0781 39.5721C24.4462 39.8806 23.7601 40.0605 23.0591 40.1014ZM23.9612 38.251C23.9505 38.2473 23.9397 38.2436 23.9291 38.2399C23.7969 38.1945 23.6718 38.1514 23.5454 38.1032C23.2053 37.9729 23.0039 37.7713 22.9151 37.5596C22.8289 37.3541 22.8275 37.0893 22.9832 36.7792C23.1516 36.4926 23.2326 36.1628 23.2164 35.8306C23.2 35.4964 23.0859 35.1745 22.8883 34.9051C22.5891 34.4641 22.4159 33.9488 22.3879 33.4153C22.3597 32.8796 22.479 32.3466 22.7324 31.8747L22.7326 31.8747L22.7378 31.8643C22.8467 31.6451 22.9491 31.418 23.0581 31.1762C23.1023 31.0783 23.1475 30.9779 23.1948 30.8747L23.436 30.3474L22.8564 30.3542C21.7919 30.3667 20.7629 30.7392 19.935 31.4108C19.7356 31.5393 19.5844 31.7309 19.5054 31.9551C19.4256 32.1818 19.4243 32.4286 19.5012 32.6557C19.6015 33.0536 19.7317 33.4432 19.8905 33.8213L19.8952 33.8325L19.9006 33.8433C20.5091 35.0609 20.4616 36.3277 20.0864 37.6368C20.0145 37.8854 19.9917 38.1472 20.1124 38.3899C20.23 38.6262 20.4455 38.7653 20.6559 38.8634L20.6565 38.8637C21.7133 39.3545 22.8172 39.5094 23.9887 39.04L24.387 39.1796L24.3495 38.6228L24.3493 38.6186L24.314 38.0951L23.9612 38.251ZM19.11 34.067L18.7841 34.1721L18.7448 33.9013L18.5019 33.9369L18.1413 33.9898L18.1904 34.3509L18.514 36.7302L18.5633 37.0933L18.9267 37.0448L19.1531 37.0145L19.3869 36.9833L19.4563 36.7577C19.594 36.3104 19.6343 35.8386 19.5745 35.3744C19.5148 34.9102 19.3564 34.4643 19.11 34.067Z" fill="#e4794a" stroke="#e4794a" stroke-width="0.735634"/><path d="M25.6571 37.7115L24.1331 37.0554C24.6319 36.027 24.3565 35.1105 23.8249 34.1884C23.3498 33.3573 23.7072 31.7529 24.4499 31.2344C24.56 31.1574 24.8398 31.2351 24.9925 31.3237C27.2847 32.6497 27.6341 35.8488 25.6571 37.7115Z" fill="#F2F7FF"/><path d="M18.7969 34.2611C19.0149 34.6133 19.1551 35.0084 19.2081 35.4198C19.2611 35.8312 19.2256 36.2492 19.104 36.6457L18.8776 36.676L18.554 34.2967L18.7969 34.2611Z" fill="#F2F7FF"/></svg>\n')},null,8,Vs),w("div",js,[w("p",Hs,x(h(n)("Explore data in detail")),1),w("p",Ws,x(h(n)("Use our tool to get an overview of data, learn about different columns or perform filters and sorts.")),1)]),w("p",qs,[w("a",{href:e.resource.preview_url,class:"fr-btn",target:"_blank"},x(h(n)("Explore data")),9,Us)])])]),w("div",Ys,[w("table",Ks,[w("caption",Js,x(h(n)("Preview of {name}",{name:e.resource.title})),1),w("thead",null,[w("tr",null,[(a(!0),l(L,null,q(i.value,(e=>(a(),l("th",Gs,[w("div",Xs,[w("button",{class:v(["fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-my-n1w",{"fr-btn--secondary-grey-500":!m(e),"fr-btn--icon-right":m(e),"fr-icon-arrow-down-line":m(e)&&c.value&&"desc"==c.value.type,"fr-icon-arrow-up-line":m(e)&&c.value&&"asc"==c.value.type}]),onClick:t=>function(e){c.value&&c.value.column==e?"asc"==c.value.type?c.value.type="desc":c.value.type="asc":c.value?(c.value.column=e,c.value.type="asc"):c.value={column:e,type:"asc"},f.value=1,g(f.value,c.value)}(e)},[R(x(e)+" ",1),w("span",Qs,x(c.value&&"desc"==c.value.type?h(n)("Sort ascending"):h(n)("Sort descending")),1)],10,Zs)])])))),256))])]),w("tbody",null,[(a(!0),l(L,null,q(r.value,(e=>(a(),l("tr",null,[(a(!0),l(L,null,q(i.value,(t=>(a(),l("td",ea,[w("div",ta,[w("div",na,x(e[t]),1)])])))),256))])))),256))])])]),b(h(vs),{class:"fr-mt-3w",page:f.value,pageSize:h(p),totalResults:d.value,onChange:k},null,8,["page","pageSize","totalResults"]),w("div",ra,x(h(n)("Preview updated on {date}",{date:h(C)}))+" — "+x(h(n)("{count} columns",i.value.length))+" — "+x(h(n)("{count} rows",d.value)),1)],64))]))}}),oa=hn(ia,[["__scopeId","data-v-90a6d6fe"]]),sa=["href"],aa=r({__name:"EditButton",props:{datasetId:{},isCommunityResource:{type:Boolean,default:!1},resource:{}},setup(e){const t=e,{t:n}=Re(),r=s((()=>ve.new_admin?"owner"in t.resource&&t.resource.owner?`${ve.admin_root}users/${t.resource.owner.id}/community-resources/?resource_id=${t.resource.id}`:"organization"in t.resource&&t.resource.organization?`${ve.admin_root}organization/${t.resource.organization.id}/community-resources/?resource_id=${t.resource.id}`:`${ve.admin_root}datasets/${t.datasetId}/files/?resource_id=${t.resource.id}`:`${ve.admin_root}dataset/${t.datasetId}/${t.isCommunityResource?"community-resource":"resource"}/${t.resource.id}`));return(e,t)=>(a(),l("a",{href:r.value,class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-icon-pencil-line fr-icon--sm","data-testid":"edit-button"},x(h(n)("Edit file")),9,sa))}});function la(e){var t;switch(null===(t=e.format)||void 0===t||null===(t=t.trim())||void 0===t?void 0:t.toLowerCase()){case"txt":case"pdf":case"rtf":case"odt":case"doc":case"docx":case"epub":return"/_themes/gouvfr/assets/documentation.svg";case"json":case"sql":case"xml":case"xsd":case"shp":case"kml":case"kmz":case"gpx":case"shx":case"ovr":case"gpkg":case"grib2":case"dbf":case"prj":case"sqlite":case"db":case"sbn":case"sbx":case"cpg":case"lyr":case"owl":case"dxf":case"ics":case"rdf":case"ttl":case"n3":return"/_themes/gouvfr/assets/code.svg";case"tar":case"gz":case"tgz":case"rar":case"zip":case"7z":case"xz":case"bz2":return"/_themes/gouvfr/assets/archive.svg";case"url":return"/_themes/gouvfr/assets/link2.svg";case"csv":case"ods":case"xls":case"xlsx":case"parquet":case"csv.gz":return"/_themes/gouvfr/assets/table.svg";case"geojson":return"/_themes/gouvfr/assets/map.svg";case"ogc:wfs":case"ogc:wms":case"wfs":case"wms":return"/_themes/gouvfr/assets/globe.svg";default:return null}}function ca(e){return"resource-"+e.id+"-title"}const da={class:"fr-icon-svg flex items-center"},ua=["src"],ha=r({__name:"ResourceIcon",props:{resource:{}},setup(e){const t=e,n=s((()=>la(t.resource)||"/_themes/gouvfr/assets/file.svg"));return(e,t)=>(a(),l("div",da,[w("img",{src:n.value,alt:""},null,8,ua)]))}}),pa={key:0,class:"inline-flex fr-mb-0 align-items-baseline fr-text--xs"},fa={class:"flex justify-between border-bottom"},ma={class:"fr-text--sm fr-my-0 fr-p-2v"},ga=["onClick","title"],va={class:"fr-p-3v"},ya={key:0},ba={key:1},wa={key:2},xa={key:3,class:"text-default-warning flex items-center fr-mt-4v"},ka={key:4,class:"text-default-warning flex items-center fr-mt-4v"},Ca={key:5,class:"text-default-warning flex items-center fr-mt-4v"},_a={key:6,class:"w-100 text-align-right fr-mt-5v",target:"_blank"},Sa=["href"],Ma={class:"fr-mr-1v text-grey-380"},Ta={class:"flex items-center bg-error-950 rounded-sm"},Oa={class:"fr-tag fr-tag--sm"},Da={key:0,class:"flex items-center padding-sm"},Ea={key:1,class:"flex items-center text-warning-425 padding-sm"},Aa=r({__name:"SchemaBadge",props:{resource:{}},setup(e){const t=e,{t:n}=Re(),r=y(null);_((async()=>{r.value=await Ut()}));const i=s((()=>r.value?function(e,t){return e.find((e=>(null==t?void 0:t.name)===e.name))||null}(r.value,t.resource.schema):null)),o=s((()=>i.value?function(e,t){if(!e.schema||!e.schema.name)return null;let n={schema_name:`schema-datagouvfr.${e.schema.name}`};if(e.schema&&e.schema.version){var r;const i=e.schema.version,o=null===(r=t.versions.find((e=>e.version_name===i)))||void 0===r?void 0:r.schema_url;o&&(n={schema_url:o})}const i=new URLSearchParams({input:"url",url:e.url,"header-case":"on",...n}).toString();return`${ve.schema_validata_url}/table-schema?${i}`}(t.resource,i.value):null)),c=s((()=>i.value?function(e){return`${ve.schema_documentation_url}${e}/`}(i.value.name):null)),d=s((()=>t.resource.schema?t.resource.schema.name||t.resource.schema.url:null)),p=s((()=>t.resource.extras["validation-report:errors"]||[])),m=s((()=>p.value.filter((e=>[""].includes(e.code))))),v=s((()=>p.value.filter((e=>["#body","#cell","#content","#row","#table"].some((t=>e.tags.includes(t))))))),k=s((()=>p.value.filter((e=>["#head","#structure","#header"].some((t=>e.tags.includes(t))))))),C=s((()=>0===p.value.length?"ok":p.value.length===m.value.length?"warnings":"ko"));return(e,t)=>d.value?(a(),l("span",pa,[b(Qi,{position:"right",noMargin:"",class:"relative z-2"},{toggletip:f((({close:r})=>[w("div",fa,[w("h5",ma,x(e.$t("Data schema")),1),w("button",{type:"button",onClick:r,title:h(n)("Close"),class:"border-left close-button flex items-center justify-center"},"×",8,ga)]),w("div",va,["ok"===C.value?(a(),l("div",ya,[R(x(h(n)("This file is valid for the shema:"))+" ",1),(a(),u(W(c.value?"a":"span"),{href:c.value,class:"fr-link fr-text--sm"},{default:f((()=>[R(x(d.value),1)])),_:1},8,["href"])),t[0]||(t[0]=R(". "))])):g("",!0),"warnings"===C.value?(a(),l("div",ba,[R(x(h(n)("This file is valid for the shema:"))+" ",1),(a(),u(W(c.value?"a":"span"),{href:c.value,class:"fr-link fr-text--sm"},{default:f((()=>[R(x(d.value),1)])),_:1},8,["href"])),R(". "+x(h(n)("But its compliance could be improved.")),1)])):g("",!0),"ko"===C.value?(a(),l("div",wa,[R(x(h(n)("This file indicates to follow the schema:"))+" ",1),(a(),u(W(c.value?"a":"span"),{href:c.value,class:"fr-link fr-text--sm"},{default:f((()=>[R(x(d.value),1)])),_:1},8,["href"])),R(". "+x(h(n)("But is not compliant.")),1)])):g("",!0),m.value.length?(a(),l("div",xa,[t[1]||(t[1]=w("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),w("span",null,x(m.value.length)+" "+x(h(n)("advices")),1)])):g("",!0),k.value.length?(a(),l("div",ka,[t[2]||(t[2]=w("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),w("span",null,x(k.value.length)+" "+x(h(n)("structure errors")),1)])):g("",!0),v.value.length?(a(),l("div",Ca,[t[3]||(t[3]=w("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),w("span",null,x(v.value.length)+" "+x(h(n)("body errors")),1)])):g("",!0),o.value?(a(),l("div",_a,[w("a",{href:o.value},x(h(n)("See validation report")),9,Sa)])):g("",!0)])])),_:1}),w("span",Ma,x(h(n)("Schema:")),1),w("span",Ta,[w("span",Oa,x(d.value),1),"warnings"===C.value?(a(),l("span",Da,[t[4]||(t[4]=w("span",{class:"fr-icon-alert-line fr-icon--sm fr-mr-1v"},null,-1)),w("span",null,x(h(n)("Invalid")),1)])):g("",!0),"ko"===C.value?(a(),l("span",Ea,[t[5]||(t[5]=w("span",{class:"fr-icon-error-line fr-icon--sm fr-mr-1v"},null,-1)),w("span",null,x(h(n)("Invalid")),1)])):g("",!0)])])):g("",!0)}}),Na=hn(Aa,[["__scopeId","data-v-bf96ce2f"]]),Pa={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},La={key:0,class:"text-overflow-ellipsis"},Ra=r({__name:"DescriptionDetails",props:{withEllipsis:{type:Boolean,default:!0}},setup:e=>(e,t)=>(a(),l("dd",Pa,[e.withEllipsis?(a(),l("div",La,[d(e.$slots,"default")])):d(e.$slots,"default",{key:1})]))}),Ia={class:"fr-my-0"};const $a=hn({},[["render",function(e,t){return a(),l("dl",Ia,[d(e.$slots,"default")])}]]),za={class:"fr-text--sm fr-my-0 fr-text--bold"};const Ba=hn({},[["render",function(e,t){return a(),l("dt",za,[d(e.$slots,"default")])}]]),Fa={class:"flex gap-3rem flex-col-on-small"},Va={class:"code"},ja=["href"],Ha={class:"code"},Wa=["href"],qa={class:"code"},Ua={class:"code"},Ya={class:"code text-overflow-ellipsis"},Ka=r({__name:"Metadata",props:{resource:{}},setup(e){const t=e,n=s((()=>Object.keys(t.resource.extras).length)),r=s((()=>ca(t.resource))),{t:i}=Re();return(e,t)=>(a(),l("div",null,[w("div",Fa,[b($a,{class:"flex-1"},{default:f((()=>[b(Ba,null,{default:f((()=>[R(x(h(i)("URL"))+" ",1),b(pn,{label:e.$t("Copy URL"),"copied-label":e.$t("URL copied!"),text:e.resource.url,"aria-describedby":r.value},null,8,["label","copied-label","text","aria-describedby"])])),_:1}),b(Ra,{"with-ellipsis":!1},{default:f((()=>[w("code",Va,[w("a",{href:e.resource.url},[b(h(we),{"max-lines":1,autoresize:!0,text:e.resource.url},null,8,["text"])],8,ja)])])),_:1}),b(Ba,null,{default:f((()=>[R(x(h(i)("Stable URL"))+" ",1),b(pn,{label:e.$t("Copy stable URL"),"copied-label":e.$t("Stable URL copied!"),text:e.resource.latest,"aria-describedby":r.value},null,8,["label","copied-label","text","aria-describedby"])])),_:1}),b(Ra,{"with-ellipsis":!1},{default:f((()=>[w("code",Ha,[w("a",{href:e.resource.latest},[b(h(we),{"max-lines":1,autoresize:!0,text:e.resource.latest},null,8,["text"])],8,Wa)])])),_:1}),b(Ba,null,{default:f((()=>[R(x(h(i)("Identifier"))+" ",1),b(pn,{label:e.$t("Copy ID"),"copied-label":e.$t("ID copied!"),text:e.resource.id,"aria-describedby":r.value},null,8,["label","copied-label","text","aria-describedby"])])),_:1}),b(Ra,{"with-ellipsis":!1},{default:f((()=>[w("code",qa,[b(h(we),{"max-lines":1,autoresize:!0,text:e.resource.id},null,8,["text"])])])),_:1}),e.resource.checksum?(a(),l(L,{key:0},[b(Ba,null,{default:f((()=>[R(x(e.resource.checksum.type)+" ",1),b(pn,{label:e.$t("Copy checksum"),"copied-label":e.$t("Checksum copied!"),text:e.resource.checksum.value,"aria-describedby":r.value},null,8,["label","copied-label","text","aria-describedby"])])),_:1}),b(Ra,{"with-ellipsis":!1},{default:f((()=>[w("code",Ua,[b(h(we),{"max-lines":1,autoresize:!0,text:e.resource.checksum.value},null,8,["text"])])])),_:1})],64)):g("",!0)])),_:1}),b($a,{style:{"flex-shrink":"0"}},{default:f((()=>[b(Ba,null,{default:f((()=>[R(x(h(i)("Created on")),1)])),_:1}),b(Ra,null,{default:f((()=>[R(x(h(He)(e.resource.created_at)),1)])),_:1}),b(Ba,null,{default:f((()=>[R(x(h(i)("Modified on")),1)])),_:1}),b(Ra,null,{default:f((()=>[R(x(h(He)(e.resource.last_modified)),1)])),_:1})])),_:1}),b($a,{style:{"flex-shrink":"0"}},{default:f((()=>[e.resource.filesize?(a(),l(L,{key:0},[b(Ba,null,{default:f((()=>[R(x(h(i)("Size")),1)])),_:1}),b(Ra,null,{default:f((()=>[R(x(h(We)(e.resource.filesize)),1)])),_:1})],64)):g("",!0),e.resource.mime?(a(),l(L,{key:1},[b(Ba,null,{default:f((()=>[R(x(h(i)("Type")),1)])),_:1}),b(Ra,null,{default:f((()=>[R(x(h(qe)(e.resource.type)),1)])),_:1})],64)):g("",!0),e.resource.mime?(a(),l(L,{key:2},[b(Ba,null,{default:f((()=>[R(x(h(i)("MIME Type")),1)])),_:1}),b(Ra,null,{default:f((()=>[w("code",Ya,x(e.resource.mime),1)])),_:1})],64)):g("",!0)])),_:1})]),w("div",null,[n.value?(a(),u(ts,{key:0,class:"fr-pt-3w fr-mt-3w border-top border-default-grey","button-text":h(i)("See extras"),"title-text":h(i)("Resource Extras"),"title-level":"h5",extra:e.resource.extras},null,8,["button-text","title-text","extra"])):g("",!0)])]))}}),Ja=hn(Ka,[["__scopeId","data-v-f2a0bf07"]]),Ga=r({__name:"TabGroup",props:{size:{default:"md"}},setup:e=>(e,t)=>(a(),u(h(Ui),{as:"div",class:v({"tabs-sm":"sm"===e.size})},{default:f((()=>[d(e.$slots,"default")])),_:3},8,["class"]))}),Xa=hn(r({__name:"TabList",setup:e=>(e,t)=>(a(),u(h(Yi),{class:"fr-segmented__elements"},{default:f((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3}))}),[["__scopeId","data-v-999cc2d0"]]),Za={class:"inner"},Qa=hn(r({__name:"Tab",setup:e=>(e,t)=>(a(),u(h(Ki),{as:"template"},{default:f((({selected:t})=>[w("button",{class:v(["fr-segmented__element",{selected:t}])},[w("div",Za,[d(e.$slots,"default",{},void 0,!0)])],2)])),_:3}))}),[["__scopeId","data-v-80aca752"]]),el=r({__name:"TabPanels",setup:e=>(e,t)=>(a(),u(h(Ji),null,{default:f((()=>[d(e.$slots,"default")])),_:3}))}),tl=r({__name:"TabPanel",setup:e=>(e,t)=>(a(),u(h(Gi),null,{default:f((()=>[d(e.$slots,"default")])),_:3}))});function nl(e){var t;null===(t=globalThis._paq)||void 0===t||t.push(["trackEvent",...e])}const rl={class:"flex items-center fr-mb-1v"},il=["id"],ol=["aria-expanded"],sl={class:"text-grey-380 subheaders-infos"},al={class:"fr-text--xs fr-mb-0 dash-after"},ll={key:0,class:"fr-text--xs fr-mb-0 dash-after"},cl={class:"hidden show-on-small"},dl={key:0},ul=["aria-label"],hl={class:"hidden show-on-small"},pl={key:0,class:"fr-mb-0 fr-mt-1v fr-text--xs text-grey-380"},fl=["href"],ml={class:"flex items-center fr-ml-4v buttons"},gl={key:0,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},vl=["href","title","aria-describedby"],yl={key:1,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},bl=["id","data-clipboard-text","aria-describedby"],wl={key:2,class:"fr-col-auto fr-ml-3v fr-m-0"},xl=["href","title","aria-describedby"],kl={class:"fr-sr-only"},Cl={key:3,class:"fr-col-auto fr-ml-3v fr-m-0 z-2"},_l=["aria-labelledby"],Sl={class:"fr-pl-4v fr-pr-4v fr-pb-4v"},Ml={key:0},Tl={key:1,class:"fr-pl-4v fr-pr-4v"},Ol=["innerHTML"],Dl={key:2,class:"fr-pl-4v fr-pr-4v"},El={key:3,class:"fr-pl-4v fr-pr-4v"},Al={key:4,class:"fr-pl-4v fr-pr-4v"},Nl={class:"fr-pl-0"},Pl={key:0,class:"font-bold fr-text--sm fr-mb-0"},Ll={key:1,class:"font-bold fr-text--sm fr-mb-0"},Rl={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},Il={key:0},$l=["href"],zl={key:1},Bl=["href"],Fl={key:0},Vl={class:"font-bold fr-text--sm fr-mb-0"},jl={class:"fr-text--sm fr-ml-0 fr-mt-0 fr-mb-2w text-mention-grey h-4w fr-grid-row fr-grid-row--middle"},Hl=["href"],Wl={key:0},ql={key:5,class:"fr-pl-4v fr-pr-4v"},Ul=r({__name:"ResourceAccordion",props:{datasetId:{},expandedOnMount:{type:Boolean,default:!1},isCommunityResource:{type:Boolean,default:!1},resource:{},canEdit:{type:Boolean,default:!1}},setup(e){xe(sn,rn);const t=["ogc:wfs","ogc:wms","wfs","wms"],r=e,i=Y((()=>Ie((()=>n.import("./Swagger-legacy.6.2.4.js")),void 0))),{t:o}=Re(),c=s((()=>ve.tabular_api_url&&r.resource.extras["analysis:parsing:finished_at"]&&!r.resource.extras["analysis:parsing:error"]&&(ve.tabular_allow_remote||"file"===r.resource.filetype))),d=s((()=>la(r.resource)?r.resource.format:o("File"))),p=s((()=>t.includes(r.resource.format))),m=y(r.expandedOnMount),k=()=>{m.value=!m.value,m.value?nl(["Open resource",r.resource.id]):nl(["Close resource",r.resource.id])},C=s((()=>{let e=[];return c.value&&e.push({key:"data",label:o("Data")}),r.resource.description&&e.push({key:"description",label:o("Description")}),c.value&&e.push({key:"data-structure",label:o("Data structure")}),e.push({key:"metadata",label:o("Metadata")}),e.push({key:"downloads",label:o("Downloads")}),c.value&&e.push({key:"swagger",label:o("Swagger")}),e})),_=e=>{const t=C.value[e];nl(["View resource tab",r.resource.id,t.label]),"data"===t.key&&nl(["Show preview",r.resource.id]),"data-structure"===t.key&&nl(["Show data structure",r.resource.id])},S=s((()=>r.isCommunityResource?r.resource:null)),M=uo(S.value),T=r.resource.last_modified,O=r.resource.extras&&"check:available"in r.resource.extras&&!1===r.resource.extras["check:available"],D=O?o("The {certifier} robot failed to access this file - Download file as {format}",{certifier:ve.title,format:d.value}):o("Download file as {format}",{format:d.value}),E=s((()=>`${window.location.origin}${window.location.pathname}#/${r.isCommunityResource?"community-resources":"resources"}/${r.resource.id}`)),A="resource-"+r.resource.id,N="resource-"+r.resource.id+"-header",P=ca(r.resource);return(e,t)=>(a(),l("div",{class:v(["border border-default-grey",{"fr-pb-4v":m.value}])},[w("header",{class:"fr-p-4v flex items-center justify-between relative",id:N},[w("div",null,[w("div",rl,[w("h4",{class:"fr-m-0",id:h(P)},[w("button",{type:"button",onClick:k,class:"fr-p-0 flex items-center","data-testid":"expand-button","aria-expanded":m.value},[b(ha,{resource:e.resource,class:"fr-icon--xs fr-mr-1v"},null,8,["resource"]),w("span",{class:v({"font-bold":m.value})},[b(h(we),{"max-lines":1,text:e.resource.title||h(o)("Nameless file")},null,8,["text"])],2),t[0]||(t[0]=w("span",{class:"absolute inset-0 z-1"},null,-1))],8,ol)],8,il),b(pn,{label:e.$t("Copy link"),"copied-label":e.$t("Link copied!"),text:E.value,class:"z-2"},null,8,["label","copied-label","text"])]),w("div",sl,[b(Na,{resource:e.resource,class:"dash-after"},null,8,["resource"]),w("span",al,x(h(o)("Updated {date}",{date:h(ze)(h(T))})),1),e.resource.format?(a(),l("span",ll,[w("span",cl,x(h(o)("Format")),1),R(" "+x(e.resource.format.trim().toLowerCase())+" ",1),e.resource.filesize?(a(),l("span",dl,"("+x(h(We)(e.resource.filesize))+")",1)):g("",!0)])):g("",!0),w("span",{class:"inline-flex items-center fr-text--xs fr-mb-0","aria-label":h(o)("{n} downloads",e.resource.metrics.views)},[t[1]||(t[1]=w("span",{class:"fr-icon-download-line fr-icon--xs fr-mr-1v"},null,-1)),w("span",null,[R(x(h(Be)(e.resource.metrics.views))+" ",1),w("span",hl,x(h(o)("downloads")),1)])],8,ul)]),S.value?(a(),l("p",pl,[R(x(h(o)("From"))+" ",1),S.value.organization?(a(),l("a",{key:0,class:"fr-link fr-text--xs",href:S.value.organization.page},[b(br,{organization:S.value.organization},null,8,["organization"])],8,fl)):h(M)?(a(),l(L,{key:1},[R(x(h(M)),1)],64)):g("",!0)])):g("",!0)]),w("div",ml,["url"===e.resource.format?(a(),l("p",gl,[w("a",{href:e.resource.latest,title:h(o)("File link - opens a new window"),"aria-describedby":h(P),rel:"ugc nofollow noopener",target:"_blank",class:"fr-btn fr-btn--sm"},x(e.$t("Visit")),9,vl)])):p.value?(a(),l("p",yl,[w("button",{id:e.resource.id+"-copy","data-clipboard-text":e.resource.url,"aria-describedby":h(P),class:"fr-btn fr-btn--sm"},[w("span",null,[b(h(ke),{height:16,width:16,name:"ri-file-copy-line",class:"copy-icon fr-mr-2v"})]),R(" "+x(h(o)("Copy link")),1)],8,bl)])):(a(),l("p",wl,[w("a",{href:e.resource.latest,rel:"ugc nofollow noopener",title:h(D),download:"",class:"relative text-transform-uppercase fr-btn fr-btn--sm matomo_download z-2","aria-describedby":h(P)},[h(O)?(a(),u(h(ke),{key:0,height:16,width:16,name:"ri-file-warning-line",class:"fr-mr-2v"})):(a(),u(h(ke),{key:1,height:16,width:16,name:"ri-download-line",class:"fr-mr-2v"})),w("span",kl,x(h(o)("Download file as ")),1),R(x(d.value),1)],8,xl)])),e.canEdit?(a(),l("p",Cl,[b(aa,{"dataset-id":e.datasetId,resource:e.resource,"is-community-resource":e.isCommunityResource},null,8,["dataset-id","resource","is-community-resource"])])):g("",!0),w("div",{class:v(["fr-icon--sm fr-ml-4v",{"fr-icon-arrow-up-s-line":m.value,"fr-icon-arrow-down-s-line":!m.value}])},null,2)])]),m.value?(a(),l("section",{key:0,"aria-labelledby":h(P),id:A},[b(Ga,{size:"sm",onChange:_},{default:f((()=>[w("div",Sl,[b(Xa,{style:{"max-width":"100%","overflow-y":"auto"}},{default:f((()=>[(a(!0),l(L,null,q(C.value,(e=>(a(),u(Qa,{key:e.key},{default:f((()=>[R(x(e.label),1)])),_:2},1024)))),128))])),_:1})]),b(el,null,{default:f((()=>[(a(!0),l(L,null,q(C.value,(n=>(a(),u(tl,{key:n.key},{default:f((()=>["data"===n.key?(a(),l("div",Ml,[b(oa,{resource:e.resource},null,8,["resource"])])):g("",!0),"description"===n.key?(a(),l("div",Tl,[w("div",{class:"fr-mt-0 markdown fr-text--sm text-mention-grey",innerHTML:h(Ue)(e.resource.description||"")},null,8,Ol)])):g("",!0),"data-structure"===n.key?(a(),l("div",Dl,[c.value?(a(),u(Is,{key:0,resource:e.resource},null,8,["resource"])):g("",!0)])):g("",!0),"metadata"===n.key?(a(),l("div",El,[b(Ja,{resource:e.resource},null,8,["resource"])])):g("",!0),"downloads"===n.key?(a(),l("div",Al,[w("dl",Nl,["url"===e.resource.format?(a(),l("dt",Pl,x(e.$t("Original URL")),1)):(a(),l("dt",Ll,x(e.$t("Original format")),1)),w("dd",Rl,["url"===e.resource.format?(a(),l("span",Il,[w("a",{href:e.resource.latest,class:"fr-link no-icon-after",rel:"ugc nofollow noopener",target:"_blank"},[b(h(we),{"auto-resize":!0,"max-lines":1,text:e.resource.url},{after:f((()=>t[2]||(t[2]=[w("span",{class:"fr-ml-1v fr-icon-external-link-line fr-icon--sm"},null,-1)]))),_:1},8,["text"])],8,$l)])):(a(),l("span",zl,[t[3]||(t[3]=w("span",{class:"text-blue-400 fr-icon-download-line fr-icon--sm fr-mr-1v fr-mt-1v"},null,-1)),w("a",{href:e.resource.latest,class:"fr-link",rel:"ugc nofollow noopener"},[w("span",null,[R(x(e.$t("Format {format}",{format:e.resource.format})),1),e.resource.filesize?(a(),l("span",Fl," - "+x(h(We)(e.resource.filesize)),1)):g("",!0)])],8,Bl)])),b(pn,{label:e.$t("Copy link"),"copied-label":e.$t("Link copied!"),text:e.resource.latest,class:"relative"},null,8,["label","copied-label","text"])]),e.resource.extras["analysis:parsing:parquet_url"]?(a(),l(L,{key:2},[w("dt",Vl,x(e.$t("Auto-generated formats from {platform}",{platform:h(ve).title})),1),w("dd",jl,[w("span",null,[t[4]||(t[4]=w("span",{class:"text-blue-400 fr-icon-download-line fr-icon--sm fr-mr-1v fr-mt-1v"},null,-1)),w("a",{href:e.resource.extras["analysis:parsing:parquet_url"],class:"fr-link",rel:"ugc nofollow noopener"},[w("span",null,[R(x(e.$t("Format {format}",{format:"parquet"})),1),e.resource.extras["analysis:parsing:parquet_size"]?(a(),l("span",Wl," - "+x(h(We)(e.resource.extras["analysis:parsing:parquet_size"])),1)):g("",!0)])],8,Hl)]),b(pn,{label:e.$t("Copy link"),"copied-label":e.$t("Link copied!"),text:e.resource.extras["analysis:parsing:parquet_url"],class:"relative"},null,8,["label","copied-label","text"])])],64)):g("",!0)])])):g("",!0),"swagger"===n.key?(a(),l("div",ql,[w("div",null,x(h(o)("Swagger automatically generated by data.gouv.fr. This swagger allows you to query data by API by filtering it by column value.")),1),c.value?(a(),u(h(i),{key:0,url:`${h(ve).tabular_api_url}/api/resources/${r.resource.id}/swagger/`},null,8,["url"])):g("",!0)])):g("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})],8,_l)):g("",!0)],2))}}),Yl=hn(Ul,[["__scopeId","data-v-1eb41db2"]]),Kl=r({__name:"Loader",setup:e=>(e,t)=>(a(),u(h(zt),{width:1200,height:88,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:f((()=>t[0]||(t[0]=[w("rect",{x:"20",y:"24",rx:"4",ry:"4",width:"16",height:"16"},null,-1),w("rect",{x:"52",y:"20",rx:"4",ry:"4",width:"536",height:"22"},null,-1),w("rect",{x:"52",y:"52",rx:"4",ry:"4",width:"374",height:"16"},null,-1),w("rect",{x:"1052",y:"30",rx:"4",ry:"4",width:"80",height:"20"},null,-1),w("rect",{x:"1154",y:"20",rx:"20",ry:"20",width:"40",height:"40"},null,-1)]))),_:1}))});const Jl={class:"fr-card fr-card--no-icon fr-enlarge-link"},Gl={class:"fr-card__body"},Xl={class:"fr-card__content fr-px-2w fr-py-1v"},Zl={class:"fr-card__title fr-text--md fr-mt-1v fr-mb-0"},Ql={class:"fr-card__desc fr-mt-0 text-mention-grey"},ec={class:"fr-text--sm fr-mb-0 flex"},tc={key:0,class:"not-enlarged"},nc={class:"dash-before-sm text-overflow-ellipsis"},rc={class:"fr-grid-row fr-grid-row--middle"},ic={class:"fr-text--sm fr-my-0 dash-after-sm"},oc=["aria-label"],sc=["aria-label"],ac={class:"fr-card__header"},lc={class:"fr-card__img"},cc={key:0,class:"fr-badges-group"},dc={key:0},uc={class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380"},hc={key:1},pc={class:"fr-badge fr-badge--sm fr-badge--mention-grey text-grey-380"},fc=r({__name:"ReuseCard",props:{reuse:{},reuseUrl:{},organizationUrl:{}},setup(e){const t=e,{t:n}=Re(),r=uo(t.reuse),{label:i}=function(e){const t=Tr((async()=>{const t=k(e);return function(e,t){const n=e.find((e=>e.id===t));return n?n.label:""}(await Wt(),t)}),"");return{label:t}}((()=>t.reuse.type));return(e,t)=>(a(),l("article",Jl,[w("div",Gl,[w("div",Xl,[w("h3",Zl,[b(Kt,{class:"text-grey-500",to:e.reuseUrl},{default:f((()=>[b(h(we),{"auto-resize":!0,text:e.reuse.title,"max-lines":1},null,8,["text"])])),_:1},8,["to"])]),w("div",Ql,[w("p",ec,[e.reuse.organization?(a(),l("span",tc,[e.organizationUrl?(a(),u(Kt,{key:0,class:"fr-link",to:e.organizationUrl},{default:f((()=>[b(h(br),{organization:e.reuse.organization},null,8,["organization"])])),_:1},8,["to"])):(a(),u(h(br),{key:1,organization:e.reuse.organization},null,8,["organization"]))])):(a(),u(h(we),{key:1,class:"not-enlarged fr-mr-1v","auto-resize":!0,text:h(r),"max-lines":1},null,8,["text"])),w("span",nc,x(h(n)("published {date}",{date:h(ze)(e.reuse.created_at)})),1)]),w("div",rc,[w("p",ic,x(h(i)),1),w("p",{class:"fr-text--sm fr-my-0","aria-label":h(n)("{n} views",e.reuse.metrics.views)},[t[0]||(t[0]=w("span",{class:"fr-icon-eye-line fr-icon--xs fr-px-1v","aria-hidden":"true"},null,-1)),R(x(h(Be)(e.reuse.metrics.views)),1)],8,oc),w("p",{class:"fr-text--sm fr-my-0","aria-label":h(n)("{n} followers",e.reuse.metrics.followers)},[t[1]||(t[1]=w("span",{class:"fr-icon-star-line fr-icon--xs fr-px-1v","aria-hidden":"true"},null,-1)),R(x(h(Be)(e.reuse.metrics.followers)),1)],8,sc)])])])]),w("div",ac,[w("div",lc,[b(Lr,{class:"fr-responsive-img reuse-ratio",alt:"",type:"reuse",src:e.reuse.image,size:320},null,8,["src"])]),e.reuse.private||e.reuse.archived?(a(),l("ul",cc,[e.reuse.private?(a(),l("li",dc,[w("p",uc,[t[2]||(t[2]=w("span",{class:"fr-icon-lock-line fr-icon--xs"},null,-1)),R(" "+x(h(n)("Draft")),1)])])):g("",!0),e.reuse.archived?(a(),l("li",hc,[w("p",pc,[t[3]||(t[3]=w("span",{class:"fr-icon-lock-line fr-icon--xs"},null,-1)),R(" "+x(h(n)("Archived")),1)])])):g("",!0)])):g("",!0)])]))}}),mc=hn(fc,[["__scopeId","data-v-81c3bbfa"]]),gc=r({__name:"Well",props:{type:{default:"primary"},color:{default:"grey-100"},weight:{default:"semi-bold"}},setup(e){const t=e,n=s((()=>`well${"primary"===t.type?"":"-"+t.type}-${t.color}`)),r=s((()=>`fr-text--${t.weight}`)),i=s((()=>r.value+" "+n.value));return(e,t)=>(a(),l("div",{class:v(["well",i.value])},[d(e.$slots,"default")],2))}});
/*!
       * Chart.js v4.2.1
       * https://www.chartjs.org
       * (c) 2023 Chart.js Contributors
       * Released under the MIT License
       */
function vc(){}const yc=(()=>{let e=0;return()=>e++})();function bc(e){return null==e}function wc(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function xc(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function kc(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function Cc(e,t){return kc(e)?e:t}function _c(e,t){return void 0===e?t:e}const Sc=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Mc(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function Tc(e,t,n,r){let i,o,s;if(wc(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(xc(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)t.call(n,e[s[i]],s[i])}function Oc(e,t){let n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Dc(e){if(wc(e))return e.map(Dc);if(xc(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=Dc(e[n[i]]);return t}return e}function Ec(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Ac(e,t,n,r){if(!Ec(e))return;const i=t[e],o=n[e];xc(i)&&xc(o)?Nc(i,o,r):t[e]=Dc(o)}function Nc(e,t,n){const r=wc(t)?t:[t],i=r.length;if(!xc(e))return e;const o=(n=n||{}).merger||Ac;let s;for(let a=0;a<i;++a){if(s=r[a],!xc(s))continue;const t=Object.keys(s);for(let r=0,i=t.length;r<i;++r)o(t[r],e,s,n)}return e}function Pc(e,t){return Nc(e,t,{merger:Lc})}function Lc(e,t,n){if(!Ec(e))return;const r=t[e],i=n[e];xc(r)&&xc(i)?Pc(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Dc(i))}const Rc={"":e=>e,x:e=>e.x,y:e=>e.y};function Ic(e,t){const n=Rc[t]||(Rc[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function $c(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zc=e=>void 0!==e,Bc=e=>"function"==typeof e,Fc=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Vc=Math.PI,jc=2*Vc,Hc=jc+Vc,Wc=Number.POSITIVE_INFINITY,qc=Vc/180,Uc=Vc/2,Yc=Vc/4,Kc=2*Vc/3,Jc=Math.log10,Gc=Math.sign;function Xc(e,t,n){return Math.abs(e-t)<n}function Zc(e){const t=Math.round(e);e=Xc(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Jc(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Qc(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ed(e,t,n){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function td(e){return e*(Vc/180)}function nd(e){return e*(180/Vc)}function rd(e){if(!kc(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function id(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*Vc&&(o+=jc),{angle:o,distance:i}}function od(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sd(e,t){return(e-t+Hc)%jc-Vc}function ad(e){return(e%jc+jc)%jc}function ld(e,t,n,r){const i=ad(e),o=ad(t),s=ad(n),a=ad(o-i),l=ad(s-i),c=ad(i-o),d=ad(i-s);return i===o||i===s||r&&o===s||a>l&&c<d}function cd(e,t,n){return Math.max(t,Math.min(n,e))}function dd(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function ud(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const hd=(e,t,n,r)=>ud(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),pd=(e,t,n)=>ud(e,n,(r=>e[r][t]>=n));const fd=["push","pop","shift","splice","unshift"];function md(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(fd.forEach((t=>{delete e[t]})),delete e._chartjs)}function gd(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}const vd="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function yd(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,vd.call(window,(()=>{r=!1,e.apply(t,n)})))}}const bd=e=>"start"===e?"left":"end"===e?"right":"center",wd=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function xd(e,t,n){const r=t.length;let i=0,o=r;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:d,minDefined:u,maxDefined:h}=s.getUserBounds();u&&(i=cd(Math.min(hd(a,s.axis,c).lo,n?r:hd(t,l,s.getPixelForValue(c)).lo),0,r-1)),o=h?cd(Math.max(hd(a,s.axis,d,!0).hi+1,n?0:hd(t,l,s.getPixelForValue(d),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function kd(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const Cd=e=>0===e||1===e,_d=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*jc/n),Sd=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*jc/n)+1,Md={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Uc),easeOutSine:e=>Math.sin(e*Uc),easeInOutSine:e=>-.5*(Math.cos(Vc*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Cd(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Cd(e)?e:_d(e,.075,.3),easeOutElastic:e=>Cd(e)?e:Sd(e,.075,.3),easeInOutElastic(e){const t=.1125;return Cd(e)?e:e<.5?.5*_d(2*e,t,.45):.5+.5*Sd(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Md.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Md.easeInBounce(2*e):.5*Md.easeOutBounce(2*e-1)+.5};function Td(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Od(e){return Td(e)?e:new Ye(e)}function Dd(e){return Td(e)?e:new Ye(e).saturate(.5).darken(.1).hexString()}const Ed=["x","y","borderWidth","radius","tension"],Ad=["color","borderColor","backgroundColor"];const Nd=new Map;function Pd(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Nd.get(n);return r||(r=new Intl.NumberFormat(e,t),Nd.set(n,r)),r}(t,n).format(e)}const Ld={values:e=>wc(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=Jc(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Pd(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Jc(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Ld.numeric.call(this,e,t,n):""}};var Rd={formatters:Ld};const Id=Object.create(null),$d=Object.create(null);function zd(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Bd(e,t,n){return"string"==typeof t?Nc(zd(e,t),n):Nc(zd(e,""),t)}class Fd{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Dd(t.backgroundColor),this.hoverBorderColor=(e,t)=>Dd(t.borderColor),this.hoverColor=(e,t)=>Dd(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Bd(this,e,t)}get(e){return zd(this,e)}describe(e,t){return Bd($d,e,t)}override(e,t){return Bd(Id,e,t)}route(e,t,n,r){const i=zd(this,e),o=zd(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=o[r];return xc(e)?Object.assign({},t,e):_c(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Vd=new Fd({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ad},numbers:{type:"number",properties:Ed}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function jd(e,t,n,r,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r}function Hd(e,t,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const a=n.length;let l,c,d,u,h;for(l=0;l<a;l++)if(u=n[l],null!=u&&!0!==wc(u))s=jd(e,i,o,s,u);else if(wc(u))for(c=0,d=u.length;c<d;c++)h=u[c],null==h||wc(h)||(s=jd(e,i,o,s,h));e.restore();const p=o.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return s}function Wd(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function qd(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Ud(e,t,n,r){Yd(e,t,n,r,null)}function Yd(e,t,n,r,i){let o,s,a,l,c,d,u,h;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*qc;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,r,i/2,m,0,0,jc):e.arc(n,r,m,0,jc),e.closePath();break;case"triangle":d=i?i/2:m,e.moveTo(n+Math.sin(g)*d,r-Math.cos(g)*m),g+=Kc,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*m),g+=Kc,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,s=Math.cos(g+Yc)*l,u=Math.cos(g+Yc)*(i?i/2-c:l),a=Math.sin(g+Yc)*l,h=Math.sin(g+Yc)*(i?i/2-c:l),e.arc(n-u,r-a,c,g-Vc,g-Uc),e.arc(n+h,r-s,c,g-Uc,g),e.arc(n+u,r+a,c,g,g+Uc),e.arc(n-h,r+s,c,g+Uc,g+Vc),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,d=i?i/2:l,e.rect(n-d,r-l,2*d,2*l);break}g+=Yc;case"rectRot":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+h,r-s),e.lineTo(n+u,r+a),e.lineTo(n-h,r+s),e.closePath();break;case"crossRot":g+=Yc;case"cross":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"star":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s),g+=Yc,u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"line":s=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Kd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Jd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Gd(e){e.restore()}function Xd(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Zd(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Qd(e,t,n,r,i,o={}){const s=wc(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);bc(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&tu(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),bc(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,r,o.maxWidth)),e.fillText(c,n,r,o.maxWidth),eu(e,n,r,c,o),r+=i.lineHeight;e.restore()}function eu(e,t,n,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,d),e.lineTo(a,d),e.stroke()}}function tu(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function nu(e,t){const{x:n,y:r,w:i,h:o,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-Uc,Vc,!0),e.lineTo(n,r+o-s.bottomLeft),e.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,Vc,Uc,!0),e.lineTo(n+i-s.bottomRight,r+o),e.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,Uc,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-Uc,!0),e.lineTo(n+s.topLeft,r)}const ru=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,iu=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ou(e,t){const n=(""+e).match(ru);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const su=e=>+e||0;function au(e,t){const n={},r=xc(t),i=r?Object.keys(t):t,o=xc(e)?r?n=>_c(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of i)n[s]=su(o(s));return n}function lu(e){return au(e,{top:"y",right:"x",bottom:"y",left:"x"})}function cu(e){return au(e,["topLeft","topRight","bottomLeft","bottomRight"])}function du(e){const t=lu(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function uu(e,t){e=e||{},t=t||Vd.font;let n=_c(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));let r=_c(e.style,t.style);r&&!(""+r).match(iu)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:_c(e.family,t.family),lineHeight:ou(_c(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:_c(e.weight,t.weight),string:""};return i.string=function(e){return!e||bc(e.size)||bc(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function hu(e,t,n,r){let i,o,s,a=!0;for(i=0,o=e.length;i<o;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"==typeof s&&(s=s(t),a=!1),void 0!==n&&wc(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function pu(e,t){return Object.assign(Object.create(e),t)}function fu(e,t=[""],n=e,r,i=(()=>e[0])){zc(r)||(r=Su("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>fu([i,...e],t,n,r)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>bu(n,r,(()=>function(e,t,n,r){let i;for(const o of t)if(i=Su(vu(o,e),n),zc(i))return yu(e,i)?Cu(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Mu(e).includes(t),ownKeys:e=>Mu(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function mu(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:gu(e,r),setContext:t=>mu(e,t,n,r),override:i=>mu(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>bu(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let a=r[t];Bc(a)&&s.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e),t=t(o,s||r),a.delete(e),yu(e,t)&&(t=Cu(i._scopes,i,e,t));return t}(t,a,e,n));wc(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if(zc(o.index)&&r(e))t=t[o.index%t.length];else if(xc(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Cu(r,i,e,l);t.push(mu(n,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable));yu(t,a)&&(a=mu(a,i,o&&o[t],s));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function gu(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Bc(n)?n:()=>n,isIndexable:Bc(r)?r:()=>r}}const vu=(e,t)=>e?e+$c(t):t,yu=(e,t)=>xc(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function bu(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function wu(e,t,n){return Bc(e)?e(t,n):e}const xu=(e,t)=>!0===e?t:"string"==typeof e?Ic(t,e):void 0;function ku(e,t,n,r,i){for(const o of t){const t=xu(n,o);if(t){e.add(t);const o=wu(t._fallback,n,i);if(zc(o)&&o!==n&&o!==r)return o}else if(!1===t&&zc(r)&&n!==r)return null}return!1}function Cu(e,t,n,r){const i=t._rootScopes,o=wu(t._fallback,n,r),s=[...e,...i],a=new Set;a.add(r);let l=_u(a,s,n,o||n,r);return null!==l&&((!zc(o)||o===n||(l=_u(a,s,o,l,r),null!==l))&&fu(Array.from(a),[""],i,o,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(wc(i)&&xc(n))return n;return i||{}}(t,n,r))))}function _u(e,t,n,r,i){for(;n;)n=ku(e,t,n,r,i);return n}function Su(e,t){for(const n of t){if(!n)continue;const t=n[e];if(zc(t))return t}}function Mu(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Tu(e,t,n,r){const{iScale:i}=e,{key:o="r"}=this._parsing,s=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=t[c],s[a]={r:i.parse(Ic(d,o),c)};return s}const Ou=Number.EPSILON||1e-14,Du=(e,t)=>t<e.length&&!e[t].skip&&e[t],Eu=e=>"x"===e?"y":"x";function Au(e,t,n,r){const i=e.skip?t:e,o=t,s=n.skip?t:n,a=od(o,i),l=od(s,o);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:o.x-u*(s.x-i.x),y:o.y-u*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function Nu(e,t="x"){const n=Eu(t),r=e.length,i=Array(r).fill(0),o=Array(r);let s,a,l,c=Du(e,0);for(s=0;s<r;++s)if(a=l,l=c,c=Du(e,s+1),l){if(c){const e=c[t]-l[t];i[s]=0!==e?(c[n]-l[n])/e:0}o[s]=a?c?Gc(i[s-1])!==Gc(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,o,s,a,l,c=Du(e,0);for(let d=0;d<r-1;++d)l=c,c=Du(e,d+1),l&&c&&(Xc(t[d],0,Ou)?n[d]=n[d+1]=0:(i=n[d]/t[d],o=n[d+1]/t[d],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[d]=i*s*t[d],n[d+1]=o*s*t[d])))}(e,i,o),function(e,t,n="x"){const r=Eu(n),i=e.length;let o,s,a,l=Du(e,0);for(let c=0;c<i;++c){if(s=a,a=l,l=Du(e,c+1),!a)continue;const i=a[n],d=a[r];s&&(o=(i-s[n])/3,a[`cp1${n}`]=i-o,a[`cp1${r}`]=d-o*t[c]),l&&(o=(l[n]-i)/3,a[`cp2${n}`]=i+o,a[`cp2${r}`]=d+o*t[c])}}(e,o,t)}function Pu(e,t,n){return Math.max(Math.min(e,n),t)}function Lu(e,t,n,r,i){let o,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Nu(e,i);else{let n=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],l=Au(n,a,e[Math.min(o+1,s-(r?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,o,s,a=Kd(e[0],t);for(n=0,r=e.length;n<r;++n)s=o,o=a,a=n<r-1&&Kd(e[n+1],t),o&&(i=e[n],s&&(i.cp1x=Pu(i.cp1x,t.left,t.right),i.cp1y=Pu(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Pu(i.cp2x,t.left,t.right),i.cp2y=Pu(i.cp2y,t.top,t.bottom)))}(e,n)}function Ru(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Iu(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function $u(e,t,n){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const zu=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Bu=["top","right","bottom","left"];function Fu(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=Bu[i];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Vu=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function ju(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=zu(n),o="border-box"===i.boxSizing,s=Fu(i,"padding"),a=Fu(i,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=r;let s,a,l=!1;if(Vu(i,o,e.target))s=i,a=o;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,n),u=s.left+(d&&a.left),h=s.top+(d&&a.top);let{width:p,height:f}=t;return o&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-u)/p*n.width/r),y:Math.round((c-h)/f*n.height/r)}}const Hu=e=>Math.round(10*e)/10;function Wu(e,t,n,r){const i=zu(e),o=Fu(i,"margin"),s=$u(i.maxWidth,e,"clientWidth")||Wc,a=$u(i.maxHeight,e,"clientHeight")||Wc,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const o=Iu(e);if(o){const e=o.getBoundingClientRect(),s=zu(o),a=Fu(s,"border","width"),l=Fu(s,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=$u(s.maxWidth,o,"clientWidth"),i=$u(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Wc,maxHeight:i||Wc}}(e,t,n);let{width:c,height:d}=l;if("content-box"===i.boxSizing){const e=Fu(i,"border","width"),t=Fu(i,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-o.width),d=Math.max(0,r?c/r:d-o.height),c=Hu(Math.min(c,s,l.maxWidth)),d=Hu(Math.min(d,a,l.maxHeight)),c&&!d&&(d=Hu(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=Hu(Math.floor(d*r))),{width:c,height:d}}function qu(e,t,n){const r=t||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Uu=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(OI){}return e}();function Yu(e,t){const n=function(e,t){return zu(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ku(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Ju(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Gu(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=Ku(e,i,n),a=Ku(i,o,n),l=Ku(o,t,n),c=Ku(s,a,n),d=Ku(a,l,n);return Ku(c,d,n)}function Xu(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Zu(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Qu(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function eh(e){return"angle"===e?{between:ld,compare:sd,normalize:ad}:{between:dd,compare:(e,t)=>e-t,normalize:e=>e}}function th({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n==0,style:i}}function nh(e,t,n){if(!n)return[e];const{property:r,start:i,end:o}=n,s=t.length,{compare:a,between:l,normalize:c}=eh(r),{start:d,end:u,loop:h,style:p}=function(e,t,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=eh(r),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&s(a(t[u%l][r]),i,o);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,v,y=!1,b=null;const w=()=>y||l(i,v,m)&&0!==a(i,v),x=()=>!y||0===a(o,m)||l(o,v,m);for(let k=d,C=d;k<=u;++k)g=t[k%s],g.skip||(m=c(g[r]),m!==v&&(y=l(m,i,o),null===b&&w()&&(b=0===a(m,i)?k:C),null!==b&&x()&&(f.push(th({start:b,end:k,loop:h,count:s,style:p})),b=null),C=k,v=m));return null!==b&&f.push(th({start:b,end:u,loop:h,count:s,style:p})),f}function rh(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const o=nh(r[i],e.points,t);o.length&&n.push(...o)}return n}function ih(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),o=oh(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=n.length,c=[];let d=o,u=t[0].start,h=u;function p(e,t,r,i){const o=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=o;for(;n[t%l].skip;)t+=o;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),d=i,u=t%l)}}for(const f of t){u=a?u:f.start;let e,t=n[u%l];for(h=u+1;h<=f.end;h++){const o=n[h%l];e=oh(r.setContext(pu(i,{type:"segment",p0:t,p1:o,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),sh(e,d)&&p(u,h-1,f.loop,d),t=o,d=e}u<h-1&&p(u,h-1,f.loop,d)}return c}(e,t,n,r):t}function oh(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function sh(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}
/*!
       * Chart.js v4.2.1
       * https://www.chartjs.org
       * (c) 2023 Chart.js Contributors
       * Released under the MIT License
       */class ah{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],o=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=vd.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var lh=new ah;const ch="transparent",dh={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Od(e||ch),i=r.valid&&Od(t||ch);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class uh{constructor(e,t,n,r){const i=t[n];r=hu([e.to,r,i,e.from]);const o=hu([e.from,i,r]);this._active=!0,this._fn=e.fn||dh[e.type||typeof o],this._easing=Md[e.easing]||Md.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=hu([e.to,t,r,e.from]),this._from=hu([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class hh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xc(e))return;const t=Object.keys(Vd.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!xc(i))return;const o={};for(const e of t)o[e]=i[e];(wc(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,o)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=i[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(i[l]=d=new uh(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(lh.add(this._chart,n),!0):void 0}}function ph(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function fh(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function mh(e,t,n,r={}){const i=e.keys,o="single"===r.mode;let s,a,l,c;if(null!==t){for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===n){if(r.all)continue;break}c=e.values[l],kc(c)&&(o||0===t||Gc(t)===Gc(c))&&(t+=c)}return t}}function gh(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function vh(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function yh(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function bh(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,d=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(o,s,r),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:n,[c]:o}=e;h=(e._stacks||(e._stacks={}))[c]=vh(i,d,n),h[a]=o,h._top=yh(h,s,!0,r.type),h._bottom=yh(h,s,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=o}}function wh(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function xh(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const kh=e=>"reset"===e||"none"===e,Ch=(e,t)=>t?e:Object.assign({},e);class _h{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=_c(n.xAxisID,wh(e,"x")),o=t.yAxisID=_c(n.yAxisID,wh(e,"y")),s=t.rAxisID=_c(n.rAxisID,wh(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,o,s),c=t.vAxisID=r(a,o,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&md(this._data,this),e._stacked&&xh(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(xc(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],n[r]={x:o,y:e[o]};return n}(t);else if(n!==t){if(n){md(n,this);const e=this._cachedMeta;xh(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),fd.forEach((e=>{const t="_onData"+$c(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...e){const i=n.apply(this,e);return r._chartjs.listeners.forEach((n=>{"function"==typeof n[t]&&n[t](...e)})),i}})})))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=gh(t.vScale,t),t.stack!==n.stack&&(r=!0,xh(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&bh(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=wc(r[e])?this.parseArrayData(n,r,e,t):xc(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[s]||u&&l[s]<u[s];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],d&&(i()&&(d=!1),u=l);n._sorted=d}o&&bh(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:o}=e,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,d=new Array(r);let u,h,p;for(u=0,h=r;u<h;++u)p=u+n,d[u]={[s]:c||i.parse(l[p],p),[a]:o.parse(t[p],p)};return d}parseArrayData(e,t,n,r){const{xScale:i,yScale:o}=e,s=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=t[c],s[a]={x:i.parse(d[0],c),y:o.parse(d[1],c)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:i.parse(Ic(h,s),u),y:o.parse(Ic(h,a),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,o=t[e.axis];return mh({keys:fh(r,!0),values:t._stacks[e.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let o=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,o=mh(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,s=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:fh(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let u,h;function p(){h=r[u];const t=h[s.axis];return!kc(h[e.axis])||c>t||d<t}for(u=0;u<o&&(p()||(this.updateRangeFromParsed(l,e,h,a),!i));++u);if(i)for(u=o-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r][e.axis],kc(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return xc(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(_c(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=ph(e,n),i=ph(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,s,a),c=s;c<s+a;++c){const t=r[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,i))}for(c=0;c<o.length;++c)o[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return pu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return pu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r="active"===t,i=this._cachedDataOpts,o=e+"-"+t,s=i[o],a=this.enableOptionSharing&&zc(n);if(s)return Ch(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Vd.elements[e]),p=l.resolveNamedOptions(u,h,(()=>this.getContext(n,r,t)),d);return p.$shared&&(p.$shared=a,i[o]=Object.freeze(Ch(p,a))),p}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${t}`,s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(e,n,t))}const l=new hh(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||kh(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:o}}updateElement(e,t,n,r){kh(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!kh(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,a,l]of this._syncList)this[s](a,l);this._syncList=[];const r=n.length,i=t.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t,n=!0){const r=this._cachedMeta,i=r.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(i),s=e;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&xh(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Sh(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=gd(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,o,s,a=t._length;const l=()=>{32767!==o&&-32768!==o&&(zc(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),l();return a}function Mh(e,t,n,r){return wc(e)?function(e,t,n,r){const i=n.parse(e[0],r),o=n.parse(e[1],r),s=Math.min(i,o),a=Math.max(i,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:s,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Th(e,t,n,r){const i=e.iScale,o=e.vScale,s=i.getLabels(),a=i===o,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[i.axis]=a||i.parse(s[c],c),l.push(Mh(h,u,o,c));return l}function Oh(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Dh(e,t,n,r){let i=t.borderSkipped;const o={};if(!i)return void(e.borderSkipped=o);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:d}=function(e){let t,n,r,i,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:t,top:i,bottom:o}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(o[Eh(d,s,a,l)]=!0,i=c)),o[Eh(i,s,a,l)]=!0,e.borderSkipped=o}function Eh(e,t,n,r){var i,o,s;return r?(s=n,e=Ah(e=(i=e)===(o=t)?s:i===s?o:i,n,t)):e=Ah(e,t,n),e}function Ah(e,t,n){return"start"===e?t:"end"===e?n:e}function Nh(e,{inflateAmount:t},n){e.inflateAmount="auto"===t?1===n?.33:0:t}e(_h,"defaults",{}),e(_h,"datasetElementType",null),e(_h,"dataElementType",null);class Ph extends _h{parsePrimitiveData(e,t,n,r){return Th(e,t,n,r)}parseArrayData(e,t,n,r){return Th(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?s:a,c="x"===o.axis?s:a,d=[];let u,h,p,f;for(u=n,h=n+r;u<h;++u)f=t[u],p={},p[i.axis]=i.parse(Ic(f,l),u),d.push(Mh(Ic(f,c),p,o,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),o=i._custom,s=Oh(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||bc(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[s.axis],m={horizontal:l,base:n.base,enableBorderRadius:!f||Oh(t._custom)||o===f._top||o===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};u&&(m.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;Dh(m,g,f,o),Nh(m,g,c.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,o=[],s=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(bc(r)||isNaN(r))return!0};for(const a of r)if((void 0===t||!s(a))&&((!1===i||-1===o.indexOf(a.stack)||void 0===i&&void 0===a.stack)&&o.push(a.stack),a.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,o;for(i=0,o=t.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=e.barThickness;return{min:s||Sh(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,s=i||0,a=this.getParsed(e),l=a._custom,c=Oh(l);let d,u,h=a[t.axis],p=0,f=n?this.applyStack(t,a,n):h;f!==h&&(p=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&Gc(h)!==Gc(l.barEnd)&&(p=0),p+=h);const m=bc(i)||c?p:i;let g=t.getPixelForValue(m);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,u=d-g,Math.abs(u)<o){u=function(e,t,n){return 0!==e?Gc(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,s)*o,h===s&&(g-=u/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),p=Math.max(e,i);g=Math.max(Math.min(g,p),l),d=g+u,n&&!c&&(a._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(s)){const e=Gc(u)*t.getLineWidthForValue(s)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,o=_c(r.maxBarThickness,1/0);let s,a;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,o=i[e];let s=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===s&&(s=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let o,s;return bc(i)?(o=t.min*n.categoryPercentage,s=n.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:t.pixels[e]-o/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(o,t.min*t.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}e(Ph,"id","bar"),e(Ph,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),e(Ph,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Lh extends _h{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=_c(e[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=_c(e&&e.r&&+e.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y),l=o._custom;return{label:n[e]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),c=o.axis,d=s.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!i&&this.getParsed(u),h={},p=h[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=h[d]=i?s.getBasePixel():s.getPixelForValue(n[d]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=_c(n&&n._custom,i),r}}e(Lh,"id","bubble"),e(Lh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),e(Lh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Rh extends _h{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,s=e=>+n[e];if(xc(n[e])){const{key:e="value"}=this._parsing;s=t=>+Ic(n[t],e)}for(i=e,o=e+t;i<o;++i)r._parsed[i]=s(i)}}_getRotation(){return td(this.options.rotation-90)}_getCircumference(){return td(this.options.circumference)}_getRotationExtents(){let e=jc,t=-jc;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,o=0,s=0;if(t<jc){const a=e,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),p=(e,t,r)=>ld(e,a,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>ld(e,a,l,!0)?-1:Math.min(t,t*n,r,r*n),m=p(0,c,u),g=p(Uc,d,h),v=f(Vc,c,u),y=f(Vc+Uc,d,h);r=(m-v)/2,i=(g-y)/2,o=-(m+v)/2,s=-(g+y)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(h,u,a),v=(n.width-o)/p,y=(n.height-o)/f,b=Math.max(Math.min(v,y)/2,0),w=Sc(this.options.radius,b),x=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/jc)}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=i&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,o,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?jc*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pd(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,o,s,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,s=o.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(_c(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}e(Rh,"id","doughnut"),e(Rh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),e(Rh,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e}),e(Rh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const o=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Ih extends _h{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=xd(t,r,o);this._drawStart=s,this._drawCount=a,kd(t)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(r,s,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=o.axis,h=s.axis,{spanGaps:p,segment:f}=this.options,m=Qc(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let w=0;w<y;++w){const n=e[w],p=g?n:{};if(w<t||w>=v){p.skip=!0;continue}const y=this.getParsed(w),x=bc(y[h]),k=p[u]=o.getPixelForValue(y[u],w),C=p[h]=i||x?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,y,a):y[h],w);p.skip=isNaN(k)||isNaN(C)||x,p.stop=w>0&&Math.abs(y[u]-b[u])>m,f&&(p.parsed=y,p.raw=l.data[w]),d&&(p.options=c||this.resolveDataElementOptions(w,n.active?"active":r)),g||this.updateElement(n,w,p,r),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}e(Ih,"id","line"),e(Ih,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),e(Ih,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class $h extends _h{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pd(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return Tu.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,d=a.getIndexAngle(0)-.5*Vc;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,p);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,r,p),m=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,i&&(s.animateScale&&(m=0),s.animateRotate&&(n=f=d));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?td(this.resolveDataElementOptions(e,t).angle||n):0}}e($h,"id","polarArea"),e($h,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),e($h,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const o=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class zh extends Rh{}e(zh,"id","pie"),e(zh,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Bh extends _h{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Tu.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),l=o?i.xCenter:a.x,c=o?i.yCenter:a.y,d={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,s,d,r)}}}e(Bh,"id","radar"),e(Bh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),e(Bh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Fh extends _h{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y);return{label:n[e]||"",value:"("+s+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:o}=xd(t,n,r);if(this._drawStart=i,this._drawCount=o,kd(t)&&(i=0,o=n.length),this.options.showLine){const{dataset:i,_dataset:o}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},e)}this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=o.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=Qc(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=v?t:{},f=bc(n[p]),w=c[h]=o.getPixelForValue(n[h],b),x=c[p]=i||f?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[p],b);c.skip=isNaN(w)||isNaN(x)||f,c.stop=b>0&&Math.abs(n[h]-y[h])>g,m&&(c.parsed=n,c.raw=l.data[b]),u&&(c.options=d||this.resolveDataElementOptions(b,t.active?"active":r)),v||this.updateElement(t,b,c,r),y=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,o)/2}}e(Fh,"id","scatter"),e(Fh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),e(Fh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Vh=Object.freeze({__proto__:null,BarController:Ph,BubbleController:Lh,DoughnutController:Rh,LineController:Ih,PolarAreaController:$h,PieController:zh,RadarController:Bh,ScatterController:Fh});function jh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hh{static override(e){Object.assign(Hh.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return jh()}parse(){return jh()}format(){return jh()}add(){return jh()}diff(){return jh()}startOf(){return jh()}endOf(){return jh()}}var Wh=Hh;function qh(e,t,n,r){const{controller:i,data:o,_sorted:s}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const e=a._reversePixels?pd:hd;if(!r)return e(o,t,n);if(i._sharedOptions){const r=o[0],i="function"==typeof r.getRange&&r.getRange(t);if(i){const r=e(o,t,n-i),s=e(o,t,n+i);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function Uh(e,t,n,r,i){const o=e.getSortedVisibleDatasetMetas(),s=n[t];for(let a=0,l=o.length;a<l;++a){const{index:e,data:n}=o[a],{lo:l,hi:c}=qh(o[a],t,s,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function Yh(e,t,n,r,i){const o=[];if(!i&&!e.isPointInArea(t))return o;return Uh(e,n,t,(function(n,s,a){(i||Kd(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function Kh(e,t,n,r,i,o){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return Uh(e,n,t,(function(n,c,d){const u=n.inRange(t.x,t.y,i);if(r&&!u)return;const h=n.getCenterPoint(i);if(!(!!o||e.isPointInArea(h))&&!u)return;const p=a(t,h);p<l?(s=[{element:n,datasetIndex:c,index:d}],l=p):p===l&&s.push({element:n,datasetIndex:c,index:d})})),s}function Jh(e,t,n,r,i,o){return o||e.isPointInArea(t)?"r"!==n||r?Kh(e,t,n,r,i,o):function(e,t,n,r){let i=[];return Uh(e,n,t,(function(e,n,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=id(e,{x:t.x,y:t.y});ld(l,s,a)&&i.push({element:e,datasetIndex:n,index:o})})),i}(e,t,n,i):[]}function Gh(e,t,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return Uh(e,n,t,((e,r,l)=>{e[s](t[n],i)&&(o.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:o}var Xh={evaluateInteractionItems:Uh,modes:{index(e,t,n,r){const i=ju(t,e),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?Yh(e,i,o,r,s):Jh(e,i,o,!1,r,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=ju(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?Yh(e,i,o,r,s):Jh(e,i,o,!1,r,s);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>Yh(e,ju(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=ju(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;return Jh(e,i,o,n.intersect,r,s)},x:(e,t,n,r)=>Gh(e,ju(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Gh(e,ju(t,e),"y",n.intersect,r)}};const Zh=["left","top","right","bottom"];function Qh(e,t){return e.filter((e=>e.pos===t))}function ep(e,t){return e.filter((e=>-1===Zh.indexOf(e.pos)&&e.box.axis===t))}function tp(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function np(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!Zh.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:s&&t.availableHeight)}return n}function rp(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function ip(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function op(e,t,n,r){const{pos:i,box:o}=n,s=e.maxPadding;if(!xc(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[i]+=n.size}o.getPadding&&ip(s,o.getPadding());const a=Math.max(0,t.outerWidth-rp(s,e,"left","right")),l=Math.max(0,t.outerHeight-rp(s,e,"top","bottom")),c=a!==e.w,d=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function sp(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function ap(e,t,n,r){const i=[];let o,s,a,l,c,d;for(o=0,s=e.length,c=0;o<s;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,sp(a.horizontal,t));const{same:s,other:u}=op(t,n,a,r);c|=s&&i.length,d=d||u,l.fullSize||i.push(a)}return c&&ap(i,t,n,r)||d}function lp(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function cp(e,t,n,r){const i=n.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,o=l.size||e.height;zc(l.start)&&(s=l.start),e.fullSize?lp(e,i.left,s,n.outerWidth-i.right-i.left,o):lp(e,t.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;zc(l.start)&&(o=l.start),e.fullSize?lp(e,o,i.top,s,n.outerHeight-i.bottom-i.top):lp(e,o,t.top+l.placed,s,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=s}var dp={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=du(e.options.layout.padding),o=Math.max(t-i.width,0),s=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,o,s,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return t}(e),n=tp(t.filter((e=>e.box.fullSize)),!0),r=tp(Qh(t,"left"),!0),i=tp(Qh(t,"right")),o=tp(Qh(t,"top"),!0),s=tp(Qh(t,"bottom")),a=ep(t,"x"),l=ep(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:Qh(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Tc(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},i);ip(h,du(r));const p=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),f=np(l.concat(c),u);ap(a.fullSize,p,u,f),ap(l,p,u,f),ap(c,p,u,f)&&ap(l,p,u,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),cp(a.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,cp(a.rightAndBottom,p,u,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Tc(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class up{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class hp extends up{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const pp="$chartjs",fp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mp=e=>null===e||""===e;const gp=!!Uu&&{passive:!0};function vp(e,t,n){e.canvas.removeEventListener(t,n,gp)}function yp(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function bp(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||yp(n.addedNodes,r),t=t&&!yp(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function wp(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||yp(n.removedNodes,r),t=t&&!yp(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const xp=new Map;let kp=0;function Cp(){const e=window.devicePixelRatio;e!==kp&&(kp=e,xp.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function _p(e,t,n){const r=e.canvas,i=r&&Iu(r);if(!i)return;const o=yd(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),s=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return s.observe(i),function(e,t){xp.size||window.addEventListener("resize",Cp),xp.set(e,t)}(e,o),s}function Sp(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){xp.delete(e),xp.size||window.removeEventListener("resize",Cp)}(e)}function Mp(e,t,n){const r=e.canvas,i=yd((t=>{null!==e.ctx&&n(function(e,t){const n=fp[e.type]||e.type,{x:r,y:i}=ju(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e.addEventListener(t,n,gp)}(r,t,i),i}class Tp extends up{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[pp]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mp(i)){const t=Yu(e,"width");void 0!==t&&(e.width=t)}if(mp(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Yu(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[pp])return!1;const n=t[pp].initial;["height","width"].forEach((e=>{const r=n[e];bc(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[pp],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:bp,detach:wp,resize:_p}[t]||Mp;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Sp,detach:Sp,resize:Sp}[t]||vp)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Wu(e,t,n,r)}isAttached(e){const t=Iu(e);return!(!t||!t.isConnected)}}let Op=(Vt=class{constructor(){e(this,"active",!1)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Qc(this.x)&&Qc(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}},e(Vt,"defaults",{}),e(Vt,"defaultRoutes",void 0),Vt);function Dp(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>i)return function(e,t,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),o++,s=n[o*r])}(t,c,o,s/i),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const o=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r==0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let s=0,a=o.length-1;s<a;s++){const e=o[s];if(e>i)return e}return Math.max(i,1)}(o,t,i);if(s>0){let e,n;const r=s>1?Math.round((l-a)/(s-1)):null;for(Ep(t,c,d,bc(r)?0:a-r,a),e=0,n=s-1;e<n;e++)Ep(t,c,d,o[e],o[e+1]);return Ep(t,c,d,l,bc(r)?t.length:l+r),c}return Ep(t,c,d),c}function Ep(e,t,n,r,i){const o=_c(r,0),s=Math.min(_c(i,e.length),e.length);let a,l,c,d=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=o;c<0;)d++,c=Math.round(o+d*n);for(l=Math.max(o,0);l<s;l++)l===c&&(t.push(e[l]),d++,c=Math.round(o+d*n))}const Ap=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Np=(e,t)=>Math.min(t||e,e);function Pp(e,t){const n=[],r=e.length/t,i=e.length;let o=0;for(;o<i;o+=r)n.push(e[Math.floor(o)]);return n}function Lp(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),o=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<o-a||c>s+a)))return c}function Rp(e){return e.drawTicks?e.tickLength:0}function Ip(e,t){if(!e.display)return 0;const n=uu(e.font,t),r=du(e.padding);return(wc(e.text)?e.text.length:1)*n.lineHeight+r.height}function $p(e,t,n){let r=bd(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class zp extends Op{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Cc(e,Number.POSITIVE_INFINITY),t=Cc(t,Number.NEGATIVE_INFINITY),n=Cc(n,Number.POSITIVE_INFINITY),r=Cc(r,Number.NEGATIVE_INFINITY),{min:Cc(e,n),max:Cc(t,r),minDefined:kc(e),maxDefined:kc(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:Cc(n,Cc(r,n)),max:Cc(r,Cc(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mc(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,o=Sc(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Pp(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=Dp(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mc(this.options.afterUpdate,[this])}beforeSetDimensions(){Mc(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mc(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Mc(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mc(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Mc(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Mc(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mc(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Np(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=cd(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),d+6>o&&(o=h/(n-(e.offset?.5:1)),s=this.maxHeight-Rp(e.grid)-t.padding-Ip(e.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),l=nd(Math.min(Math.asin(cd((c.highest.height+6)/o,-1,1)),Math.asin(cd(s/a,-1,1))-Math.asin(cd(u/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Mc(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mc(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=Ip(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=Rp(i)+o):(e.height=this.maxHeight,e.width=Rp(i)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,l=td(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const t=n.mirror?0:d*i.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+d*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===i?u=t.width:"end"===i?d=e.width:"inner"!==i&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+o)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mc(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)bc(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Pp(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,o=[],s=[],a=Math.floor(t/Np(t,n));let l,c,d,u,h,p,f,m,g,v,y,b=0,w=0;for(l=0;l<t;l+=a){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=p=h.string,f=i[p]=i[p]||{data:{},gc:[]},m=h.lineHeight,g=v=0,bc(u)||wc(u)){if(wc(u))for(c=0,d=u.length;c<d;++c)y=u[c],bc(y)||wc(y)||(g=jd(r,f.data,f.gc,g,y),v+=m)}else g=jd(r,f.data,f.gc,g,u),v=m;o.push(g),s.push(v),b=Math.max(g,b),w=Math.max(v,w)}!function(e,t){Tc(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const x=o.indexOf(b),k=s.indexOf(w),C=e=>({width:o[e]||0,height:s[e]||0});return{first:C(0),last:C(t-1),widest:C(x),highest:C(k),widths:o,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return cd(this._alignToPixels?Wd(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return pu(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return pu(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=td(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:s}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),d=Rp(i),u=[],h=s.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,m=function(e){return Wd(n,e,p)};let g,v,y,b,w,x,k,C,_,S,M,T;if("top"===o)g=m(this.bottom),x=this.bottom-d,C=g-f,S=m(e.top)+f,T=e.bottom;else if("bottom"===o)g=m(this.top),S=e.top,T=m(e.bottom)-f,x=g+f,C=this.top+d;else if("left"===o)g=m(this.right),w=this.right-d,k=g-f,_=m(e.left)+f,M=e.right;else if("right"===o)g=m(this.left),_=e.left,M=m(e.right)-f,w=g+f,k=this.left+d;else if("x"===t){if("center"===o)g=m((e.top+e.bottom)/2+.5);else if(xc(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}S=e.top,T=e.bottom,x=g+f,C=x+d}else if("y"===t){if("center"===o)g=m((e.left+e.right)/2);else if(xc(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}w=g-f,k=w-d,_=e.left,M=e.right}const O=_c(r.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/O));for(v=0;v<c;v+=D){const e=this.getContext(v),t=i.setContext(e),r=s.setContext(e),o=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=Lp(this,v,a),void 0!==y&&(b=Wd(n,y,o),l?w=k=_=M=b:x=C=S=T=b,u.push({tx1:w,ty1:x,tx2:k,ty2:C,x1:_,y1:S,x2:M,y2:T,width:o,color:c,borderDash:d,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:d}=i,u=Rp(n.grid),h=u+c,p=d?-c:h,f=-td(this.labelRotation),m=[];let g,v,y,b,w,x,k,C,_,S,M,T,O="middle";if("top"===r)x=this.bottom-p,k=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+p,k=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);k=e.textAlign,w=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);k=e.textAlign,w=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+h;else if(xc(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+h}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)w=(e.left+e.right)/2-h;else if(xc(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===a?O="top":"end"===a&&(O="bottom"));const D=this._getLabelSizes();for(g=0,v=s.length;g<v;++g){y=s[g],b=y.label;const e=i.setContext(this.getContext(g));C=this.getPixelForTick(g)+i.labelOffset,_=this._resolveTickFontOptions(g),S=_.lineHeight,M=wc(b)?b.length:1;const t=M/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let u,h=k;if(o?(w=C,"inner"===k&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===l||0!==f?-M*S+S/2:"center"===l?-D.highest.height/2-t*S+S:-D.highest.height+S/2:"near"===l||0!==f?S/2:"center"===l?D.highest.height/2-t*S:D.highest.height-M*S,d&&(T*=-1),0===f||e.showLabelBackdrop||(w+=S/2*Math.sin(f))):(x=C,T=(1-M)*S/2),e.showLabelBackdrop){const t=du(e.backdropPadding),n=D.heights[g],r=D.widths[g];let i=T-t.top,o=0-t.left;switch(O){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":o-=r/2;break;case"right":o-=r}u={left:o,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:_,textOffset:T,options:{rotation:f,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:O,translation:[w,x],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-td(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=e+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,o=r.length;i<o;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const s=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=Wd(e,this.left,o)-o/2,c=Wd(e,this.right,s)+s/2,d=u=a):(d=Wd(e,this.top,o)-o/2,u=Wd(e,this.bottom,s)+s/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Jd(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;Qd(t,i.label,0,i.textOffset,n,e)}n&&Gd(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=uu(n.font),o=du(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||xc(t)?(a+=o.bottom,wc(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:i,left:o,bottom:s,right:a,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,p,f=0;const m=s-i,g=a-o;if(e.isHorizontal()){if(h=wd(r,o,a),xc(n)){const e=Object.keys(n)[0],r=n[e];p=d[e].getPixelForValue(r)+m-t}else p="center"===n?(c.bottom+c.top)/2+m-t:Ap(e,n,t);u=a-o}else{if(xc(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:Ap(e,n,t);p=wd(r,s,i),f="left"===n?-Uc:Uc}return{titleX:h,titleY:p,maxWidth:u,rotation:f}}(this,a,t,s);Qd(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:u,textAlign:$p(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=_c(e.grid&&e.grid.z,-1),r=_c(e.border&&e.border.z,0);return this._isVisible()&&this.draw===zp.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=t.length;i<o;++i){const o=t[i];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return uu(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bp{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=Nc(Object.create(null),[n?Vd.get(n):{},Vd.get(t),e.defaults]);Vd.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),o=[e].concat(r).join("."),s=t[n].split("."),a=s.pop(),l=s.join(".");Vd.route(o,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&Vd.describe(t,e.descriptors)}(e,o,n),this.override&&Vd.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Vd[r]&&(delete Vd[r][n],this.override&&delete Id[n])}}class Fp{constructor(){this.controllers=new Bp(_h,"datasets",!0),this.elements=new Bp(Op,"elements"),this.plugins=new Bp(Object,"plugins"),this.scales=new Bp(zp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Tc(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=$c(e);Mc(n["before"+r],[],n),t[e](n),Mc(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Vp=new Fp;class jp{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===Mc(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){bc(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=_c(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(Vp.plugins.items);for(let o=0;o<r.length;o++)n.push(Vp.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const e=i[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,{plugins:t,localIds:n},r,i){const o=[],s=e.getContext();for(const a of t){const t=a.id,l=Hp(r[t],i);null!==l&&o.push({plugin:a,options:Wp(e.config,{plugin:a,local:n[t]},l,s)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Hp(e,t){return t||!1!==e?!0===e?{}:e:null}function Wp(e,{plugin:t,local:n},r,i){const o=e.pluginScopeKeys(t),s=e.getOptionScopes(r,o);return n&&t.defaults&&s.push(t.defaults),e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qp(e,t){const n=Vd.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Up(e,t){if("x"===e||"y"===e||"r"===e)return e;var n;if(e=t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.length>1&&Up(e[0].toLowerCase(),t))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function Yp(e){const t=e.options||(e.options={});t.plugins=_c(t.plugins,{}),t.scales=function(e,t){const n=Id[e.type]||{scales:{}},r=t.scales||{},i=qp(e.type,t),o=Object.create(null);return Object.keys(r).forEach((e=>{const t=r[e];if(!xc(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const s=Up(e,t),a=function(e,t){return e===t?"_index_":"_value_"}(s,i),l=n.scales||{};o[e]=Pc(Object.create(null),[{axis:s},t,l[s],l[a]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,s=n.indexAxis||qp(i,t),a=(Id[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),i=n[t+"AxisID"]||t;o[i]=o[i]||Object.create(null),Pc(o[i],[{axis:t},r[i],a[e]])}))})),Object.keys(o).forEach((e=>{const t=o[e];Pc(t,[Vd.scales[t.type],Vd.scale])})),o}(e,t)}function Kp(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Jp=new Map,Gp=new Set;function Xp(e,t){let n=Jp.get(e);return n||(n=t(),Jp.set(e,n),Gp.add(n)),n}const Zp=(e,t,n)=>{const r=Ic(t,n);void 0!==r&&e.add(r)};class Qp{constructor(e){this._config=function(e){return(e=e||{}).data=Kp(e.data),Yp(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Kp(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xp(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Xp(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Xp(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Xp(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>Zp(a,e,t)))),t.forEach((e=>Zp(a,r,e))),t.forEach((e=>Zp(a,Id[i]||{},e))),t.forEach((e=>Zp(a,Vd,e))),t.forEach((e=>Zp(a,$d,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),Gp.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Id[t]||{},Vd.datasets[t]||{},{type:t},Vd,$d]}resolveNamedOptions(e,t,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:s}=ef(this._resolverCache,e,r);let a=o;if(function(e,t){const{isScriptable:n,isIndexable:r}=gu(e);for(const i of t){const t=n(i),o=r(i),s=(o||t)&&e[i];if(t&&(Bc(s)||tf(s))||o&&wc(s))return!0}return!1}(o,t)){i.$shared=!1;a=mu(o,n=Bc(n)?n():n,this.createResolver(e,n,s))}for(const l of t)i[l]=a[l];return i}createResolver(e,t,n=[""],r){const{resolver:i}=ef(this._resolverCache,e,n);return xc(t)?mu(i,t,void 0,r):i}}function ef(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:fu(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,o)}return o}const tf=e=>xc(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||Bc(e[n])),!1);const nf=["top","bottom","left","right","chartArea"];function rf(e,t){return"top"===e||"bottom"===e||-1===nf.indexOf(e)&&"x"===t}function of(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function sf(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Mc(n&&n.onComplete,[e],t)}function af(e){const t=e.chart,n=t.options.animation;Mc(n&&n.onProgress,[e],t)}function lf(e){return Ru()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const cf={},df=e=>{const t=lf(e);return Object.values(cf).filter((e=>e.canvas===t)).pop()};function uf(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}let hf=(jt=class{static register(...e){Vp.add(...e),pf()}static unregister(...e){Vp.remove(...e),pf()}constructor(e,t){const n=this.config=new Qp(t),r=lf(e),i=df(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Ru()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?hp:Tp}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=yc(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),o.resizeDelay||0),this._dataChanges=[],cf[this.id]=this,s&&a?(lh.listen(this,"complete",sf),lh.listen(this,"progress",af),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return bc(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vp}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qd(this.canvas,this.ctx),this}stop(){return lh.stop(this),this}resize(e,t){lh.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,qu(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),Mc(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Tc(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=Up(e,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),Tc(i,(t=>{const i=t.options,o=i.id,s=Up(o,i),a=_c(i.type,t.dtype);void 0!==i.position&&rf(i.position,s)===rf(t.dposition)||(i.position=t.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(Vp.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),Tc(r,((e,t)=>{e||delete n[t]})),Tc(n,(e=>{dp.configure(this,e,e.options),dp.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(of("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||qp(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=Vp.getController(o),{datasetElementType:r,dataElementType:s}=Vd.datasets[o];Object.assign(t,{dataElementType:Vp.getElement(s),datasetElementType:r&&Vp.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Tc(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Tc(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(of("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Tc(this.scales,(e=>{dp.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Fc(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){uf(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!Fc(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;dp.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Tc(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Bc(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(lh.has(this)?this.attached&&!lh.running(this)&&lh.start(this):(this.draw(),sf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e){const{xScale:t,yScale:n}=e;if(t&&n)return{left:t.left,right:t.right,top:n.top,bottom:n.bottom}}(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&Jd(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&Gd(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Kd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=Xh.modes[t];return"function"==typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=pu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);zc(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),lh.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qd(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete cf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Tc(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){Tc(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Tc(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}}));!Oc(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=i(t,e),s=n?e:i(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,o=t,s=this._getActiveElements(e,r,n,o),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Mc(i.onHover,[e,s,this],this),a&&Mc(i.onClick,[e,s,this],this));const c=!Oc(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},e(jt,"defaults",Vd),e(jt,"instances",cf),e(jt,"overrides",Id),e(jt,"registry",Vp),e(jt,"version","4.2.1"),e(jt,"getChart",df),jt);function pf(){return Tc(hf.instances,(e=>e._plugins.invalidate()))}function ff(e,t,n,r){const i=au(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-t)/2,s=Math.min(o,r*t/2),a=e=>{const t=(n-Math.min(o,e))*r/2;return cd(e,0,Math.min(o,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:cd(i.innerStart,0,s),innerEnd:cd(i.innerEnd,0,s)}}function mf(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function gf(e,t,n,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let p=0;const f=i-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;p=(f-(0!==e?f*e/(e+r):f))/2}const m=(f-Math.max(.001,f*u-n/Vc)/u)/2,g=l+m+p,v=i-m-p,{outerStart:y,outerEnd:b,innerStart:w,innerEnd:x}=ff(t,h,u,v-g),k=u-y,C=u-b,_=g+y/k,S=v-b/C,M=h+w,T=h+x,O=g+w/M,D=v-x/T;if(e.beginPath(),o){const t=(_+S)/2;if(e.arc(s,a,u,_,t),e.arc(s,a,u,t,S),b>0){const t=mf(C,S,s,a);e.arc(t.x,t.y,b,S,v+Uc)}const n=mf(T,v,s,a);if(e.lineTo(n.x,n.y),x>0){const t=mf(T,D,s,a);e.arc(t.x,t.y,x,v+Uc,D+Math.PI)}const r=(v-x/h+(g+w/h))/2;if(e.arc(s,a,h,v-x/h,r,!0),e.arc(s,a,h,r,g+w/h,!0),w>0){const t=mf(M,O,s,a);e.arc(t.x,t.y,w,O+Math.PI,g-Uc)}const i=mf(k,g,s,a);if(e.lineTo(i.x,i.y),y>0){const t=mf(k,_,s,a);e.arc(t.x,t.y,y,g-Uc,_)}}else{e.moveTo(s,a);const t=Math.cos(_)*u+s,n=Math.sin(_)*u+a;e.lineTo(t,n);const r=Math.cos(S)*u+s,i=Math.sin(S)*u+a;e.lineTo(r,i)}e.closePath()}function vf(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u="inner"===l.borderAlign;if(!c)return;u?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let h=t.endAngle;if(o){gf(e,t,n,r,h,i);for(let t=0;t<o;++t)e.stroke();isNaN(a)||(h=s+(a%jc||jc))}u&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,s,a,r-c,n+c),l>i?(c=i/l,e.arc(o,s,l,n+c,r-c,!0)):e.arc(o,s,i,n+Uc,r-Uc),e.closePath(),e.clip()}(e,t,h),o||(gf(e,t,n,r,h,i),e.stroke())}class yf extends Op{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=id(r,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=this.options.spacing/2,h=_c(d,a-s)>=jc||ld(i,s,a),p=dd(o,l+u,c+u);return h&&p}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,d=(o+s+l+a)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>jc?Math.floor(n/jc):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*r,Math.sin(s)*r);const a=r*(1-Math.sin(Math.min(Vc,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=t;let l=t.endAngle;if(o){gf(e,t,n,r,l,i);for(let t=0;t<o;++t)e.fill();isNaN(a)||(l=s+(a%jc||jc))}gf(e,t,n,r,l,i),e.fill()}(e,this,a,i,o),vf(e,this,a,i,o),e.restore()}}function bf(e,t,n=t){e.lineCap=_c(n.borderCapStyle,t.borderCapStyle),e.setLineDash(_c(n.borderDash,t.borderDash)),e.lineDashOffset=_c(n.borderDashOffset,t.borderDashOffset),e.lineJoin=_c(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=_c(n.borderWidth,t.borderWidth),e.strokeStyle=_c(n.borderColor,t.borderColor)}function wf(e,t,n){e.lineTo(n.x,n.y)}function xf(e,t,n={}){const r=e.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=t,l=Math.max(i,s),c=Math.min(o,a),d=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function kf(e,t,n,r){const{points:i,options:o}=t,{count:s,start:a,loop:l,ilen:c}=xf(i,n,r),d=function(e){return e.stepped?Xd:e.tension||"monotone"===e.cubicInterpolationMode?Zd:wf}(o);let u,h,p,{move:f=!0,reverse:m}=r||{};for(u=0;u<=c;++u)h=i[(a+(m?c-u:u))%s],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,p,h,m,o.stepped),p=h);return l&&(h=i[(a+(m?c:0))%s],d(e,p,h,m,o.stepped)),!!l}function Cf(e,t,n,r){const i=t.points,{count:o,start:s,ilen:a}=xf(i,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,p,f,m,g=0,v=0;const y=e=>(s+(c?a-e:e))%o,b=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(u=i[y(0)],e.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=i[y(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<p?p=n:n>f&&(f=n),g=(v*g+t)/++v):(b(),e.lineTo(t,n),h=r,v=0,p=f=n),m=n}b()}function _f(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n)?Cf:kf}e(yf,"id","arc"),e(yf,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),e(yf,"defaultRoutes",{backgroundColor:"backgroundColor"});const Sf="function"==typeof Path2D;function Mf(e,t,n,r){Sf&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),bf(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:o}=t,s=_f(t);for(const a of i)bf(e,o,a.style),e.beginPath(),s(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Tf extends Op{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Lu(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,n,r){let i=0,o=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}(n,i,o,r);return ih(e,!0===r?[{start:s,end:a,loop:o}]:function(e,t,n,r){const i=e.length,o=[];let s,a=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:t%i,end:(s-1)%i,loop:r}),t=a=n.stop?s:null):(a=s,l.skip&&(t=s)),l=n}return null!==a&&o.push({start:t%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!e._fullLoop&&0===s&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,o=rh(this,{property:t,start:r,end:r});if(!o.length)return;const s=[],a=function(e){return e.stepped?Ju:e.tension||"monotone"===e.cubicInterpolationMode?Gu:Ku}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:d}=o[l],u=i[c],h=i[d];if(u===h){s.push(u);continue}const p=a(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return _f(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=_f(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)o&=i(e,this,s,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Mf(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Of(e,t,n,r){const i=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<i.radius+i.hitRadius}e(Tf,"id","line"),e(Tf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),e(Tf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),e(Tf,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Df extends Op{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Of(this,e,"x",t)}inYRange(e,t){return Of(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Kd(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Ud(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ef(e,t){const{x:n,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,d,u;return e.horizontal?(u=s/2,a=Math.min(n,i),l=Math.max(n,i),c=r-u,d=r+u):(u=o/2,a=n-u,l=n+u,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function Af(e,t,n,r){return e?0:cd(t,n,r)}function Nf(e){const t=Ef(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,o=lu(r);return{t:Af(i.top,o.top,0,n),r:Af(i.right,o.right,0,t),b:Af(i.bottom,o.bottom,0,n),l:Af(i.left,o.left,0,t)}}(e,n/2,r/2),o=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=cu(i),s=Math.min(t,n),a=e.borderSkipped,l=r||xc(i);return{topLeft:Af(!l||a.top||a.left,o.topLeft,0,s),topRight:Af(!l||a.top||a.right,o.topRight,0,s),bottomLeft:Af(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Af(!l||a.bottom||a.right,o.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function Pf(e,t,n,r){const i=null===t,o=null===n,s=e&&!(i&&o)&&Ef(e,r);return s&&(i||dd(t,s.left,s.right))&&(o||dd(n,s.top,s.bottom))}function Lf(e,t){e.rect(t.x,t.y,t.w,t.h)}function Rf(e,t,n={}){const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+s,radius:e.radius}}e(Df,"id","point"),e(Df,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),e(Df,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class If extends Op{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=Nf(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?nu:Lf;var a;e.save(),o.w===i.w&&o.h===i.h||(e.beginPath(),s(e,Rf(o,t,i)),e.clip(),s(e,Rf(i,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,Rf(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Pf(this,e,t,n)}inXRange(e,t){return Pf(this,e,null,t)}inYRange(e,t){return Pf(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}e(If,"id","bar"),e(If,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),e(If,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var $f=Object.freeze({__proto__:null,ArcElement:yf,LineElement:Tf,PointElement:Df,BarElement:If});const zf=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Bf=zf.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function Ff(e){return zf[e%zf.length]}function Vf(e){return Bf[e%Bf.length]}function jf(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof Rh?t=function(e,t){return e.backgroundColor=e.data.map((()=>Ff(t++))),t}(n,t):i instanceof $h?t=function(e,t){return e.backgroundColor=e.data.map((()=>Vf(t++))),t}(n,t):i&&(t=function(e,t){return e.borderColor=Ff(t),e.backgroundColor=Vf(t),++t}(n,t))}}function Hf(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Wf={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:o}=i;if(!n.forceOverride&&(Hf(r)||(s=i)&&(s.borderColor||s.backgroundColor)||o&&Hf(o)))return;var s;const a=jf(e);r.forEach(a)}};function qf(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Uf(e){e.data.datasets.forEach((e=>{qf(e)}))}var Yf={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void Uf(e);const r=e.width;e.data.datasets.forEach(((t,i)=>{const{_data:o,indexAxis:s}=t,a=e.getDatasetMeta(i),l=o||t.data;if("y"===hu([s,e.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=e.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const n=t.length;let r,i=0;const{iScale:o}=e,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=cd(hd(t,o.axis,s).lo,0,n-1)),r=c?cd(hd(t,o.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(a,l);if(u<=(n.threshold||4*r))return void qf(t);let h;switch(bc(o)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,r,i){const o=i.samples||r;if(o>=n)return e.slice(t,t+n);const s=[],a=(n-2)/(o-2);let l=0;const c=t+n-1;let d,u,h,p,f,m=t;for(s[l++]=e[m],d=0;d<o-2;d++){let r,i=0,o=0;const c=Math.floor((d+1)*a)+1+t,g=Math.min(Math.floor((d+2)*a)+1,n)+t,v=g-c;for(r=c;r<g;r++)i+=e[r].x,o+=e[r].y;i/=v,o/=v;const y=Math.floor(d*a)+1+t,b=Math.min(Math.floor((d+1)*a)+1,n)+t,{x:w,y:x}=e[m];for(h=p=-1,r=y;r<b;r++)p=.5*Math.abs((w-i)*(e[r].y-x)-(w-e[r].x)*(o-x)),p>h&&(h=p,u=e[r],f=r);s[l++]=u,m=f}return s[l++]=e[c],s}(l,d,u,r,n);break;case"min-max":h=function(e,t,n,r){let i,o,s,a,l,c,d,u,h,p,f=0,m=0;const g=[],v=t+n-1,y=e[t].x,b=e[v].x-y;for(i=t;i<t+n;++i){o=e[i],s=(o.x-y)/b*r,a=o.y;const t=0|s;if(t===l)a<h?(h=a,c=i):a>p&&(p=a,d=i),f=(m*f+o.x)/++m;else{const n=i-1;if(!bc(c)&&!bc(d)){const t=Math.min(c,d),r=Math.max(c,d);t!==u&&t!==n&&g.push({...e[t],x:f}),r!==u&&r!==n&&g.push({...e[r],x:f})}i>0&&n!==u&&g.push(e[n]),g.push(o),l=t,m=0,h=p=a,c=d=u=i}}return g}(l,d,u,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=h}))},destroy(e){Uf(e)}};function Kf(e,t,n,r){if(r)return;let i=t[e],o=n[e];return"angle"===e&&(i=ad(i),o=ad(o)),{property:e,start:i,end:o}}function Jf(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Gf(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Xf(e,t){let n=[],r=!1;return wc(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,o=[];return t.segments.forEach((({start:e,end:t})=>{t=Jf(e,t,i);const s=i[e],a=i[t];null!==r?(o.push({x:s.x,y:r}),o.push({x:a.x,y:r})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:a.y}))})),o}(e,t),n.length?new Tf({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Zf(e){return e&&!1!==e.fill}function Qf(e,t,n){let r=e[t].fill;const i=[t];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!kc(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function em(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=_c(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(xc(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return kc(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function tm(e,t,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:s,last:a,point:l}=nm(o,t,"x");if(!(!l||s&&a))if(s)r.unshift(l);else if(e.push(l),!a)break}e.push(...r)}function nm(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],o=e.segments,s=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const e=o[c],t=s[e.start][n],r=s[e.end][n];if(dd(i,t,r)){a=i===t,l=i===r;break}}return{first:a,last:l,point:r}}class rm{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:o}=this;return t=t||{start:0,end:jc},e.arc(r,i,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function im(e){const{chart:t,fill:n,line:r}=e;if(kc(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],o=r.segments,s=r.points,a=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);a.push(Xf({x:null,y:t.bottom},r));for(let l=0;l<o.length;l++){const e=o[l];for(let t=e.start;t<=e.end;t++)tm(i,s[t],a)}return new Tf({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,o=r.reverse?t.max:t.min,s=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:xc(e)?e.value:t.getBaseValue(),r}(n,t,o),a=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,o);return new rm({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(s)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,s));return a}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:xc(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(kc(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof rm?i:Xf(i,r)}function om(e,t,n){const r=im(t),{line:i,scale:o,axis:s}=t,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};r&&i.points.length&&(Jd(e,n),function(e,t){const{line:n,target:r,above:i,below:o,area:s,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&o!==i&&(sm(e,r,s.top),am(e,{line:n,target:r,color:i,scale:a,property:l}),e.restore(),e.save(),sm(e,r,s.bottom));am(e,{line:n,target:r,color:o,scale:a,property:l}),e.restore()}(e,{line:i,target:r,above:d,below:u,area:n,scale:o,axis:s}),Gd(e))}function sm(e,t,n){const{segments:r,points:i}=t;let o=!0,s=!1;e.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],d=i[Jf(r,l,i)];o?(e.moveTo(c.x,c.y),o=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function am(e,t){const{line:n,target:r,property:i,color:o,scale:s}=t,a=function(e,t,n){const r=e.segments,i=e.points,o=t.points,s=[];for(const a of r){let{start:e,end:r}=a;r=Jf(e,r,i);const l=Kf(n,i[e],i[r],a.loop);if(!t.segments){s.push({source:a,target:l,start:i[e],end:i[r]});continue}const c=rh(t,l);for(const t of c){const e=Kf(n,o[t.start],o[t.end],t.loop),r=nh(a,i,e);for(const i of r)s.push({source:i,target:t,start:{[n]:Gf(l,e,"start",Math.max)},end:{[n]:Gf(l,e,"end",Math.min)}})}}return s}(n,r,i);for(const{source:l,target:c,start:d,end:u}of a){const{style:{backgroundColor:t=o}={}}=l,a=!0!==r;e.save(),e.fillStyle=t,lm(e,s,a&&Kf(i,d,u)),e.beginPath();const h=!!n.pathSegment(e,l);let p;if(a){h?e.closePath():cm(e,r,u,i);const t=!!r.pathSegment(e,c,{move:h,reverse:!0});p=h&&t,p||cm(e,r,d,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function lm(e,t,n){const{top:r,bottom:i}=t.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(e.beginPath(),e.rect(s,r,a-s,i-r),e.clip())}function cm(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var dm={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<r;++s)o=e.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof Tf&&(l={visible:e.isDatasetVisible(s),index:s,fill:em(a,s,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],l&&!1!==l.fill&&(l.fill=Qf(i,s,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let s=i.length-1;s>=0;--s){const t=i[s].$filler;t&&(t.line.updateControlPoints(o,t.axis),r&&t.fill&&om(e.ctx,t,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;Zf(t)&&om(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;Zf(r)&&"beforeDatasetDraw"===n.drawTime&&om(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const um=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class hm extends Op{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Mc(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=uu(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=um(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,r,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let d=e;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+i.measureText(e.text).width;(0===p||l[l.length-1]+f+2*s>o)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),a[p]={left:0,top:h,row:u,width:f,height:r},l[l.length-1]+=f+s})),d}_fitCols(e,t,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let d=s,u=0,h=0,p=0,f=0;return this.legendItems.forEach(((e,o)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const o=function(e,t,n,r){let i=e.text;i&&"string"!=typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),s=function(e,t,n){let r=e;"string"!=typeof t.text&&(r=pm(t,n));return r}(i,r,t.lineHeight);return{itemWidth:o,itemHeight:s}}(n,t,i,e,r);o>0&&h+g+2*s>c&&(d+=u+s,l.push({width:u,height:h}),p+=u+s,f++,u=h=0),a[o]={left:p,top:h,col:f,width:m,height:g},u=Math.max(u,m),h+=g+s})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Xu(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=wd(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,s=wd(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=wd(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,s=wd(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Jd(e,this),this._draw(),Gd(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,s=Vd.color,a=Xu(e.rtl,this.left,this.width),l=uu(o.font),{padding:c}=o,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=um(o,d),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:wd(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:wd(i,this.top+v+c,this.bottom-t[0].height),line:0},Zu(this.ctx,e.textDirection);const y=m+c;this.legendItems.forEach(((b,w)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const x=r.measureText(b.text).width,k=a.textAlign(b.textAlign||(b.textAlign=o.textAlign)),C=p+u+x;let _=h.x,S=h.y;a.setWidth(this.width),g?w>0&&_+C+c>this.right&&(S=h.y+=y,h.line++,_=h.x=wd(i,this.left+c,this.right-n[h.line])):w>0&&S+y>this.bottom&&(_=h.x=_+t[h.line].width+c,h.line++,S=h.y=wd(i,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const i=_c(n.lineWidth,1);if(r.fillStyle=_c(n.fillStyle,s),r.lineCap=_c(n.lineCap,"butt"),r.lineDashOffset=_c(n.lineDashOffset,0),r.lineJoin=_c(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=_c(n.strokeStyle,s),r.setLineDash(_c(n.lineDash,[])),o.usePointStyle){const s={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,p/2);Yd(r,s,l,t+u,o.pointStyleWidth&&p)}else{const o=t+Math.max((d-f)/2,0),s=a.leftForLtr(e,p),l=cu(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?nu(r,{x:s,y:o,w:p,h:f,radius:l}):r.rect(s,o,p,f),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(_),S,b),_=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(k,_+p+u,g?_+C:this.right,e.rtl),function(e,t,n){Qd(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(_),S,b),g)h.x+=C+c;else if("string"!=typeof b.text){const e=l.lineHeight;h.y+=pm(b,e)}else h.y+=y})),Qu(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=uu(t.font),r=du(t.padding);if(!t.display)return;const i=Xu(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=n.size/2,l=r.top+a;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=wd(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+wd(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=wd(s,d,d+u);o.textAlign=i.textAlign(bd(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Qd(o,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=uu(e.font),n=du(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(dd(e,this.left,this.right)&&dd(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],dd(e,r.left,r.left+r.width)&&dd(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&Mc(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Mc(t.onHover,[e,n,this],this)}else n&&Mc(t.onClick,[e,n,this],this)}}function pm(e,t){return t*(e.text?e.text.length+.5:0)}var fm={id:"legend",_element:hm,start(e,t,n){const r=e.legend=new hm({ctx:e.ctx,options:n,chart:e});dp.configure(e,r,n),dp.addBox(e,r)},stop(e){dp.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;dp.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=du(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class mm extends Op{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=wc(n.text)?n.text.length:1;this._padding=du(n.padding);const i=r*uu(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,l,c,d=0;return this.isHorizontal()?(l=wd(s,n,i),c=t+e,a=i-n):("left"===o.position?(l=n+e,c=wd(s,r,t),d=-.5*Vc):(l=i-e,c=wd(s,t,r),d=.5*Vc),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=uu(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);Qd(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:a,textAlign:bd(t.align),textBaseline:"middle",translation:[i,o]})}}var gm={id:"title",_element:mm,start(e,t,n){!function(e,t){const n=new mm({ctx:e.ctx,options:t,chart:e});dp.configure(e,n,t),dp.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;dp.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;dp.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vm=new WeakMap;var ym={id:"subtitle",start(e,t,n){const r=new mm({ctx:e.ctx,options:n,chart:e});dp.configure(e,r,n),dp.addBox(e,r),vm.set(e,r)},stop(e){dp.removeBox(e,vm.get(e)),vm.delete(e)},beforeUpdate(e,t,n){const r=vm.get(e);dp.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bm={average(e){if(!e.length)return!1;let t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,i+=e.y,++o}}return{x:r/o,y:i/o}},nearest(e,t){if(!e.length)return!1;let n,r,i,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=od(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function wm(e,t){return t&&(wc(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function xm(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function km(e,t){const{element:n,datasetIndex:r,index:i}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Cm(e,t){const n=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=uu(t.bodyFont),c=uu(t.titleFont),d=uu(t.footerFont),u=o.length,h=i.length,p=r.length,f=du(t.padding);let m=f.height,g=0,v=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,Tc(e.title,b),n.font=l.string,Tc(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?s+2+t.boxPadding:0,Tc(r,(e=>{Tc(e.before,b),Tc(e.lines,b),Tc(e.after,b)})),y=0,n.font=d.string,Tc(e.footer,b),n.restore(),g+=f.width,{width:g,height:m}}function _m(e,t,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(e,t,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+o+s>t.width||"right"===e&&i-o-s<0||void 0}(c,e,t,n)&&(c="center"),c}function Sm(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||_m(e,t,n,r),yAlign:r}}function Mm(e,t,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=cu(s);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(d,h)+i:"right"===a&&(f+=Math.max(u,p)+i),{x:cd(f,0,r.width-t.width),y:cd(m,0,r.height-t.height)}}function Tm(e,t,n){const r=du(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Om(e){return wm([],xm(e))}function Dm(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Em={beforeTitle:vc,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:vc,beforeBody:vc,beforeLabel:vc,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return bc(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:vc,afterBody:vc,beforeFooter:vc,footer:vc,afterFooter:vc};function Am(e,t,n,r){const i=e[t].call(n,r);return void 0===i?Em[t].call(n,r):i}class Nm extends Op{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new hh(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,pu(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=Am(n,"beforeTitle",this,e),i=Am(n,"title",this,e),o=Am(n,"afterTitle",this,e);let s=[];return s=wm(s,xm(r)),s=wm(s,xm(i)),s=wm(s,xm(o)),s}getBeforeBody(e,t){return Om(Am(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Tc(e,(e=>{const t={before:[],lines:[],after:[]},i=Dm(n,e);wm(t.before,xm(Am(i,"beforeLabel",this,e))),wm(t.lines,Am(i,"label",this,e)),wm(t.after,xm(Am(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return Om(Am(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=Am(n,"beforeFooter",this,e),i=Am(n,"footer",this,e),o=Am(n,"afterFooter",this,e);let s=[];return s=wm(s,xm(r)),s=wm(s,xm(i)),s=wm(s,xm(o)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(km(this.chart,t[s]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),Tc(l,(t=>{const n=Dm(e.callbacks,t);r.push(Am(n,"labelColor",this,t)),i.push(Am(n,"labelPointStyle",this,t)),o.push(Am(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const e=bm[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=Cm(this,n),s=Object.assign({},e,t),a=Sm(this.chart,n,s),l=Mm(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:d}=cu(s),{x:u,y:h}=e,{width:p,height:f}=t;let m,g,v,y,b,w;return"center"===i?(b=h+f/2,"left"===r?(m=u,g=m-o,y=b+o,w=b-o):(m=u+p,g=m+o,y=b-o,w=b+o),v=m):(g="left"===r?u+Math.max(a,c)+o:"right"===r?u+p-Math.max(l,d)-o:this.caretX,"top"===i?(y=h,b=y-o,m=g-o,v=g+o):(y=h+f,b=y+o,m=g+o,v=g-o),w=y),{x1:m,x2:g,x3:v,y1:y,y2:b,y3:w}}drawTitle(e,t,n){const r=this.title,i=r.length;let o,s,a;if(i){const l=Xu(n.rtl,this.x,this.width);for(e.x=Tm(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=uu(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l,boxPadding:c}=i,d=uu(i.bodyFont),u=Tm(this,"left",i),h=r.x(u),p=a<d.lineHeight?(d.lineHeight-a)/2:0,f=t.y+p;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ud(e,t,n,c),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ud(e,t,n,c)}else{e.lineWidth=xc(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(h,l-c),n=r.leftForLtr(r.xPlus(h,1),l-c-2),s=cu(o.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,nu(e,{x:t,y:f,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nu(e,{x:n,y:f+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=o.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,d=uu(n.bodyFont);let u=d.lineHeight,h=0;const p=Xu(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+i},m=p.textAlign(o);let g,v,y,b,w,x,k;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=Tm(this,m,n),t.fillStyle=n.bodyColor,Tc(this.beforeBody,f),h=s&&"right"!==m?"center"===o?l/2+c:l+2+c:0,b=0,x=r.length;b<x;++b){for(g=r[b],v=this.labelTextColors[b],t.fillStyle=v,Tc(g.before,f),y=g.lines,s&&y.length&&(this._drawColorBox(t,e,b,p,n),u=Math.max(d.lineHeight,a)),w=0,k=y.length;w<k;++w)f(y[w]),u=d.lineHeight;Tc(g.after,f)}h=0,u=d.lineHeight,Tc(this.afterBody,f),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let o,s;if(i){const a=Xu(n.rtl,this.x,this.width);for(e.x=Tm(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",o=uu(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,s=0;s<i;++s)t.fillText(r[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=cu(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+d,a),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+l-u,a),t.quadraticCurveTo(s+l,a,s+l,a+u),"center"===o&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+l,a+c-p),t.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+h,a+c),t.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,a+d),t.quadraticCurveTo(s,a,s+d,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=bm[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Cm(this,e),s=Object.assign({},n,this._size),a=Sm(t,e,s),l=Mm(e,s,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=du(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Zu(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),Qu(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),i=!Oc(n,r),o=this._positionChanged(r,t);(i||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,n),s=this._positionChanged(o,e),a=t||!Oc(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t;const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,o=bm[i.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}e(Nm,"positioners",bm);var Pm={id:"tooltip",_element:Nm,positioners:bm,afterInit(e,t,n){n&&(e.tooltip=new Nm({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Em},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Lm=Object.freeze({__proto__:null,Colors:Wf,Decimation:Yf,Filler:dm,Legend:fm,SubTitle:ym,Title:gm,Tooltip:Pm});function Rm(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"==typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function Im(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class $m extends zp{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(bc(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:cd(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Rm(n,e,_c(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return Im.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function zm(e,t){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=i||1,p=c-1,{min:f,max:m}=t,g=!bc(o),v=!bc(s),y=!bc(l),b=(m-f)/(d+1);let w,x,k,C,_=Zc((m-f)/p/h)*h;if(_<1e-14&&!g&&!v)return[{value:f},{value:m}];C=Math.ceil(m/_)-Math.floor(f/_),C>p&&(_=Zc(C*_/p/h)*h),bc(a)||(w=Math.pow(10,a),_=Math.ceil(_*w)/w),"ticks"===r?(x=Math.floor(f/_)*_,k=Math.ceil(m/_)*_):(x=f,k=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-o)/i,_/1e3)?(C=Math.round(Math.min((s-o)/_,c)),_=(s-o)/C,x=o,k=s):y?(x=g?o:x,k=v?s:k,C=l-1,_=(k-x)/C):(C=(k-x)/_,C=Xc(C,Math.round(C),_/1e3)?Math.round(C):Math.ceil(C));const S=Math.max(rd(_),rd(x));w=Math.pow(10,bc(a)?S:a),x=Math.round(x*w)/w,k=Math.round(k*w)/w;let M=0;for(g&&(u&&x!==o?(n.push({value:o}),x<o&&M++,Xc(Math.round((x+M*_)*w)/w,o,Bm(o,b,e))&&M++):x<o&&M++);M<C;++M)n.push({value:Math.round((x+M*_)*w)/w});return v&&u&&k!==s?n.length&&Xc(n[n.length-1].value,s,Bm(s,b,e))?n[n.length-1].value=s:n.push({value:s}):v&&k!==s||n.push({value:k}),n}function Bm(e,t,{horizontal:n,minRotation:r}){const i=td(r),o=(n?Math.sin(i):Math.cos(i))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}e($m,"id","category"),e($m,"defaults",{ticks:{callback:Im}});class Fm extends zp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return bc(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=Gc(r),t=Gc(i);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);s(i+t),e||o(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=zm({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&ed(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Pd(e,this.chart.options.locale,this.options.ticks.format)}}class Vm extends Fm{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=kc(e)?e:0,this.max=kc(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=td(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}e(Vm,"id","linear"),e(Vm,"defaults",{ticks:{callback:Rd.formatters.numeric}});const jm=e=>Math.floor(Jc(e)),Hm=(e,t)=>Math.pow(10,jm(e)+t);function Wm(e){return 1===e/Math.pow(10,jm(e))}function qm(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function Um(e,{min:t,max:n}){t=Cc(e.min,t);const r=[],i=jm(t);let o=function(e,t){let n=jm(t-e);for(;qm(e,t,n)>10;)n++;for(;qm(e,t,n)<10;)n--;return Math.min(n,jm(e))}(t,n),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((t-l)*s)/s,d=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((c-d)/Math.pow(10,o)),h=Cc(e.min,Math.round((l+d+u*Math.pow(10,o))*s)/s);for(;h<n;)r.push({value:h,major:Wm(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,s=o>=0?1:s),h=Math.round((l+d+u*Math.pow(10,o))*s)/s;const p=Cc(e.max,h);return r.push({value:p,major:Wm(p),significand:u}),r}class Ym extends zp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Fm.prototype.parse.apply(this,[e,t]);if(0!==n)return kc(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=kc(e)?Math.max(0,e):null,this.max=kc(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!kc(this._userMin)&&(this.min=e===Hm(this.min,0)?Hm(this.min,-1):Hm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,o=e=>r=t?r:e;n===r&&(n<=0?(i(1),o(10)):(i(Hm(n,-1)),o(Hm(r,1)))),n<=0&&i(Hm(r,-1)),r<=0&&o(Hm(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Um({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&ed(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Pd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Jc(e),this._valueRange=Jc(this.max)-Jc(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Jc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Km(e){const t=e.ticks;if(t.display&&e.display){const e=du(t.backdropPadding);return _c(t.font&&t.font.size,Vd.font.size)+e.height}return 0}function Jm(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function Gm(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?Vc/o:0;for(let u=0;u<o;u++){const o=s.setContext(e.getPointLabelContext(u));i[u]=o.padding;const h=e.getPointPosition(u,e.drawingArea+i[u],a),p=uu(o.font),f=(l=e.ctx,c=p,d=wc(d=e._pointLabels[u])?d:[d],{w:Hd(l,c.string,d),h:d.length*c.lineHeight});r[u]=f;const m=ad(e.getIndexAngle(u)+a),g=Math.round(nd(m));Xm(n,t,m,Jm(g,h.x,f.w,0,180),Jm(g,h.y,f.h,90,270))}var l,c,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,o=e.options,s=Km(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?Vc/i:0;for(let c=0;c<i;c++){const i=e.getPointPosition(c,a+s+n[c],l),o=Math.round(nd(ad(i.angle+Uc))),d=t[c],u=eg(i.y,d.h,o),h=Zm(o),p=Qm(i.x,d.w,h);r.push({x:i.x,y:u,textAlign:h,left:p,top:u,right:p+d.w,bottom:u+d.h})}return r}(e,r,i)}function Xm(e,t,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/s,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function Zm(e){return 0===e||180===e?"center":e<180?"left":"right"}function Qm(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function eg(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function tg(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,jc);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=e.getPointPosition(o,t),i.lineTo(n.x,n.y)}}e(Ym,"id","logarithmic"),e(Ym,"defaults",{ticks:{callback:Rd.formatters.logarithmic,major:{enabled:!0}}});class ng extends Fm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=du(Km(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=kc(e)&&!isNaN(e)?e:0,this.max=kc(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Km(this.options))}generateTickLabels(e){Fm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Mc(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?Gm(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return ad(e*(jc/(this._pointLabels.length||1))+td(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(bc(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(bc(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return pu(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-Uc+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),tg(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,o=this._pointLabels.length;let s,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=r.setContext(e.getPointLabelContext(i)),o=uu(t.font),{x:s,y:a,textAlign:l,left:c,top:d,right:u,bottom:h}=e._pointLabelItems[i],{backdropColor:p}=t;if(!bc(p)){const e=cu(t.borderRadius),r=du(t.backdropPadding);n.fillStyle=p;const i=c-r.left,o=d-r.top,s=u-c+r.width,a=h-d+r.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),nu(n,{x:i,y:o,w:s,h:a,radius:e}),n.fill()):n.fillRect(i,o,s,a)}Qd(n,e._pointLabels[i],s,a+o.lineHeight/2,o,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),s=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const o=e.ctx,s=t.circular,{color:a,lineWidth:l}=t;!s&&!r||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),tg(e,n,s,r),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,l)}})),n.display){for(e.save(),s=o-1;s>=0;s--){const r=n.setContext(this.getPointLabelContext(s)),{color:i,lineWidth:o}=r;o&&i&&(e.lineWidth=o,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(s,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&!t.reverse)return;const a=n.setContext(this.getContext(s)),l=uu(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=l.string,o=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=du(a.backdropPadding);e.fillRect(-o/2-t.left,-i-l.size/2-t.top,o+t.width,l.size+t.height)}Qd(e,r.label,0,-i,l,{color:a.color})})),e.restore()}drawTitle(){}}e(ng,"id","radialLinear"),e(ng,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Rd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),e(ng,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),e(ng,"descriptors",{angleLines:{_fallback:"grid"}});const rg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ig=Object.keys(rg);function og(e,t){return e-t}function sg(e,t){if(bc(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts;let s=t;return"function"==typeof r&&(s=r(s)),kc(s)||(s="string"==typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!Qc(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function ag(e,t,n,r){const i=ig.length;for(let o=ig.indexOf(e);o<i-1;++o){const e=rg[ig[o]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return ig[o]}return ig[i-1]}function lg(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=ud(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function cg(e,t,n){const r=[],i={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(e,t,n,r){const i=e._adapter,o=+i.startOf(t[0].value,r),s=t[t.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class dg extends zp{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),r=this._adapter=new Wh(e.adapters.date);r.init(t),Pc(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:sg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=kc(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=kc(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?ag(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let o=ig.length-1;o>=ig.indexOf(n);o--){const n=ig[o];if(rg[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return ig[n?ig.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=ig.indexOf(e)+1,n=ig.length;t<n;++t)if(rg[ig[t]].common)return ig[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),cg(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e=[]){let t,n,r=0,i=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),i=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=cd(r,0,o),i=cd(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||ag(i.minUnit,t,n,this._getLabelCapacity(t)),s=_c(r.ticks.stepSize,1),a="week"===o&&i.isoWeekday,l=Qc(a)||!0===a,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,l?"day":o),e.diff(n,t,o)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+o);const p="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,s,o),u++)lg(c,d,p);return d!==n&&"ticks"!==r.bounds&&1!==u||lg(c,d,p),Object.keys(c).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,o=i.ticks.callback;if(o)return Mc(o,[e,t,n],this);const s=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],d=l&&s[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=td(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,cg(this,[e],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(sg(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return gd(e.sort(og))}}function ug(e,t,n){let r,i,o,s,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=hd(e,"pos",t)),({pos:r,time:o}=e[a]),({pos:i,time:s}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=hd(e,"time",t)),({time:r,pos:o}=e[a]),({time:i,pos:s}=e[l]));const c=i-r;return c?o+(s-o)*(t-r)/c:o}e(dg,"id","time"),e(dg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class hg extends dg{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ug(t,this.min),this._tableRange=ug(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;++o)l=e[o],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)c=r[o+1],a=r[o-1],l=r[o],Math.round((c+a)/2)!==l&&i.push({time:l,pos:o/(s-1)});return i}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ug(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return ug(this._table,n*this._tableRange+this._minPos,!0)}}e(hg,"id","timeseries"),e(hg,"defaults",dg.defaults);const pg=[Vh,$f,Lm,Object.freeze({__proto__:null,CategoryScale:$m,LinearScale:Vm,LogarithmicScale:Ym,RadialLinearScale:ng,TimeScale:dg,TimeSeriesScale:hg})];hf.register(...pg);let fg=0;function mg(e="id"){return fg++,K({id:`${e}-${fg}`})}const gg=r({props:{data:{type:Object,required:!0},type:{type:String,default:"bar"}},setup(e){const{id:t}=mg("bar-chart"),n=Object.keys(e.data),r="MM/YY",i=He(n.shift()||"",r),o=He(n.pop()||"",r);return _((()=>{const n=document.getElementById(t),r=null==n?void 0:n.getContext("2d");if(!r)return;const i="#B6CFFB",o="#3558A2";let s={data:Object.values(e.data),type:e.type};if("bar"===e.type){const e=s;e.barPercentage=1,e.categoryPercentage=.9,e.backgroundColor=e.data.map(((t,n)=>n===e.data.length-1?o:i)),s=e}new hf(r,{data:{labels:Object.keys(e.data),datasets:[s]},options:{animation:!1,responsive:!0,locale:Ke,plugins:{legend:{display:!1},tooltip:{enabled:!1}},elements:{bar:{backgroundColor:i,borderRadius:2,hoverBackgroundColor:o},line:{backgroundColor:o,borderColor:o,borderJoinStyle:"round",tension:.35},point:{radius:0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}},layout:{padding:{top:1.5}}}})})),{id:t,startDate:i,endDate:o}}}),vg=["id"],yg={class:"fr-grid-row justify-between"},bg={class:"text-xxs fr-m-0 text-mention-grey"},wg={class:"text-xxs fr-m-0 text-mention-grey"};const xg=hn(gg,[["render",function(e,t,n,r,i,o){return a(),l(L,null,[w("canvas",{id:e.id,width:"120",height:"30"},null,8,vg),w("div",yg,[w("p",bg,x(e.startDate),1),w("p",wg,x(e.endDate),1)])],64)}]]),kg=r({props:{author:{type:Object,required:!0},badge:Boolean}}),Cg={class:"fr-text--sm fr-mb-0"},_g={key:0,class:"fr-badge fr-ml-3v"};const Sg=hn(kg,[["render",function(e,t,n,r,i,o){return a(),l("span",Cg,[R(x(e.author.first_name+" "+e.author.last_name)+" ",1),e.badge?(a(),l("span",_g,x(e.$t("Admin")),1)):g("",!0)])}]]);const Mg=hn(r({emits:["click"],props:{primary:{type:Boolean,default:!1}}}),[["render",function(e,t,n,r,i,o){return a(),l("button",{type:"button",class:v(["fr-btn",{"fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-add-line fr-btn--icon-left":!e.primary}]),onClick:t[0]||(t[0]=U((t=>e.$emit("click")),["prevent"]))},x(e.$t("Start a new discussion")),3)}]]);const Tg=hn({},[["render",function(e,t){const n=J("i18n-t");return a(),u(n,{keypath:"Fields preceded by a star ({markup}) are required.",tag:"p",class:"fr-mt-0 fr-mb-1w fr-text--xs",scope:"global"},{markup:f((()=>t[0]||(t[0]=[w("span",{class:"required-field-star"},"*",-1)]))),_:1})}]]),Og=r({expose:["displayForm"],components:{ThreadCreateButton:Mg,Author:Sg,RequiredExplanation:Tg},props:{showCreateButton:{type:Boolean,default:!1},subjectId:{type:String,required:!0},subjectClass:{type:String,required:!0},onSubmit:{type:Function,required:!0}},setup(e){const t=y(!1),n=y(!1),r=y(""),i=y("");return{loading:t,showForm:n,title:r,comment:i,user:Je,displayForm:()=>{Ge(),n.value=!0},hideForm:()=>{n.value=!1},submit:()=>{t.value=!0;const o={title:r.value,comment:i.value,subject:{id:e.subjectId,class:e.subjectClass}};e.onSubmit(o).finally((()=>{var e;t.value=!1,n.value=!1,r.value=i.value="",null===(e=document.querySelector("[data-no-discussion]"))||void 0===e||e.remove()}))}}}}),Dg={class:"thread-create fr-mt-2w"},Eg={key:1,class:"bg-contrast-grey"},Ag={class:"fr-grid-row fr-grid-row--middle fr-py-2w fr-px-3w"},Ng={class:"fr-col fr-h6 fr-mb-0"},Pg={class:"thread-comment fr-pb-3w fr-px-3w"},Lg={class:"fr-input-group"},Rg={for:"thread-title",class:"fr-label required"},Ig=["placeholder"],$g={class:"fr-input-group"},zg={for:"thread-comment",class:"fr-label required"},Bg=["placeholder"],Fg={class:"fr-grid-row justify-between fr-grid-row--middle"},Vg={class:"text-mention-grey fr-text--sm fr-mb-0"},jg=["value"];const Hg=hn(Og,[["render",function(e,t,n,r,i,o){const s=J("ThreadCreateButton"),c=J("RequiredExplanation"),d=J("Author");return a(),l("div",Dg,[e.showCreateButton&&!e.showForm?(a(),u(s,{key:0,onClick:e.displayForm},null,8,["onClick"])):g("",!0),e.showForm?(a(),l("div",Eg,[w("div",Ag,[w("div",Ng,x(e.$t("New discussion")),1),w("div",null,[w("button",{class:"fr-btn--close fr-btn text-grey-500 fr-mr-0",onClick:t[0]||(t[0]=(...t)=>e.hideForm&&e.hideForm(...t))},x(e.$t("Close")),1)])]),w("div",Pg,[w("form",{class:"form fr-p-0",onSubmit:t[3]||(t[3]=U(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[b(c),w("div",Lg,[w("label",Rg,x(e.$t("Title")),1),G(w("input",{class:"fr-input",type:"text",id:"thread-title","onUpdate:modelValue":t[1]||(t[1]=t=>e.title=t),placeholder:e.$t("Title"),required:!0},null,8,Ig),[[X,e.title]])]),w("div",$g,[w("label",zg,x(e.$t("Message")),1),G(w("textarea",{id:"thread-comment","onUpdate:modelValue":t[2]||(t[2]=t=>e.comment=t),placeholder:e.$t("Comment"),class:"fr-input",required:!0},null,8,Bg),[[X,e.comment]])]),w("footer",Fg,[w("span",Vg,[R(x(e.$t("Reply as"))+" ",1),b(d,{author:e.user},null,8,["author"])]),w("input",{type:"submit",value:e.$t("Submit"),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500"},null,8,jg)])],32)])])):g("",!0)])}]]);var Wg=Object.defineProperty,qg=(e,t,n)=>(((e,t,n)=>{t in e?Wg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Ug="top-right",Yg="top",Kg="top-left",Jg="bottom-right",Gg="bottom",Xg="bottom-left";function Zg(e,t,n){let r=t;switch(e){case Yg:case Ug:case Kg:r=t;break;case Gg:case Jg:case Xg:r=n}return r}let Qg=class{constructor(e,t){qg(this,"startedAt"),qg(this,"callback"),qg(this,"delay"),qg(this,"timer"),this.startedAt=Date.now(),this.callback=e,this.delay=t,this.timer=setTimeout(e,t)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}};const ev=function(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}(),tv=r({__name:"Toaster",props:{message:{},type:{default:"default"},position:{default:Jg},maxToasts:{type:[Number,Boolean],default:!1},duration:{type:[Number,Boolean],default:4e3},dismissible:{type:Boolean,default:!0},queue:{type:Boolean,default:!1},props:{type:Boolean,default:!0},useDefaultCss:{type:Boolean,default:!0},onClose:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}}},setup(e){const t=e;let n,r=null,i=null,o=null;const l=y(null),c=y(!1);function d(){if(function(){if(!t.queue&&!1===t.maxToasts)return!1;let e=0;r&&(e=r.childElementCount);let n=0;return i&&(n=i.childElementCount),!1!==t.maxToasts?t.maxToasts<=e+n:e>0||n>0}())return void(n=window.setTimeout(d,250));const e=r&&i?Zg(t.position,r,i):null;e&&l.value&&(e.insertAdjacentElement("afterbegin",l.value),c.value=!0,o=!1!==t.duration?new Qg(m,t.duration):null)}function h(){t.onClick.apply(null,arguments),t.dismissible&&m()}function p(e){o&&(e?o.pause():o.resume())}function m(){o&&o.stop(),clearTimeout(n),c.value=!1,setTimeout((()=>{t.onClose.apply(null,arguments),l.value&&(e=>{typeof e.remove<"u"?e.remove():e.parentNode&&e.parentNode.removeChild(e)})(l.value)}),150)}Z((()=>{r=document.querySelector(".c-toast-container--top"),i=document.querySelector(".c-toast-container--bottom"),(!r||!i)&&(r||(r=document.createElement("div"),r.className="c-toast-container c-toast-container--top"),i||(i=document.createElement("div"),i.className="c-toast-container c-toast-container--bottom")),function(){const e=t.useDefaultCss?"add":"remove";r&&r.classList[e]("v--default-css"),i&&i.classList[e]("v--default-css")}(),function(){const e=document.body;r&&e.appendChild(r),i&&e.appendChild(i)}()})),_((()=>{d(),ev.on("toast-clear",m)}));const g=s((()=>Zg(t.position,{enter:"fadeInDown",leave:"fadeOut"},{enter:"fadeInUp",leave:"fadeOut"}))),b=s((()=>t.dismissible?"button":"div"));return Q((()=>{ev.off("toast-clear",m)})),(e,t)=>(a(),u(ee,{"enter-active-class":g.value.enter,"leave-active-class":g.value.leave,ref_key:"el",ref:l},{default:f((()=>[G((a(),u(W(b.value),{class:v(["c-toast",`c-toast--${e.type}`,`c-toast--${e.position}`]),onMouseover:t[0]||(t[0]=e=>p(!0)),onMouseleave:t[1]||(t[1]=e=>p(!1)),onClick:h,role:"alert"},{default:f((()=>[R(x(e.message),1)])),_:1},40,["class"])),[[te,c.value]])])),_:1},8,["enter-active-class","leave-active-class"]))}}),nv=()=>typeof document<"u"?document.createElement("div"):null;const rv=function(e={}){return{show(t,n={}){let r={message:t,...n};return function(e,{props:t}={}){let n=nv(),r=$(e,t);return n&&ne(r,n),{vNode:r,destroy:()=>{n&&ne(null,n),n=null,r=null},el:n}}(tv,{props:{...e,...r}})},clear(){ev.emit("toast-clear")},success(e,t={}){return t.type="success",this.show(e,t)},error(e,t={}){return t.type="error",this.show(e,t)},info(e,t={}){return t.type="info",this.show(e,t)},warning(e,t={}){return t.type="warning",this.show(e,t)}}}({duration:!1,dismissible:!0});function iv(){return{toast:rv}}const ov=r({components:{Author:Sg,RequiredExplanation:Tg},emits:["close"],props:{onSubmit:{type:Function,required:!0}},setup(e){const{t:t}=Re(),{toast:n}=iv(),r=y(!1),i=y("");return{comment:i,loading:r,submit:()=>{r.value=!0,e.onSubmit(i.value).catch((e=>{n.error(t("Error sending response"))})).finally((()=>{r.value=!1,i.value=""}))},user:Je}}}),sv={class:"thread-reply"},av={class:"fr-grid-row fr-grid-row--middle fr-mb-3v"},lv={class:"fr-col fr-text--bold fr-mb-0"},cv={class:"fr-col-auto"},dv={class:"fr-input-group"},uv={class:"fr-label required",for:"textarea"},hv={class:"fr-grid-row justify-between fr-grid-row--middle"},pv={class:"text-mention-grey fr-text--sm fr-m-0"},fv=["value"];const mv=hn(ov,[["render",function(e,t,n,r,i,o){const s=J("RequiredExplanation"),c=J("Author");return a(),l("div",sv,[w("div",av,[w("h4",lv,x(e.$t("Reply to the discussion")),1),w("div",cv,[w("button",{class:"fr-btn--close fr-btn text-grey-500 fr-mr-0",onClick:t[0]||(t[0]=t=>e.$emit("close"))},x(e.$t("Close")),1)])]),w("form",{class:"form fr-p-0",onSubmit:t[2]||(t[2]=U(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[b(s),w("div",dv,[w("label",uv,x(e.$t("Comment")),1),G(w("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.comment=t),required:"",class:"fr-input",id:"textarea"},null,512),[[X,e.comment]])]),w("footer",hv,[w("p",pv,[R(x(e.$t("Reply as"))+" ",1),b(c,{author:e.user},null,8,["author"])]),w("input",{type:"submit",value:e.$t("Submit"),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500"},null,8,fv)])],32)])}]]),gv=r({__name:"MarkAsNoSpam",props:{url:{},spam:{}},setup(e){const t=e,n=()=>me.delete(t.url).then((()=>{window.location.reload()})),r=s((()=>t.spam&&t.spam.status&&"potential_spam"===t.spam.status&&Je&&Je.roles&&Je.roles.includes("admin")));return(e,t)=>r.value?(a(),l("button",{key:0,class:"fr-btn fr-btn--sm fr-btn--icon-right fr-icon-feedback-fill",onClick:n},x(e.$t("Mark as no spam")),1)):g("",!0)}}),vv=["id"],yv={class:"fr-grid-row fr-grid-row--middle justify-between fr-py-2w fr-px-3w no-wrap wrap-md"},bv={key:0,class:"fr-col-auto text-default-warning fr-text--bold fr-pr-2w fr-my-0"},wv={class:"fr-col fr-mx-3v fr-mx-md-0 fr-h6 fr-mb-0"},xv={class:"fr-col-auto text-align-right"},kv=["id","data-clipboard-text"],Cv={class:"fr-grid-row fr-grid-row--gutters"},_v={class:"fr-col-auto"},Sv={class:"fr-col"},Mv={class:"fr-my-0"},Tv={class:"fr-text--sm text-mention-grey fr-m-0"},Ov={class:"white-space-pre-wrap overflow-wrap-anywhere"},Dv={class:"fr-my-0"},Ev={key:0,class:"fr-py-2w fr-px-3w"},Av={class:"fr-py-2w fr-px-3w"},Nv={key:1,class:"text-grey-380"},Pv={class:"fr-px-1v"},Lv=r({__name:"Thread",props:{thread:{}},setup(e){const t=e,{t:n}=Re(),r=y(!1),i=y([...t.thread.discussion]),o=y(!!t.thread.closed),c=s((()=>"discussions/"+t.thread.id)),d=s((()=>{const e="#/"+c.value;return window.location.origin+window.location.pathname+e})),p=()=>{Ge(),r.value=!0},m=e=>me.post("/discussions/"+t.thread.id+"/",{comment:e}).then((e=>e.data)).then((e=>{i.value=e.discussion,r.value=!1}));return(e,t)=>(a(),l("div",{class:"bg-contrast-grey fr-mt-2w",id:c.value},[w("header",yv,[e.thread.closed?(a(),l("p",bv,[w("span",null,x(h(n)("Discussion closed")),1)])):g("",!0),w("h3",wv,x(e.thread.title),1),w("div",xv,[b(gv,{url:`discussions/${e.thread.id}/spam`,spam:e.thread.spam,class:"fr-mr-3v"},null,8,["url","spam"]),w("button",{id:e.thread.id+"-copy","data-clipboard-text":d.value,class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-right fr-icon-links-fill"},x(h(n)("Copy discussion permalink")),9,kv)])]),w("div",null,[b(re,{name:"list"},{default:f((()=>[o.value?g("",!0):(a(!0),l(L,{key:0},q(i.value,((t,n)=>(a(),l("article",{class:"thread-comment fr-py-3w fr-px-3w fr-pr-5w",key:`comment-${e.thread.id}-${n}`},[w("div",Cv,[w("div",_v,[b(h(Xt),{user:t.posted_by},null,8,["user"])]),w("div",Sv,[w("p",Mv,[b(Sg,{author:t.posted_by,badge:!1},null,8,["author"])]),w("p",Tv,x(h(He)(t.posted_on)),1),b(h(bs),{class:"fr-mt-3v"},{default:f((()=>[w("div",Ov,[w("p",Dv,x(t.content),1)])])),_:2},1024),b(gv,{url:`discussions/${e.thread.id}/comments/${n}/spam`,spam:t.spam,class:"fr-mt-3v"},null,8,["url","spam"])])])])))),128))])),_:1}),o.value?(a(),l("div",Ev,[w("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",onClick:t[0]||(t[0]=U((e=>o.value=!1),["prevent"]))},x(h(n)("See {n} messages",i.value.length)),1)])):g("",!0)]),w("footer",Av,[e.thread.closed||h(Xe)?g("",!0):(a(),l(L,{key:0},[r.value?(a(),u(mv,{key:1,subjectId:e.thread.id,onSubmit:m,onClose:t[1]||(t[1]=e=>r.value=!1)},null,8,["subjectId"])):(a(),l("button",{key:0,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-right fr-icon-arrow-right-s-line",onClick:U(p,["stop"])},x(h(n)("Reply")),1))],64)),e.thread.closed?(a(),l("div",Nv,[R(x(h(n)("The discussion was closed by"))+" ",1),w("strong",Pv,[b(Sg,{author:e.thread.closed_by},null,8,["author"])]),R(" "+x(h(n)("on"))+" "+x(h(He)(e.thread.closed)),1)])):g("",!0)])],8,vv))}});const Rv=hn({components:{ContentLoader:zt}},[["render",function(e,t,n,r,i,o){const s=J("ContentLoader");return a(),u(s,{width:280,height:180,speed:2,primaryColor:"#7c7c7c",secondaryColor:"#2d2d2d"},{default:f((()=>t[0]||(t[0]=[w("rect",{x:"104",y:"41",rx:"3",ry:"3",width:"162",height:"10"},null,-1),w("rect",{x:"105",y:"63",rx:"3",ry:"3",width:"139",height:"5"},null,-1),w("rect",{x:"26",y:"99",rx:"5",ry:"5",width:"60",height:"60"},null,-1),w("rect",{x:"104",y:"113",rx:"3",ry:"3",width:"162",height:"10"},null,-1),w("rect",{x:"105",y:"135",rx:"3",ry:"3",width:"139",height:"5"},null,-1),w("rect",{x:"26",y:"24",rx:"5",ry:"5",width:"60",height:"60"},null,-1)]))),_:1})}]]);const Iv={key:0,class:"fr-grid-row fr-grid-row--middle"},$v={class:"fr-col"},zv={id:"community-discussions",class:"subtitle subtitle--uppercase"},Bv={key:0,class:"fr-col-12 fr-col-md-6 fr-grid-row fr-grid-row--gutters fr-grid-row--middle fr-grid-row--right"},Fv={class:"fr-col-auto"},Vv=["aria-label"],jv=["value","selected"],Hv={class:"fr-col-auto"},Wv={key:1,class:"fr-grid-row fr-grid-row--center"},qv={key:0},Uv={class:"fr-grid-row fr-grid-row--middle justify-between"},Yv={class:"text-decoration-underline"},Kv={key:1},Jv={class:"fr-mb-5v"},Gv=r({__name:"Threads",props:{subjectId:{},subjectClass:{}},setup(e,{expose:t}){const n=e,{t:r}=Re(),{toast:i}=iv(),o=y([]),{id:s,resetHash:c}=function(e){const t=y(null),n=()=>{const n=window.location.hash;for(const r of e){let[e,i,o]=r.exec(n)||[];if(i)return t.value=i}t.value=null};return _((()=>{n(),window.addEventListener("hashchange",(()=>n()))})),{id:K(t),resetHash:()=>{history.pushState(null,""," "),window.dispatchEvent(new HashChangeEvent("hashchange"))}}}([/discussions\/([a-f0-9]{24})-?([0-9]+)?$/i,/discussion-([a-f0-9]{24})-?([0-9]+)?$/i]),d=y(null),p=y(1),m=y(0),v=y(!0),S=[{name:r("Discussion creation"),key:"-created"},{name:r("Last reply"),key:"-discussion.posted_on"}],M=y(S[0]),T=y(null),O=e=>{if(e)return v.value=!0,setTimeout((()=>{T.value&&T.value.scrollIntoView({behavior:"smooth"})}),500),me.get("/discussions/"+e).then((e=>e.data)).then((e=>{e&&(d.value=e,m.value=1)})).catch((()=>{i.error(r("An error occurred while fetching the discussion ")+e),D(1)})).finally((()=>{v.value=!1}))},D=(e=1,t=!1)=>(e=k(e),v.value=!0,t&&setTimeout((()=>{T.value&&T.value.scrollIntoView({behavior:"smooth"})}),500),me.get("/discussions/",{params:{page:e,for:n.subjectId,sort:M.value.key,page_size:5}}).then((e=>e.data)).then((e=>{e.data&&(o.value=e.data,m.value=e.total)})).catch((()=>{i.error(r("An error occurred while fetching discussions")),o.value=[]})).finally((()=>{v.value=!1}))),E=y(null),A=()=>{E.value&&E.value.displayForm()},N=e=>me.post("/discussions/",e).then((()=>{p.value=1,D(1,!0)})).catch((e=>i.error(r("An error occurred while creating the discussion "),e))),I=(e,t=!0)=>{p.value=e,D(e,t)};return _((()=>{D()})),P((()=>{s.value&&O(s.value)})),C(m,(e=>{const t=document.querySelectorAll(".discussions-count");t&&t.forEach((t=>t.innerHTML=e.toFixed(0)))})),t({startThread:()=>{A(),E.value&&E.value.$el.scrollIntoView()}}),(e,t)=>(a(),l("section",{class:"discussions-wrapper",ref_key:"top",ref:T},[m.value?(a(),l("div",Iv,[w("div",$v,[w("h2",zv,x(h(r)("{n} discussions",m.value)),1)]),h(s)?g("",!0):(a(),l("div",Bv,[w("div",Fv,[G(w("select",{name:"sortBy",id:"sortBy","aria-label":h(r)("Sort discussions by"),onChange:t[0]||(t[0]=e=>{return t=M.value,M.value=t,void D(p);var t}),"onUpdate:modelValue":t[1]||(t[1]=e=>M.value=e),class:"fr-select fr-select--no-border fr-select--blue"},[(a(),l(L,null,q(S,(e=>w("option",{value:e,selected:e===M.value},x(e.name),9,jv))),64))],40,Vv),[[ie,M.value]])]),w("div",Hv,[b(Mg,{onClick:A})])]))])):(a(),l("div",Wv,[b(Mg,{class:"fr-col--bottom",primary:!0,onClick:A})])),b(ee,{mode:"out-in"},{default:f((()=>[v.value?(a(),u(Rv,{key:0,class:"fr-mt-2w"})):(a(),l(L,{key:1},[h(s)?(a(),l("div",qv,[b(h(gc),{type:"secondary",color:"success",class:"fr-mt-2w","data-cy":"threadFromURL"},{default:f((()=>[w("div",Uv,[R(x(h(r)("You are seeing a specific discussion about this dataset."))+" ",1),w("button",{class:"fr-btn--close fr-btn fr-mr-0",onClick:t[2]||(t[2]=U(((...e)=>h(c)&&h(c)(...e)),["prevent"]))},x(h(r)("Close")),1)])])),_:1}),d.value?(a(),u(Lv,{key:0,thread:d.value},null,8,["thread"])):(a(),u(h(gc),{key:1,type:"secondary",color:"warning",class:"fr-mt-2w"},{default:f((()=>[R(x(e.$t("This discussion doesn't exist or was deleted.")),1)])),_:1})),w("button",{class:"nav-link nav-link--no-icon text-decoration-none fr-link fr-mt-9v fr-link--icon-left fr-icon-arrow-right-s-line",onClick:t[3]||(t[3]=U(((...e)=>h(c)&&h(c)(...e)),["prevent"]))},[w("span",Yv,x(h(r)("See all discussions about this dataset")),1)])])):(a(),l("div",Kv,[h(Xe)?g("",!0):(a(),u(Hg,{key:0,ref_key:"createThread",ref:E,onSubmit:N,subjectId:e.subjectId,subjectClass:e.subjectClass},null,8,["subjectId","subjectClass"])),w("ul",Jv,[(a(!0),l(L,null,q(o.value,(e=>(a(),l("li",null,[b(Lv,{thread:e},null,8,["thread"])])))),256))]),m.value>5?(a(),u(h(vs),{key:1,page:p.value,"page-size":5,"total-results":m.value,onChange:I},null,8,["page","total-results"])):g("",!0)]))],64))])),_:1})],512))}}),Xv=["href"],Zv={class:"fr-grid-row fr-grid-row--middle"},Qv=r({__name:"MenuSearchOption",props:{icon:{},query:{},link:{},type:{}},setup:e=>(e,t)=>{const n=J("i18n-t");return a(),l("a",{class:"fr-nav__link unstyled",href:e.link},[w("div",Zv,[w("span",{class:v(["fr-icon--sm align-[-1px] fr-mr-1w",e.icon]),"aria-hidden":"true"},null,2),e.query?(a(),u(n,{key:0,keypath:"Search {query} in {type}",class:"fr-col",tag:"div",scope:"global"},{query:f((()=>[w("em",null,x(e.query),1)])),type:f((()=>[w("strong",null,x(e.type),1)])),_:1})):(a(),u(n,{key:1,keypath:"Start typing to search in X",class:"fr-col",tag:"div",scope:"global"},{type:f((()=>[w("strong",null,x(e.type),1)])),_:1})),t[0]||(t[0]=w("div",{"aria-hidden":"true",class:"fr-col-auto"},[w("span",{class:"fr-icon-arrow-right-s-line fr-icon--sm","aria-hidden":"true"})],-1))])],8,Xv)}});function ey(e){const t=s((()=>`${Ze}?q=${k(e)}`));return{dataserviceUrl:s((()=>`${Qe}?q=${k(e)}`)),datasetUrl:t,organizationUrl:s((()=>`${et}?q=${k(e)}`)),reuseUrl:s((()=>`${tt}?q=${k(e)}`))}}function ty(e){const t=y(),n=s((()=>k(e).find((e=>e.id===t.value)))),r=e=>{if(void 0===e)return o(0);t.value=e},i=()=>{t.value=void 0},o=t=>{let n=k(e);n[t]&&r(n[t].id)};return{select:r,selected:t,selectedOption:n,isSelected:e=>t.value===e,focusOut:i,handleKeyPressForActiveDescendant:(n,r=!1)=>{switch(n.key){case"ArrowDown":r||n.altKey||(()=>{let n=0;t.value&&(n=k(e).findIndex((e=>e.id===t.value)),n++,n===k(e).length&&(n=0)),o(n)})();break;case"ArrowUp":(()=>{const n=k(e).length-1;let r=n;t.value&&(r=k(e).findIndex((e=>e.id===t.value)),r--,r<0&&(r=n)),o(r)})();break;case"ArrowLeft":case"ArrowRight":case"Home":case"End":case"Escape":i()}},ALREADY_MOVED_DOWN:!0,NOT_MOVED_YET:!1}}function ny(e,t){const n=y(null),r=y(null),i=y(null),{expanded:o,handleKeyPressForCollapse:s,hide:a,registerBackgroundEvent:l,removeBackgroundEvent:c,show:d,uid:u}=function(){const e=Ve("collapse"),t=y(!1),n=()=>t.value=!0,r=()=>t.value=!1;let i=null;const o=(e,t)=>!e||!e.contains(t),s=(e,t,n)=>i=>{const s=i.target;o(e,s)&&o(t,s)&&o(n,s)&&r()};return{expanded:t,uid:e,show:n,hide:r,toggle:()=>t.value=!t.value,registerBackgroundEvent:(e,t,n)=>{const r=k(e),o=k(t),a=k(n);i=s(r,o,a),document.body.addEventListener("pointerup",i,!0)},removeBackgroundEvent:()=>{i&&document.body.removeEventListener("pointerup",i,!0)},handleKeyPressForCollapse:e=>{switch(e.key){case"Alt":case"Control":case"Shift":case"CapsLock":break;case"Escape":case"Tab":r();break;default:n()}}}}(),{focusOut:h,handleKeyPressForActiveDescendant:p,isSelected:f,select:m,selected:g,selectedOption:v,NOT_MOVED_YET:b,ALREADY_MOVED_DOWN:w}=ty(e);function x(){k(t)&&(d(),m(g.value))}function C(){v.value&&(window.location.href=v.value.link)}return _((()=>{l(n,r,i)})),B((()=>{c()})),{buttonRef:i,expanded:o,focusOut:h,handleFocusOut:function(){h(),a()},handleKeyDown:function(e){x();let t=b;o.value||(t=w),s(e),p(e,t)},handleKeyPressForActiveDescendant:p,handleKeyPressForCollapse:s,hide:a,inputRef:n,isSelected:f,listRef:r,registerBackgroundEvent:l,removeBackgroundEvent:c,searchSelectedOption:C,select:m,selected:g,show:d,showAndFocus:function(){var e;o.value?C():(null===(e=n.value)||void 0===e||e.focus(),x())},showAndSelectIfQuery:x,uid:u,NOT_MOVED_YET:b,ALREADY_MOVED_DOWN:w}}const ry=["id"],iy=["for","id"],oy=["placeholder","aria-controls","aria-expanded","id","aria-activedescendant"],sy=["aria-controls","aria-expanded"],ay=["id","aria-labelledby"],ly={class:"fr-menu__list",role:"listbox"},cy=["id","aria-selected"],dy=r({__name:"MenuSearch",setup(e){const{t:t}=Re(),n=y(""),{datasetUrl:r,dataserviceUrl:i,reuseUrl:o,organizationUrl:c}=ey(n),{id:d}=mg("search"),u=s((()=>`${d}-input`)),p=s((()=>`${d}-label`)),f=y([{id:"dataset-option",icon:"fr-icon-database-line",type:t("datasets"),link:r},{id:"dataservice-option",icon:"fr-icon-code-s-slash-line",type:t("dataservices"),link:i},{id:"reuse-option",icon:"fr-icon-line-chart-line",type:t("reuses"),link:o},{id:"organization-option",icon:"fr-icon-government-line",type:t("organizations"),link:c}]),{buttonRef:m,expanded:g,handleFocusOut:v,handleKeyDown:k,inputRef:C,isSelected:_,listRef:S,searchSelectedOption:M,selected:T,showAndFocus:O,showAndSelectIfQuery:D,uid:E}=ny(f,n);return(e,r)=>(a(),l("div",{id:h(d),class:"fr-col fr-search-bar wrap",role:"search"},[w("label",{class:"fr-label",for:u.value,id:p.value},x(h(t)("Search for data")),9,iy),G(w("input",{class:"fr-input fr-col",placeholder:h(t)("Search"),ref_key:"inputRef",ref:C,autocomplete:"off",role:"combobox","aria-autocomplete":"list","aria-controls":h(E),"aria-expanded":h(g),id:u.value,"data-cy":"search-input","aria-activedescendant":h(T),name:"q","onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e),onClickCapture:r[1]||(r[1]=U(((...e)=>h(D)&&h(D)(...e)),["stop"])),onKeydown:r[2]||(r[2]=(...e)=>h(k)&&h(k)(...e)),onKeypress:r[3]||(r[3]=oe(U(((...e)=>h(M)&&h(M)(...e)),["prevent"]),["enter"])),onBlur:r[4]||(r[4]=(...e)=>h(v)&&h(v)(...e))},null,40,oy),[[X,n.value]]),w("button",{type:"button",ref_key:"buttonRef",ref:m,class:"fr-btn",tabindex:"-1","aria-controls":h(E),"aria-expanded":h(g),onClickCapture:r[5]||(r[5]=U(((...e)=>h(O)&&h(O)(...e)),["prevent","stop"]))},x(h(t)("Search")),41,sy),w("div",{class:"fr-menu fr-collapse autocomplete",id:h(E),ref_key:"listRef",ref:S,role:"listbox","aria-labelledby":p.value,onMousedown:r[6]||(r[6]=U((()=>{}),["prevent"]))},[w("ul",ly,[(a(!0),l(L,null,q(f.value,(e=>(a(),l("li",{key:e.id,id:e.id,role:"option","aria-selected":h(_)(e.id)},[b(Qv,{icon:e.icon,query:n.value,type:e.type,link:e.link},null,8,["icon","query","type","link"])],8,cy)))),128))])],40,ay)],8,ry))}}),uy=r({emits:["change"],props:{value:{type:String,required:!0},placeholder:{type:String,required:!0}},setup(e,{emit:t}){const{id:n}=mg("search-input"),r=y(e.value),i=y(null);return _((async()=>{var e;await S(),null===(e=i.value)||void 0===e||e.focus({preventScroll:!0})})),P((()=>{r.value=e.value})),{id:n,input:i,onDelete:()=>{""===r.value&&t("change",r.value)},onInput:e=>{const n=e.target;t("change",n.value)},queryString:r}}}),hy={class:"fr-search-bar fr-search-bar--lg w-100"},py=["for"],fy=["id","value","aria-label","placeholder"],my={class:"fr-btn",type:"submit"};const gy=hn(uy,[["render",function(e,t,n,r,i,o){return a(),l("section",hy,[w("label",{class:"fr-label",for:e.id},x(e.$t("Search")),9,py),w("input",{id:e.id,type:"search",name:"q",value:e.queryString,onInput:t[0]||(t[0]=(...t)=>e.onInput&&e.onInput(...t)),onKeydown:t[1]||(t[1]=oe(((...t)=>e.onDelete&&e.onDelete(...t)),["delete"])),ref:"input",class:"fr-input","aria-label":e.placeholder||e.$t("Search..."),placeholder:e.placeholder||e.$t("Search..."),"data-cy":"search-input","data-testid":"search-input"},null,40,fy),w("button",my,x(e.$t("Search")),1)])}]]),vy=r({__name:"card-lg",props:{dataset:{},style:{type:[Boolean,null,String,Object,Array]},showDescription:{type:Boolean,default:!0}},setup:e=>(e,t)=>{var n;return a(),u(h(Ao),{dataset:e.dataset,style:H(e.style),showDescription:e.showDescription,"dataset-url":e.dataset.page,"organization-url":null===(n=e.dataset.organization)||void 0===n?void 0:n.page},null,8,["dataset","style","showDescription","dataset-url","organization-url"])}}),yy=r({components:{ContentLoader:zt},setup(e){const t=nt.resources_default_page_size;return{pageSize:t,height:88,getPosition:(e,t)=>88*(e-1)+t}}}),by=["y"],wy=["y"],xy=["y"],ky=["y"],Cy=["y"];const _y=hn(yy,[["render",function(e,t,n,r,i,o){const s=J("ContentLoader");return a(),u(s,{width:1200,height:e.height*e.pageSize,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:f((()=>[(a(!0),l(L,null,q(e.pageSize,(t=>(a(),l(L,null,[w("rect",{x:"20",y:e.getPosition(t,24),rx:"4",ry:"4",width:"16",height:"16"},null,8,by),w("rect",{x:"52",y:e.getPosition(t,20),rx:"4",ry:"4",width:"536",height:"22"},null,8,wy),w("rect",{x:"52",y:e.getPosition(t,52),rx:"4",ry:"4",width:"374",height:"16"},null,8,xy),w("rect",{x:"1052",y:e.getPosition(t,30),rx:"4",ry:"4",width:"80",height:"20"},null,8,ky),w("rect",{x:"1154",y:e.getPosition(t,20),rx:"20",ry:"20",width:"40",height:"40"},null,8,Cy)],64)))),256))])),_:1},8,["height"])}]]),Sy={help:"Utilisez la tabulation (ou les touches flèches) pour naviguer dans la liste des suggestions",placeholder:"Rechercher dans la liste",noResult:"Aucun résultat",results:"{x} suggestion(s) disponibles",deleteItem:"Supprimer {t}",delete:"Supprimer",clear:"Vider"},My=Element.prototype.matches;let Ty=Element.prototype.closest;Ty||(Ty=function(e){var t=this;do{if(My.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});function Oy(e){return Array.from(e).map((e=>e.cloneNode(true)))}function Dy(e){return"OPTGROUP"===e.parentNode.tagName&&(e.dataset.group=e.parentNode.label),e}let Ey=class{constructor(e,t){var n;this.el=e,this.label=document.querySelector(`label[for=${e.id}]`),this.id=e.id,this.open=!1,this.multiple=this.el.multiple,this.search="",this.suggestions=[],this.focusIndex=null;const r=Object.assign({},t),i=Object.assign({},Sy,r.text);if(delete r.text,this._defaultSearch=this._defaultSearch.bind(this),this._options=Object.assign({text:i,showSelected:!0,fillSuggestions:this._defaultSearch,useLabelAsButton:!1,clearable:!1},r),this._handleFocus=this._handleFocus.bind(this),this._handleInput=this._handleInput.bind(this),this._handleKeyboard=this._handleKeyboard.bind(this),this._handleOpener=this._handleOpener.bind(this),this._handleClear=this._handleClear.bind(this),this._handleReset=this._handleReset.bind(this),this._handleSuggestionClick=this._handleSuggestionClick.bind(this),this._positionCursor=this._positionCursor.bind(this),this._removeOption=this._removeOption.bind(this),this.setText=this.setText.bind(this),this._setButtonText=this._setButtonText.bind(this),!this.multiple){const e=Array.from(this.el.options).some((e=>e.selected));if(this._options.useLabelAsButton&&!e){var o;const e=document.createElement("option");e.innerText=null!==(o=null==(n=this.label)?void 0:n.innerText)&&void 0!==o?o:"",e.setAttribute("value",""),e.setAttribute("selected","selected"),e.setAttribute("disabled","disabled"),e.setAttribute("hidden","hidden"),this.el.options.add(e,0)}}this.originalOptions=Oy(Array.from(this.el.options).map(Dy)),this.updatedOriginalOptions=Oy(this.originalOptions),this.currentOptions=Oy(this.originalOptions),this._disable(),this.button=this._createButton(),this._setButtonText(),this.clearButton=this._createClearButton(),this.liveZone=this._createLiveZone(),this.overlay=this._createOverlay(),this.wrap=this._wrap(),this.multiple&&this._options.showSelected&&(this.selectedList=this._createSelectedList(),this._updateSelectedList(),this.selectedList.addEventListener("click",this._removeOption)),this.button.addEventListener("click",this._handleOpener),this.clearButton.addEventListener("click",this._handleClear),this.wrap.addEventListener("keydown",this._handleKeyboard),document.addEventListener("blur",this._handleFocus,!0),this.el.form&&this.el.form.addEventListener("reset",this._handleReset)}setText(e){Object.assign(this._options.text,e)}selectOption(e,t=!0){const n=this.currentOptions.findIndex((t=>t.value===e));if(-1===n)return;const r=!this.multiple;this._toggleSelection(n,r,t)}selectOptionSilently(e){this.selectOption(e,false)}_createButton(){var e;const t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("aria-expanded",this.open?"true":"false"),t.className="select-a11y-button";const n=document.createElement("span");return n.className="select-a11y-button__text",this.label&&!this.label.id&&(this.label.id=`${this.el.id}-label`),t.setAttribute("id",this.el.id+"-button"),t.setAttribute("aria-labelledby",(null==(e=this.label)?void 0:e.id)+" "+t.id),n.innerHTML="&nbsp;",t.appendChild(n),t.insertAdjacentHTML("beforeend",'<span class="select-a11y-button__icon" aria-hidden="true"></span>'),t}_createClearButton(){const e=document.createElement("button");return e.setAttribute("type","button"),e.setAttribute("aria-label",this._options.text.clear),e.className="select-a11y-button__clear",e}_createLiveZone(){const e=document.createElement("p");return e.setAttribute("aria-live","polite"),e.classList.add("sr-only"),e}_createOverlay(){const e=document.createElement("div");e.classList.add("select-a11y__overlay");const t=document.createElement("div");return t.classList.add("select-a11y-suggestions"),t.id=`a11y-${this.id}-suggestions`,e.innerHTML=`\n      <p id="a11y-usage-${this.id}-js" class="sr-only">${this._options.text.help}</p>\n      <label for="a11y-${this.id}-js" class="sr-only">${this._options.text.placeholder}</label>\n      <input type="search" id="a11y-${this.id}-js" class="select-a11y__input ${this.el.className}" autocomplete="off" autocapitalize="off" spellcheck="false" placeholder="${this._options.text.placeholder}" aria-describedby="a11y-usage-${this.id}-js">\n    `,e.appendChild(t),this.list=t,this.list.addEventListener("click",this._handleSuggestionClick),this.input=e.querySelector("input"),this.input&&(this.input.addEventListener("input",this._handleInput),this.input.addEventListener("focus",this._positionCursor,!0)),e}_createSelectedList(){const e=document.createElement("ul");return e.className="select-a11y__selected-list",e}_disable(){this.el.setAttribute("tabindex","-1")}_mapToSuggestion(e){return{hidden:e.hidden,disabled:e.disabled,selected:e.hasAttribute("selected"),label:e.label,value:e.value,image:e.dataset.image,alt:e.dataset.alt,helper:e.dataset.helper,description:e.dataset.description,showIcon:e.dataset.showIcon,group:e.dataset.group,link:e.dataset.link,linkText:e.dataset.linkText}}_mapToOption(e){const t=document.createElement("option");return t.label=e.label,t.value=e.value,e.hidden&&t.setAttribute("hidden","hidden"),e.disabled&&t.setAttribute("disabled","disabled"),e.selected&&t.setAttribute("selected","selected"),e.image&&(t.dataset.image=e.image),e.alt&&(t.dataset.alt=e.alt),e.description&&(t.dataset.description=e.description),e.helper&&(t.dataset.helper=e.helper),e.showIcon&&(t.dataset.showIcon=e.showIcon),e.group&&(t.dataset.group=e.group),e.link&&(t.dataset.link=e.link),e.linkText&&(t.dataset.linkText=e.linkText),t}_defaultSearch(e,t){const n=t.filter((t=>-1!==(t.label||t.value).toLocaleLowerCase().indexOf(e))).map(this._mapToSuggestion);return Promise.resolve(n)}async _fillSuggestions(){const e=this.search.toLowerCase(),t=await this._options.fillSuggestions(e,this.updatedOriginalOptions);this.currentOptions=t.map(this._mapToOption),this.el.replaceChildren(...this._fillSelect(this.currentOptions));const n=t.map(((e,t)=>{const n=document.createElement("div");n.setAttribute("role","option"),n.setAttribute("tabindex","0"),n.setAttribute("data-index",t.toString()),e.hidden&&n.setAttribute("data-hidden","hidden"),e.disabled&&n.setAttribute("data-disabled","disabled"),n.classList.add("select-a11y-suggestion");const r=document.createElement("div");r.classList.add("select-a11y-column"),n.appendChild(r);const i=document.createElement("div");if(i.classList.add("select-a11y-suggestion__label"),i.innerText=e.label||e.value,r.appendChild(i),e.selected&&n.setAttribute("aria-selected","true"),e.description){const t=document.createElement("div");t.classList.add("select-a11y-suggestion__description"),e.showIcon&&t.setAttribute("data-show-icon","true"),t.innerText=e.description,r.appendChild(t)}if(e.helper){const t=document.createElement("div");t.classList.add("column--right"),n.appendChild(t);const r=document.createElement("code");r.classList.add("select-a11y-suggestion__helper"),r.innerText=e.helper,t.appendChild(r)}else if(e.link){const t=document.createElement("div");t.classList.add("column--right"),n.appendChild(t);const r=document.createElement("a");r.target="_blank",r.innerText=e.linkText,r.href=e.link,t.appendChild(r)}if(e.image){const t=document.createElement("img");t.setAttribute("src",e.image),t.setAttribute("alt",e.alt?e.alt:""),t.classList.add("select-a11y-suggestion__image"),n.prepend(t)}return{suggestionElement:n,group:e.group}})).filter((e=>!e.suggestionElement.dataset.disabled&&!e.suggestionElement.dataset.hidden)),r=[],i={};if(n.forEach((({suggestionElement:e,group:t})=>{if(t){if(!i[t]){const e=document.createElement("div");e.setAttribute("role","group"),i[t]=e;const n=document.createElement("div");n.setAttribute("role","presentation"),n.innerHTML=t,e.appendChild(n)}i[t].appendChild(e)}else r.push(e)})),this.suggestions=n.map((({suggestionElement:e})=>e)),this.list)if(this.suggestions.length){const e=document.createElement("div");e.setAttribute("role","listbox"),this.multiple&&e.setAttribute("aria-multiselectable","true"),Object.values(r).forEach((t=>{e.appendChild(t)})),Object.values(i).forEach((t=>{e.appendChild(t)})),this.list.innerHTML="",this.list.appendChild(e)}else this.list.innerHTML=`<p class="select-a11y__no-suggestion">${this._options.text.noResult}</p>`;return this._setLiveZone(),t}_fillSelect(e){const t=[];return e.forEach((e=>{const n=e.dataset.group;if(n){if(!t.find((e=>"OPTGROUP"===e.tagName&&e.label===n))){const e=document.createElement("optgroup");e.label=n,t.push(e)}t[t.length-1].appendChild(e)}else t.push(e)})),t}_handleOpener(e){this._toggleOverlay()}_handleFocus(){this.open&&(clearTimeout(this._focusTimeout),this._focusTimeout=setTimeout((()=>{if(this.overlay.contains(document.activeElement)||this.button===document.activeElement)if(document.activeElement===this.input)this.focusIndex=null;else{const e=this.suggestions.indexOf(document.activeElement);-1!==e&&(this.focusIndex=e)}else this._toggleOverlay(!1,document.activeElement===document.body)}),10))}_handleClear(){this.el.value="",this._handleReset()}_handleReset(){clearTimeout(this._resetTimeout),this._resetTimeout=setTimeout((async()=>{this.search="",this.updatedOriginalOptions=Oy(this.originalOptions),this.currentOptions=Oy(this.originalOptions),this.el.dispatchEvent(new Event("reset")),await this._fillSuggestions(),this.el.dispatchEvent(new Event("change")),this._setButtonText(),this.multiple&&this._options.showSelected&&this._updateSelectedList()}),10)}_handleSuggestionClick(e){const t=Ty.call(e.target,'[role="option"]');if(!t)return;const n=parseInt(t.getAttribute("data-index"),10),r=!(this.multiple&&e.metaKey);this._toggleSelection(n,r)}_handleInput(){var e,t,n;this.search!==(null==(t=this.input)?void 0:t.value)&&(this.search=null!==(e=null==(n=this.input)?void 0:n.value)&&void 0!==e?e:"",this._fillSuggestions())}_handleKeyboard(e){const t=Ty.call(e.target,'[role="option"]'),n=Ty.call(e.target,"input");if(27!==e.keyCode)if(n&&13===e.keyCode)e.preventDefault();else{if(40===e.keyCode)return e.preventDefault(),void this._moveIndex(1);if(t){if(39===e.keyCode)return e.preventDefault(),void this._moveIndex(1);if(37===e.keyCode||38===e.keyCode)return e.preventDefault(),void this._moveIndex(-1);(!this.multiple&&13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),this._toggleSelection(parseInt(t.getAttribute("data-index"),10),!this.multiple)),this.multiple&&13===e.keyCode&&this._toggleOverlay()}}else this._toggleOverlay()}_moveIndex(e){if(null===this.focusIndex)this.focusIndex=0;else{const t=this.focusIndex+e,n=this.suggestions.length-1;this.focusIndex=t>n?0:t<0?n:t}this.suggestions[this.focusIndex].focus()}_positionCursor(){setTimeout((()=>{if(this.input){var e;const t=null!==(e=this.input.value.length)&&void 0!==e?e:0;this.input.setSelectionRange(t,t)}}))}_removeOption(e){var t,n;const r=Ty.call(e.target,"button");if(!r)return;const i=null==(t=this.selectedList)?void 0:t.querySelectorAll("button"),o=Array.prototype.indexOf.call(i,r)-1,s=parseInt(r.getAttribute("data-index"),10);if(this._toggleSelection(s),null!=(n=this.selectedList)&&n.parentElement){const e=this.selectedList.querySelectorAll("button");e[o]?e[o].focus():e[0].focus()}else this.button.focus()}_setButtonText(){var e;const t=this.el.item(this.el.selectedIndex),n=this.button.firstElementChild;t&&t.value?this.button.classList.remove("select-a11y-button--no-selected-option"):this.button.classList.add("select-a11y-button--no-selected-option"),this.multiple?this._options.useLabelAsButton?n.innerText=(null==(e=this.label)?void 0:e.innerText)||"":n.innerHTML="&nbsp;":t&&(n.innerText=t.label||t.value)}_setLiveZone(){const e=this.suggestions.length;let t="";this.open&&(t=e?this._options.text.results.replace("{x}",e):this._options.text.noResult),this.liveZone.innerText=t}_toggleOverlay(e,t){var n;this.open=void 0!==e?e:!this.open,this.button.setAttribute("aria-expanded",this.open?"true":"false"),this.open?(this._fillSuggestions(),this.button.insertAdjacentElement("afterend",this.overlay),null==(n=this.input)||n.focus()):this.wrap.contains(this.overlay)&&(this.wrap.removeChild(this.overlay),this.focusIndex=null,this.input&&this._options.fillSuggestions===this._defaultSearch&&(this.input.value=""),this.search="",this._setLiveZone(),(void 0===e||t)&&setTimeout((()=>{this.button.focus()})))}_toggleSelection(e,t=!0,n=!0){const r=this.el.item(e);this.multiple?null!=r&&r.hasAttribute("selected")?r.removeAttribute("selected"):null==r||r.setAttribute("selected","selected"):(null==r||r.setAttribute("selected","selected"),this.el.selectedIndex=e),this.updatedOriginalOptions=this.updatedOriginalOptions.map((e=>(e.value===(null==r?void 0:r.value)&&(r.hasAttribute("selected")?e.setAttribute("selected","selected"):e.removeAttribute("selected")),!this.multiple&&e.value!==(null==r?void 0:r.value)&&e.removeAttribute("selected"),e))),this.currentOptions=this.currentOptions.map((e=>(e.value===(null==r?void 0:r.value)&&(r.hasAttribute("selected")?e.setAttribute("selected","selected"):e.removeAttribute("selected")),!this.multiple&&e.value!==(null==r?void 0:r.value)&&e.removeAttribute("selected"),e))),this.suggestions=this.suggestions.map((e=>{var t;const n=parseInt(null!==(t=e.getAttribute("data-index"))&&void 0!==t?t:"",10),r=this.el.item(n);return r&&r.selected?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e})),n&&this.el.dispatchEvent(new Event("change")),this._setButtonText(),this.multiple&&this._options.showSelected&&this._updateSelectedList(),t&&this.open&&this._toggleOverlay()}_updateSelectedList(){var e;const t=this.currentOptions.map(((e,t)=>{if(!e.selected||e.hidden)return;const n=e.label||e.value;return`\n        <li class="select-a11y__selected-item">\n          <span>${n}</span>\n          <button class="select-a11y-delete" title="${this._options.text.deleteItem.replace("{t}",n)}" type="button" data-index="${t}">\n            <span class="sr-only">${this._options.text.delete}</span>\n            <span class="select-a11y-delete__icon" aria-hidden="true"></span>\n          </button>\n        </li>`})).filter(Boolean);this.selectedList&&(this.selectedList.innerHTML=t.join(""),t.length?null!=(e=this.selectedList)&&e.parentElement||this.wrap.appendChild(this.selectedList):this.selectedList.parentElement&&this.wrap.removeChild(this.selectedList))}_wrap(){var e;const t=document.createElement("div");t.classList.add("select-a11y"),null==(e=this.el.parentElement)||e.appendChild(t);const n=document.createElement("div");return n.classList.add("select-a11y__hidden"),n.setAttribute("aria-hidden","true"),this._options.useLabelAsButton&&n.appendChild(this.label),n.appendChild(this.el),t.appendChild(n),t.appendChild(this.liveZone),t.appendChild(this.button),this._options.clearable&&t.appendChild(this.clearButton),t}};const Ay=r({props:{required:{type:Boolean,required:!0}}}),Ny={key:0,class:"required-field-star"};const Py=hn(Ay,[["render",function(e,t,n,r,i,o){return e.required?(a(),l("span",Ny,"*")):g("",!0)}]]),Ly=r({components:{Required:Py},emits:["change"],props:{addAllOption:{type:Boolean,default:!0},allOption:{type:String,default:""},emptyPlaceholder:{type:String},entityUrl:{type:String},errorText:{type:String,default:""},explanation:{type:String,default:""},hasError:{type:Boolean,default:!1},hasWarning:{type:Boolean,default:!1},hintText:{type:String,default:""},isBlue:{type:Boolean,default:!1},initialOptions:Promise,isValid:{type:Boolean,default:!1},listUrl:{type:String},minimumCharacterBeforeSuggest:{type:Number,default:1},placeholder:{type:String,required:!0},required:{type:Boolean,default:!1},searchPlaceholder:{type:String,required:!0},suggestUrl:{type:String},values:{type:[Array,String]},multiple:{type:Boolean,default:!1},addNewOption:{type:Boolean,default:!1},helperLabel:{type:String,default:""},groups:{type:Array,default:null},onSuggest:{type:Function,default:null},showDescription:{type:Boolean,default:!1},roundedImages:{type:Boolean,default:!1}},setup(e,{emit:t}){const{t:n}=Re(),{toast:r}=iv(),{id:i}=mg("multiselect"),o=s((()=>i+"-desc-error")),a=s((()=>i+"-desc-valid")),l=s((()=>({"fr-select-group--error":e.hasError,"fr-select-group--warning":!e.hasError&&e.hasWarning,"fr-select-group--valid":e.isValid,"multiselect--rounded-images":e.roundedImages,"multiselect--align-center":!e.showDescription}))),c=Er("selectRef"),d=y(null),u=y(0),h=y([]),p=y([]),f=s((()=>h.value.slice(0,20))),m=y(e.multiple?[]:null),g=y(null),v=y(null),b=s((()=>e.emptyPlaceholder||n("No results found."))),w=V({help:n("Use tab (or arrow down) to move between suggestions"),placeholder:e.searchPlaceholder,noResult:b.value,results:n("{x} available suggestion"),deleteItem:n("Delete {t}"),delete:n("Delete")}),x=t=>t.map((t=>{var n,r,i,o,s,a,l,c,d,u,h,p,f,m,g;return{label:null!==(n=null!==(r=null!==(i=null!==(o=null!==(s=t.name)&&void 0!==s?s:t.title)&&void 0!==o?o:t.text)&&void 0!==i?i:null==t||null===(a=t.properties)||void 0===a?void 0:a.name)&&void 0!==r?r:t.label)&&void 0!==n?n:t,value:null!==(l=null!==(c=null!==(d=t.id)&&void 0!==d?d:t.text)&&void 0!==c?c:t.value)&&void 0!==l?l:t,image:null!==(u=null!==(h=null!==(p=null!==(f=null!==(m=t.logo_thumbnail)&&void 0!==m?m:t.logo)&&void 0!==f?f:t.image_url)&&void 0!==p?p:t.image)&&void 0!==h?h:t.avatar_thumbnail)&&void 0!==u?u:t.avatar,hidden:t.hidden,selected:!!t.selected,helper:null!=t&&t.code?e.helperLabel+t.code:null==t?void 0:t.helper,description:e.showDescription&&null!==(g=null==t?void 0:t.description)&&void 0!==g?g:"",group:null==t?void 0:t.group,recommended:null==t?void 0:t.recommended}})),S=t=>t.length<e.minimumCharacterBeforeSuggest?(async()=>e.initialOptions?e.initialOptions:e.listUrl?me.get(e.listUrl).then((t=>{let n=t.data;if(Array.isArray(n)||(n=n.data),e.groups){const t=n.map((t=>{const n=e.groups.find((e=>e.values.some((e=>e.value===t.id))));if(n){const e=n.values.find((e=>e.value===t.id));if(e)return{...t,group:n.name,description:e.description||null,recommended:e.recommended,code:e.code}}return t}));return x(t)}return x(n)})).catch((t=>(je.isCancel(t)||r.error(n("Error getting {type}.",{type:e.placeholder})),[]))):p.value)():e.suggestUrl?(g.value&&g.value.cancel(),g.value=rt(),me.get(e.suggestUrl,{params:{q:t,size:20},cancelToken:g.value.token}).then((t=>e.onSuggest?e.onSuggest(t.data):t.data)).then((n=>(e.addNewOption&&!n.some((e=>e.text===t))&&n.push({text:t}),x(n)))).catch((t=>(je.isCancel(t)||r.error(n("Error getting {type}.",{type:e.placeholder})),[])))):(async(e="")=>{const t=h.value.filter((t=>-1!==(t.label||t.value).toLocaleLowerCase().indexOf(e))).slice(0,20);return x(t)})(t),M=(e="")=>S(e).then(O),T=(e="")=>M(e).then((e=>(p.value=e,e.slice(0,20)))),O=t=>{const n=[...t].map((e=>(e.selected=!1,e)));if(e.allOption){n.find((e=>!e.value))||n.unshift({label:e.allOption,value:"",hidden:!e.addAllOption})}let r=[];r=Array.isArray(m.value)?m.value:[m.value];for(let e of r)if("string"==typeof e){const t=n.findIndex((t=>t.value===e)),r=p.value.find((t=>t.value===e));r&&(r.selected=!0,-1===t?n.unshift(r):n[t].selected=!0)}return x(n)},D=()=>{let t=[],i=k((e=>{const t=y(null);return("string"==typeof e||Array.isArray(e))&&(t.value=e),t})(e.values));if(Array.isArray(i))for(let e of i)t.push(A(e));else t.push(A(i));return Promise.all(t).then((t=>(e.multiple?m.value=t.filter((e=>null!==e)):m.value=t[0],m.value))).catch((t=>(je.isCancel(t)||r.error(n("Error getting {type}.",{type:e.placeholder})),[])))},A=t=>{let i=null;if(t&&e.entityUrl)i=me.get(`${e.entityUrl}${t}/`).then((e=>e.data)).then((e=>x([e]))).then((e=>{var n,r;return null!==(n=null===(r=e[0])||void 0===r?void 0:r.label)&&void 0!==n?n:t})).then((e=>{p.value.every((e=>e.value!==t))&&p.value.push({label:e,value:t})})).then((()=>t));else{var o,s;let e=p.value.find((e=>e.value===t));t&&!e&&(e={label:t,value:t},p.value.push(e)),i=Promise.resolve(null!==(o=null===(s=e)||void 0===s?void 0:s.value)&&void 0!==o?o:null)}return i.then((e=>null!=e?e:"")).catch((t=>(je.isCancel(t)||r.error(n("Error getting {type}.",{type:e.placeholder})),"")))},N=()=>{if(c.value)if(e.multiple){const e=Array.from(c.value.selectedOptions).map((e=>e.value));m.value=e,t("change",e)}else m.value=c.value.value,t("change",c.value.value)},P=()=>{c.value&&(e.multiple?m.value=[]:m.value=null)},L=()=>{R(),I(),$()},R=()=>{if(!d.value)return;let e=d.value.getBoundingClientRect(),t=350;window.innerWidth<t&&(t=Math.min(350,e.width));let n=window.innerWidth-e.x<t;u.value=n?t-e.width:0;const r=d.value.style;r.setProperty("--offset-select-a11y__overlay",`-${u.value}px`),r.setProperty("--min-width-select-a11y__overlay",`${t}px`)},I=()=>{if(!d.value)return;const t=d.value.querySelector(".select-a11y");t&&(t.classList.add("fr-select"),e.isBlue&&t.classList.add("fr-select--blue"));const n=d.value.querySelector("label");n&&n.classList.add("fr-label");const r=d.value.querySelector(".select-a11y-button__text");r&&!r.innerHTML&&(r.innerHTML="&nbsp;")},$=()=>{d.value&&c.value&&(c.value.removeEventListener("change",N),c.value.addEventListener("change",N),c.value.removeEventListener("reset",P),c.value.addEventListener("reset",P))},z=()=>{const e={text:w,clearable:!0};e.fillSuggestions=T;try{v.value=new Ey(c.value,e),L()}catch(OI){console.log(OI)}};C((()=>e.values),(async()=>{const e=m.value;await D();const t=(n=m.value,r=e,Array.isArray(n)&&Array.isArray(r)?[...n.filter((e=>!r.includes(e)))]:n===r?[]:[n]);var n,r;for(const o of t){var i;null===(i=v.value)||void 0===i||i.selectOptionSilently(o)}}));const B=M().then((e=>(h.value=e,p.value=e,e))).then(D);return _((()=>B.then(z))),E(L),{container:d,displayedOptions:f,errorTextId:o,id:i,offset:u,selected:m,selectGroupClass:l,selectOption:async function(e){var t;await T(e),null===(t=v.value)||void 0===t||t.selectOptionSilently(e),m.value=e},validTextId:a}}}),Ry=["data-selected"],Iy=["for","title"],$y={key:0,class:"fr-icon-information-line","aria-hidden":"true"},zy={key:1,class:"fr-hint-text"},By=["id","required","multiple"],Fy=["label"],Vy=["value","data-image","hidden","data-helper","data-description","data-show-icon"],jy=["value","data-image","hidden","data-helper","data-description","data-show-icon"],Hy=["value","data-image","hidden","data-helper","data-description","data-show-icon"],Wy=["id"],qy=["id"];const Uy=hn(Ly,[["render",function(e,t,n,r,i,o){const s=J("Required");return a(),l("div",{class:v(["multiselect w-100 fr-select-group",e.selectGroupClass]),ref:"container","data-selected":!!e.selected},[w("div",null,[w("label",{for:e.id,title:e.explanation},[R(x(e.placeholder)+" ",1),b(s,{required:e.required},null,8,["required"]),e.explanation?(a(),l("span",$y)):g("",!0),e.hintText?(a(),l("span",zy,x(e.hintText),1)):g("",!0)],8,Iy),G(w("select",{class:"multiselect__input",id:e.id,ref:"selectRef","onUpdate:modelValue":t[0]||(t[0]=t=>e.selected=t),required:e.required,multiple:e.multiple},[e.groups?(a(),l(L,{key:0},[(a(!0),l(L,null,q(e.groups,(t=>(a(),l("optgroup",{label:t.name},[(a(!0),l(L,null,q(e.displayedOptions,(e=>(a(),l(L,{key:e.value},[t.name==e.group?(a(),l("option",{key:0,value:e.value,"data-image":e.image,hidden:e.hidden,"data-helper":e.helper,"data-description":e.description,"data-show-icon":e.recommended},x(e.label),9,Vy)):g("",!0)],64)))),128))],8,Fy)))),256)),(a(!0),l(L,null,q(e.displayedOptions,(e=>(a(),l(L,{key:e.value},[e.group?g("",!0):(a(),l("option",{key:0,value:e.value,"data-image":e.image,hidden:e.hidden,"data-helper":e.helper,"data-description":e.description,"data-show-icon":e.recommended},x(e.label),9,jy))],64)))),128))],64)):(a(!0),l(L,{key:1},q(e.displayedOptions,(e=>(a(),l("option",{key:e.value,value:e.value,"data-image":e.image,hidden:e.hidden,"data-helper":e.helper,"data-description":e.description,"data-show-icon":e.recommended},x(e.label),9,Hy)))),128))],8,By),[[ie,e.selected]])]),e.isValid?(a(),l("p",{key:0,id:e.validTextId,class:"fr-valid-text"},x(e.validText),9,Wy)):e.hasError?(a(),l("p",{key:1,id:e.errorTextId,class:"fr-error-text"},x(e.errorText),9,qy)):g("",!0)],10,Ry)}],["__scopeId","data-v-9b8f38b5"]]),Yy=r({__name:"SchemaSelect",props:{allOption:{default:""},isBlue:{type:Boolean,default:!1},showExplanation:{type:Boolean,default:!0},values:{}},emits:["change"],setup(e,{emit:t}){const n=t,r=Ut().then((e=>e.map((e=>({label:e.name,value:e.name}))))),i=e=>n("change",e);return(e,t)=>(a(),u(Uy,{placeholder:e.$t("Schema"),explanation:e.showExplanation?e.$t("Data schemas describe data models: what are the fields, how are data shown, what are the available values, etc. See schema.data.gouv.fr"):"",searchPlaceholder:e.$t("Search a schema..."),allOption:e.allOption?e.allOption:e.$t("All schemas"),initialOptions:h(r),values:e.values,onChange:i,isBlue:e.isBlue},null,8,["placeholder","explanation","searchPlaceholder","allOption","initialOptions","values","isBlue"]))}});function Ky(e){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(e)}function Jy(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Gy(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Xy(e){Gy(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Ky(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Zy(e,t){Gy(2,arguments);var n=Xy(e),r=Jy(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());return o.setMonth(n.getMonth()+r+1,0),i>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}var Qy={};function eb(){return Qy}function tb(e,t){var n,r,i,o,s,a,l,c;Gy(1,arguments);var d=eb(),u=Jy(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Xy(e),p=h.getDay(),f=(p<u?7:0)+p-u;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function nb(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function rb(e){Gy(1,arguments);var t=Xy(e);return t.setHours(0,0,0,0),t}function ib(e,t){return Gy(2,arguments),Zy(e,12*Jy(t))}function ob(e,t){Gy(2,arguments);var n=rb(e),r=rb(t);return n.getTime()===r.getTime()}function sb(e){if(Gy(1,arguments),!function(e){return Gy(1,arguments),e instanceof Date||"object"===Ky(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=Xy(e);return!isNaN(Number(t))}function ab(e){Gy(1,arguments);var t=Xy(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function lb(e){Gy(1,arguments);var t=Xy(e);return t.setSeconds(0,0),t}function cb(e){Gy(1,arguments);var t=Xy(e);return t.setDate(1),t.setHours(0,0,0,0),t}function db(e,t){var n,r,i,o,s,a,l,c;Gy(1,arguments);var d=eb(),u=Jy(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Xy(e),p=h.getDay(),f=6+(p<u?-7:0)-(p-u);return h.setDate(h.getDate()+f),h.setHours(23,59,59,999),h}function ub(e,t){return Gy(2,arguments),function(e,t){Gy(2,arguments);var n=Xy(e).getTime(),r=Jy(t);return new Date(n+r)}(e,-Jy(t))}function hb(e){Gy(1,arguments);var t=Xy(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function pb(e){Gy(1,arguments);var t=Xy(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=hb(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=hb(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}var fb=6048e5;function mb(e){Gy(1,arguments);var t=Xy(e),n=hb(t).getTime()-function(e){Gy(1,arguments);var t=pb(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),hb(n)}(t).getTime();return Math.round(n/fb)+1}function gb(e,t){var n,r,i,o,s,a,l,c;Gy(1,arguments);var d=eb(),u=Jy(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Xy(e),p=h.getUTCDay(),f=(p<u?7:0)+p-u;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function vb(e,t){var n,r,i,o,s,a,l,c;Gy(1,arguments);var d=Xy(e),u=d.getUTCFullYear(),h=eb(),p=Jy(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(u+1,0,p),f.setUTCHours(0,0,0,0);var m=gb(f,t),g=new Date(0);g.setUTCFullYear(u,0,p),g.setUTCHours(0,0,0,0);var v=gb(g,t);return d.getTime()>=m.getTime()?u+1:d.getTime()>=v.getTime()?u:u-1}var yb=6048e5;function bb(e,t){Gy(1,arguments);var n=Xy(e),r=gb(n,t).getTime()-function(e,t){var n,r,i,o,s,a,l,c;Gy(1,arguments);var d=eb(),u=Jy(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:d.firstWeekContainsDate)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=vb(e,t),p=new Date(0);return p.setUTCFullYear(h,0,u),p.setUTCHours(0,0,0,0),gb(p,t)}(n,t).getTime();return Math.round(r/yb)+1}function wb(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const xb={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return wb("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):wb(n+1,2)},d:function(e,t){return wb(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return wb(e.getUTCHours()%12||12,t.length)},H:function(e,t){return wb(e.getUTCHours(),t.length)},m:function(e,t){return wb(e.getUTCMinutes(),t.length)},s:function(e,t){return wb(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return wb(Math.floor(r*Math.pow(10,n-3)),t.length)}};var kb="midnight",Cb="noon",_b="morning",Sb="afternoon",Mb="evening",Tb="night",Ob={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return xb.y(e,t)},Y:function(e,t,n,r){var i=vb(e,r),o=i>0?i:1-i;return"YY"===t?wb(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):wb(o,t.length)},R:function(e,t){return wb(pb(e),t.length)},u:function(e,t){return wb(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return wb(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return wb(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return xb.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return wb(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=bb(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):wb(i,t.length)},I:function(e,t,n){var r=mb(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):wb(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):xb.d(e,t)},D:function(e,t,n){var r=function(e){Gy(1,arguments);var t=Xy(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):wb(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return wb(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return wb(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return wb(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Cb:0===i?kb:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?Mb:i>=12?Sb:i>=4?_b:Tb,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xb.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):xb.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):wb(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):wb(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):xb.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):xb.s(e,t)},S:function(e,t){return xb.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Eb(i);case"XXXX":case"XX":return Ab(i);default:return Ab(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Eb(i);case"xxxx":case"xx":return Ab(i);default:return Ab(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Db(i,":");default:return"GMT"+Ab(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Db(i,":");default:return"GMT"+Ab(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return wb(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return wb((r._originalDate||e).getTime(),t.length)}};function Db(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=t||"";return n+String(i)+s+wb(o,2)}function Eb(e,t){return e%60==0?(e>0?"-":"+")+wb(Math.abs(e)/60,2):Ab(e,t)}function Ab(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+wb(Math.floor(i/60),2)+n+wb(i%60,2)}const Nb=Ob;var Pb=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Lb=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Rb={p:Lb,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return Pb(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Pb(i,t)).replace("{{time}}",Lb(o,t))}};const Ib=Rb;var $b=["D","DD"],zb=["YY","YYYY"];function Bb(e){return-1!==$b.indexOf(e)}function Fb(e){return-1!==zb.indexOf(e)}function Vb(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var jb={date:it({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:it({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:it({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};const Hb={code:"en-US",formatDistance:ot,formatLong:jb,formatRelative:st,localize:at,match:lt,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Wb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ub=/^'([^]*?)'?$/,Yb=/''/g,Kb=/[a-zA-Z]/;function Jb(e,t,n){var r,i,o,s,a,l,c,d,u,h,p,f,m,g,v,y,b,w;Gy(2,arguments);var x=String(t),k=eb(),C=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:k.locale)&&void 0!==r?r:Hb,_=Jy(null!==(o=null!==(s=null!==(a=null!==(l=null==n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null==n||null===(c=n.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:k.firstWeekContainsDate)&&void 0!==s?s:null===(u=k.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Jy(null!==(p=null!==(f=null!==(m=null!==(g=null==n?void 0:n.weekStartsOn)&&void 0!==g?g:null==n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:k.weekStartsOn)&&void 0!==f?f:null===(b=k.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var M=Xy(e);if(!sb(M))throw new RangeError("Invalid time value");var T=ub(M,nb(M)),O={firstWeekContainsDate:_,weekStartsOn:S,locale:C,_originalDate:M};return x.match(qb).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Ib[t])(e,C.formatLong):e})).join("").match(Wb).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(Ub);if(!t)return e;return t[1].replace(Yb,"'")}(r);var o=Nb[i];if(o)return null!=n&&n.useAdditionalWeekYearTokens||!Fb(r)||Vb(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!Bb(r)||Vb(r,t,String(e)),o(T,r,C.localize,O);if(i.match(Kb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function Gb(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Xb(e){Gy(1,arguments);var t=Xy(e).getFullYear();return 10*Math.floor(t/10)}function Zb(e){return Gy(1,arguments),Xy(e).getFullYear()}function Qb(e,t){Gy(2,arguments);var n=Xy(e),r=Xy(t);return n.getTime()>r.getTime()}function ew(e,t){Gy(2,arguments);var n=Xy(e),r=Xy(t);return n.getTime()<r.getTime()}function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nw(e,t){if(e){if("string"==typeof e)return tw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tw(e,t):void 0}}function rw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function iw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ow(e,t){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ow(e,t)}function sw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t)}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aw(e)}function lw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(OI){return!1}}();return function(){var n,r=aw(e);if(t){var i=aw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iw(e)}(this,n)}}function cw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dw(e){var t=function(e,t){if("object"!==Ky(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ky(t)?t:String(t)}function uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dw(r.key),r)}}function hw(e,t,n){return t&&uw(e.prototype,t),n&&uw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pw(e,t,n){return(t=dw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fw=function(){function e(){cw(this,e),pw(this,"priority",void 0),pw(this,"subPriority",0)}return hw(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),mw=function(e){sw(n,e);var t=lw(n);function n(e,r,i,o,s){var a;return cw(this,n),(a=t.call(this)).value=e,a.validateValue=r,a.setValue=i,a.priority=o,s&&(a.subPriority=s),a}return hw(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(fw),gw=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",10),pw(iw(e),"subPriority",-1),e}return hw(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(fw),vw=function(){function e(){cw(this,e),pw(this,"incompatibleTokens",void 0),pw(this,"priority",void 0),pw(this,"subPriority",void 0)}return hw(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new mw(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),yw=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",140),pw(iw(e),"incompatibleTokens",["R","u","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),bw=/^(1[0-2]|0?\d)/,ww=/^(3[0-1]|[0-2]?\d)/,xw=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,kw=/^(5[0-3]|[0-4]?\d)/,Cw=/^(2[0-3]|[0-1]?\d)/,_w=/^(2[0-4]|[0-1]?\d)/,Sw=/^(1[0-1]|0?\d)/,Mw=/^(1[0-2]|0?\d)/,Tw=/^[0-5]?\d/,Ow=/^[0-5]?\d/,Dw=/^\d/,Ew=/^\d{1,2}/,Aw=/^\d{1,3}/,Nw=/^\d{1,4}/,Pw=/^-?\d+/,Lw=/^-?\d/,Rw=/^-?\d{1,2}/,Iw=/^-?\d{1,3}/,$w=/^-?\d{1,4}/,zw=/^([+-])(\d{2})(\d{2})?|Z/,Bw=/^([+-])(\d{2})(\d{2})|Z/,Fw=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Vw=/^([+-])(\d{2}):(\d{2})|Z/,jw=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Hw(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Ww(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function qw(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function Uw(e){return Ww(Pw,e)}function Yw(e,t){switch(e){case 1:return Ww(Dw,t);case 2:return Ww(Ew,t);case 3:return Ww(Aw,t);case 4:return Ww(Nw,t);default:return Ww(new RegExp("^\\d{1,"+e+"}"),t)}}function Kw(e,t){switch(e){case 1:return Ww(Lw,t);case 2:return Ww(Rw,t);case 3:return Ww(Iw,t);case 4:return Ww($w,t);default:return Ww(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Jw(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Gw(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function Xw(e){return e%400==0||e%4==0&&e%100!=0}var Zw=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",130),pw(iw(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Hw(Yw(4,e),r);case"yo":return Hw(n.ordinalNumber(e,{unit:"year"}),r);default:return Hw(Yw(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Gw(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),Qw=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",130),pw(iw(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Hw(Yw(4,e),r);case"Yo":return Hw(n.ordinalNumber(e,{unit:"year"}),r);default:return Hw(Yw(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=vb(e,r);if(n.isTwoDigitYear){var o=Gw(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),gb(e,r)}var s="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(s,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),gb(e,r)}}]),n}(vw),ex=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",130),pw(iw(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t){return Kw("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),hb(r)}}]),n}(vw),tx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",130),pw(iw(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t){return Kw("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),nx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",120),pw(iw(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return Yw(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),rx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",120),pw(iw(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return Yw(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),ix=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),pw(iw(e),"priority",110),e}return hw(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return Hw(Ww(bw,e),r);case"MM":return Hw(Yw(2,e),r);case"Mo":return Hw(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(vw),ox=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",110),pw(iw(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return Hw(Ww(bw,e),r);case"LL":return Hw(Yw(2,e),r);case"Lo":return Hw(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(vw);var sx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",100),pw(iw(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return Ww(kw,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return gb(function(e,t,n){Gy(2,arguments);var r=Xy(e),i=Jy(t),o=bb(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(vw);var ax=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",100),pw(iw(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return Ww(kw,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return hb(function(e,t){Gy(2,arguments);var n=Xy(e),r=Jy(t),i=mb(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(vw),lx=[31,28,31,30,31,30,31,31,30,31,30,31],cx=[31,29,31,30,31,30,31,31,30,31,30,31],dx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"subPriority",1),pw(iw(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return Ww(ww,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){var n=Xw(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=cx[r]:t>=1&&t<=lx[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(vw),ux=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"subpriority",1),pw(iw(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return Ww(xw,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return Xw(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(vw);function hx(e,t,n){var r,i,o,s,a,l,c,d;Gy(2,arguments);var u=eb(),h=Jy(null!==(r=null!==(i=null!==(o=null!==(s=null==n?void 0:n.weekStartsOn)&&void 0!==s?s:null==n||null===(a=n.locale)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Xy(e),f=Jy(t),m=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+m),p}var px=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=hx(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(vw),fx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Hw(Yw(t.length,e),i);case"eo":return Hw(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=hx(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(vw),mx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Hw(Yw(t.length,e),i);case"co":return Hw(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=hx(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(vw);var gx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",90),pw(iw(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Yw(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Hw(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Hw(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Hw(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Hw(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){Gy(2,arguments);var n=Jy(t);n%7==0&&(n-=7);var r=Xy(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(vw),vx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",80),pw(iw(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Jw(n),0,0,0),e}}]),n}(vw),yx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",80),pw(iw(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Jw(n),0,0,0),e}}]),n}(vw),bx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",80),pw(iw(e),"incompatibleTokens",["a","b","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Jw(n),0,0,0),e}}]),n}(vw),wx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",70),pw(iw(e),"incompatibleTokens",["H","K","k","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return Ww(Mw,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(vw),xx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",70),pw(iw(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return Ww(Cw,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(vw),kx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",70),pw(iw(e),"incompatibleTokens",["h","H","k","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return Ww(Sw,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(vw),Cx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",70),pw(iw(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return Ww(_w,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(vw),_x=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",60),pw(iw(e),"incompatibleTokens",["t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return Ww(Tw,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(vw),Sx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",50),pw(iw(e),"incompatibleTokens",["t","T"]),e}return hw(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return Ww(Ow,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Yw(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(vw),Mx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",30),pw(iw(e),"incompatibleTokens",["t","T"]),e}return hw(n,[{key:"parse",value:function(e,t){return Hw(Yw(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(vw),Tx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",10),pw(iw(e),"incompatibleTokens",["t","T","x"]),e}return hw(n,[{key:"parse",value:function(e,t){switch(t){case"X":return qw(zw,e);case"XX":return qw(Bw,e);case"XXXX":return qw(Fw,e);case"XXXXX":return qw(jw,e);default:return qw(Vw,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(vw),Ox=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",10),pw(iw(e),"incompatibleTokens",["t","T","X"]),e}return hw(n,[{key:"parse",value:function(e,t){switch(t){case"x":return qw(zw,e);case"xx":return qw(Bw,e);case"xxxx":return qw(Fw,e);case"xxxxx":return qw(jw,e);default:return qw(Vw,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(vw),Dx=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",40),pw(iw(e),"incompatibleTokens","*"),e}return hw(n,[{key:"parse",value:function(e){return Uw(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(vw),Ex=function(e){sw(n,e);var t=lw(n);function n(){var e;cw(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pw(iw(e=t.call.apply(t,[this].concat(i))),"priority",20),pw(iw(e),"incompatibleTokens","*"),e}return hw(n,[{key:"parse",value:function(e){return Uw(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(vw),Ax={G:new yw,y:new Zw,Y:new Qw,R:new ex,u:new tx,Q:new nx,q:new rx,M:new ix,L:new ox,w:new sx,I:new ax,d:new dx,D:new ux,E:new px,e:new fx,c:new mx,i:new gx,a:new vx,b:new yx,B:new bx,h:new wx,H:new xx,K:new kx,k:new Cx,m:new _x,s:new Sx,S:new Mx,X:new Tx,x:new Ox,t:new Dx,T:new Ex},Nx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Px=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lx=/^'([^]*?)'?$/,Rx=/''/g,Ix=/\S/,$x=/[a-zA-Z]/;function zx(e,t,n,r){var i,o,s,a,l,c,d,u,h,p,f,m,g,v,y,b,w,x;Gy(3,arguments);var k=String(e),C=String(t),_=eb(),S=null!==(i=null!==(o=null==r?void 0:r.locale)&&void 0!==o?o:_.locale)&&void 0!==i?i:Hb;if(!S.match)throw new RangeError("locale must contain match property");var M=Jy(null!==(s=null!==(a=null!==(l=null!==(c=null==r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null==r||null===(d=r.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:_.firstWeekContainsDate)&&void 0!==a?a:null===(h=_.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==s?s:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=Jy(null!==(f=null!==(m=null!==(g=null!==(v=null==r?void 0:r.weekStartsOn)&&void 0!==v?v:null==r||null===(y=r.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==g?g:_.weekStartsOn)&&void 0!==m?m:null===(w=_.locale)||void 0===w||null===(x=w.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==f?f:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===C)return""===k?Xy(n):new Date(NaN);var O,D={firstWeekContainsDate:M,weekStartsOn:T,locale:S},E=[new gw],A=C.match(Px).map((function(e){var t=e[0];return t in Ib?(0,Ib[t])(e,S.formatLong):e})).join("").match(Nx),N=[],P=rw(A);try{var L=function(){var t=O.value;null!=r&&r.useAdditionalWeekYearTokens||!Fb(t)||Vb(t,C,e),null!=r&&r.useAdditionalDayOfYearTokens||!Bb(t)||Vb(t,C,e);var n=t[0],i=Ax[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var s=N.find((function(e){return o.includes(e.token)||e.token===n}));if(s)throw new RangeError("The format string mustn't contain `".concat(s.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&N.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));N.push({token:n,fullToken:t});var a=i.run(k,t,S.match,D);if(!a)return{v:new Date(NaN)};E.push(a.setter),k=a.rest}else{if(n.match($x))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(Lx)[1].replace(Rx,"'")),0!==k.indexOf(t))return{v:new Date(NaN)};k=k.slice(t.length)}};for(P.s();!(O=P.n()).done;){var R=L();if("object"===Ky(R))return R.v}}catch(W){P.e(W)}finally{P.f()}if(k.length>0&&Ix.test(k))return new Date(NaN);var I=E.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return E.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),$=Xy(n);if(isNaN($.getTime()))return new Date(NaN);var z,B=ub($,nb($)),F={},V=rw(I);try{for(V.s();!(z=V.n()).done;){var j=z.value;if(!j.validate(B,D))return new Date(NaN);var H=j.set(B,F,D);Array.isArray(H)?(B=H[0],Gb(F,H[1])):B=H}}catch(W){V.e(W)}finally{V.f()}return B}function Bx(e){Gy(1,arguments);var t=Xy(e);return t.setMinutes(0,0,0),t}function Fx(e,t){Gy(2,arguments);var n=Xy(e),r=Xy(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Vx(e,t){Gy(2,arguments);var n=Xy(e),r=Xy(t);return n.getFullYear()===r.getFullYear()}function jx(e,t){Gy(2,arguments);var n=Xy(e).getTime(),r=Xy(t.start).getTime(),i=Xy(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}function Hx(e,t){Gy(2,arguments);var n=Xy(e),r=Jy(t),i=n.getFullYear(),o=n.getDate(),s=new Date(0);s.setFullYear(i,r,15),s.setHours(0,0,0,0);var a=function(e){Gy(1,arguments);var t=Xy(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}(s);return n.setMonth(r,Math.min(o,a)),n}function Wx(e,t){if(Gy(2,arguments),"object"!==Ky(t)||null===t)throw new RangeError("values parameter must be an object");var n=Xy(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=Hx(n,t.month)),null!=t.date&&n.setDate(Jy(t.date)),null!=t.hours&&n.setHours(Jy(t.hours)),null!=t.minutes&&n.setMinutes(Jy(t.minutes)),null!=t.seconds&&n.setSeconds(Jy(t.seconds)),null!=t.milliseconds&&n.setMilliseconds(Jy(t.milliseconds)),n)}function qx(e,t,n){var r,i,o,s,a,l,c,d;Gy(2,arguments);var u=eb(),h=Jy(null!==(r=null!==(i=null!==(o=null!==(s=null==n?void 0:n.weekStartsOn)&&void 0!==s?s:null==n||null===(a=n.locale)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Xy(e),f=Jy(t),m=p.getDay(),g=7-h;return function(e,t){Gy(2,arguments);var n=Xy(e),r=Jy(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}(p,f<0||f>6?f-(m+g)%7:((f%7+7)%7+g)%7-(m+g)%7)}function Ux(e,t){return Gy(2,arguments),ib(e,-Jy(t))}const Yx=(e,t=0,n=!1)=>{let r;return(...i)=>{n&&!r&&e(...i),clearTimeout(r),r=setTimeout((()=>{e(...i)}),t)}};const Kx=r({props:{actionsAlignment:{type:String,default:""},heading:{type:String,default:"h2"},icon:{type:String,required:!0},stretchHeight:{type:Boolean,default:!1},title:{type:String,required:!0},content:{type:String},type:{type:String,default:"default"}},setup(e){const t=s((()=>`fr-grid-row--${ut(e.actionsAlignment)}`)),n=s((()=>"primary"===e.type?"bg-contrast-blue-cumulus":"bg-white")),r=s((()=>"primary"===e.type));return{alignment:t,isDefault:s((()=>"default"===e.type)),isPrimary:r,type:n}}}),Jx={class:"fr-col-auto"},Gx=["src"],Xx={class:"fr-col-12 fr-col-sm fr-grid-row flex-direction-column justify-between"},Zx={class:"fr-mb-1w"},Qx={key:0,class:"fr-my-1w"};const ek=hn(Kx,[["render",function(e,t,n,r,i,o){return a(),l("div",{class:v(["rounded-xxs fr-p-3w fr-grid-row flex-direction-column",{"h-100":e.stretchHeight,[e.type]:e.type,"border border-default-grey":!e.isPrimary}])},[w("div",{class:v(["fr-col fr-grid-row fr-grid-row--gutters",{"text-blue-400":e.isPrimary}])},[w("div",Jx,[w("img",{class:"w-100",src:e.icon,alt:""},null,8,Gx)]),w("div",Xx,[w("div",Zx,[(a(),u(W(e.heading),{class:v(["fr-m-0 fr-mb-1w",{"fr-text--bold fr-text--md":e.isPrimary,"fr--h5":!e.isPrimary}])},{default:f((()=>[R(x(e.title),1)])),_:1},8,["class"])),e.content?(a(),l("p",Qx,x(e.content),1)):d(e.$slots,"default",{key:1})]),w("div",{class:v(["fr-grid-row",e.alignment])},[d(e.$slots,"actions")],2)])],2)],2)}]]),tk={class:"fr-mt-1v fr-mb-3v"},nk=["href"],rk=r({__name:"NoSearchResults",emits:["resetFilters"],setup(e){const{t:t}=Re();return(e,n)=>(a(),u(ek,{title:h(t)("Didn't find what you are looking for?"),icon:h("/_themes/gouvfr/assets/magnifying_glass.svg"),type:"primary"},{actions:f((()=>[w("button",{onClick:n[0]||(n[0]=t=>e.$emit("resetFilters")),class:"fr-btn fr-btn--secondary"},x(h(t)("Reset filters")),1),h(ht)?(a(),l("a",{key:0,href:h(ht),class:"fr-btn fr-btn--tertiary-no-outline fr-btn--icon-left fr-icon-lightbulb-line fr-ml-1w"},x(h(t)("Check our forum")),9,nk)):g("",!0)])),default:f((()=>[w("p",tk,[R(x(h(t)("Try resetting the filters to broaden your search.")),1),n[1]||(n[1]=w("br",null,null,-1)),R(" "+x(h(t)("You can also check ongoing requests and submit your own on our forum dedicated to data discovery and openness.")),1)])])),_:1},8,["title","icon"]))}}),ik={class:"fr-grid-row fr-mt-1w fr-mt-md-5v"},ok={class:"fr-col-12 fr-col-md-4 fr-col-lg-3"},sk={class:"fr-sidemenu","aria-labelledby":"fr-sidemenu-title"},ak={class:"fr-sidemenu__inner"},lk={class:"fr-sidemenu__btn fr-mt-1w",hidden:"","aria-controls":"fr-sidemenu-wrapper","aria-expanded":"false"},ck={class:"fr-collapse",id:"fr-sidemenu-wrapper"},dk={class:"fr-sidemenu__title fr-mb-3v",id:"fr-sidemenu-title"},uk={class:"fr-grid-row fr-grid-row--gutters"},hk={key:0,class:"fr-col-12"},pk={class:"fr-col-12"},fk={class:"fr-col-12"},mk={class:"fr-col-12"},gk={class:"fr-col-12"},vk={class:"fr-col-12"},yk={class:"fr-col-12"},bk={key:1,class:"fr-col-12 fr-mb-3w text-align-center"},wk=["href"],xk={key:0,class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-between fr-pb-1w"},kk={class:"fr-col-auto fr-my-0",role:"status"},Ck={class:"fr-col-auto fr-grid-row fr-grid-row--middle"},_k={for:"sort-search",class:"fr-col-auto fr-text--sm fr-m-0 fr-mr-1w"},Sk={class:"fr-col"},Mk={value:""},Tk=["value"],Ok={key:0},Dk={key:1},Ek={class:"fr-mt-1w border-default-grey border-top relative z-2"},Ak={key:2,class:"fr-mt-2w"},Nk=r({inheritAttrs:!1,__name:"Search",props:{downloadLink:{default:""},disableFirstSearch:{type:Boolean,default:!1},organization:{default:""},sorts:{default:()=>[]}},setup(e){const t=e,{t:n}=Re(),{toast:r}=iv(),i=new URL(window.location.href),o=new URLSearchParams(i.search),d=ct("datasets/extensions/"),p=ct("datasets/licenses/"),m=mr().filter((e=>e.type!==ur&&e.type!==hr)).map((e=>({label:e.label,value:e.type}))),v=Promise.resolve(m),k=y(""),{reuseUrl:C}=ey(k),S=y(""),M=y([]),T=y(0),O=y(1),D=y({organization:t.organization}),E=y(!1),A=y(null),N=y(null),P=y(null),R=Yx(((e=true)=>{E.value=!0,A.value&&A.value.cancel(),A.value=rt(),dt.get("/datasets/search/",{cancelToken:A.value.token,params:{...J.value,page_size:20}}).then((e=>e.data)).then((n=>{M.value=n.data,T.value=n.total,E.value=!1,((e=!0)=>{let n=new URL(window.location.href);const r={...J.value};t.organization&&(delete r.organization,delete r.organization_badge),n.search=new URLSearchParams(r).toString(),e&&window.history.pushState(null,"",n);let i=document.querySelectorAll("[data-q]");for(let t of i)t.href=C.value})(e)})).catch((e=>{je.isCancel(e)||(r.error(n("Error getting search results.")),E.value=!1)}))}),pt),I=e=>{k.value=e,O.value=1,R()},$=(e,n)=>{D.value[e]=n||void 0,t.organization&&(D.value.organization=t.organization,D.value.organization_badge=void 0),O.value=1,R()},z=()=>{O.value=1,R()},B=e=>{O.value=e,R(),F()},F=()=>{P.value&&P.value.scrollIntoView({behavior:"smooth"})},V=({page:e=1,sort:n="",...r},i=true)=>{D.value={...r,organization:t.organization||r.organization},O.value=e,S.value=n,R(i)},j=()=>{V({})},H=()=>{W(),F()},W=({q:e="",...t}={},n=true)=>{k.value=e,V(t,n)},Y=s((()=>Object.keys(D.value).some((e=>{var n;return(null===(n=D.value[e])||void 0===n?void 0:n.length)&&(!t.organization||"organization"!==e)})))),K=s((()=>t.sorts.map((e=>({value:"asc"==e.order?e.value:"-"+e.value,label:e.label}))))),J=s((()=>{let e,t={};for(e in D.value){const n=D.value[e];n&&(t[e]=n)}return O.value>1&&(t.page=O.value.toString()),k.value&&(t.q=k.value),S.value&&(t.sort=S.value),t})),X=o.get("q");X&&(k.value=X,o.delete("q"));const Z=o.get("page");Z&&(O.value=parseInt(Z),o.delete("page"));const Q=o.get("sort");return Q&&(S.value=Q,o.delete("sort")),D.value={...Object.fromEntries(o),organization:t.organization||o.get("organization")||""},t.disableFirstSearch?E.value=!0:R(),_((()=>{if(t.disableFirstSearch&&N.value){let e=N.value.dataset.totalResults;if(e&&parseInt(e)>0){let t=N.value.dataset.results;t&&(M.value=JSON.parse(t)),T.value=JSON.parse(e)}E.value=!1}addEventListener("popstate",(()=>{const e=new URL(window.location.href),t={};for(const[n,r]of e.searchParams)t[n]=r;W(t,false)}))})),(e,t)=>(a(),l("form",{class:"fr-pt-3v",onSubmit:t[9]||(t[9]=U(((...e)=>h(R)&&h(R)(...e)),["prevent"]))},[w("div",{class:"fr-grid-row fr-grid-row--middle justify-between",ref_key:"searchRef",ref:P,"data-cy":"search"},[b(gy,{onChange:I,value:k.value,placeholder:h(n)("Ex. 2022 presidential election")},null,8,["value","placeholder"])],512),w("div",ik,[w("div",ok,[w("nav",sk,[w("div",ak,[w("button",lk,x(h(n)("Filter results")),1),w("div",ck,[w("div",dk,x(h(n)("Filters")),1),w("div",uk,[e.organization?g("",!0):(a(),l("div",hk,[b(Uy,{placeholder:h(n)("Organizations"),searchPlaceholder:h(n)("Search an organization..."),allOption:h(n)("All organizations"),listUrl:"/organizations/?sort=-followers",suggestUrl:"/organizations/suggest/",entityUrl:"/organizations/",values:D.value.organization,onChange:t[0]||(t[0]=e=>$("organization",e)),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"]),b(Uy,{initialOptions:h(v),placeholder:h(n)("Organization type"),searchPlaceholder:h(n)("Search an organization type..."),allOption:h(n)("All types"),values:D.value.organization_badge,onChange:t[1]||(t[1]=e=>$("organization_badge",e)),isBlue:!0},null,8,["initialOptions","placeholder","searchPlaceholder","allOption","values"])])),w("div",pk,[b(Uy,{placeholder:h(n)("Tags"),searchPlaceholder:h(n)("Search a tag..."),allOption:h(n)("All tags"),suggestUrl:"/tags/suggest/",values:D.value.tag,onChange:t[2]||(t[2]=e=>$("tag",e)),minimumCharacterBeforeSuggest:2,isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"])]),w("div",fk,[b(Uy,{placeholder:h(n)("Formats"),searchPlaceholder:h(n)("Search a format..."),allOption:h(n)("All formats"),listUrl:h(d),values:D.value.format,onChange:t[3]||(t[3]=e=>$("format",e)),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","listUrl","values"])]),w("div",mk,[b(Uy,{placeholder:h(n)("Licenses"),explanation:h(n)("Licenses define reuse rules for published datasets. See page data.gouv.fr/licences"),searchPlaceholder:h(n)("Search a license..."),allOption:h(n)("All licenses"),listUrl:h(p),values:D.value.license,onChange:t[4]||(t[4]=e=>$("license",e)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","listUrl","values"])]),w("div",gk,[b(Yy,{values:D.value.schema||"",onChange:t[5]||(t[5]=e=>$("schema",e)),isBlue:!0},null,8,["values"])]),w("div",vk,[b(Uy,{placeholder:h(n)("Spatial coverage"),explanation:h(n)("Geographic areas covered by data and for which they are relevant."),searchPlaceholder:h(n)("Search a spatial coverage..."),allOption:h(n)("All coverages"),suggestUrl:"/spatial/zones/suggest/",entityUrl:"/spatial/zone/",values:D.value.geozone,onChange:t[6]||(t[6]=e=>$("geozone",e)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","values"])]),w("div",yk,[b(Uy,{placeholder:h(n)("Spatial granularity"),explanation:h(n)("Finest level of geographic detail covered by data."),searchPlaceholder:h(n)("Search a granularity..."),allOption:h(n)("All granularities"),listUrl:"/spatial/granularities/",values:D.value.granularity,onChange:t[7]||(t[7]=e=>$("granularity",e)),isBlue:!0},null,8,["placeholder","explanation","searchPlaceholder","allOption","values"])]),Y.value||e.downloadLink?(a(),l("div",bk,[Y.value?(a(),l("button",{key:0,class:"fr-btn fr-btn--secondary fr-icon-close-circle-line fr-btn--icon-left justify-center w-100",onClick:j},x(h(n)("Reset filters")),1)):e.downloadLink?(a(),l("a",{key:1,class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-download-line fr-btn--icon-left justify-center w-100 matomo_download",href:e.downloadLink},x(h(n)("Download list as CSV")),9,wk)):g("",!0)])):g("",!0)])])])])]),w("section",c({class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-mt-2w fr-mt-md-0 search-results",ref_key:"resultsRef",ref:N},e.$attrs),[T.value?(a(),l("div",xk,[w("p",kk,x(h(n)("{count} results",T.value)),1),w("div",Ck,[w("label",_k,x(h(n)("Sort by:")),1),w("div",Sk,[G(w("select",{id:"sort-search",class:"fr-select fr-select--blue",name:"sort","onUpdate:modelValue":t[8]||(t[8]=e=>S.value=e),onChange:z},[w("option",Mk,x(h(n)("Relevance")),1),(a(!0),l(L,null,q(K.value,(({value:e,label:t})=>(a(),l("option",{value:e},x(t),9,Tk)))),256))],544),[[ie,S.value]])])])])):g("",!0),b(ee,{mode:"out-in"},{default:f((()=>[E.value?(a(),l("div",Ok,[b(_y)])):M.value.length?(a(),l("div",Dk,[w("ul",Ek,[(a(!0),l(L,null,q(M.value,(e=>(a(),l("li",{key:e.id},[b(vy,{dataset:e},null,8,["dataset"])])))),128))]),T.value>20?(a(),u(h(vs),{key:0,page:O.value,pageSize:20,totalResults:T.value,onChange:B,class:"fr-mt-2w"},null,8,["page","totalResults"])):(a(),u(rk,{key:1,onResetFilters:H}))])):(a(),l("div",Ak,[b(rk,{onResetFilters:H})]))])),_:1})],16)])],32))}}),Pk=["disabled","aria-controls"],Lk=["id"],Rk={class:"fr-container fr-container--fluid fr-container-md"},Ik={class:"fr-grid-row fr-grid-row--center"},$k={class:"fr-col-12 fr-col-md-8 fr-col-lg-6"},zk={class:"fr-modal__body"},Bk={class:"fr-modal__header"},Fk=["aria-controls"],Vk={class:"fr-modal__content"},jk={class:"fr-modal__footer"},Hk={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},Wk=r({__name:"DeleteButton",props:{url:{}},setup(e){const t=e,{t:n}=Re(),{toast:r}=iv(),i=Xe,o=Ve("delete-modal"),s=o+"-title";function c(){return Ge(),me.delete(t.url).then((()=>window.location.reload())).catch((()=>r.error(n("An error occured during the deletion."))))}return(e,t)=>(a(),l(L,null,[w("button",{type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",disabled:h(i),"data-fr-opened":"false","aria-controls":h(o)},x(h(n)("Delete")),9,Pk),(a(),u(F,{to:"body"},[w("dialog",{"aria-labelledby":s,id:h(o),class:"fr-modal",role:"dialog"},[w("div",Rk,[w("div",Ik,[w("div",$k,[w("div",zk,[w("div",Bk,[w("button",{class:"fr-btn--close fr-btn","aria-controls":h(o)},x(h(n)("Close")),9,Fk)]),w("div",Vk,[w("h1",{id:s,class:"fr-modal__title"},[t[0]||(t[0]=w("span",{class:"fr-icon-delete-line fr-icon--lg"},null,-1)),R(" "+x(h(n)("Are you sure ?")),1)]),w("p",null,x(h(n)("The content will be permanently deleted.")),1)]),w("div",jk,[w("div",Hk,[w("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:c},x(h(n)("Delete")),1)])])])])])])],8,Lk)]))],64))}});const qk=["disabled","aria-controls"],Uk=["id"],Yk={class:"fr-container fr-container--fluid fr-container-md"},Kk={class:"fr-grid-row fr-grid-row--center"},Jk={class:"fr-col-12 fr-col-md-8 fr-col-lg-6"},Gk={class:"fr-modal__body"},Xk={class:"fr-modal__header"},Zk=["aria-controls"],Qk={class:"fr-modal__content"},eC={class:"fr-grid-row fr-grid-row--middle fr-mb-2w"},tC={class:"avatar fr-mr-1w"},nC=["src"],rC={class:"fr-modal__footer"},iC={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},oC=r({__name:"DeleteUserButton",props:{id:{},full_name:{},avatar_thumbnail:{}},setup(e){const t=e,{t:n}=Re(),{toast:r}=iv(),i=Xe,o=Ve("delete-modal"),s=o+"-title";function c(){return(e=t.id,me.delete(`users/${e}/`)).then((()=>window.location.reload())).catch((()=>r.error(n("An error occured during the deletion."))));var e}function d(){return(e=t.id,me.delete(`users/${e}/?no_mail=true&delete_comments=true`)).then((()=>window.location.reload())).catch((()=>r.error(n("An error occured during the deletion."))));var e}return(e,r)=>(a(),l(L,null,[w("button",{type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",disabled:h(i),"data-fr-opened":"false","aria-controls":h(o)},x(h(n)("Delete")),9,qk),(a(),u(F,{to:"body"},[w("dialog",{"aria-labelledby":s,id:h(o),class:"fr-modal",role:"dialog"},[w("div",Yk,[w("div",Kk,[w("div",Jk,[w("div",Gk,[w("div",Xk,[w("button",{class:"fr-btn--close fr-btn","aria-controls":h(o)},x(h(n)("Close")),9,Zk)]),w("div",Qk,[w("h1",{id:s,class:"fr-modal__title"},[r[0]||(r[0]=w("span",{class:"fr-icon-delete-line fr-icon--lg"},null,-1)),R(" "+x(h(n)("Are you sure ?")),1)]),w("p",eC,[w("div",tC,[w("img",{class:"rounded-circle border border-default-grey",src:t.avatar_thumbnail,width:"40",height:"40",loading:"lazy",alt:""},null,8,nC)]),R(" "+x(t.full_name)+" "+x(h(n)("will be permanently deleted.")),1)])]),w("div",rC,[w("div",iC,[w("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:d},x(h(n)("Delete without as spam (no mail sent and discussions are deleted)")),1),w("button",{class:"fr-btn bg-warning-425 fr-btn--icon-left fr-icon-delete-line",role:"button",onClick:c},x(h(n)("Delete")),1)])])])])])])],8,Uk)]))],64))}}),sC=r({name:"featured-button",props:{subjectId:{type:String,required:!0},subjectType:{type:String,required:!0},featured:{type:Boolean,required:!0}},setup(e){const{t:t}=Re(),{toast:n}=iv(),r=y(e.featured),i=y(null);return _((()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.toggleAttribute("checked",r.value)})),{isFeatured:r,t:t,toggleFeatured:()=>{const i=r.value?"delete":"post",o=`${e.subjectType.toLowerCase()}s/${e.subjectId}/featured/`;me[i](o).then((e=>{r.value=!r.value})).catch((()=>n.error(t("An error occurred while featuring this subject."))))},toggleInput:i}}}),aC={class:"fr-toggle fr-toggle--label-left"},lC=["checked"],cC=["data-fr-checked-label","data-fr-unchecked-label"];const dC=hn(sC,[["render",function(e,t,n,r,i,o){return a(),l("div",aC,[w("input",{ref:"toggleInput",onClick:t[0]||(t[0]=(...t)=>e.toggleFeatured&&e.toggleFeatured(...t)),type:"checkbox",class:"fr-toggle__input",id:"featured-toggle",checked:e.isFeatured},null,8,lC),w("label",{class:"fr-toggle__label",for:"featured-toggle","data-fr-checked-label":e.t("Featured"),"data-fr-unchecked-label":e.t("Standard")},x(e.t("Feature this content")),9,cC)])}]]),uC=r({props:{followers:Number,url:{type:String,required:!0},following:Boolean},setup(e){const t=y(!1),n=y(e.following),r=nt.read_only_enabled;return{following:n,animating:t,readOnlyEnabled:r,toggleFollow:()=>{let r;Ge(),r=n.value?me.delete(e.url):me.post(e.url),r.then((()=>{n.value=!n.value,n.value&&(t.value=!0,setTimeout((()=>t.value=!1),1300))}))}}}}),hC=["disabled"],pC={class:"fr-ml-1w"};const fC=hn(uC,[["render",function(e,t,n,r,i,o){return a(),l("button",{onClick:t[0]||(t[0]=U(((...t)=>e.toggleFollow&&e.toggleFollow(...t)),["prevent"])),type:"button",class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 follow-button",disabled:e.readOnlyEnabled},[w("span",{class:v(["magic fr-grid-row",{active:e.animating}]),style:H({color:e.following?"inherit":"transparent"})},t[1]||(t[1]=[w("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[w("path",{d:"M7.20703 1.24224L5.42968 4.87896L1.41015 5.45318C0.699214 5.56255 0.425776 6.43755 0.945308 6.95709L3.8164 9.77349L3.13281 13.7383C3.02343 14.4493 3.78906 14.9961 4.41796 14.668L8 12.7813L11.5547 14.668C12.1836 14.9961 12.9492 14.4493 12.8398 13.7383L12.1562 9.77349L15.0273 6.95709C15.5469 6.43755 15.2734 5.56255 14.5625 5.45318L10.5703 4.87896L8.76562 1.24224C8.46484 0.613336 7.53515 0.585992 7.20703 1.24224Z",stroke:"#161616"})],-1)]),6),w("span",pC,[e.following?(a(),l(L,{key:0},[R(x(e.$t("Remove from favourites")),1)],64)):(a(),l(L,{key:1},[R(x(e.$t("Add to favourites")),1)],64))])],8,hC)}]]),mC=r({props:{organization:{type:String,required:!0}},setup(e){const{t:t}=Re(),n=y("");return{askToJoinOrganization:()=>{Ge(),n.value=prompt(t("You can add some details here for your membership request"))||"",me.post("organizations/"+e.organization+"/membership/",{comment:n.value}).then((e=>{alert(t("A request has been sent to the administrators")),window.location.reload()})).catch((e=>{alert(t("Error while requesting membership")),console.error(e)}))},comment:n}}});const gC=hn(mC,[["render",function(e,t,n,r,i,o){return a(),l("button",{onClick:t[0]||(t[0]=U(((...t)=>e.askToJoinOrganization&&e.askToJoinOrganization(...t)),["prevent"])),class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-team-line"},x(e.$t("Ask to join the organization as a producer")),1)}]]);K(["pdf","doc","docx","word","xls","excel","xlsx"]);const vC=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i,yC=new RegExp("/resources/("+vC.source+")?$",vC.flags),bC=new RegExp("/resource-("+vC.source+")?$",vC.flags),wC=new RegExp("/community-resources/("+vC.source+")?$",vC.flags),xC=(e,t)=>{for(const n of t?[wC]:[yC,bC]){let[t,r,i]=n.exec(e)||[];if(r)return r}return null};function kC(){const e=y(window.location.hash),t=()=>e.value=window.location.hash;return _((()=>window.addEventListener("hashchange",t))),B((()=>window.removeEventListener("hashchange",t))),{hash:e}}function CC(){history.pushState(null,""," "),window.dispatchEvent(new HashChangeEvent("hashchange"))}const _C={key:0},SC={key:1},MC={class:"fr-grid-row fr-grid-row--middle justify-between"},TC={key:0},OC={key:1},DC=r({__name:"resourceFromHash",props:{canEdit:{type:Boolean},datasetId:{},communityResource:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Re(),{toast:r}=iv(),i=y(null),o=y(null),c=y(!1),{hash:d}=kC(),p=s((()=>xC(d.value,t.communityResource))),m=s((()=>t.communityResource?`/datasets/community_resources/${p.value}`:`/datasets/${t.datasetId}/resources/${p.value}`));return P((async()=>{if(p.value){c.value=!0;try{const e=await me.get(m.value),t=await e.data;t&&(o.value=t,i.value&&i.value.scrollIntoView())}catch(OI){console.error(OI),r.error(n("An error occurred while fetching the file ")+p.value)}finally{c.value=!1}}})),(e,t)=>p.value?(a(),l("section",{key:0,ref_key:"top",ref:i},[b(ee,{mode:"out-in"},{default:f((()=>[c.value?(a(),l("div",_C,[b(h(Kl))])):(a(),l("div",SC,[b(h(gc),{type:"secondary",color:"success",class:"fr-mb-2w"},{default:f((()=>[w("div",MC,[e.communityResource?(a(),l("span",TC,x(h(n)("You are seeing a specific community resource of this dataset")),1)):(a(),l("span",OC,x(h(n)("You are seeing a specific file of this dataset")),1)),w("button",{class:"fr-btn--close fr-btn fr-mr-0",onClick:t[0]||(t[0]=U(((...e)=>h(CC)&&h(CC)(...e)),["prevent"]))},x(h(n)("Close")),1)])])),_:1}),o.value?(a(),u(h(Yl),{key:0,id:"resource-"+p.value,datasetId:e.datasetId,expandedOnMount:!0,resource:o.value,canEdit:e.canEdit,isCommunityResource:e.communityResource},null,8,["id","datasetId","resource","canEdit","isCommunityResource"])):g("",!0)]))])),_:1})],512)):g("",!0)}}),EC=r({__name:"Reuse",props:{reuse:{}},setup:e=>(e,t)=>{var n;return a(),u(h(mc),{reuse:e.reuse,reuseUrl:e.reuse.page,organizationUrl:null===(n=e.reuse.organization)||void 0===n?void 0:n.page},null,8,["reuse","reuseUrl","organizationUrl"])}});const AC="resourcesSearch",NC=function(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}(),PC=e=>{e.config.globalProperties.$bus=NC},LC=r({props:{eventName:{type:String,default:AC},type:{type:String}},setup(e){const t=function(e,t=0,n=!1){const r=y(e);return D(((e,i)=>({get:()=>(e(),r.value),set:Yx((e=>{r.value=e,i()}),t,n)})))}("",pt),n=()=>{NC.emit(e.eventName,{type:e.type,value:t.value})};let r;ft&&C(t,n);return B((()=>clearTimeout(r))),{search:n,searchWithoutAutocomplete:()=>{r=setTimeout((()=>{n()}),pt)},searchValue:t}}}),RC=["aria-label"],IC=["for"],$C=["id"],zC={class:"fr-btn",type:"submit"};const BC=hn(LC,[["render",function(e,t,n,r,i,o){return a(),l("form",{onSubmit:t[1]||(t[1]=U(((...t)=>e.searchWithoutAutocomplete&&e.searchWithoutAutocomplete(...t)),["prevent"]))},[w("div",{class:"fr-search-bar",role:"search","aria-label":e.$t("Search files")},[w("label",{class:"fr-label",for:e.eventName},x(e.$t("Search files")),9,IC),G(w("input",{class:"fr-input",placeholder:"Rechercher",type:"search",id:e.eventName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchValue=t)},null,8,$C),[[X,e.searchValue]]),w("button",zC,x(e.$t("Search")),1)],8,RC)],32)}]]),FC={class:"fr-grid-row"},VC={class:"fr-col"},jC={key:0,class:"fr-col-auto"},HC=["href"],WC={key:0,class:"fr-my-3v"},qC={key:0},UC={key:1,class:"flex flex-direction-column gap-10px"},YC={key:0,class:"fr-my-0 fr-text--sm border-bottom",role:"status"},KC={key:1},JC=r({__name:"resources",props:{canEdit:{type:Boolean,default:!1},canEditResources:{default:()=>({})},datasetId:{},showTotal:{type:Boolean,default:!0},type:{},typeLabel:{},firstGroup:{type:Boolean,default:!0}},setup(e){var t;const n=e,{t:r}=Re(),{toast:i}=iv(),o=y(1),{hash:c}=kC(),d=s((()=>xC(c.value,"community"===n.type))),p=y([]),m=nt.resources_default_page_size,k=new URL(null!==(t=nt.admin_root)&&void 0!==t&&t.startsWith("http")?nt.admin_root:`${document.location.origin}${nt.admin_root}community-resource/new/`),C=new URLSearchParams({dataset_id:n.datasetId});k.search=C.toString();const S=k.toString(),M=y(0),T=y(0),O=y(!0),D=y(null),E=y(""),A=y("community"===n.type),N=s((()=>!A.value&&M.value>nt.resources_min_count_to_show_search)),P=s((()=>M.value!=T.value)),R=(e=1,t=!1)=>{let o;return O.value=!0,t&&D.value&&D.value.scrollIntoView({behavior:"smooth"}),o=A.value?async function(e,t,n){return(await me.get("datasets/community_resources/",{params:{page:t,dataset:e,page_size:n}})).data}(n.datasetId,e,m):async function(e,t,n,r,i){return(await dt.get("/datasets/"+e+"/resources/",{params:{page:n,type:t,page_size:r,q:i}})).data}(n.datasetId,n.type,e,m,E.value),o.then((e=>(e.data&&(p.value=e.data,T.value=e.total),e.total||0))).catch((()=>(i.error(r("An error occurred while fetching resources")),p.value=[],0))).finally((()=>{O.value=!1}))},I=(e,t=!0)=>(o.value=e,R(e,t)),$=e=>n.canEdit?n.canEdit:n.canEditResources[e.id];A.value||NC.on(AC,(({type:e,value:t})=>{e===n.type&&(E.value=t,I(1,false))}));return _((()=>{I(1,!1).then((e=>M.value=e))})),(e,t)=>d.value?g("",!0):(a(),l("section",{key:0,class:"fr-mb-3v",ref_key:"top",ref:D},[w("div",FC,[w("div",VC,[w("h2",{class:v([{"fr-mt-4w":!e.firstGroup},"fr-mb-0 subtitle subtitle--uppercase"])},x(e.typeLabel),3)]),A.value?(a(),l("div",jC,[w("a",{class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-add-line fr-btn--icon-left",href:h(S)},x(h(r)("Add a community resource")),9,HC)])):g("",!0)]),N.value?(a(),l("div",WC,[b(BC,{eventName:h(AC),type:e.type},null,8,["eventName","type"])])):g("",!0),b(ee,{mode:"out-in"},{default:f((()=>[O.value?(a(),l("div",qC,[(a(!0),l(L,null,q(h(m),(e=>(a(),u(h(Kl),{class:"fr-mt-2w"})))),256))])):(a(),l("div",UC,[P.value?(a(),l("p",YC,x(h(r)("{count} results",T.value)),1)):g("",!0),(a(!0),l(L,null,q(p.value,(t=>(a(),u(h(Yl),{id:"resource-"+t.id,datasetId:e.datasetId,isCommunityResource:A.value,resource:t,canEdit:$(t)},null,8,["id","datasetId","isCommunityResource","resource","canEdit"])))),256)),T.value?T.value>h(m)?(a(),u(h(vs),{key:2,class:"fr-mt-3w",page:o.value,"page-size":h(m),"total-results":T.value,onChange:I},null,8,["page","page-size","total-results"])):g("",!0):(a(),l("p",KC,x(h(r)("No files match your search.")),1))]))])),_:1})],512))}}),GC=hn(JC,[["__scopeId","data-v-4aa480fc"]]),XC={key:0},ZC=r({__name:"CardList",props:{datasets:{},loading:{type:Boolean,default:!1},totalResults:{},pageSize:{default:20}},emits:["changePage"],setup(e,{emit:t}){const n=t,r=y(1),i=y();function o(e){r.value=e,n("changePage",e),i.value&&i.value.scrollIntoView({behavior:"smooth"})}return(e,t)=>e.loading?(a(),l("div",XC,[b(_y)])):e.totalResults?(a(),l(L,{key:1},[w("ul",{ref_key:"listRef",ref:i},[(a(!0),l(L,null,q(e.datasets,(e=>(a(),l("li",{key:e.id},[b(vy,{dataset:e},null,8,["dataset"])])))),128))],512),e.totalResults>e.pageSize?(a(),u(h(vs),{key:0,page:r.value,pageSize:e.pageSize,totalResults:e.totalResults,onChange:o,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):g("",!0)],64)):g("",!0)}}),QC={key:0,class:"subtitle subtitle--uppercase fr-mb-5v"},e_=r({__name:"UserDatasetList",props:{owner:{}},setup(e){const{t:t}=Re(),{toast:n}=iv(),r=e,i=y([]),o=y(0),s=y(!1),c=y(null);function d(e){s.value=!0,c.value&&c.value.cancel(),c.value=rt(),dt.get("/datasets/search/",{cancelToken:c.value.token,params:{page:e,owner:r.owner,page_size:3}}).then((e=>e.data)).then((e=>{i.value=e.data,o.value=e.total,s.value=!1})).catch((e=>{je.isCancel(e)||(n.error(t("Error getting search results.")),s.value=!1)}))}return _((()=>{d(1)})),(e,n)=>(a(),l(L,null,[o.value?(a(),l("h2",QC,x(h(t)("{n} datasets",o.value)),1)):g("",!0),b(ZC,{"page-size":3,datasets:i.value,loading:s.value,"total-results":o.value,onChangePage:d},null,8,["datasets","loading","total-results"])],64))}});const t_=hn({components:{ContentLoader:zt}},[["render",function(e,t,n,r,i,o){const s=J("ContentLoader");return a(),u(s,{width:350,height:180,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:f((()=>t[0]||(t[0]=[w("rect",{x:"43",y:"153",rx:"3",ry:"3",width:"97",height:"6"},null,-1),w("rect",{x:"44",y:"166",rx:"3",ry:"3",width:"97",height:"5"},null,-1),w("rect",{x:"184",y:"7",rx:"5",ry:"5",width:"130",height:"130"},null,-1),w("rect",{x:"198",y:"153",rx:"3",ry:"3",width:"97",height:"6"},null,-1),w("rect",{x:"199",y:"166",rx:"3",ry:"3",width:"97",height:"5"},null,-1),w("rect",{x:"27",y:"8",rx:"5",ry:"5",width:"130",height:"130"},null,-1)]))),_:1})}]]),n_={key:0},r_=r({__name:"ReuseList",props:{reuses:{},loading:{type:Boolean,default:!1},totalResults:{},pageSize:{default:20}},emits:["changePage"],setup(e,{emit:t}){const n=t,r=y(1),i=y();function o(e){r.value=e,n("changePage",e),i.value&&i.value.scrollIntoView({behavior:"smooth"})}return(e,t)=>e.loading?(a(),l("div",n_,[b(t_)])):e.totalResults?(a(),l(L,{key:1},[w("ul",{ref_key:"listRef",ref:i,class:"fr-grid-row fr-grid-row--gutters"},[(a(!0),l(L,null,q(e.reuses,(t=>(a(),l("li",{class:v(["fr-col-12",{"fr-col-md-6":e.reuses.length<=2,"fr-col-md-4":e.reuses.length>=3}]),key:t.id},[b(EC,{reuse:t},null,8,["reuse"])],2)))),128))],512),e.totalResults>e.pageSize?(a(),u(h(vs),{key:0,page:r.value,pageSize:e.pageSize,totalResults:e.totalResults,onChange:o,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):g("",!0)],64)):g("",!0)}}),i_={key:0,class:"subtitle subtitle--uppercase fr-mb-5v"},o_=r({__name:"UserReuseList",props:{owner:{}},setup(e){const{t:t}=Re(),{toast:n}=iv(),r=e,i=y([]),o=y(0),s=y(!1),c=y(null);function d(e){s.value=!0,c.value&&c.value.cancel(),c.value=rt(),dt.get("/reuses/search/",{cancelToken:c.value.token,params:{page:e,owner:r.owner,page_size:6}}).then((e=>e.data)).then((e=>{i.value=e.data,o.value=e.total,s.value=!1})).catch((e=>{je.isCancel(e)||(n.error(t("Error getting search results.")),s.value=!1)}))}return _((()=>{d(1)})),(e,n)=>(a(),l(L,null,[o.value?(a(),l("h2",i_,x(h(t)("{n} reuses",o.value)),1)):g("",!0),b(r_,{"page-size":6,reuses:i.value,loading:s.value,"total-results":o.value,onChangePage:d},null,8,["reuses","loading","total-results"])],64))}}),s_={key:0,class:"border border-blue-400 fr-p-2w bg-alt-grey"},a_={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},l_={class:"fr-col-12 fr-col-sm"},c_={class:"fr-h6 fr-mb-0 text-blue-400"},d_={class:"fr-col-auto flex"},u_=["href"],h_=["href"],p_=["href"],f_={key:1,class:"border border-blue-400 fr-p-2w fr-dataservice__box fr-dataservice__swagger"},m_={class:"fr-h6 fr-mb-0 text-blue-400"},g_={class:"flex items-center fr-ml-4v"},v_={key:0},y_=r({__name:"DataserviceLinks",props:{dataservice:{}},setup(e){const t=e,{t:r}=Re(),i=y(!1),o=y(!1),s=Y((()=>Ie((()=>n.import("./Swagger-legacy.6.2.4.js")),void 0))),c=()=>{i.value=!i.value};return _((async()=>{var e;t.dataservice.machine_documentation_url&&(o.value=(e=t.dataservice.machine_documentation_url).endsWith(".json")||e.endsWith(".yaml")||e.endsWith(".yml"))})),(e,t)=>(a(),l("div",null,[!o.value&&e.dataservice.machine_documentation_url||e.dataservice.technical_documentation_url||e.dataservice.business_documentation_url?(a(),l("div",s_,[w("div",a_,[w("div",l_,[w("h2",c_,x(h(r)("API documentation")),1)]),w("div",d_,[e.dataservice.technical_documentation_url?(a(),l("a",{key:0,class:"fr-btn fr-ml-3v",href:e.dataservice.technical_documentation_url,target:"_blank",rel:"ugc nofollow noopener"},x(h(r)("Technical documentation")),9,u_)):g("",!0),!o.value&&e.dataservice.machine_documentation_url?(a(),l("a",{key:1,class:"fr-btn fr-ml-3v",href:e.dataservice.machine_documentation_url,target:"_blank",rel:"ugc nofollow noopener"},x(h(r)("Machine readable documentation")),9,h_)):g("",!0),e.dataservice.business_documentation_url?(a(),l("a",{key:2,class:v(["fr-btn fr-ml-3v",o.value?"":"fr-btn--secondary"]),href:e.dataservice.business_documentation_url,target:"_blank",rel:"ugc nofollow noopener"},x(h(r)("Business documentation")),11,p_)):g("",!0)])])])):g("",!0),t[0]||(t[0]=w("br",null,null,-1)),o.value?(a(),l("div",f_,[w("header",{class:"fr-p-2v flex items-center justify-between",onClick:c},[w("h2",m_,x(h(r)("Swagger")),1),w("div",g_,[w("div",{class:v(["fr-icon--sm fr-ml-4v",{"fr-icon-arrow-up-s-line":i.value,"fr-icon-arrow-down-s-line":!i.value}])},null,2)])]),i.value&&e.dataservice.machine_documentation_url?(a(),l("div",v_,[b(h(s),{url:e.dataservice.machine_documentation_url},null,8,["url"])])):g("",!0)])):g("",!0)]))}}),b_=hn(y_,[["__scopeId","data-v-67dee39c"]]);document.querySelectorAll("[data-tabs]").forEach((e=>{const t=e.querySelectorAll("[role=tab]");t.forEach((e=>{e.addEventListener("click",(n=>{var r,i;n.preventDefault();const o=n.target,s=Array.from(t).find((e=>"true"===e.getAttribute("aria-selected")));if(s){var a;s.setAttribute("aria-selected","false");const e=s.getAttribute("aria-controls")||"";null===(a=document.getElementById(e))||void 0===a||a.classList.remove("fr-unhidden")}const l=o.getAttribute("aria-controls")||"";o.setAttribute("aria-selected","true"),null===(r=document.getElementById(l))||void 0===r||r.classList.add("fr-unhidden"),null===(i=globalThis._paq)||void 0===i||i.push(["trackEvent","Move page to tab",window.location.pathname,e.textContent])}))}))}));document.querySelectorAll("[data-accordion-button]").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;if(t instanceof HTMLElement){t.toggleAttribute("aria-expanded");const e=document.querySelector("#"+t.getAttribute("aria-controls"));e&&(e.classList.toggle("active"),sr(e,t.hasAttribute("aria-expanded")))}}))}));var w_={exports:{}};
/*!
       * clipboard.js v2.0.11
       * https://clipboardjs.com/
       *
       * Licensed MIT © Zeno Rocha
       */!function(e,t){var n;n=function(){return function(){var e={686:function(e,t,n){n.d(t,{default:function(){return k}});var r=n(279),i=n.n(r),o=n(370),s=n.n(o),a=n(817),l=n.n(a);function c(e){try{return document.execCommand(e)}catch(t){return!1}}var d=function(e){var t=l()(e);return c("cut"),t},u=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var r=l()(n);return c("copy"),n.remove(),r},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=u(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=u(e.value,t):(n=l()(e),c("copy")),n};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,r=e.container,i=e.target,o=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==p(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return o?h(o,{container:r}):i?"cut"===n?d(i):h(i,{container:r}):void 0};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(OI){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,r,i=y(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).resolveOptions(t),n.listenClick(e),n}return t=o,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===m(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=s()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",r=f({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(r?"success":"error",{action:n,text:r,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return w("action",e)}},{key:"defaultTarget",value:function(e){var t=w("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return w("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return h(e,t)}},{key:"cut",value:function(e){return d(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&g(t.prototype,n),r&&g(t,r),o}(i()),k=x},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var r=n(828);function i(e,t,n,r,i){var s=o.apply(this,arguments);return e.addEventListener(n,s,i),{destroy:function(){e.removeEventListener(n,s,i)}}}function o(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}e.exports=function(e,t,n,r,o){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,n,r,o)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var r=n(879),i=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default},e.exports=n()}(w_);new(Ft(w_.exports))('[id$="-copy"]');document.querySelectorAll("[data-dialogs]").forEach((e=>{!function(e,t=3,n="/"){const r=window.location.pathname,i=e.id;if(window.localStorage.getItem(i))return;if(-1===r.indexOf(n))return;const o="pv-"+i;let s=parseInt(window.sessionStorage.getItem(o)||"0",10);s>=t&&function(e){e&&e.classList.remove("fr-hidden")}(e),s++,window.sessionStorage.setItem(o,s.toFixed(0))}(e);e.querySelectorAll("[data-dialogs-close]").forEach((t=>{t instanceof HTMLElement&&t.addEventListener("click",(()=>function(e){e&&e.classList.add("fr-hidden"),window.localStorage.setItem(e.id,"true")}(e)))}))}));function x_(e){return`#/${e.dataset.updateUrl||e.getAttribute("aria-controls")}`}function k_(e){e.forEach((e=>{const t=x_(e),n=`#${e.dataset.previousUrl}`;if(n&&window.location.hash.startsWith(n)){const e=window.location.hash.slice(n.length);window.location.hash=`${t}/${e}`}if(window.location.hash.includes(t)){const t=e.getAttribute("aria-controls");t||console.error("TabButton without `aria-controls` ID.",e);const n=document.getElementById(t);n||console.error(`Unknown TabPanel with id '${t}'.`,e),dsfr(n).tabPanel.disclose()}}))}function C_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function __(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C_(Object(n),!0).forEach((function(t){S_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).reduce(((n,r)=>(t.includes(r)||(n[r]=h(e[r])),n)),{})}function T_(e){return"function"==typeof e}function O_(e,t,n){let r=e;const i=t.split(".");for(let o=0;o<i.length;o++){if(!r[i[o]])return n;r=r[i[o]]}return r}function D_(e,t,n){return s((()=>e.some((e=>O_(t,e,{[n]:!1})[n]))))}function E_(e,t,n){return s((()=>e.reduce(((e,r)=>{const i=O_(t,r,{[n]:!1})[n]||[];return e.concat(i)}),[])))}function A_(e,t,n,r){return e.call(r,h(t),h(n),r)}function N_(e){return void 0!==e.$valid?!e.$valid:!e}function P_(e,t,n,r,i,o,a,l,c,d,u){const h=y(!1),p=e.$params||{},f=y(null);let m,g;e.$async?({$invalid:m,$unwatch:g}=function(e,t,n,r,i,o,s){let{$lazy:a,$rewardEarly:l}=i,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],d=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const p=y(!!r.value),f=y(0);n.value=!1;const m=C([t,r].concat(c,h),(()=>{if(a&&!r.value||l&&!u.value&&!n.value)return;let i;try{i=A_(e,t,d,s)}catch(c){i=Promise.reject(c)}f.value++,n.value=!!f.value,p.value=!1,Promise.resolve(i).then((e=>{f.value--,n.value=!!f.value,o.value=e,p.value=N_(e)})).catch((e=>{f.value--,n.value=!!f.value,o.value=e,p.value=!0}))}),{immediate:!0,deep:"object"==typeof t});return{$invalid:p,$unwatch:m}}(e.$validator,t,h,n,r,f,i,e.$watchTargets,c,d,u)):({$invalid:m,$unwatch:g}=function(e,t,n,r,i,o,a,l){let{$lazy:c,$rewardEarly:d}=r;return{$unwatch:()=>({}),$invalid:s((()=>{if(c&&!n.value||d&&!l.value)return!1;let r=!0;try{const n=A_(e,t,a,o);i.value=n,r=N_(n)}catch(s){i.value=s}return r}))}}(e.$validator,t,n,r,f,i,c,d));const v=e.$message;return{$message:T_(v)?s((()=>v(M_({$pending:h,$invalid:m,$params:M_(p),$model:t,$response:f,$validator:o,$propertyPath:l,$property:a})))):v||"",$params:p,$pending:h,$invalid:m,$response:f,$unwatch:g}}document.querySelectorAll("[data-select-sort]").forEach((e=>{e.querySelectorAll("option").forEach((e=>{e.disabled=!1})),e.form&&(e.addEventListener("change",(t=>{var n;null===(n=e.form)||void 0===n||n.dispatchEvent(new Event("submit"))})),e.form.addEventListener("submit",(t=>{var n,r;t.preventDefault(),e.value||(e.disabled=!0),null===(n=e.form)||void 0===n||n.submit(),null===(r=globalThis._paq)||void 0===r||r.push(["trackEvent","Search","Sort",e.value])})))}));const L_="__root";function R_(e){let{validations:t,state:n,key:r,parentKey:i,childResults:o,resultsCache:a,globalConfig:l={},instance:c,externalResults:d}=e;const u=i?`${i}.${r}`:r,{rules:p,nestedValidators:f,config:m,validationGroups:g}=function(){const e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=Object.keys(e),n={},r={},i={};let o=null;return t.forEach((t=>{const s=e[t];switch(!0){case T_(s.$validator):n[t]=s;break;case T_(s):n[t]={$validator:s};break;case"$validationGroups"===t:o=s;break;case t.startsWith("$"):i[t]=s;break;default:r[t]=s}})),{rules:n,nestedValidators:r,config:i,validationGroups:o}}(t),v=__(__({},l),m),b=r?s((()=>{const e=h(n);return e?h(e[r]):void 0})):n,w=__({},h(d)||{}),x=s((()=>{const e=h(d);return r?e?h(e[r]):void 0:e})),k=function(e,t,n,r,i,o,a,l,c){const d=Object.keys(e),u=r.get(i,e),p=y(!1),f=y(!1),m=y(0);if(u){if(!u.$partial)return u;u.$unwatch(),p.value=u.$dirty.value}const g={$dirty:p,$path:i,$touch:()=>{p.value||(p.value=!0)},$reset:()=>{p.value&&(p.value=!1)},$commit:()=>{}};return d.length?(d.forEach((r=>{g[r]=P_(e[r],t,g.$dirty,o,a,r,n,i,c,f,m)})),g.$externalResults=s((()=>l.value?[].concat(l.value).map(((e,t)=>({$propertyPath:i,$property:n,$validator:"$externalResults",$uid:`${i}-externalResult-${t}`,$message:e,$params:{},$response:null,$pending:!1}))):[])),g.$invalid=s((()=>{const e=d.some((e=>h(g[e].$invalid)));return f.value=e,!!g.$externalResults.value.length||e})),g.$pending=s((()=>d.some((e=>h(g[e].$pending))))),g.$error=s((()=>!!g.$dirty.value&&(g.$pending.value||g.$invalid.value))),g.$silentErrors=s((()=>d.filter((e=>h(g[e].$invalid))).map((e=>{const t=g[e];return V({$propertyPath:i,$property:n,$validator:e,$uid:`${i}-${e}`,$message:t.$message,$params:t.$params,$response:t.$response,$pending:t.$pending})})).concat(g.$externalResults.value))),g.$errors=s((()=>g.$dirty.value?g.$silentErrors.value:[])),g.$unwatch=()=>d.forEach((e=>{g[e].$unwatch()})),g.$commit=()=>{f.value=!0,m.value=Date.now()},r.set(i,e,g),g):(u&&r.set(i,e,g),g)}(p,b,r,a,u,v,c,x,n),_=function(e,t,n,r,i,o,s){const a=Object.keys(e);return a.length?a.reduce(((a,l)=>(a[l]=R_({validations:e[l],state:t,key:l,parentKey:n,resultsCache:r,globalConfig:i,instance:o,externalResults:s}),a)),{}):{}}(f,b,u,a,v,c,x),M={};g&&Object.entries(g).forEach((e=>{let[t,n]=e;M[t]={$invalid:D_(n,_,"$invalid"),$error:D_(n,_,"$error"),$pending:D_(n,_,"$pending"),$errors:E_(n,_,"$errors"),$silentErrors:E_(n,_,"$silentErrors")}}));const{$dirty:T,$errors:O,$invalid:D,$anyDirty:E,$error:N,$pending:P,$touch:L,$reset:R,$silentErrors:I,$commit:$}=function(e,t,n){const r=s((()=>[t,n].filter((e=>e)).reduce(((e,t)=>e.concat(Object.values(h(t)))),[]))),i=s({get:()=>e.$dirty.value||!!r.value.length&&r.value.every((e=>e.$dirty)),set(t){e.$dirty.value=t}}),o=s((()=>{const t=h(e.$silentErrors)||[],n=r.value.filter((e=>(h(e).$silentErrors||[]).length)).reduce(((e,t)=>e.concat(...t.$silentErrors)),[]);return t.concat(n)})),a=s((()=>{const t=h(e.$errors)||[],n=r.value.filter((e=>(h(e).$errors||[]).length)).reduce(((e,t)=>e.concat(...t.$errors)),[]);return t.concat(n)})),l=s((()=>r.value.some((e=>e.$invalid))||h(e.$invalid)||!1)),c=s((()=>r.value.some((e=>h(e.$pending)))||h(e.$pending)||!1)),d=s((()=>r.value.some((e=>e.$dirty))||r.value.some((e=>e.$anyDirty))||i.value)),u=s((()=>!!i.value&&(c.value||l.value))),p=()=>{e.$touch(),r.value.forEach((e=>{e.$touch()}))};return r.value.length&&r.value.every((e=>e.$dirty))&&p(),{$dirty:i,$errors:a,$invalid:l,$anyDirty:d,$error:u,$pending:c,$touch:p,$reset:()=>{e.$reset(),r.value.forEach((e=>{e.$reset()}))},$silentErrors:o,$commit:()=>{e.$commit(),r.value.forEach((e=>{e.$commit()}))}}}(k,_,o),z=r?s({get:()=>h(b),set:e=>{T.value=!0;const t=h(n),i=h(d);i&&(i[r]=w[r]),A(t[r])?t[r].value=e:t[r]=e}}):null;return r&&v.$autoDirty&&C(b,(()=>{T.value||L();const e=h(d);e&&(e[r]=w[r])}),{flush:"sync"}),V(__(__(__({},k),{},{$model:z,$dirty:T,$error:N,$errors:O,$invalid:D,$anyDirty:E,$pending:P,$touch:L,$reset:R,$path:u||L_,$silentErrors:I,$validate:async function(){return L(),v.$rewardEarly&&($(),await S()),await S(),new Promise((e=>{if(!P.value)return e(!D.value);const t=C(P,(()=>{e(!D.value),t()}))}))},$commit:$},o&&{$getResultsForChild:function(e){return(o.value||{})[e]},$clearExternalResults:function(){A(d)?d.value=w:0===Object.keys(w).length?Object.keys(d).forEach((e=>{delete d[e]})):Object.assign(d,w)},$validationGroups:M}),_))}class I_{constructor(){this.storage=new Map}set(e,t,n){this.storage.set(e,{rules:t,result:n})}checkRulesValidity(e,t,n){const r=Object.keys(n),i=Object.keys(t);if(i.length!==r.length)return!1;return!!i.every((e=>r.includes(e)))&&i.every((e=>!t[e].$params||Object.keys(t[e].$params).every((r=>h(n[e].$params[r])===h(t[e].$params[r])))))}get(e,t){const n=this.storage.get(e);if(!n)return;const{rules:r,result:i}=n,o=this.checkRulesValidity(e,t,r),s=i.$unwatch?i.$unwatch:()=>({});return o?i:{$dirty:i.$dirty,$partial:!0,$unwatch:s}}}const $_={COLLECT_ALL:!0,COLLECT_NONE:!1},z_=Symbol("vuelidate#injectChildResults"),B_=Symbol("vuelidate#removeChildResults");function F_(e){return new Proxy(e,{get:(e,t)=>"object"==typeof e[t]?F_(e[t]):s((()=>e[t]))})}let V_=0;function j_(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};1===arguments.length&&(r=e,e=void 0,t=void 0);let{$registerAs:o,$scope:a=$_.COLLECT_ALL,$stopPropagation:l,$externalResults:c,currentVueInstance:d}=r;const u=d||(null===(n=M())||void 0===n?void 0:n.proxy),p=u?u.$options:{};o||(V_+=1,o=`_vuelidate_${V_}`);const f=y({}),m=new I_,{childResults:g,sendValidationResultsToParent:v,removeValidationResultsFromParent:b}=u?function(e){let{$scope:t,instance:n}=e;const r={},o=y([]),a=s((()=>o.value.reduce(((e,t)=>(e[t]=h(r[t]),e)),{})));n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],(function(e,n){let{$registerAs:i,$scope:s,$stopPropagation:a}=n;a||t===$_.COLLECT_NONE||s===$_.COLLECT_NONE||t!==$_.COLLECT_ALL&&t!==s||(r[i]=e,o.value.push(i))})),n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],(function(e){o.value=o.value.filter((t=>t!==e)),delete r[e]}));const l=i(z_,[]);z(z_,n.__vuelidateInjectInstances);const c=i(B_,[]);return z(B_,n.__vuelidateRemoveInstances),{childResults:a,sendValidationResultsToParent:l,removeValidationResultsFromParent:c}}({$scope:a,instance:u}):{childResults:y({})};if(!e&&p.validations){const e=p.validations;t=y({}),Z((()=>{t.value=u,C((()=>T_(e)?e.call(t.value,new F_(t.value)):e),(e=>{f.value=R_({validations:e,state:t,childResults:g,resultsCache:m,globalConfig:r,instance:u,externalResults:c||u.vuelidateExternalResults})}),{immediate:!0})})),r=p.validationsConfig||r}else{const n=A(e)||(se(w=e)||ae(w))?e:V(e||{});C(n,(e=>{f.value=R_({validations:e,state:t,childResults:g,resultsCache:m,globalConfig:r,instance:null!=u?u:{},externalResults:c})}),{immediate:!0})}var w;return u&&(v.forEach((e=>e(f,{$registerAs:o,$scope:a,$stopPropagation:l}))),Q((()=>b.forEach((e=>e(o)))))),s((()=>__(__({},h(f.value)),g.value)))}function H_(e,t,n,r=!1){const i=j_(t,e,{$scope:r}),o=j_(n,e,{$scope:"warning"});return{getErrorText:e=>(o.value[e].$dirty&&i.value[e].$touch(),i.value[e].$errors.map((e=>e.$message)).join("\n")),getFunctionalState:W_,getWarningText:e=>o.value[e].$errors.map((e=>e.$message)).join("\n"),hasError:q_,hasWarning:U_,reset:()=>{o.value.$reset(),i.value.$reset()},validateRequiredRules:()=>(o.value.$validate(),i.value.$validate(),i.value.$validate()),v$:i,vWarning$:o}}const W_=(e,t,n)=>e?t?"error":n?"warning":"success":"disabled",q_=(e,t)=>"error"===k(e)[t],U_=(e,t)=>"warning"===k(e)[t],Y_=["for"],K_={key:0,class:"fr-hint-text"},J_=["aria-describedby","id","required","disabled"],G_=["selected"],X_=["value","selected","disabled","hidden"],Z_=["id"],Q_=["id"],eS=r({__name:"SelectGroup",props:{disabled:{type:Boolean,default:!1},errorText:{default:""},hasError:{type:Boolean,default:!1},hintText:{default:""},isValid:{type:Boolean,default:!1},label:{},modelValue:{default:void 0},options:{},required:{type:Boolean,default:!1},validText:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t,r=e,{id:i}=mg("select"),o=s((()=>i+"-desc-error")),c=s((()=>i+"-desc-valid")),d=s((()=>{let e="";return r.isValid?e+=" "+c:r.hasError&&(e+=" "+o),e})),u=s((()=>({"fr-select-group--disabled":r.disabled,"fr-select-group--error":r.hasError,"fr-select-group--valid":r.isValid}))),p=e=>{var t;const r=e.target;n("update:modelValue",null!==(t=null==r?void 0:r.value)&&void 0!==t?t:"")};return(e,t)=>(a(),l("div",{class:v(["fr-select-group",u.value])},[w("label",{class:"fr-label",for:h(i)},[R(x(e.label)+" ",1),b(Py,{required:e.required},null,8,["required"]),e.hintText?(a(),l("span",K_,x(e.hintText),1)):g("",!0)],8,Y_),w("select",{class:v(["fr-select",{"fr-select--error":e.hasError,"fr-select--valid":e.isValid}]),"aria-describedby":d.value,id:h(i),required:e.required,disabled:e.disabled,onChange:p},[w("option",{value:"",selected:!e.modelValue,disabled:"",hidden:""},x(e.$t("Select an option")),9,G_),(a(!0),l(L,null,q(e.options,(e=>(a(),l("option",{value:e.value,selected:e.selected,disabled:e.disabled,hidden:e.hidden},x(e.label),9,X_)))),256))],42,J_),e.isValid?(a(),l("p",{key:0,id:c.value,class:"fr-valid-text"},x(e.validText),9,Z_)):e.hasError?(a(),l("p",{key:1,id:o.value,class:"fr-error-text"},x(e.errorText),9,Q_)):g("",!0)],2))}});!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".v3dp__popout[data-v-65eb861b]{z-index:10;position:absolute;text-align:center;width:17.5em;background-color:var(--popout-bg-color);box-shadow:var(--box-shadow);border-radius:var(--border-radius);padding:8px 0 1em;color:var(--text-color)}.v3dp__popout *[data-v-65eb861b]{color:inherit;font-size:inherit;font-weight:inherit}.v3dp__popout[data-v-65eb861b] button{background:none;border:none;outline:none}.v3dp__popout[data-v-65eb861b] button:not(:disabled){cursor:pointer}.v3dp__heading[data-v-65eb861b]{width:100%;display:flex;height:var(--heading-size);line-height:var(--heading-size);font-weight:var(--heading-weight)}.v3dp__heading__button[data-v-65eb861b]{background:none;border:none;padding:0;display:flex;justify-content:center;align-items:center;width:var(--heading-size)}button.v3dp__heading__center[data-v-65eb861b]:hover,.v3dp__heading__button[data-v-65eb861b]:not(:disabled):hover{background-color:var(--heading-hover-color)}.v3dp__heading__center[data-v-65eb861b]{flex:1}.v3dp__heading__icon[data-v-65eb861b]{height:12px;stroke:var(--arrow-color)}.v3dp__heading__button:disabled .v3dp__heading__icon[data-v-65eb861b]{stroke:var(--elem-disabled-color)}.v3dp__subheading[data-v-65eb861b],.v3dp__elements[data-v-65eb861b]{display:grid;grid-template-columns:var(--popout-column-definition);font-size:var(--elem-font-size)}.v3dp__subheading[data-v-65eb861b]{margin-top:1em}.v3dp__divider[data-v-65eb861b]{border:1px solid var(--divider-color);border-radius:3px}.v3dp__elements[data-v-65eb861b] button:disabled{color:var(--elem-disabled-color)}.v3dp__elements[data-v-65eb861b] button{padding:.3em .6em}.v3dp__elements[data-v-65eb861b] button span{display:block;line-height:1.9em;height:1.8em;border-radius:var(--elem-border-radius)}.v3dp__elements[data-v-65eb861b] button:not(:disabled):hover span{background-color:var(--elem-hover-bg-color);color:var(--elem-hover-color)}.v3dp__elements[data-v-65eb861b] button.selected span{background-color:var(--elem-selected-bg-color);color:var(--elem-selected-color)}.v3dp__elements[data-v-65eb861b] button.current span{font-weight:var(--elem-current-font-weight);outline:1px solid var(--elem-current-outline-color)}.v3dp__column[data-v-81ac698d]{display:flex;flex-direction:column;overflow-y:auto;height:190px}.v3dp__datepicker{--popout-bg-color: var(--vdp-bg-color, #fff);--box-shadow: var( --vdp-box-shadow, 0 4px 10px 0 rgba(128, 144, 160, .1), 0 0 1px 0 rgba(128, 144, 160, .81) );--text-color: var(--vdp-text-color, #000000);--border-radius: var(--vdp-border-radius, 3px);--heading-size: var(--vdp-heading-size, 2.5em);--heading-weight: var(--vdp-heading-weight, bold);--heading-hover-color: var(--vdp-heading-hover-color, #eeeeee);--arrow-color: var(--vdp-arrow-color, currentColor);--elem-color: var(--vdp-elem-color, currentColor);--elem-disabled-color: var(--vdp-disabled-color, #d5d9e0);--elem-hover-color: var(--vdp-hover-color, #fff);--elem-hover-bg-color: var(--vdp-hover-bg-color, #0baf74);--elem-selected-color: var(--vdp-selected-color, #fff);--elem-selected-bg-color: var(--vdp-selected-bg-color, #0baf74);--elem-current-outline-color: var(--vdp-current-date-outline-color, #888);--elem-current-font-weight: var(--vdp-current-date-font-weight, bold);--elem-font-size: var(--vdp-elem-font-size, .8em);--elem-border-radius: var(--vdp-elem-border-radius, 3px);--divider-color: var(--vdp-divider-color, var(--elem-disabled-color));position:relative}.v3dp__clearable{display:inline;position:relative;left:-15px;cursor:pointer}")),document.head.appendChild(e)}}catch(EN){console.error("vite-plugin-css-injected-by-js",EN)}}();const tS=["year","month","day","time","custom"],nS=r({emits:{elementClick:e=>sb(e),left:()=>!0,right:()=>!0,heading:()=>!0},props:{headingClickable:{type:Boolean,default:!1},leftDisabled:{type:Boolean,default:!1},rightDisabled:{type:Boolean,default:!1},columnCount:{type:Number,default:7},items:{type:Array,default:()=>[]},viewMode:{type:String,required:!0,validate:e=>"string"==typeof e&&tS.includes(e)}}}),rS=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},iS=e=>(le("data-v-65eb861b"),e=e(),ce(),e),oS={class:"v3dp__heading"},sS=["disabled"],aS=iS((()=>w("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[w("g",{fill:"none","fill-rule":"evenodd"},[w("path",{stroke:"none",d:"M-9 16V-8h24v24z"}),w("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 0L1 4l4 4"})])],-1))),lS=["disabled"],cS=iS((()=>w("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[w("g",{fill:"none","fill-rule":"evenodd"},[w("path",{stroke:"none",d:"M15-8v24H-9V-8z"}),w("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M1 8l4-4-4-4"})])],-1))),dS={class:"v3dp__body"},uS={class:"v3dp__subheading"},hS=iS((()=>w("hr",{class:"v3dp__divider"},null,-1))),pS={class:"v3dp__elements"},fS=["disabled","onClick"];const mS=rS(nS,[["render",function(e,t,n,r,i,o){return a(),l("div",{class:v(["v3dp__popout",`v3dp__popout-${e.viewMode}`]),style:H({"--popout-column-definition":`repeat(${e.columnCount}, 1fr)`}),onMousedown:t[3]||(t[3]=U((()=>{}),["prevent"]))},[w("div",oS,[w("button",{class:"v3dp__heading__button v3dp__heading__button__left",disabled:e.leftDisabled,onClick:t[0]||(t[0]=U((t=>e.$emit("left")),["stop","prevent"]))},[d(e.$slots,"arrow-left",{},(()=>[aS]),!0)],8,sS),(a(),u(W(e.headingClickable?"button":"span"),{class:"v3dp__heading__center",onClick:t[1]||(t[1]=U((t=>e.$emit("heading")),["stop","prevent"]))},{default:f((()=>[d(e.$slots,"heading",{},void 0,!0)])),_:3})),w("button",{class:"v3dp__heading__button v3dp__heading__button__right",disabled:e.rightDisabled,onClick:t[2]||(t[2]=U((t=>e.$emit("right")),["stop","prevent"]))},[d(e.$slots,"arrow-right",{},(()=>[cS]),!0)],8,lS)]),w("div",dS,["subheading"in e.$slots?(a(),l(L,{key:0},[w("div",uS,[d(e.$slots,"subheading",{},void 0,!0)]),hS],64)):g("",!0),w("div",pS,[d(e.$slots,"body",{},(()=>[(a(!0),l(L,null,q(e.items,(t=>(a(),l("button",{key:t.key,disabled:t.disabled,class:v([{selected:t.selected,current:t.current},`v3dp__element__button__${e.viewMode}`]),onClick:U((n=>e.$emit("elementClick",t.value)),["stop","prevent"])},[w("span",null,x(t.display),1)],10,fS)))),128))]),!0)])])],38)}],["__scopeId","data-v-65eb861b"]]),gS=r({components:{PickerPopup:mS},emits:{"update:pageDate":e=>sb(e),select:e=>sb(e)},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(e,{emit:t}){const n=s((()=>function(e){Gy(1,arguments);var t=Xy(e),n=t.getFullYear(),r=10*Math.floor(n/10);return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}(e.pageDate))),r=s((()=>function(e){Gy(1,arguments);var t=Xy(e),n=t.getFullYear(),r=9+10*Math.floor(n/10);return t.setFullYear(r,11,31),t.setHours(23,59,59,999),t}(e.pageDate))),i=(e,t,n)=>!t&&!n||!(t&&Zb(e)<Zb(t)||n&&Zb(e)>Zb(n)),o=s((()=>function(e){Gy(1,arguments);var t=e||{},n=Xy(t.start),r=Xy(t.end).getTime();if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var i=[],o=n;for(o.setHours(0,0,0,0),o.setMonth(0,1);o.getTime()<=r;)i.push(Xy(o)),o.setFullYear(o.getFullYear()+1);return i}({start:n.value,end:r.value}).map((t=>({value:t,key:String(Zb(t)),display:Zb(t),selected:!!e.selected&&Zb(t)===Zb(e.selected),disabled:!i(t,e.lowerLimit,e.upperLimit)})))));return{years:o,heading:s((()=>`${Zb(n.value)} - ${Zb(r.value)}`)),leftDisabled:s((()=>e.lowerLimit&&(Xb(e.lowerLimit)===Xb(e.pageDate)||ew(e.pageDate,e.lowerLimit)))),rightDisabled:s((()=>e.upperLimit&&(Xb(e.upperLimit)===Xb(e.pageDate)||Qb(e.pageDate,e.upperLimit)))),previousPage:()=>t("update:pageDate",Ux(e.pageDate,10)),nextPage:()=>t("update:pageDate",ib(e.pageDate,10))}}});const vS=rS(gS,[["render",function(e,t,n,r,i,o){const s=J("picker-popup");return a(),u(s,{columnCount:3,leftDisabled:e.leftDisabled,rightDisabled:e.rightDisabled,items:e.years,viewMode:"year",onLeft:e.previousPage,onRight:e.nextPage,onElementClick:t[0]||(t[0]=t=>e.$emit("select",t))},{heading:f((()=>[R(x(e.heading),1)])),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}]]),yS=r({components:{PickerPopup:mS},emits:{"update:pageDate":e=>sb(e),select:e=>sb(e),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"LLL"},locale:{type:Object,required:!1},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(e,{emit:t}){const n=s((()=>function(e){Gy(1,arguments);var t=Xy(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(e.pageDate))),r=s((()=>function(e){Gy(1,arguments);var t=Xy(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}(e.pageDate))),i=s((()=>t=>Jb(t,e.format,{locale:e.locale}))),o=(e,t,n)=>!t&&!n||!(t&&ew(e,cb(t))||n&&Qb(e,ab(n))),a=s((()=>function(e){Gy(1,arguments);var t=e||{},n=Xy(t.start),r=Xy(t.end).getTime(),i=[];if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var o=n;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=r;)i.push(Xy(o)),o.setMonth(o.getMonth()+1);return i}({start:n.value,end:r.value}).map((t=>({value:t,display:i.value(t),key:i.value(t),selected:!!e.selected&&Fx(e.selected,t),disabled:!o(t,e.lowerLimit,e.upperLimit)})))));return{months:a,heading:s((()=>Zb(n.value))),leftDisabled:s((()=>e.lowerLimit&&(Vx(e.lowerLimit,e.pageDate)||ew(e.pageDate,e.lowerLimit)))),rightDisabled:s((()=>e.upperLimit&&(Vx(e.upperLimit,e.pageDate)||Qb(e.pageDate,e.upperLimit)))),previousPage:()=>t("update:pageDate",Ux(e.pageDate,1)),nextPage:()=>t("update:pageDate",ib(e.pageDate,1))}}});const bS=rS(yS,[["render",function(e,t,n,r,i,o){const s=J("picker-popup");return a(),u(s,{headingClickable:"",columnCount:3,items:e.months,leftDisabled:e.leftDisabled,rightDisabled:e.rightDisabled,viewMode:"month",onLeft:e.previousPage,onRight:e.nextPage,onHeading:t[0]||(t[0]=t=>e.$emit("back")),onElementClick:t[1]||(t[1]=t=>e.$emit("select",t))},{heading:f((()=>[R(x(e.heading),1)])),_:1},8,["items","leftDisabled","rightDisabled","onLeft","onRight"])}]]),wS=r({components:{PickerPopup:mS},emits:{"update:pageDate":e=>sb(e),select:e=>sb(e),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"dd"},headingFormat:{type:String,required:!1,default:"LLLL yyyy"},weekdayFormat:{type:String,required:!1,default:"EE"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:e=>"number"==typeof e&&Number.isInteger(e)&&e>=0&&e<=6},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1}},setup(e,{emit:t}){const n=s((()=>t=>n=>Jb(n,t,{locale:e.locale,weekStartsOn:e.weekStartsOn}))),r=s((()=>cb(e.pageDate))),i=s((()=>ab(e.pageDate))),o=s((()=>({start:r.value,end:i.value}))),a=s((()=>({start:tb(r.value,{weekStartsOn:e.weekStartsOn}),end:db(i.value,{weekStartsOn:e.weekStartsOn})}))),l=s((()=>{const t=e.weekStartsOn,r=n.value(e.weekdayFormat);return Array.from(Array(7)).map(((e,n)=>(t+n)%7)).map((t=>qx(new Date,t,{weekStartsOn:e.weekStartsOn}))).map(r)})),c=(e,t,n,r)=>{var i,o;return!(null!=(i=null==r?void 0:r.dates)&&i.some((t=>ob(e,t)))||null!=(o=null==r?void 0:r.predicate)&&o.call(r,e))&&(!t&&!n||!(t&&ew(e,rb(t))||n&&Qb(e,function(e){Gy(1,arguments);var t=Xy(e);return t.setHours(23,59,59,999),t}(n))))},d=s((()=>{const t=new Date,r=n.value(e.format);return function(e,t){var n;Gy(1,arguments);var r=e||{},i=Xy(r.start),o=Xy(r.end).getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var s=[],a=i;a.setHours(0,0,0,0);var l=Number(null!==(n=null==t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;a.getTime()<=o;)s.push(Xy(a)),a.setDate(a.getDate()+l),a.setHours(0,0,0,0);return s}(a.value).map((i=>({value:i,display:r(i),selected:!!e.selected&&ob(e.selected,i),current:ob(t,i),disabled:!e.allowOutsideInterval&&!jx(i,o.value)||!c(i,e.lowerLimit,e.upperLimit,e.disabledDates),key:n.value("yyyy-MM-dd")(i)})))}));return{weekDays:l,days:d,heading:s((()=>n.value(e.headingFormat)(e.pageDate))),leftDisabled:s((()=>e.lowerLimit&&(Fx(e.lowerLimit,e.pageDate)||ew(e.pageDate,e.lowerLimit)))),rightDisabled:s((()=>e.upperLimit&&(Fx(e.upperLimit,e.pageDate)||Qb(e.pageDate,e.upperLimit)))),previousPage:()=>t("update:pageDate",function(e,t){return Gy(2,arguments),Zy(e,-Jy(t))}(e.pageDate,1)),nextPage:()=>t("update:pageDate",Zy(e.pageDate,1))}}});const xS=rS(wS,[["render",function(e,t,n,r,i,o){const s=J("picker-popup");return a(),u(s,{headingClickable:"",leftDisabled:e.leftDisabled,rightDisabled:e.rightDisabled,items:e.days,viewMode:"day",onLeft:e.previousPage,onRight:e.nextPage,onHeading:t[0]||(t[0]=t=>e.$emit("back")),onElementClick:t[1]||(t[1]=t=>e.$emit("select",t))},{heading:f((()=>[R(x(e.heading),1)])),subheading:f((()=>[(a(!0),l(L,null,q(e.weekDays,((e,t)=>(a(),l("span",{key:e,class:v(`v3dp__subheading__weekday__${t}`)},x(e),3)))),128))])),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}]]);function kS(e,t){const n=e.getBoundingClientRect(),r=e.clientHeight,i=(e.clientWidth,t.getBoundingClientRect());if(!(i.top>=n.top&&i.bottom<=n.top+r)){const t=i.top-n.top,r=i.bottom-n.bottom;Math.abs(t)<Math.abs(r)?e.scrollTop+=t:e.scrollTop+=r}}const CS=r({components:{PickerPopup:mS},emits:{select:e=>sb(e),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},visible:{type:Boolean,required:!0},disabledTime:{type:Object,required:!1}},setup(e,{emit:t}){const n=y(null),r=y(null),i=s((()=>{var t;return null!==(t=e.pageDate)&&void 0!==t?t:e.selected})),o=y(i.value.getHours()),a=y(i.value.getMinutes());C((()=>e.selected),(e=>{let t=0,n=0;e&&(t=e.getHours(),n=e.getMinutes()),o.value=t,a.value=n}));const l=s((()=>[...Array(24).keys()].map((e=>({value:e,date:Wx(new Date(i.value.getTime()),{hours:e,minutes:a.value,seconds:0}),selected:o.value===e,ref:y(null)}))))),c=s((()=>[...Array(60).keys()].map((e=>({value:e,date:Wx(new Date(i.value.getTime()),{hours:o.value,minutes:e,seconds:0}),selected:a.value===e,ref:y(null)}))))),d=()=>{const e=l.value.find((e=>{var t,n,r;return null!==(t=null==(r=null==(n=e.ref.value)?void 0:n.classList)?void 0:r.contains("selected"))&&void 0!==t&&t})),t=c.value.find((e=>{var t,n,r;return null!==(t=null==(r=null==(n=e.ref.value)?void 0:n.classList)?void 0:r.contains("selected"))&&void 0!==t&&t}));e&&t&&(kS(n.value,e.ref.value),kS(r.value,t.ref.value))};return C((()=>e.visible),(e=>{e&&S(d)})),{hoursListRef:n,minutesListRef:r,hours:o,minutes:a,hoursList:l,minutesList:c,padStartZero:e=>`0${e}`.substr(-2),selectMinutes:e=>{a.value=e.value,t("select",e.date)},isEnabled:t=>{var n,r,i,o;return!(null!=(r=null==(n=e.disabledTime)?void 0:n.dates)&&r.some((e=>function(e,t){Gy(2,arguments);var n=Bx(e),r=Bx(t);return n.getTime()===r.getTime()}(t,e)&&function(e,t){Gy(2,arguments);var n=lb(e),r=lb(t);return n.getTime()===r.getTime()}(t,e)))||null!=(o=null==(i=e.disabledTime)?void 0:i.predicate)&&o.call(i,t))},scroll:d}}}),_S={ref:"hoursListRef",class:"v3dp__column"},SS=["disabled","onClick"],MS={ref:"minutesListRef",class:"v3dp__column"},TS=["disabled","onClick"];const OS=rS(CS,[["render",function(e,t,n,r,i,o){const s=J("picker-popup");return a(),u(s,{headingClickable:"",columnCount:2,leftDisabled:!0,rightDisabled:!0,viewMode:"time",onHeading:t[0]||(t[0]=t=>e.$emit("back"))},{heading:f((()=>[R(x(e.padStartZero(e.hours))+":"+x(e.padStartZero(e.minutes)),1)])),body:f((()=>[w("div",_S,[(a(!0),l(L,null,q(e.hoursList,(t=>(a(),l("button",{key:t.value,ref_for:!0,ref:t.ref,class:v([{selected:t.selected},"v3dp__element_button__hour"]),disabled:!e.isEnabled(t.date),onClick:U((n=>e.hours=t.value),["stop","prevent"])},[w("span",null,x(e.padStartZero(t.value)),1)],10,SS)))),128))],512),w("div",MS,[(a(!0),l(L,null,q(e.minutesList,(t=>(a(),l("button",{key:t.value,ref_for:!0,ref:t.ref,class:v([{selected:t.selected},"v3dp__element_button__minute"]),disabled:!e.isEnabled(t.date),onClick:U((n=>e.selectMinutes(t)),["stop","prevent"])},[w("span",null,x(e.padStartZero(t.value)),1)],10,TS)))),128))],512)])),_:1})}],["__scopeId","data-v-81ac698d"]]),DS=["time","day","month","year"],ES=(e,t,n=void 0)=>{let r=n||new Date;return e&&(r=function(e){var t,n;if(Gy(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!==Ky(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Xy(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}([e,r])),t&&(r=function(e){var t,n;if(Gy(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!==Ky(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Xy(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}([t,r])),r},AS=r({components:{YearPicker:vS,MonthPicker:bS,DayPicker:xS,TimePicker:OS},inheritAttrs:!1,props:{placeholder:{type:String,default:""},modelValue:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1},disabledTime:{type:Object,required:!1},upperLimit:{type:Date,required:!1},lowerLimit:{type:Date,required:!1},startingView:{type:String,required:!1,default:"day",validate:e=>"string"==typeof e&&DS.includes(e)},startingViewDate:{type:Date,required:!1,default:()=>new Date},dayPickerHeadingFormat:{type:String,required:!1,default:"LLLL yyyy"},monthListFormat:{type:String,required:!1,default:"LLL"},weekdayFormat:{type:String,required:!1,default:"EE"},dayFormat:{type:String,required:!1,default:"dd"},inputFormat:{type:String,required:!1,default:"yyyy-MM-dd"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:e=>[0,1,2,3,4,5,6].includes(e)},disabled:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,required:!1,default:!1},typeable:{type:Boolean,required:!1,default:!1},minimumView:{type:String,required:!1,default:"day",validate:e=>"string"==typeof e&&DS.includes(e)}},emits:{"update:modelValue":e=>null==e||sb(e),decadePageChanged:e=>!0,yearPageChanged:e=>!0,monthPageChanged:e=>!0,opened:()=>!0,closed:()=>!0},setup(e,{emit:t,attrs:n}){const r=y("none"),i=y(e.startingViewDate),o=y(null),a=y(!1),l=y("");P((()=>{const t=zx(l.value,e.inputFormat,new Date,{locale:e.locale});sb(t)&&(i.value=t)})),P((()=>l.value=e.modelValue&&sb(e.modelValue)?Jb(e.modelValue,e.inputFormat,{locale:e.locale}):""));const c=(n="none")=>{e.disabled||("none"!==n&&"none"===r.value&&(i.value=e.modelValue||ES(e.lowerLimit,e.upperLimit,i.value)),r.value=n,t("none"!==n?"opened":"closed"))};P((()=>{e.disabled&&(r.value="none")}));const d=s((()=>DS.indexOf(e.startingView)<DS.indexOf(e.minimumView)?e.minimumView:e.startingView));return{blur:()=>{a.value=!1,c()},focus:()=>c(d.value),click:()=>a.value=!0,input:l,inputRef:o,pageDate:i,renderView:c,updatePageDate:(e,n)=>{i.value=n,"year"===e?t("decadePageChanged",n):"month"===e?t("yearPageChanged",n):"day"===e&&t("monthPageChanged",n)},selectYear:n=>{i.value=n,"year"===e.minimumView?(c("none"),t("update:modelValue",n)):r.value="month"},selectMonth:n=>{i.value=n,"month"===e.minimumView?(c("none"),t("update:modelValue",n)):r.value="day"},selectDay:n=>{i.value=n,"day"===e.minimumView?(c("none"),t("update:modelValue",n)):r.value="time"},selectTime:e=>{c("none"),t("update:modelValue",e)},keyUp:n=>{const r=n.keyCode?n.keyCode:n.which;if([27,13].includes(r)&&o.value.blur(),e.typeable){const n=zx(o.value.value,e.inputFormat,new Date,{locale:e.locale});sb(n)&&l.value===Jb(n,e.inputFormat,{locale:e.locale})&&(l.value=o.value.value,t("update:modelValue",n))}},viewShown:r,goBackFromTimepicker:()=>"time"===e.startingView&&"time"===e.minimumView?null:r.value="day",clearModelValue:()=>{e.clearable&&(c("none"),t("update:modelValue",null),i.value=e.startingViewDate)},initialView:d,log:e=>console.log(e),variables:e=>Object.fromEntries(Object.entries(null!=e?e:{}).filter((([e,t])=>e.startsWith("--"))))}}}),NS={class:"v3dp__input_wrapper"},PS=["readonly","placeholder","disabled","tabindex"],LS={class:"v3dp__clearable"};const RS=rS(AS,[["render",function(e,t,n,r,i,o){const s=J("year-picker"),u=J("month-picker"),h=J("day-picker"),p=J("time-picker");return a(),l("div",{class:"v3dp__datepicker",style:H(e.variables(e.$attrs.style))},[w("div",NS,[G(w("input",c({type:"text",ref:"inputRef",readonly:!e.typeable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.input=t)},e.$attrs,{placeholder:e.placeholder,disabled:e.disabled,tabindex:e.disabled?-1:0,onKeyup:t[1]||(t[1]=(...t)=>e.keyUp&&e.keyUp(...t)),onBlur:t[2]||(t[2]=(...t)=>e.blur&&e.blur(...t)),onFocus:t[3]||(t[3]=(...t)=>e.focus&&e.focus(...t)),onClick:t[4]||(t[4]=(...t)=>e.click&&e.click(...t))}),null,16,PS),[[X,e.input]]),G(w("div",LS,[d(e.$slots,"clear",{onClear:e.clearModelValue},(()=>[w("i",{onClick:t[5]||(t[5]=t=>e.clearModelValue())},"x")]))],512),[[te,e.clearable&&e.modelValue]])]),G(b(s,{pageDate:e.pageDate,"onUpdate:pageDate":t[6]||(t[6]=t=>e.updatePageDate("year",t)),selected:e.modelValue,lowerLimit:e.lowerLimit,upperLimit:e.upperLimit,onSelect:e.selectYear},null,8,["pageDate","selected","lowerLimit","upperLimit","onSelect"]),[[te,"year"===e.viewShown]]),G(b(u,{pageDate:e.pageDate,"onUpdate:pageDate":t[7]||(t[7]=t=>e.updatePageDate("month",t)),selected:e.modelValue,onSelect:e.selectMonth,lowerLimit:e.lowerLimit,upperLimit:e.upperLimit,format:e.monthListFormat,locale:e.locale,onBack:t[8]||(t[8]=t=>e.viewShown="year")},null,8,["pageDate","selected","onSelect","lowerLimit","upperLimit","format","locale"]),[[te,"month"===e.viewShown]]),G(b(h,{pageDate:e.pageDate,"onUpdate:pageDate":t[9]||(t[9]=t=>e.updatePageDate("day",t)),selected:e.modelValue,weekStartsOn:e.weekStartsOn,lowerLimit:e.lowerLimit,upperLimit:e.upperLimit,headingFormat:e.dayPickerHeadingFormat,disabledDates:e.disabledDates,locale:e.locale,weekdayFormat:e.weekdayFormat,"allow-outside-interval":e.allowOutsideInterval,format:e.dayFormat,onSelect:e.selectDay,onBack:t[10]||(t[10]=t=>e.viewShown="month")},null,8,["pageDate","selected","weekStartsOn","lowerLimit","upperLimit","headingFormat","disabledDates","locale","weekdayFormat","allow-outside-interval","format","onSelect"]),[[te,"day"===e.viewShown]]),G(b(p,{pageDate:e.pageDate,visible:"time"===e.viewShown,selected:e.modelValue,disabledTime:e.disabledTime,onSelect:e.selectTime,onBack:e.goBackFromTimepicker},null,8,["pageDate","visible","selected","disabledTime","onSelect","onBack"]),[[te,"time"===e.viewShown]])],4)}]]),IS=r({components:{Datepicker:RS},emits:["change","update:modelValue"],props:{modelValue:{type:Object,default:()=>({start:null,end:null})}},setup(e,{emit:t}){const n=y(e.modelValue.start),r=y(e.modelValue.end),i=Er("startRef"),o=Er("endRef"),s=y(null),a="START";C([n,r],(()=>{let e={start:null,end:null};n.value&&r.value&&(e={start:Jb(n.value,"yyyy-MM-dd"),end:Jb(r.value,"yyyy-MM-dd")}),t("update:modelValue",e),t("change",e)}));const l=e=>{e.value&&e.value.renderView(e.value.initialView)};return{start:n,end:r,showStartSelector:()=>{s.value=a,l(i)},showEndSelector:()=>{s.value="END",l(o)},hideSelector:()=>{s.value=null},selectorShown:s,selectorShownStart:a,selectorShownEnd:"END",locale:mt(Ke),clear:()=>{n.value=null,r.value=null},formatDate:He,formatTemplate:"L"}}}),$S={class:"rangepicker__hint fr-m-0"},zS={class:"rangepicker__hint fr-m-0"};const BS=hn(IS,[["render",function(e,t,n,r,i,o){const s=J("Datepicker");return a(),l("div",{class:v(["rangepicker fr-select",{"rangepicker--selected":e.start}])},[G(w("div",null,[w("p",$S,x(e.$t("Select lower bound:")),1),b(s,{modelValue:e.start,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.start=t),e.showEndSelector],upperLimit:e.end,locale:e.locale,ref:"startRef"},null,8,["modelValue","upperLimit","locale","onUpdate:modelValue"])],512),[[te,e.selectorShown===e.selectorShownStart]]),G(w("div",null,[w("p",zS,x(e.$t("Select upper bound:")),1),b(s,{modelValue:e.end,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.end=t),e.hideSelector],lowerLimit:e.start,locale:e.locale,ref:"endRef"},null,8,["modelValue","lowerLimit","locale","onUpdate:modelValue"])],512),[[te,e.selectorShown===e.selectorShownEnd]]),null===e.selectorShown?(a(),l("button",{key:0,class:"rangepicker__button w-100 text-align-left",onClick:t[3]||(t[3]=U(((...t)=>e.showStartSelector&&e.showStartSelector(...t)),["prevent"]))},[e.start?(a(),l(L,{key:1},[R(x(e.formatDate(e.start,e.formatTemplate)),1),e.end?(a(),l(L,{key:0},[R("–"+x(e.formatDate(e.end,e.formatTemplate)),1)],64)):g("",!0),e.start?(a(),l("button",{key:1,class:"fr-fi-close-line clear",onClick:t[2]||(t[2]=U(((...t)=>e.clear&&e.clear(...t)),["stop"]))})):g("",!0)],64)):(a(),l(L,{key:0},[R(x(e.$t("from dd/mm/yyyy to dd/mm/yyyy")),1)],64))])):g("",!0)],2)}]]);const FS=Symbol("editorInfoCtxKey"),VS=r({name:"Milkdown",setup:()=>{const e=function(){const{dom:e,loading:t,editor:n,editorFactory:r}=i(FS,{});return _((()=>{if(!e.value)return;const i=r.value(e.value);i&&(t.value=!0,i.create().then((e=>{n.value=e})).finally((()=>{t.value=!1})).catch(console.error))})),B((()=>{var e;null==(e=n.value)||e.destroy()})),e}();return()=>b("div",{"data-milkdown-root":!0,ref:e},null)}}),jS=r({name:"MilkdownProvider",setup:(e,{slots:t})=>{const n=y(null),r=y(void 0),i=y(void 0),o=y(!0);return z(FS,{loading:o,dom:n,editor:i,editorFactory:r}),()=>{var e;return b(L,null,[null==(e=t.default)?void 0:e.call(t)])}}});function HS(){const e=i(FS);return[e.loading,()=>e.editor.value]}var WS,qS,US=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},YS=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"access private method"),n);let KS=class{constructor({node:e,view:t,getPos:n,decorations:r,innerDecorations:i,options:o}){US(this,WS),this.selected=!1,this.selectNode=()=>{var e,t;this.selected=!0,null==(t=(e=this.options).selectNode)||t.call(e)},this.deselectNode=()=>{var e,t;this.selected=!1,null==(t=(e=this.options).deselectNode)||t.call(e)},this.shouldUpdate=e=>!(e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)),this.update=(e,t,n)=>{var r,i;const o=this.options.update;let s;return o&&(s=o(e,t,n)),"boolean"!=typeof s&&(s=this.shouldUpdate(e)),this.node=e,this.decorations=t,this.innerDecorations=n,s&&(null==(i=(r=this.options).onUpdate)||i.call(r)),s},this.shouldIgnoreMutation=e=>!(this.dom&&this.contentDOM&&!this.node.isLeaf&&!this.node.isAtom)||"selection"!==e.type&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)),this.ignoreMutation=e=>{if(!this.dom||!this.contentDOM)return!0;let t;const n=this.options.ignoreMutation;return n&&(t=n(e)),"boolean"!=typeof t&&(t=this.shouldIgnoreMutation(e)),t},this.destroy=()=>{var e,t,n;null==(t=(e=this.options).destroy)||t.call(e),this.dom.remove(),null==(n=this.contentDOM)||n.remove()},this.setAttrs=e=>{const{dispatch:t,state:n}=this.view,r=this.getPos();if("number"==typeof r)return t(n.tr.setNodeMarkup(r,void 0,{...this.node.attrs,...e}))},this.node=e,this.view=t,this.getPos=n,this.decorations=r,this.innerDecorations=i,this.options=o,this.dom=this.createDOM(o.as),this.contentDOM=e.isLeaf?null:this.createContentDOM(o.contentAs),this.dom.setAttribute("data-node-view-root","true"),this.contentDOM&&(this.contentDOM.setAttribute("data-node-view-content","true"),this.contentDOM.style.whiteSpace="inherit"),this.setSelection=o.setSelection,this.stopEvent=o.stopEvent}createDOM(e){return YS(this,WS,qS).call(this,e)}createContentDOM(e){return YS(this,WS,qS).call(this,e)}get component(){return this.options.component}};WS=new WeakSet,qS=function(e){const{node:t}=this;return null==e?document.createElement(t.isInline?"span":"div"):e instanceof HTMLElement?e:e instanceof Function?e(t):document.createElement(e)};let JS=class{constructor(e){this.view=e.view,this.options=e.options}get component(){return this.options.component}get root(){var e,t,n;let r=null==(n=(t=this.options).root)?void 0:n.call(t,this.view.dom);return r||(r=null!==(e=this.view.dom.parentElement)&&void 0!==e?e:document.body),r}update(e,t){var n,r;this.view=e,this.prevState=t,null==(r=(n=this.options).update)||r.call(n,e,t)}destroy(){var e,t;null==(t=(e=this.options).destroy)||t.call(e)}};var GS,XS;let ZS=class{constructor({pos:e,spec:t,options:n}){US(this,GS),this.pos=e,this.options=n,this.spec=t,this.dom=YS(this,GS,XS).call(this,n.as),this.dom.setAttribute("data-widget-view-root","true")}bind(e,t){this.view=e,this.getPos=t}get component(){return this.options.component}};GS=new WeakSet,XS=function(e){return e instanceof HTMLElement?e:document.createElement(e)};let QS=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");function eM(e){this.content=e}function tM(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)n++;return n}if(i.content.size||o.content.size){let e=tM(i.content,o.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function nM(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let e=nM(s.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}eM.prototype={constructor:eM,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new eM(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new eM(n)},addToStart:function(e,t){return new eM([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new eM(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new eM(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=eM.from(e)).size?new eM(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=eM.from(e)).size?new eM(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=eM.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},eM.from=function(e){if(e instanceof eM)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new eM(t)};class rM{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,((s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l}),0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new rM(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new rM(n,r)}cutByIndex(e,t){return e==t?rM.empty:0==e&&t==this.content.length?this:new rM(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new rM(r,i)}addToStart(e){return new rM([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new rM(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return tM(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return nM(this,e,t,n)}findIndex(e,t=-1){if(0==e)return oM(0,e);if(e==this.size)return oM(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?oM(n+1,i):oM(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return rM.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new rM(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return rM.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new rM(t||e,n)}static from(e){if(!e)return rM.empty;if(e instanceof rM)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new rM([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}rM.empty=new rM([],0);const iM={index:0,offset:0};function oM(e,t){return iM.index=e,iM.offset=t,iM}function sM(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!sM(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!sM(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class aM{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&sM(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return aM.none;if(e instanceof aM)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}aM.none=[];class lM extends Error{}class cM{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=uM(this.content,e+this.openStart,t);return n&&new cM(n,this.openStart,this.openEnd)}removeBetween(e,t){return new cM(dM(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return cM.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new cM(rM.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new cM(e,n,r)}}function dM(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(dM(o.content,t-i-1,n-i-1)))}function uM(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=uM(s.content,t-o-1,n);return a&&e.replaceChild(i,s.copy(a))}function hM(e,t,n){if(n.openStart>e.depth)throw new lM("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new lM("Inconsistent open depths");return pM(e,t,n,0)}function pM(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=pM(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)r=t.node(i).copy(rM.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return yM(o,bM(e,i,s,t,r))}{let r=e.parent,i=r.content;return yM(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return yM(o,wM(e,t,r))}function fM(e,t){if(!t.type.compatibleContent(e.type))throw new lM("Cannot join "+t.type.name+" onto "+e.type.name)}function mM(e,t,n){let r=e.node(n);return fM(r,t.node(n)),r}function gM(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function vM(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(gM(e.nodeAfter,r),o++));for(let a=o;a<s;a++)gM(i.child(a),r);t&&t.depth==n&&t.textOffset&&gM(t.nodeBefore,r)}function yM(e,t){return e.type.checkContent(t),e.copy(t)}function bM(e,t,n,r,i){let o=e.depth>i&&mM(e,t,i+1),s=r.depth>i&&mM(n,r,i+1),a=[];return vM(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(fM(o,s),gM(yM(o,bM(e,t,n,r,i+1)),a)):(o&&gM(yM(o,wM(e,t,i+1)),a),vM(t,n,i,a),s&&gM(yM(s,wM(n,r,i+1)),a)),vM(r,null,i,a),new rM(a)}function wM(e,t,n){let r=[];if(vM(null,e,n,r),e.depth>n){gM(yM(mM(e,t,n+1),wM(e,t,n+1)),r)}return vM(t,null,n,r),new rM(r)}cM.empty=new cM(rM.empty,0,0);class xM{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let i=0;i<e;i++)r+=n.child(i).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return aM.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new SM(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let o=e;;){let{index:e,offset:t}=o.content.findIndex(i),s=i-t;if(n.push(o,e,r+t),!s)break;if(o=o.child(e),o.isText)break;i=s-1,r+=t+1}return new xM(t,n,i)}static resolveCached(e,t){for(let r=0;r<kM.length;r++){let n=kM[r];if(n.pos==t&&n.doc==e)return n}let n=kM[CM]=xM.resolve(e,t);return CM=(CM+1)%_M,n}}let kM=[],CM=0,_M=12;class SM{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const MM=Object.create(null);let TM=class e{constructor(e,t,n,r=aM.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||rM.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&sM(this.attrs,t||e.defaultAttrs||MM)&&aM.sameSet(this.marks,n||aM.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return cM.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new cM(a,r.depth-o,i.depth-o)}replace(e,t,n){return hM(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return xM.resolveCached(this,e)}resolveNoCache(e){return xM.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),DM(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=rM.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=aM.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!aM.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=rM.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}};TM.prototype.text=void 0;class OM extends TM{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):DM(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new OM(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new OM(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function DM(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class EM{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new AM(e,t);if(null==n.next)return EM.empty;let r=NM(n);n.next&&n.err("Unexpected trailing text");let i=function(e){let t=Object.create(null);return n(zM(e,0));function n(r){let i=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);zM(e,n).forEach((e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let o=t[r.join(",")]=new EM(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort($M);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}(function(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((e=>e.to=t))}function o(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(o(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),i(o(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return i(o(e.expr,t),s),i(o(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,s),t),s=t}if(-1==e.max)i(o(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),i(o(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(e.exprs[r],t);if(r==e.exprs.length-1)return s;i(s,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(o,s){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return rM.from(s.map((e=>e.createAndFill())));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let i=0;i<t.next.length;i++)r+=(i?", ":"")+t.next[i].type.name+"->"+e.indexOf(t.next[i].next);return r})).join("\n")}}EM.empty=new EM(!0);class AM{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function NM(e){let t=[];do{t.push(PM(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function PM(e){let t=[];do{t.push(LM(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function LM(e){let t=function(e){if(e.eat("(")){let t=NM(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let e=n[o];e.groups.indexOf(t)>-1&&i.push(e)}0==i.length&&e.err("No node type or group '"+t+"' found");return i}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=IM(e,t)}return t}function RM(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function IM(e,t){let n=RM(e),r=n;return e.eat(",")&&(r="}"!=e.next?RM(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function $M(e,t){return t-e}function zM(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort($M)}function BM(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function FM(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function VM(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new HM(e[n]);return t}let jM=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=VM(n.attrs),this.defaultAttrs=BM(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==EM.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:FM(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new TM(this,this.computeAttrs(e),rM.from(t),aM.setFrom(n))}createChecked(e=null,t,n){return t=rM.from(t),this.checkContent(t),new TM(this,this.computeAttrs(e),t,aM.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=rM.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(rM.empty,!0);return i?new TM(this,e,t.append(i),aM.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:aM.none:e}static compile(t,n){let r=Object.create(null);t.forEach(((t,i)=>r[t]=new e(t,n,i)));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class HM{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class WM{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=VM(r.attrs),this.excluded=null;let i=BM(this.attrs);this.instance=i?new aM(this,i):null}create(e=null){return!e&&this.instance?this.instance:new aM(this,FM(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,i)=>n[e]=new WM(e,r++,t,i))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class qM{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=eM.from(e.nodes),t.marks=eM.from(e.marks||{}),this.nodes=jM.compile(this.spec.nodes,this),this.marks=WM.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",i=e.spec.marks;e.contentMatch=n[t]||(n[t]=EM.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.markSet="_"==i?null:i?UM(this,i.split(" ")):""!=i&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:UM(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof jM))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new OM(n,n.defaultAttrs,e,aM.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return TM.fromJSON(this,e)}markFromJSON(e){return aM.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function UM(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class YM{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new QM(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new QM(this,t,!0);return n.addAll(e,t.from,t.to),cM.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(eT(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=tT(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=tT(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new YM(e,YM.schemaRules(e)))}}const KM={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},JM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},GM={ol:!0,ul:!0};function XM(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class ZM{constructor(e,t,n,r,i,o,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=aM.none,this.stashMarks=[],this.match=o||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(rM.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=rM.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(rM.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):nT(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!KM.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class QM{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,i=t.topNode,o=XM(null,t.preserveWhitespace,0)|(n?4:0);r=i?new ZM(i.type,i.attrs,aM.none,aM.none,!0,t.topMatch||i.type.contentMatch,o):new ZM(n?null:e.schema.topNodeType,null,aM.none,aM.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let r=this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(n));if(!r)return;let[i,o]=r,s=this.top;for(let a=0;a<o.length;a++)this.removePendingMark(o[a],s);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);t();for(let a=0;a<i.length;a++)this.removePendingMark(i[a],s);for(let a=0;a<o.length;a++)this.addPendingMark(o[a])}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();GM.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&GM.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:JM.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let t,n=this.top,o=this.needsBlock;if(KM.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);i&&i.skip?this.addAll(e):this.withStyleRules(e,(()=>this.addAll(e))),t&&this.sync(n),this.needsBlock=o}else this.withStyleRules(e,(()=>{this.addElementByRule(e,i,!1===i.consuming?n:void 0)}))}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=aM.none,n=aM.none;for(let r=0;r<e.length;r+=2)for(let i;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((e=>{o.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;i=o}return[t,n]}addElementByRule(e,t,n){let r,i,o;if(t.node)i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs||null,t.preserveWhitespace);else{o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o)}let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(e,t,n){let r=t||0;for(let i=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let o=XM(e,r,i.options);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new ZM(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function eT(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function tT(e){let t={};for(let n in e)t[n]=e[n];return t}function nT(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class rT{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=oT(t).createDocumentFragment());let r=n,i=[];return e.forEach((e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=rT.renderSpec(oT(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&rT.renderSpec(oT(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,i=t[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?e.createElementNS(n,i):e.createElement(i),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let c=l;c<t.length;c++){let i=t[c];if(0===i){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=rT.renderSpec(e,i,n);if(s.appendChild(t),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new rT(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=iT(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return iT(e.marks)}}function iT(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function oT(e){return e.document||window.document}const sT=Math.pow(2,16);function aT(e,t){return e+t*sT}function lT(e){return 65535&e}class cT{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class dT{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&dT.empty)return dT.empty}recover(e){let t=0,n=lT(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/sT}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],d=a+l;if(e<=d){let i=a+r+((l?e==a?-1:e==d?1:t:t)<0?0:c);if(n)return i;let o=e==(t<0?a:d)?null:aT(s/3,e-a),u=e==a?2:e==d?1:4;return(t<0?e!=a:e!=d)&&(u|=8),new cT(i,u,o)}r+=c-l}return n?e+r:new cT(e+r,0,null)}touches(e,t){let n=0,r=lT(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+i];if(e<=t+a&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new dT(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?dT.empty:new dT(e<0?[0,-e,0]:[0,0,e])}}dT.empty=new dT([]);class uT{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new uT(this.maps,this.mirror,e,t)}copy(){return new uT(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new uT;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(i);if(null!=t&&t>i&&t<this.to){i=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new cT(e,r,null)}}const hT=Object.create(null);class pT{getMap(){return dT.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=hT[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in hT)throw new RangeError("Duplicate use of step JSON ID "+e);return hT[e]=t,t.prototype.jsonID=e,t}}class fT{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new fT(e,null)}static fail(e){return new fT(null,e)}static fromReplace(e,t,n,r){try{return fT.ok(e.replace(t,n,r))}catch(OI){if(OI instanceof lM)return fT.fail(OI.message);throw OI}}}function mT(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(mT(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return rM.fromArray(r)}class gT extends pT{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new cM(mT(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return fT.fromReplace(e,this.from,this.to,i)}invert(){return new vT(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new gT(t.pos,n.pos,this.mark)}merge(e){return e instanceof gT&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gT(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gT(t.from,t.to,e.markFromJSON(t.mark))}}pT.jsonID("addMark",gT);class vT extends pT{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new cM(mT(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return fT.fromReplace(e,this.from,this.to,n)}invert(){return new gT(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new vT(t.pos,n.pos,this.mark)}merge(e){return e instanceof vT&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vT(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new vT(t.from,t.to,e.markFromJSON(t.mark))}}pT.jsonID("removeMark",vT);class yT extends pT{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return fT.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return fT.fromReplace(e,this.pos,this.pos+1,new cM(rM.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new yT(this.pos,t.marks[n]);return new yT(this.pos,this.mark)}}return new bT(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new yT(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yT(t.pos,e.markFromJSON(t.mark))}}pT.jsonID("addNodeMark",yT);class bT extends pT{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return fT.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return fT.fromReplace(e,this.pos,this.pos+1,new cM(rM.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new yT(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new bT(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new bT(t.pos,e.markFromJSON(t.mark))}}pT.jsonID("removeNodeMark",bT);class wT extends pT{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&kT(e,this.from,this.to)?fT.fail("Structure replace would overwrite content"):fT.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new dT([this.from,this.to-this.from,this.slice.size])}invert(e){return new wT(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new wT(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof wT)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?cM.empty:new cM(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new wT(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?cM.empty:new cM(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new wT(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new wT(t.from,t.to,cM.fromJSON(e,t.slice),!!t.structure)}}pT.jsonID("replace",wT);class xT extends pT{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(kT(e,this.from,this.gapFrom)||kT(e,this.gapTo,this.to)))return fT.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return fT.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?fT.fromReplace(e,this.from,this.to,n):fT.fail("Content does not fit in gap")}getMap(){return new dT([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new xT(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new xT(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xT(t.from,t.to,t.gapFrom,t.gapTo,cM.fromJSON(e,t.slice),t.insert,!!t.structure)}}function kT(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function CT(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function _T(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!CT(r,i,o))break}return null}function ST(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=r;a&&l<i;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,t);return o?i.map(MT).concat({type:t,attrs:n}).concat(o.map(MT)):null}function MT(e){return{type:e,attrs:null}}function TT(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>o;c--,d--){let e=i.node(c),t=i.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),o=r&&r[d+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[d]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function OT(e,t){let n=e.resolve(t),r=n.index();return function(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function DT(e,t,n=t,r=cM.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return ET(i,o,r)?new wT(t,n,r):new AT(i,o,r).fit()}function ET(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}pT.jsonID("replaceAround",xT);class AT{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=rM.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=rM.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,s=r.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new cM(i,o,s);return e>-1?new xT(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new wT(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=LT(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let o=this.depth;o>=0;o--){let e,{type:s,match:a}=this.frontier[o],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(rM.from(i),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:o,parent:r,inject:l};if(2==t&&i&&(e=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:o,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=LT(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new cM(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=LT(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new cM(NT(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new cM(NT(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let f=0;f<i.length;f++)this.openFrontierNode(i[f]);let o=this.unplaced,s=n?n.content:o.content,a=o.openStart-e,l=0,c=[],{match:d,type:u}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));d=d.matchFragment(r)}let h=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let e=s.child(l),t=d.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(d=t,c.push(RT(e.mark(u.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?h:-1)))}let p=l==s.childCount;p||(h=-1),this.placed=PT(this.placed,t,rM.from(c)),this.frontier[t].match=d,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=s;f<h;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?cM.empty:new cM(NT(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new cM(NT(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!IT(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=IT(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=IT(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=PT(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=PT(this.placed,this.depth,rM.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(rM.empty,!0);e.childCount&&(this.placed=PT(this.placed,this.frontier.length,e))}}function NT(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(NT(e.firstChild.content,t-1,n)))}function PT(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(PT(e.lastChild.content,t-1,n)))}function LT(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function RT(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,RT(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(rM.empty,!0)))),e.copy(r)}function IT(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function $T(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy($T(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(rM.empty,!0))}return e}function zT(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}class BT extends pT{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return fT.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return fT.fromReplace(e,this.pos,this.pos+1,new cM(rM.from(r),0,t.isLeaf?0:1))}getMap(){return dT.empty}invert(e){return new BT(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new BT(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new BT(t.pos,t.attr,t.value)}}pT.jsonID("attr",BT);class FT extends pT{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return fT.ok(n)}getMap(){return dT.empty}invert(e){return new FT(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new FT(t.attr,t.value)}}pT.jsonID("docAttr",FT);let VT=class extends Error{};VT=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(VT.prototype=Object.create(Error.prototype)).constructor=VT,VT.prototype.name="TransformError";class jT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new uT}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new VT(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=cM.empty){let r=DT(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new cM(rM.from(n),0,0))}delete(e,t){return this.replace(e,t,cM.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(ET(i,o,r))return e.step(new wT(t,n,r));let s=zT(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let p=i.depth,f=i.pos-1;p>0;p--,f--){let e=i.node(p).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(p)>-1?a=p:i.before(p)==f&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],d=r.openStart;for(let p=r.content,f=0;;f++){let e=p.firstChild;if(c.push(e),f==r.openStart)break;p=e.content}for(let p=d-1;p>=0;p--){let e=c[p],t=(u=e.type).spec.defining||u.spec.definingForContent;if(t&&!e.sameMarkup(i.node(Math.abs(a)-1)))d=p;else if(t||!e.type.isTextblock)break}var u;for(let p=r.openStart;p>=0;p--){let t=(p+d+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<s.length;c++){let d=s[(c+l)%s.length],u=!0;d<0&&(u=!1,d=-d);let h=i.node(d-1),p=i.index(d-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(i.before(d),u?o.after(d):n,new cM($T(r.content,0,r.openStart,t),t,r.openEnd))}}let h=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>h));p--){let e=s[p];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let e=r.index(i);if(r.node(i).canReplaceWith(e,e,n))return r.before(i+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let e=r.indexAfter(i);if(r.node(i).canReplaceWith(e,e,n))return r.after(i+1);if(e<r.node(i).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new cM(rM.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=zT(r,i);for(let s=0;s<o.length;s++){let t=o[s],n=s==o.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),i.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),i.indexAfter(t-1))))return e.delete(r.before(t),i.after(t))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,d=rM.empty,u=0;for(let f=o,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,d=rM.from(r.node(f).copy(d)),u++):l--;let h=rM.empty,p=0;for(let f=o,m=!1;f>n;f--)m||i.after(f+1)<i.end(f)?(m=!0,h=rM.from(i.node(f).copy(h)),p++):c++;e.step(new xT(l,c,s,a,new cM(d.append(h),u,p),d.size-u,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=new wT(t-n,t+n,cM.empty,!0);e.step(r)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=rM.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=rM.from(n[s].type.create(n[s].attrs,r))}let i=t.start,o=t.end;e.step(new xT(i,o,i,o,new cM(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,i)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(o).map(n),r)){e.clearIncompatible(e.mapping.slice(o).map(n,1),r);let s=e.mapping.slice(o),a=s.map(n,1),l=s.map(n+t.nodeSize,1);return e.step(new xT(a,l,a+1,l-1,new cM(rM.from(r.create(i,null,t.marks)),0,0),1,!0)),!1}}))}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new xT(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new cM(rM.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new BT(e,t,n)),this}setDocAttribute(e,t){return this.step(new FT(e,t)),this}addNodeMark(e,t){return this.step(new yT(e,t)),this}removeNodeMark(e,t){if(!(t instanceof aM)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new bT(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),o=rM.empty,s=rM.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=rM.from(i.node(a).copy(o));let e=r&&r[c];s=rM.from(e?e.type.create(e.attrs,s):i.node(a).copy(s))}e.step(new wT(t,t,new cM(o.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let i,o,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let d=e.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),u=Math.min(l+e.nodeSize,n),h=r.addToSet(d);for(let e=0;e<d.length;e++)d[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(d[e])?i.to=u:s.push(i=new vT(c,u,d[e])));o&&o.to==c?o.to=u:a.push(o=new gT(c,u,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;o++;let a=null;if(r instanceof WM){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=o):i.push({style:l,from:Math.max(s,t),to:r,step:o})}}})),i.forEach((t=>e.step(new vT(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let i=e.doc.nodeAt(t),o=[],s=t+1;for(let a=0;a<i.childCount;a++){let t=i.child(a),l=s+t.nodeSize,c=r.matchType(t.type);if(c){r=c;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new vT(s,l,t.marks[r]));if(t.isText&&!n.spec.code){let e,r,i=/\r?\n|\r/g;for(;e=i.exec(t.text);)r||(r=new cM(rM.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),o.push(new wT(s+e.index,s+e.index+e[0].length,r))}}else o.push(new wT(s,l,cM.empty));s=l}if(!r.validEnd){let t=r.fillBefore(rM.empty,!0);e.replace(s,s,new cM(t,0,0))}for(let a=o.length-1;a>=0;a--)e.step(o[a])}(this,e,t,n),this}}const HT=Object.create(null);class WT{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new qT(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=cM.empty){let n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?cM.empty:t),0==s&&tO(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),tO(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new KT(e):eO(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let i=e.depth-1;i>=0;i--){let r=t<0?eO(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):eO(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ZT(e.node(0))}static atStart(e){return eO(e,e,0,0,1)||new ZT(e)}static atEnd(e){return eO(e,e,e.content.size,e.childCount,-1)||new ZT(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=HT[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in HT)throw new RangeError("Duplicate use of selection JSON ID "+e);return HT[e]=t,t.prototype.jsonID=e,t}getBookmark(){return KT.between(this.$anchor,this.$head).getBookmark()}}WT.prototype.visible=!0;class qT{constructor(e,t){this.$from=e,this.$to=t}}let UT=!1;function YT(e){UT||e.parent.inlineContent||(UT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class KT extends WT{constructor(e,t=e){YT(e),YT(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return WT.near(n);let r=e.resolve(t.map(this.anchor));return new KT(r.parent.inlineContent?r:n,n)}replace(e,t=cM.empty){if(super.replace(e,t),t==cM.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof KT&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new JT(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new KT(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=WT.findFrom(t,n,!0)||WT.findFrom(t,-n,!0);if(!e)return WT.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(WT.findFrom(e,-n,!0)||WT.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new KT(e,t)}}WT.jsonID("text",KT);class JT{constructor(e,t){this.anchor=e,this.head=t}map(e){return new JT(e.map(this.anchor),e.map(this.head))}resolve(e){return KT.between(e.resolve(this.anchor),e.resolve(this.head))}}class GT extends WT{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?WT.near(i):new GT(i)}content(){return new cM(rM.from(this.node),0,0)}eq(e){return e instanceof GT&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new XT(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new GT(e.resolve(t.anchor))}static create(e,t){return new GT(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}GT.prototype.visible=!1,WT.jsonID("node",GT);class XT{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new JT(n,n):new XT(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&GT.isSelectable(n)?new GT(t):WT.near(t)}}class ZT extends WT{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=cM.empty){if(t==cM.empty){e.delete(0,e.doc.content.size);let t=WT.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new ZT(e)}map(e){return new ZT(e)}eq(e){return e instanceof ZT}getBookmark(){return QT}}WT.jsonID("all",ZT);const QT={map(){return this},resolve:e=>new ZT(e)};function eO(e,t,n,r,i,o=!1){if(t.inlineContent)return KT.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&GT.isSelectable(r))return GT.create(e,n-(i<0?r.nodeSize:0))}else{let t=eO(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function tO(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,o=e.steps[r];(o instanceof wT||o instanceof xT)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==i&&(i=r)})),e.setSelection(WT.near(e.doc.resolve(i),n)))}class nO extends jT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return aM.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||aM.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(WT.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function rO(e,t){return t&&e?e.bind(t):e}class iO{constructor(e,t,n){this.name=e,this.init=rO(t.init,n),this.apply=rO(t.apply,n)}}const oO=[new iO("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new iO("selection",{init:(e,t)=>e.selection||WT.atStart(t.doc),apply:e=>e.selection}),new iO("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new iO("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class sO{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oO.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new iO(e.key,e.spec.state,e))}))}}class aO{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new aO(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new nO(this)}static create(e){let t=new sO(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new aO(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new sO(this.schema,e.plugins),n=t.fields,r=new aO(t);for(let i=0;i<n.length;i++){let t=n[i].name;r[t]=this.hasOwnProperty(t)?this[t]:n[i].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new sO(e.schema,e.plugins),i=new aO(r);return r.fields.forEach((r=>{if("doc"==r.name)i.doc=TM.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=WT.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=a.fromJSON.call(s,e,t[o],i))}i[r.name]=r.init(e,i)}})),i}}function lO(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=lO(i,t,{})),n[r]=i}return n}class cO{constructor(e){this.spec=e,this.props={},e.props&&lO(e.props,this,this.props),this.key=e.key?e.key.key:uO("plugin")}getState(e){return e[this.key]}}const dO=Object.create(null);function uO(e){return e in dO?e+"$"+ ++dO[e]:(dO[e]=0,e+"$")}class hO{constructor(e="key"){this.key=uO(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const pO=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},fO=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let mO=null;const gO=function(e,t,n){let r=mO||(mO=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},vO=function(e,t,n,r){return n&&(bO(e,t,n,r,-1)||bO(e,t,n,r,1))},yO=/^(img|br|input|textarea|hr)$/i;function bO(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:wO(e))){let n=e.parentNode;if(!n||1!=n.nodeType||xO(e)||yO.test(e.nodeName)||"false"==e.contentEditable)return!1;t=pO(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?wO(e):0}}}function wO(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function xO(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const kO=function(e){return e.focusNode&&vO(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function CO(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const _O="undefined"!=typeof navigator?navigator:null,SO="undefined"!=typeof document?document:null,MO=_O&&_O.userAgent||"",TO=/Edge\/(\d+)/.exec(MO),OO=/MSIE \d/.exec(MO),DO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(MO),EO=!!(OO||DO||TO),AO=OO?document.documentMode:DO?+DO[1]:TO?+TO[1]:0,NO=!EO&&/gecko\/(\d+)/i.test(MO);NO&&(/Firefox\/(\d+)/.exec(MO)||[0,0])[1];const PO=!EO&&/Chrome\/(\d+)/.exec(MO),LO=!!PO,RO=PO?+PO[1]:0,IO=!EO&&!!_O&&/Apple Computer/.test(_O.vendor),$O=IO&&(/Mobile\/\w+/.test(MO)||!!_O&&_O.maxTouchPoints>2),zO=$O||!!_O&&/Mac/.test(_O.platform),BO=!!_O&&/Win/.test(_O.platform),FO=/Android \d/.test(MO),VO=!!SO&&"webkitFontSmoothing"in SO.documentElement.style,jO=VO?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function HO(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function WO(e,t){return"number"==typeof e?e:e[t]}function qO(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function UO(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=fO(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?HO(o):qO(e),l=0,c=0;if(t.top<a.top+WO(r,"top")?c=-(a.top-t.top+WO(i,"top")):t.bottom>a.bottom-WO(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+WO(i,"top")-a.top:t.bottom-a.bottom+WO(i,"bottom")),t.left<a.left+WO(r,"left")?l=-(a.left-t.left+WO(i,"left")):t.right>a.right-WO(r,"right")&&(l=t.right-a.right+WO(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function YO(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=fO(r));return t}function KO(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let JO=null;function GO(e,t){let n,r,i,o,s=2e8,a=0,l=t.top,c=t.top;for(let d=e.firstChild,u=0;d;d=d.nextSibling,u++){let e;if(1==d.nodeType)e=d.getClientRects();else{if(3!=d.nodeType)continue;e=gO(d).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=d,s=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==d.nodeType&&e&&(a=u+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!i&&p.left<=t.left&&p.right>=t.left&&(i=d,o={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=u+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=tD(r,1);if(n.top!=n.bottom&&XO(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:GO(n,r)}function XO(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function ZO(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(XO(t,i))return ZO(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function QO(e,t){let n,r=e.dom.ownerDocument,i=0,o=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(JI){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}(r,t.left,t.top);o&&({node:n,offset:i}=o);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!XO(t,n))return null;if(a=ZO(e.dom,t,n),!a)return null}if(IO)for(let c=a;n&&c;c=fO(c))c.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(NO&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}let r;VO&&i&&1==n.nodeType&&1==(r=n.childNodes[i-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=function(e,t,n,r){let i=-1;for(let o=t,s=!1;o!=e.dom;){let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!s||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!s&&(s=!0,e.left>r.left||e.top>r.top?i=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(i=t.posAfter)),!t.contentDOM&&i<0&&!t.node.isText)return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}o=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,n,i,t))}null==s&&(s=function(e,t,n){let{node:r,offset:i}=GO(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function eD(e){return e.top<e.bottom||e.left<e.right}function tD(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(eD(e))return e}return Array.prototype.find.call(n,eD)||e.getBoundingClientRect()}const nD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rD(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=VO||NO;if(3==r.nodeType){if(!s||!nD.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,iD(tD(gO(r,e,t),o),o<0)}{let e=tD(gO(r,i,i),n);if(NO&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=tD(gO(r,i-1,i-1),-1);if(t.top==e.top){let n=tD(gO(r,i,i+1),-1);if(n.top!=e.top)return iD(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==wO(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return oD(e.getBoundingClientRect(),!1)}if(null==o&&i<wO(r)){let e=r.childNodes[i];if(1==e.nodeType)return oD(e.getBoundingClientRect(),!0)}return oD(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==wO(r))){let e=r.childNodes[i-1],t=3==e.nodeType?gO(e,wO(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return iD(tD(t,1),!1)}if(null==o&&i<wO(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?gO(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return iD(tD(t,-1),!0)}return iD(tD(3==r.nodeType?gO(r):r,-n),n>=0)}function iD(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function oD(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function sD(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const aD=/[\u0590-\u08ac]/;let lD=null,cD=null,dD=!1;function uD(e,t,n){return lD==t&&cD==n?dD:(lD=t,cD=n,dD="up"==n||"down"==n?function(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return sD(e,t,(()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=rD(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=gO(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return aD.test(r.parent.textContent)&&a.modify?sD(e,t,(()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:d,focusOffset:u}=e.domSelectionRange(),h=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&i==u;try{a.collapse(o,s),t&&(t!=o||i!=s)&&a.extend&&a.extend(t,i)}catch(JI){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?o:s}(e,t,n))}class hD{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>pO(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let t=this.children[n],o=i+t.size;if(o>e||t instanceof bD){r=e-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof pD&&i.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?pO(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?pO(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==r&&e<=a){let i=o+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=pO(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=pO(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let u=0,h=0;u<this.children.length;u++){let s=this.children[u],a=h+s.size;if(i>h&&o<a)return s.setSelection(e-h-s.border,t-h-s.border,n,r);h=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((NO||IO)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:pO(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(NO&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&IO)&&vO(s.node,s.offset,l.anchorNode,l.anchorOffset)&&vO(a.node,a.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(JI){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=r||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class pD extends hD{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class fD extends hD{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class mD extends hD{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=rT.renderSpec(document,t.type.spec.toDOM(t,n))),new mD(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=mD.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=ND(i,t,o,n)),e>0&&(i=ND(i,0,e,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class gD extends hD{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,o){let s,a=i.nodeViews[t.type.name],l=a&&a(t,i,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),n,r),c=l&&l.dom,d=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:d}=rT.renderSpec(document,t.type.spec.toDOM(t)));d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let u=c;return c=TD(c,n,t),l?s=new wD(e,t,n,r,c,d||null,u,l,i,o+1):t.isText?new yD(e,t,n,r,c,u,i):new gD(e,t,n,r,c,d||null,u,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>rM.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&OD(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new ED(this,o&&o.node,e);!function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let d,u,h,p;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(d?(u||(u=[d])).push(e):d=e)}if(d)if(u){u.sort(AD);for(let e=0;e<u.length;e++)n(u[e],c,!!l)}else n(d,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+h.nodeSize;if(h.isText){let e=f;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-o),h=h.cut(0,e-o),f=e,p=-1)}else for(;s<i.length&&i[s].to<f;)s++;let m=h.isInline&&!h.isLeaf?a.filter((e=>!e.inline)):a.slice();r(h,m,t.forChild(o,h),p),o=f}}(this.node,this.innerDeco,((t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?aM.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)}),((t,o,l,c)=>{let d;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(d=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,d,e)||a.updateNextNode(t,o,l,e,c,r)||a.addNode(t,o,l,e,r),r+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),xD(this.contentDOM,this.children,e),$O&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof KT)||n<t||r>t+this.node.content.size)return null;let i=e.domSelectionRange(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=wO(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let e=o.nodeValue,i=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return i<0?null:{node:o,pos:i,text:e}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new fD(this,i,t,r);e.input.compositionNodes.push(o),this.children=ND(this.children,n,n+r.length,e,o)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(OD(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=SD(this.dom,this.nodeDOM,_D(this.outerDeco,this.node,t),_D(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function vD(e,t,n,r,i){TD(r,t,e);let o=new gD(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class yD extends gD{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new yD(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class bD extends hD{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class wD extends gD{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function xD(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=DD(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof mD){let t=r?r.previousSibling:e.lastChild;xD(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=DD(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const kD=function(e){e&&(this.nodeName=e)};kD.prototype=Object.create(null);const CD=[new kD];function _D(e,t,n){if(0==e.length)return CD;let r=n?CD[0]:new kD,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(r=new kD(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new kD(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}}return i}function SD(e,t,n,r){if(n==CD&&r==CD)return t;let i=t;for(let o=0;o<r.length;o++){let t=r[o],s=n[o];if(o){let n;s&&s.nodeName==t.nodeName&&i!=e&&(n=i.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=CD[0]),i=n}MD(i,s||CD[0],t)}return i}function MD(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function TD(e,t,n){return SD(e,e,CD,_D(t,n,1!=e.nodeType))}function OD(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function DD(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ED{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof mD)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=mD.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof gD){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,d=a.dom,u=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&OD(t,a.outerDeco));if(!u&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(a,e,t,n,r,o)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,o+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let s=gD.create(this.top,t,n,r,i,o);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,i){let o=gD.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new pD(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof mD;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof yD)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((IO||LO)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new bD(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function AD(e,t){return e.type.side-t.type.side}function ND(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,d=a+=l.size;c>=n||d<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),d>n&&o.push(l.slice(n-c,l.size,r)))}return o}function PD(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(kO(n)){for(a=c;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&GT.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,i=t==wO(e);r||i;){if(e==n)return!0;let t=pO(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==wO(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;l=new GT(s==e?c:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=r.resolve(t)}if(!l){l=jD(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)}return l}function LD(e){return e.editable?e.hasFocus():WD(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function RD(e,t=!1){let n=e.state.selection;if(FD(e,n),LD(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&LO){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&vO(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,pO(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&EO&&AO<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,i,{anchor:o,head:s}=n;!ID||n instanceof KT||(n.$from.parent.inlineContent||(r=$D(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=$D(e,n.to))),e.docView.setSelection(o,s,e.root,t),ID&&(r&&BD(r),i&&BD(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{LD(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const ID=IO||LO&&RO<63;function $D(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(IO&&i&&"false"==i.contentEditable)return zD(i);if(!(i&&"false"!=i.contentEditable||o&&"false"!=o.contentEditable)){if(i)return zD(i);if(o)return zD(o)}}function zD(e){return e.contentEditable="true",IO&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function BD(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function FD(e,t){if(t instanceof GT){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(VD(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else VD(e)}function VD(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function jD(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||KT.between(t,n,r)}function HD(e){return!(e.editable&&!e.hasFocus())&&WD(e)}function WD(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(JI){return!1}}function qD(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&WT.findFrom(o,t)}function UD(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function YD(e,t,n){let r=e.state.selection;if(!(r instanceof KT)){if(r instanceof GT&&r.node.isInline)return UD(e,new KT(t>0?r.$to:r.$from));{let n=qD(e.state,t);return!!n&&UD(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return UD(e,new KT(r.$anchor,o))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=qD(e.state,t);return!!(n&&n instanceof GT)&&UD(e,n)}if(!(zO&&n.indexOf("m")>-1)){let n,i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText)return!1;let s=t<0?i.pos-o.nodeSize:i.pos;return!!(o.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(GT.isSelectable(o)?UD(e,new GT(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):!!VO&&UD(e,new KT(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function KD(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function JD(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function GD(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;NO&&1==n.nodeType&&r<KD(n)&&JD(n.childNodes[r],-1)&&(s=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(JD(e,-1))i=n,o=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(XD(n))break;{let t=n.previousSibling;for(;t&&JD(t,-1);)i=n.parentNode,o=pO(t),t=t.previousSibling;if(t)n=t,r=KD(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?ZD(e,n,r):i&&ZD(e,i,o)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=KD(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!JD(n.childNodes[r],1))break;i=n,o=++r}else{if(XD(n))break;{let t=n.nextSibling;for(;t&&JD(t,1);)i=t.parentNode,o=pO(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=KD(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}i&&ZD(e,i,o)}(e)}function XD(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ZD(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!xO(e);)t=pO(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!xO(e);)t=pO(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(kO(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout((()=>{e.state==i&&RD(e)}),50)}function QD(e,t){let n=e.state.doc.resolve(t);if(!LO&&!BO&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function eE(e,t,n){let r=e.state.selection;if(r instanceof KT&&!r.empty||n.indexOf("s")>-1)return!1;if(zO&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=qD(e.state,t);if(n&&n instanceof GT)return UD(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,s=r instanceof ZT?WT.near(n,t):WT.findFrom(n,t);return!!s&&UD(e,s)}return!1}function tE(e,t){if(!(e.state.selection instanceof KT))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function nE(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function rE(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||zO&&72==n&&"c"==r)return tE(e,-1)||GD(e,-1);if(46==n&&!t.shiftKey||zO&&68==n&&"c"==r)return tE(e,1)||GD(e,1);if(13==n||27==n)return!0;if(37==n||zO&&66==n&&"c"==r){let t=37==n?"ltr"==QD(e,e.state.selection.from)?-1:1:-1;return YD(e,t,r)||GD(e,t)}if(39==n||zO&&70==n&&"c"==r){let t=39==n?"ltr"==QD(e,e.state.selection.from)?1:-1:1;return YD(e,t,r)||GD(e,t)}return 38==n||zO&&80==n&&"c"==r?eE(e,-1,r)||GD(e,-1):40==n||zO&&78==n&&"c"==r?function(e){if(!IO||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;nE(e,n,"true"),setTimeout((()=>nE(e,n,"false")),20)}return!1}(e)||eE(e,1,r)||GD(e,1):r==(zO?"m":"c")&&(66==n||73==n||89==n||90==n)}function iE(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||rT.fromSchema(e.state.schema),a=fE(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,d=l.firstChild,u=0;for(;d&&1==d.nodeType&&(c=hE[d.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}d=l.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${i} ${o}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:h}}function oE(e,t,n,r,i){let o,s,a=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(n=>{t=n(t,a||r,e)})),a)return t?new cM(rM.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):cM.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,i,r,e)));if(n)s=n;else{let n=i.marks(),{schema:r}=e.state,s=rT.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=fE().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(n=i&&hE[i[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=e,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}(n),VO&&function(e){let t=e.querySelectorAll(LO?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||YM.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!d),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||sE.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(d)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(OI){return e}let{content:i,openStart:o,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=r.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;i=rM.from(e.create(n[a+1],i)),o++,s++}return new cM(i,o,s)}(uE(s,+d[1],+d[2]),d[4]);else if(s=cM.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach((e=>{if(!o)return;let t,n=i.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&r.length&&lE(n,r,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=cE(o[o.length-1],r.length));let t=aE(e,n);o.push(t),i=i.matchType(t.type),r=n}})),o)return rM.from(o)}return e}(s.content,i),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=uE(s,e,t)}return e.someProp("transformPasted",(t=>{s=t(s,e)})),s}const sE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function aE(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,rM.from(e));return e}function lE(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=lE(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(rM.from(aE(n,e,i+1))))}}function cE(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,cE(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(rM.empty,!0);return e.copy(n.append(r))}function dE(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=dE(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(rM.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function uE(e,t,n){return t<e.openStart&&(e=new cM(dE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new cM(dE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const hE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let pE=null;function fE(){return pE||(pE=document.implementation.createHTMLDocument("title"))}const mE={},gE={},vE={touchstart:!0,touchmove:!0};class yE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bE(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function wE(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>xE(e,t))}))}function xE(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function kE(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function CE(e){return{left:e.clientX,top:e.clientY}}function _E(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,(t=>s>o.depth?t(e,n,o.nodeAfter,o.before(s),i,!0):t(e,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function SE(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function ME(e,t,n,r,i){return _E(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof GT&&(n=i.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s);if(GT.isSelectable(e)){r=n&&i.$from.depth>0&&s>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(s);break}}return null!=r&&(SE(e,GT.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&GT.isSelectable(r))&&(SE(e,new GT(n),"pointer"),!0)}(e,n))}function TE(e,t,n,r){return _E(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function OE(e,t,n,r){return _E(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(SE(e,KT.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let t=o>i.depth?i.nodeAfter:i.node(o),n=i.before(o);if(t.inlineContent)SE(e,KT.create(r,n+1,n+1+t.content.size),"pointer");else{if(!GT.isSelectable(t))continue;SE(e,GT.create(r,n),"pointer")}return!0}}(e,n,r)}function DE(e){return IE(e)}gE.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!NE(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!FO||!LO||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!$O||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||rE(e,n)?n.preventDefault():bE(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,CO(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},gE.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},gE.keypress=(e,t)=>{let n=t;if(NE(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||zO&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof KT&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const EE=zO?"metaKey":"ctrlKey";mE.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=DE(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[EE]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(CE(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new AE(e,s,n,!!r)):("doubleClick"==o?TE:OE)(e,s.pos,s.inside,n)?n.preventDefault():bE(e,"pointer"))};class AE{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[EE],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof GT&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!NO||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),bE(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>RD(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(CE(e))),this.updateAllowDefault(e),this.allowDefault||!t?bE(this.view,"pointer"):ME(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||IO&&this.mightDrag&&!this.mightDrag.node.isAtom||LO&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(SE(this.view,WT.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):bE(this.view,"pointer")}move(e){this.updateAllowDefault(e),bE(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function NE(e,t){return!!e.composing||!!(IO&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}mE.touchstart=e=>{e.input.lastTouch=Date.now(),DE(e),bE(e,"pointer")},mE.touchmove=e=>{e.input.lastTouch=Date.now(),bE(e,"pointer")},mE.contextmenu=e=>DE(e);const PE=FO?5e3:-1;function LE(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>IE(e)),t))}function RE(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function IE(e,t=!1){if(!(FO&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),RE(e),t||e.docView&&e.docView.dirty){let t=PD(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}gE.compositionstart=gE.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),IE(e,!0),e.markCursor=null;else if(IE(e),NO&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}LE(e,PE)},gE.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,LE(e,20))};const $E=EO&&AO<15||$O&&jO<604;function zE(e,t,n,r,i){let o=oE(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,i,o||cM.empty))))return!0;if(!o)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BE(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}mE.copy=gE.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=$E?null:n.clipboardData,s=r.content(),{dom:a,text:l}=iE(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},gE.paste=(e,t)=>{let n=t;if(e.composing&&!FO)return;let r=$E?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&zE(e,BE(r),r.getData("text/html"),i,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?zE(e,r.value,null,i,t):zE(e,r.textContent,r.innerHTML,i,t)}),50)}(e,n)};class FE{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const VE=zO?"altKey":"ctrlKey";mE.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i,o=e.state.selection,s=o.empty?null:e.posAtCoords(CE(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof GT?o.to-1:o.to));else if(r&&r.mightDrag)i=GT.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=GT.create(e.state.doc,t.posBefore))}let a=(i||e.state.selection).content(),{dom:l,text:c}=iE(e,a);n.dataTransfer.clearData(),n.dataTransfer.setData($E?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",$E||n.dataTransfer.setData("text/plain",c),e.dragging=new FE(a,!n[VE],i)},mE.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},gE.dragover=gE.dragenter=(e,t)=>t.preventDefault(),gE.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(CE(n));if(!i)return;let o=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",(t=>{s=t(s,e)})):s=oE(e,BE(n.dataTransfer),$E?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!r||n[VE]);if(e.someProp("handleDrop",(t=>t(e,n,s||cM.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?function(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let e=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(h))return;let p=c.doc.resolve(d);if(u&&GT.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new GT(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,i)=>t=i)),c.setSelection(jD(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},mE.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&RD(e)}),20))},mE.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},mE.beforeinput=(e,t)=>{if(LO&&FO&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,CO(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let e in gE)mE[e]=gE[e];function jE(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class HE{constructor(e,t){this.toDOM=e,this.spec=t||KE,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new UE(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof HE&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&jE(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class WE{constructor(e,t){this.attrs=e,this.spec=t||KE}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new UE(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof WE&&jE(this.attrs,e.attrs)&&jE(this.spec,e.spec)}static is(e){return e.type instanceof WE}destroy(){}}class qE{constructor(e,t){this.attrs=e,this.spec=t||KE}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new UE(i.pos-n,o.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof qE&&jE(this.attrs,e.attrs)&&jE(this.spec,e.spec)}destroy(){}}class UE{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new UE(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new UE(e,e,new HE(t,n))}static inline(e,t,n,r){return new UE(e,t,new WE(n,r))}static node(e,t,n,r){return new UE(e,t,new qE(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof WE}get widget(){return this.type instanceof HE}}const YE=[],KE={};class JE{constructor(e,t){this.local=e.length?e:YE,this.children=t.length?t:YE}static create(e,t){return t.length?tA(t,e,0,KE):GE}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==GE||0==e.maps.length?this:this.mapInner(e,t,0,0,n||KE)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){let a=e.slice();for(let c=0,d=o;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,i)=>{let o=i-r-(n-t);for(let s=0;s<a.length;s+=3){let r=a[s+1];if(r<0||t>r+d-e)continue;let i=a[s]+d-e;n>=i?a[s+1]=t<=i?-2:-1:t>=d&&o&&(a[s]+=o,a[s+1]+=o)}e+=o})),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+o),d=t-i;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[c+1]+o,-1)-i,{index:h,offset:p}=r.content.findIndex(d),f=r.maybeChild(h);if(f&&p==d&&p+f.nodeSize==u){let r=a[c+2].mapInner(n,f,t+1,e[c]+o+1,s);r!=GE?(a[c]=d,a[c+1]=u,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,i,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(r,i,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return n}(a,e,t,n,i,o,s),c=tA(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new JE(t.sort(nA),a)}(this.children,o||[],e,t,n,r,i):o?new JE(o.sort(nA),YE):GE}add(e,t){return t.length?this==GE?JE.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach(((e,o)=>{let s,a=o+n;if(s=QE(t,e,a)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,s,a+1):r.splice(i,0,o,o+e.nodeSize,tA(s,e,a+1,KE)),i+=3}}));let o=ZE(i?eA(t):t,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new JE(o.length?this.local.concat(o).sort(nA):this.local,r||this.children)}remove(e){return 0==e.length||this==GE?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+t,s=n[i+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=GE?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<e.length;o++)if(i=e[o])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new JE(r,n):GE}forChild(e,t){if(this==GE)return this;if(t.isLeaf)return JE.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let i=e+1,o=i+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>i&&e.type instanceof WE){let t=Math.max(i,e.from)-i,n=Math.min(o,e.to)-i;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new JE(r.sort(nA),YE);return n?new XE([e,n]):e}return n||GE}eq(e){if(this==e)return!0;if(!(e instanceof JE)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return rA(this.localsInner(e))}localsInner(e){if(this==GE)return YE;if(e.inlineContent||!this.local.some(WE.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof WE||t.push(this.local[n]);return t}}JE.empty=new JE([],[]),JE.removeOverlap=rA;const GE=JE.empty;class XE{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,KE)));return XE.from(n)}forChild(e,t){if(t.isLeaf)return JE.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=GE&&(i instanceof XE?n=n.concat(i.members):n.push(i))}return XE.from(n)}eq(e){if(!(e instanceof XE)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?rA(n?t:t.sort(nA)):YE}static from(e){switch(e.length){case 0:return GE;case 1:return e[0];default:return new XE(e.every((e=>e instanceof JE))?e:e.reduce(((e,t)=>e.concat(t instanceof JE?t:t.members)),[]))}}}function ZE(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new UE(i.from+t,i.to+t,i.type))}return n}function QE(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function eA(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function tA(e,t,n,r){let i=[],o=!1;t.forEach(((t,s)=>{let a=QE(e,t,s+n);if(a){o=!0;let e=tA(a,t,n+s+1,r);e!=GE&&i.push(s,s+t.nodeSize,e)}}));let s=ZE(o?eA(e):e,-n).sort(nA);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new JE(s,i):GE}function nA(e,t){return e.from-t.from||e.to-t.to}function rA(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),iA(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),iA(t,i+1,o.copy(r.to,o.to)))}}return t}function iA(e,t,n){for(;t<e.length&&nA(n,e[t])>0;)t++;e.splice(t,0,n)}function oA(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=GE&&t.push(r)})),e.cursorWrapper&&t.push(JE.create(e.state.doc,[e.cursorWrapper.deco])),XE.from(t)}const sA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},aA=EO&&AO<=11;class lA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class cA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new lA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);EO&&AO<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),aA&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,sA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(HD(this.view)){if(this.suppressingSelectionUpdates)return RD(this.view);if(EO&&AO<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vO(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let i=e.focusNode;i;i=fO(i))n.add(i);for(let i=e.anchorNode;i;i=fO(i))if(n.has(i)){t=i;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&HD(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,s=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(i=i<0?e.from:Math.min(e.from,i),o=o<0?e.to:Math.max(e.to,o),e.typeOver&&(s=!0))}if(NO&&a.length>1){let e=a.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&kO(n)&&(l=PD(e))&&l.eq(WT.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,RD(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,o),function(e){if(dA.has(e))return;if(dA.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=NO,uA)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),uA=!0}}(e)),this.handleDOMChange(i,o,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||RD(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(EO&&AO<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==e.target?pO(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?pO(i):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let dA=new WeakMap,uA=!1;function hA(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(IO&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||IO&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const pA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fA(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=PD(e,t);if(n&&!e.state.selection.eq(n)){if(LO&&FO&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,CO(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),o&&r.setMeta("composition",o),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,d=e.state.selection,u=function(e,t,n){let r,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:c.anchorOffset}],kO(c)||r.push({node:c.focusNode,offset:c.focusOffset})),LO&&8===e.input.lastKeyCode)for(let g=s;g>o;g--){let e=i.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let u=e.state.doc,h=e.someProp("domParser")||YM.fromSchema(e.state.schema),p=u.resolve(a),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:hA,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(u.from,u.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){r-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;o-=e,o&&o<t.size&&vA(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,o&&o<e.size&&vA(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(p.content,u.doc.content,u.from,l,c);if(($O&&e.input.lastIOSEnter>Date.now()-225||FO)&&i.some((e=>1==e.nodeType&&!pA.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,CO(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&d instanceof KT&&!d.empty&&d.$head.sameParent(d.$anchor))||e.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let t=mA(e,e.state.doc,u.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);o&&n.setMeta("composition",o),e.dispatch(n)}}return}f={start:d.from,endA:d.to,endB:d.to}}if(LO&&e.cursorWrapper&&u.sel&&u.sel.anchor==e.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let e=f.endB-f.start;u.sel={anchor:u.sel.anchor+e,head:u.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof KT&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),EO&&AO<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>u.from&&"  "==u.doc.textBetween(f.start-u.from-1,f.start-u.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=u.doc.resolveNoCache(f.start-u.from),v=u.doc.resolveNoCache(f.endB-u.from),y=h.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if(($O&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<u.doc.content.size&&!g.sameParent(v)&&(m=WT.findFrom(u.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&e.someProp("handleKeyDown",(t=>t(e,CO(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||gA(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(gA(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||gA(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(h,f.start,f.endA,g,v)&&e.someProp("handleKeyDown",(t=>t(e,CO(8,"Backspace")))))return void(FO&&LO&&e.domObserver.suppressSelectionUpdates());LO&&FO&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),FO&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==f.endA&&(f.endB-=2,v=u.doc.resolveNoCache(f.endB-u.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,CO(13,"Enter"))}))}),20));let w,x,k,C=f.start,_=f.endA;if(b)if(g.pos==v.pos)EO&&AO<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>RD(e)),20)),w=e.state.tr.delete(C,_),x=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(k=function(e,t){let n,r,i,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let d=0;d<s.length;d++)a=s[d].removeFromSet(a);for(let d=0;d<o.length;d++)l=o[d].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let d=0;d<t.childCount;d++)c.push(i(t.child(d)));if(rM.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start()))))w=e.state.tr,"add"==k.type?w.addMark(C,_,k.mark):w.removeMark(C,_,k.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,C,_,t))))return;w=e.state.tr.insertText(t,C,_)}if(w||(w=e.state.tr.replace(C,_,u.doc.slice(f.start-u.from,f.endB-u.from))),u.sel){let t=mA(e,w.doc,u.sel);t&&!(LO&&FO&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==C||t.head==w.mapping.map(_)-1)||EO&&t.empty&&t.head==C)&&w.setSelection(t)}x&&w.ensureMarks(x),o&&w.setMeta("composition",o),e.dispatch(w.scrollIntoView())}function mA(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:jD(e,t.resolve(n.anchor),t.resolve(n.head))}function gA(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function vA(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class yA{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new yE,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(CA),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xA(this),wA(this),this.nodeViews=kA(this),this.docView=vD(this.state.doc,bA(this),oA(this),this.dom,this),this.domObserver=new cA(this,((e,t,n,r)=>fA(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in mE){let n=mE[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!kE(e,t)||xE(e,t)||!e.editable&&t.type in gE||n(e,t)},vE[t]?{passive:!0}:void 0)}IO&&e.dom.addEventListener("input",(()=>null)),wE(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&wE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(CA),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(RE(this),o=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=kA(this);(function(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&wE(this),this.editable=xA(this),wA(this);let a=oA(this),l=bA(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=i||!this.docView.matchesNode(e.doc,l,a);!d&&e.selection.eq(r.selection)||(o=!0);let u="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(o,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:YO(e.dom)}}(this);if(o){this.domObserver.stop();let t=d&&(EO||LO)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(d){let n=LO?this.trackWrites=this.domSelectionRange().focusNode:null;!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=vD(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return vO(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?RD(this,t):(FD(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;KO(n,0==r?0:r-t)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof GT){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&UO(this,t.getBoundingClientRect(),e)}else UO(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new FE(e.slice,e.move,r<0?void 0:GT.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[e];if(null!=r&&(n=t?t(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(EO){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(JO)return e.focus(JO);let t=YO(e);e.focus(null==JO?{get preventScroll(){return JO={preventScroll:!0},!0}}:void 0),JO||(JO=!1,KO(t,0))}(this.dom),RD(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return QO(this,e)}coordsAtPos(e,t=1){return rD(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return uD(this,t||this.state,e)}pasteHTML(e,t){return zE(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return zE(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],oA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){xE(e,t)||!mE[t.type]||!e.editable&&t.type in gE||mE[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return IO&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return vO(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function bA(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[UE.node(0,e.state.doc.content.size,t)]}function wA(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:UE.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function xA(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function kA(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function CA(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _A=Object.defineProperty,SA=(e,t,n)=>(((e,t,n)=>{t in e?_A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const MA=Symbol("[ProsemirrorAdapter]nodeViewContext"),TA=Symbol("[ProsemirrorAdapter]useNodeViewFactory");let OA=class extends KS{constructor(){super(...arguments),SA(this,"key",QS()),SA(this,"context",{contentRef:e=>{e&&e instanceof HTMLElement&&this.contentDOM&&e.firstChild!==this.contentDOM&&e.appendChild(this.contentDOM)},view:this.view,getPos:this.getPos,setAttrs:this.setAttrs,node:N(this.node),selected:N(this.selected),decorations:N(this.decorations),innerDecorations:N(this.innerDecorations)}),SA(this,"updateContext",(()=>{Object.entries({node:this.node,selected:this.selected,decorations:this.decorations,innerDecorations:this.innerDecorations}).forEach((([e,t])=>{const n=this.context[e];n.value!==t&&(n.value=t)}))})),SA(this,"render",(()=>{const e=this.component;return de(r({name:"ProsemirrorNodeView",setup:()=>(z(MA,this.context),()=>b(F,{key:this.key,to:this.dom},{default:()=>[b(e,null,null)]}))}))}))}};const DA=Symbol("[ProsemirrorAdapter]nodeViewContext"),EA=()=>i(DA),AA=Symbol("[ProsemirrorAdapter]usePluginViewFactory"),NA=()=>i(AA);let PA=class extends JS{constructor(){super(...arguments),SA(this,"key",QS()),SA(this,"context",{view:N(this.view),prevState:N(this.prevState)}),SA(this,"updateContext",(()=>{Object.entries({view:this.view,prevState:this.prevState}).forEach((([e,t])=>{const n=this.context[e];if("view"!==e)n.value=t;else{const e=Object.assign(Object.create(Object.getPrototypeOf(t)),t);n.value=e}}))})),SA(this,"render",(()=>{const e=this.component;return de(r({name:"ProsemirrorNodeView",setup:()=>(z(DA,this.context),()=>b(F,{key:this.key,to:this.root},{default:()=>[b(e,null,null)]}))}))}))}};const LA=Symbol("[ProsemirrorAdapter]widgetViewContext"),RA=Symbol("[ProsemirrorAdapter]useWidgetViewFactory");let IA=class extends ZS{constructor(){super(...arguments),SA(this,"key",QS()),SA(this,"context",{view:this.view,getPos:this.getPos,spec:this.spec}),SA(this,"updateContext",(()=>{Object.assign(this.context,{view:this.view,getPos:this.getPos,spec:this.spec})})),SA(this,"render",(()=>{const e=this.component;return de(r({name:"ProsemirrorWidgetView",setup:()=>(z(LA,this.context),()=>b(F,{key:this.key,to:this.dom},{default:()=>[b(e,null,null)]}))}))}))}};const $A=r({name:"ProsemirrorAdapterProvider",setup:(e,{slots:t})=>{const{portals:n,renderVueRenderer:r,removeVueRenderer:i}=(()=>{const e=y({}),t=M(),n=de({});return Z((()=>{n.updater=()=>{null==t||t.update()}})),B((()=>{n.updater=void 0})),{portals:e,renderVueRenderer:t=>{var r;e.value[t.key]=t.render(),null==(r=n.updater)||r.call(n)},removeVueRenderer:t=>{delete e.value[t.key]}}})(),o=((e,t)=>n=>(r,i,o,s,a)=>{const l=new OA({node:r,view:i,getPos:o,decorations:s,innerDecorations:a,options:{...n,onUpdate(){var e;null==(e=n.onUpdate)||e.call(n),l.updateContext()},selectNode(){var e;null==(e=n.selectNode)||e.call(n),l.updateContext()},deselectNode(){var e;null==(e=n.deselectNode)||e.call(n),l.updateContext()},destroy(){var e;null==(e=n.destroy)||e.call(n),t(l)}}});return e(l),l})(r,i),s=((e,t)=>n=>r=>{const i=new PA({view:r,options:{...n,update:(e,t)=>{var r;null==(r=n.update)||r.call(n,e,t),i.updateContext()},destroy:()=>{var e;null==(e=n.destroy)||e.call(n),t(i)}}});return e(i),i})(r,i),a=((e,t)=>n=>(r,i={})=>{const o=new IA({pos:r,options:n}),s={...i,destroy:e=>{var n;null==(n=i.destroy)||n.call(i,e),t(o)}};return o.spec=s,UE.widget(r,((t,n)=>(o.bind(t,n),o.updateContext(),e(o),o.dom)),s)})(r,i);return z(TA,o),z(AA,s),z(RA,a),()=>{var e;return b(L,null,[null==(e=t.default)?void 0:e.call(t),Object.values(n.value).map((e=>$(e)))])}}});var zA=(e=>(e.docTypeError="docTypeError",e.contextNotFound="contextNotFound",e.timerNotFound="timerNotFound",e.ctxCallOutOfScope="ctxCallOutOfScope",e.createNodeInParserFail="createNodeInParserFail",e.stackOverFlow="stackOverFlow",e.parserMatchError="parserMatchError",e.serializerMatchError="serializerMatchError",e.getAtomFromSchemaFail="getAtomFromSchemaFail",e.expectDomTypeError="expectDomTypeError",e.callCommandBeforeEditorView="callCommandBeforeEditorView",e.missingRootElement="missingRootElement",e.missingNodeInSchema="missingNodeInSchema",e.missingMarkInSchema="missingMarkInSchema",e.ctxNotBind="ctxNotBind",e.missingYjsDoc="missingYjsDoc",e))(zA||{});let BA=class extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}};const FA=(e,t)=>"function"==typeof t?"[Function]":t,VA=e=>JSON.stringify(e,FA);function jA(){return new BA(zA.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function HA(){return new BA(zA.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function WA(e){return new BA(zA.expectDomTypeError,`Expect to be a dom, but get: ${VA(e)}.`)}var qA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},UA=(e,t,n)=>(qA(e,t,"read from private field"),n?n.call(e):t.get(e)),YA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},KA=(e,t,n,r)=>(qA(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);let JA=class{constructor(){this.sliceMap=new Map,this.get=e=>{const t="string"==typeof e?[...this.sliceMap.values()].find((t=>t.type.name===e)):this.sliceMap.get(e.id);if(!t){throw function(e){return new BA(zA.contextNotFound,`Context "${e}" not found, do you forget to inject it?`)}("string"==typeof e?e:e.name)}return t},this.remove=e=>{const t="string"==typeof e?[...this.sliceMap.values()].find((t=>t.type.name===e)):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>"string"==typeof e?[...this.sliceMap.values()].some((t=>t.type.name===e)):this.sliceMap.has(e.id)}};var GA,XA,ZA;let QA=class{constructor(e,t,n){YA(this,GA,void 0),YA(this,XA,void 0),YA(this,ZA,void 0),KA(this,GA,[]),KA(this,ZA,(()=>{UA(this,GA).forEach((e=>e(UA(this,XA))))})),this.set=e=>{KA(this,XA,e),UA(this,ZA).call(this)},this.get=()=>UA(this,XA),this.update=e=>{KA(this,XA,e(UA(this,XA))),UA(this,ZA).call(this)},this.type=n,KA(this,XA,t),e.set(n.id,this)}on(e){return UA(this,GA).push(e),()=>{KA(this,GA,UA(this,GA).filter((t=>t!==e)))}}once(e){const t=this.on((n=>{e(n),t()}));return t}off(e){KA(this,GA,UA(this,GA).filter((t=>t!==e)))}offAll(){KA(this,GA,[])}};GA=new WeakMap,XA=new WeakMap,ZA=new WeakMap;let eN=class{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw jA()}}create(e,t=this._defaultValue){return new QA(e,t,this)}};const tN=(e,t)=>new eN(e,t);var nN,rN,iN,oN,sN,aN,lN,cN,dN;let uN=class{constructor(e,t,n){YA(this,nN,void 0),YA(this,rN,void 0),YA(this,iN,void 0),YA(this,oN,void 0),YA(this,sN,void 0),YA(this,aN,void 0),YA(this,lN,void 0),YA(this,cN,void 0),YA(this,dN,void 0),KA(this,oN,new Set),KA(this,sN,new Set),KA(this,aN,new Map),KA(this,lN,new Map),this.read=()=>({metadata:UA(this,nN),injectedSlices:[...UA(this,oN)].map((e=>({name:"string"==typeof e?e:e.name,value:UA(this,cN).call(this,e)}))),consumedSlices:[...UA(this,sN)].map((e=>({name:"string"==typeof e?e:e.name,value:UA(this,cN).call(this,e)}))),recordedTimers:[...UA(this,aN)].map((([e,{duration:t}])=>({name:e.name,duration:t,status:UA(this,dN).call(this,e)}))),waitTimers:[...UA(this,lN)].map((([e,{duration:t}])=>({name:e.name,duration:t,status:UA(this,dN).call(this,e)})))}),this.onRecord=e=>{UA(this,aN).set(e,{start:Date.now(),duration:0})},this.onClear=e=>{UA(this,aN).delete(e)},this.onDone=e=>{const t=UA(this,aN).get(e);t&&(t.duration=Date.now()-t.start)},this.onWait=(e,t)=>{const n=Date.now();t.finally((()=>{UA(this,lN).set(e,{duration:Date.now()-n})}))},this.onInject=e=>{UA(this,oN).add(e)},this.onRemove=e=>{UA(this,oN).delete(e)},this.onUse=e=>{UA(this,sN).add(e)},KA(this,cN,(e=>UA(this,rN).get(e).get())),KA(this,dN,(e=>UA(this,iN).get(e).status)),KA(this,rN,e),KA(this,iN,t),KA(this,nN,n)}};var hN,pN,fN,mN;nN=new WeakMap,rN=new WeakMap,iN=new WeakMap,oN=new WeakMap,sN=new WeakMap,aN=new WeakMap,lN=new WeakMap,cN=new WeakMap,dN=new WeakMap;hN=new WeakMap,pN=new WeakMap,fN=new WeakMap,mN=new WeakMap;let gN=class e{constructor(t,n,r){YA(this,hN,void 0),YA(this,pN,void 0),YA(this,fN,void 0),YA(this,mN,void 0),this.produce=t=>t&&Object.keys(t).length?new e(UA(this,hN),UA(this,pN),{...t}):this,this.inject=(e,t)=>{var n;const r=e.create(UA(this,hN).sliceMap);return null!=t&&r.set(t),null==(n=UA(this,mN))||n.onInject(e),this},this.remove=e=>{var t;return UA(this,hN).remove(e),null==(t=UA(this,mN))||t.onRemove(e),this},this.record=e=>{var t;return e.create(UA(this,pN).store),null==(t=UA(this,mN))||t.onRecord(e),this},this.clearTimer=e=>{var t;return UA(this,pN).remove(e),null==(t=UA(this,mN))||t.onClear(e),this},this.isInjected=e=>UA(this,hN).has(e),this.isRecorded=e=>UA(this,pN).has(e),this.use=e=>{var t;return null==(t=UA(this,mN))||t.onUse(e),UA(this,hN).get(e)},this.get=e=>this.use(e).get(),this.set=(e,t)=>this.use(e).set(t),this.update=(e,t)=>this.use(e).update(t),this.timer=e=>UA(this,pN).get(e),this.done=e=>{var t;this.timer(e).done(),null==(t=UA(this,mN))||t.onDone(e)},this.wait=e=>{var t;const n=this.timer(e).start();return null==(t=UA(this,mN))||t.onWait(e,n),n},this.waitTimers=async e=>{await Promise.all(this.get(e).map((e=>this.wait(e))))},KA(this,hN,t),KA(this,pN,n),KA(this,fN,r),r&&KA(this,mN,new uN(t,n,r))}get meta(){return UA(this,fN)}get inspector(){return UA(this,mN)}},vN=class{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw function(e){return new BA(zA.timerNotFound,`Timer "${e}" not found, do you forget to record it?`)}(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}};var yN,bN,wN,xN,kN,CN;let _N=class{constructor(e,t){YA(this,yN,void 0),YA(this,bN,void 0),YA(this,wN,void 0),YA(this,xN,void 0),YA(this,kN,void 0),YA(this,CN,void 0),KA(this,yN,null),KA(this,bN,null),KA(this,xN,"pending"),this.start=()=>{var e;return null!==(e=UA(this,yN))&&void 0!==e||KA(this,yN,new Promise(((e,t)=>{KA(this,bN,(t=>{t instanceof CustomEvent&&t.detail.id===UA(this,wN)&&(KA(this,xN,"resolved"),UA(this,kN).call(this),t.stopImmediatePropagation(),e())})),UA(this,CN).call(this,(()=>{"pending"===UA(this,xN)&&KA(this,xN,"rejected"),UA(this,kN).call(this),t(new Error(`Timing ${this.type.name} timeout.`))})),KA(this,xN,"pending"),addEventListener(this.type.name,UA(this,bN))}))),UA(this,yN)},this.done=()=>{const e=new CustomEvent(this.type.name,{detail:{id:UA(this,wN)}});dispatchEvent(e)},KA(this,kN,(()=>{UA(this,bN)&&removeEventListener(this.type.name,UA(this,bN))})),KA(this,CN,(e=>{setTimeout((()=>{e()}),this.type.timeout)})),KA(this,wN,Symbol(t.name)),this.type=t,e.set(t.id,this)}get status(){return UA(this,xN)}};yN=new WeakMap,bN=new WeakMap,wN=new WeakMap,xN=new WeakMap,kN=new WeakMap,CN=new WeakMap;let SN=class{constructor(e,t=3e3){this.create=e=>new _N(e,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}};const MN=(e,t=3e3)=>new SN(e,t);var TN=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ON=(e,t,n)=>(TN(e,t,"read from private field"),n?n.call(e):t.get(e)),DN=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},EN=(e,t,n,r)=>(TN(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);let AN=class{},NN=class{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var t;null==(t=this.top())||t.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw HA();return e}}},PN=class e extends AN{constructor(e,t,n){super(),this.type=e,this.content=t,this.attrs=n}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(t,n,r){return new e(t,n,r)}};var LN,RN,IN,$N,zN,BN,FN;const VN=class extends NN{constructor(e){super(),DN(this,LN,void 0),DN(this,RN,void 0),DN(this,IN,void 0),DN(this,$N,void 0),DN(this,zN,void 0),DN(this,BN,void 0),DN(this,FN,void 0),EN(this,LN,aM.none),EN(this,RN,(e=>e.isText)),EN(this,IN,((e,t)=>{if(ON(this,RN).call(this,e)&&ON(this,RN).call(this,t)&&aM.sameSet(e.marks,t.marks))return this.schema.text(e.text+t.text,e.marks)})),EN(this,$N,(e=>{const t=Object.values({...this.schema.nodes,...this.schema.marks}).find((t=>t.spec.parseMarkdown.match(e)));if(!t)throw function(e){return new BA(zA.parserMatchError,`Cannot match target parser for node: ${VA(e)}.`)}(e);return t})),EN(this,zN,(e=>{const t=ON(this,$N).call(this,e);t.spec.parseMarkdown.runner(this,e,t)})),this.injectRoot=(e,t,n)=>(this.openNode(t,n),this.next(e.children),this),this.openNode=(e,t)=>(this.open(PN.create(e,[],t)),this),EN(this,BN,(()=>{EN(this,LN,aM.none);const e=this.close();return ON(this,FN).call(this,e.type,e.attrs,e.content)})),this.closeNode=()=>(ON(this,BN).call(this),this),EN(this,FN,((e,t,n)=>{const r=e.createAndFill(t,n,ON(this,LN));if(!r)throw function(...e){const t=e.reduce(((e,t)=>{if(!t)return e;const n=e=>Array.isArray(e)?e.map((e=>n(e))).join(", "):e.toJSON?VA(e.toJSON()):e.spec?VA(e.spec):e.toString();return`${e}, ${n(t)}`}),"Create prosemirror node from remark failed in parser");return new BA(zA.createNodeInParserFail,t)}(e,t,n);return this.push(r),r})),this.addNode=(e,t,n)=>(ON(this,FN).call(this,e,t,n),this),this.openMark=(e,t)=>{const n=e.create(t);return EN(this,LN,n.addToSet(ON(this,LN))),this},this.closeMark=e=>(EN(this,LN,e.removeFromSet(ON(this,LN))),this),this.addText=e=>{const t=this.top();if(!t)throw HA();const n=t.pop(),r=this.schema.text(e,ON(this,LN));if(!n)return t.push(r),this;const i=ON(this,IN).call(this,n,r);return i?(t.push(i),this):(t.push(n,r),this)},this.build=()=>{let e;do{e=ON(this,BN).call(this)}while(this.size());return e},this.next=(e=[])=>([e].flat().forEach((e=>ON(this,zN).call(this,e))),this),this.toDoc=()=>this.build(),this.run=(e,t)=>{const n=e.runSync(e.parse(t),t);return this.next(n),this},this.schema=e}};LN=new WeakMap,RN=new WeakMap,IN=new WeakMap,$N=new WeakMap,zN=new WeakMap,BN=new WeakMap,FN=new WeakMap,VN.create=(e,t)=>{const n=new VN(e);return e=>(n.run(t,e),n.toDoc())};let jN=VN;const HN=class extends AN{constructor(e,t,n,r={}){super(),this.type=e,this.children=t,this.value=n,this.props=r,this.push=(e,...t)=>{this.children||(this.children=[]),this.children.push(e,...t)},this.pop=()=>{var e;return null==(e=this.children)?void 0:e.pop()}}};HN.create=(e,t,n,r={})=>new HN(e,t,n,r);let WN=HN;var qN,UN,YN,KN,JN,GN,XN,ZN,QN,eP,tP,nP;const rP=class extends NN{constructor(e){super(),DN(this,qN,void 0),DN(this,UN,void 0),DN(this,YN,void 0),DN(this,KN,void 0),DN(this,JN,void 0),DN(this,GN,void 0),DN(this,XN,void 0),DN(this,ZN,void 0),DN(this,QN,void 0),DN(this,eP,void 0),DN(this,tP,void 0),DN(this,nP,void 0),EN(this,qN,aM.none),EN(this,UN,(e=>{const t=Object.values({...this.schema.nodes,...this.schema.marks}).find((t=>t.spec.toMarkdown.match(e)));if(!t)throw function(e){return new BA(zA.serializerMatchError,`Cannot match target serializer for node: ${VA(e)}.`)}(e.type);return t})),EN(this,YN,(e=>ON(this,UN).call(this,e).spec.toMarkdown.runner(this,e))),EN(this,KN,((e,t)=>ON(this,UN).call(this,e).spec.toMarkdown.runner(this,e,t))),EN(this,JN,(e=>{const{marks:t}=e,n=e=>{var t;return null!==(t=e.type.spec.priority)&&void 0!==t?t:50};[...t].sort(((e,t)=>n(e)-n(t))).every((t=>!ON(this,KN).call(this,t,e)))&&ON(this,YN).call(this,e),t.forEach((e=>ON(this,nP).call(this,e)))})),EN(this,GN,((e,t)=>{var n;if(e.type===t||1!==(null==(n=e.children)?void 0:n.length))return e;const r=e=>{var n;if(e.type===t)return e;if(1!==(null==(n=e.children)?void 0:n.length))return null;const[i]=e.children;return i?r(i):null},i=r(e);if(!i)return e;const o=i.children?[...i.children]:void 0,s={...e,children:o};return s.children=o,i.children=[s],i})),EN(this,XN,(e=>{const{children:t}=e;return t&&(e.children=t.reduce(((e,t,n)=>{if(0===n)return[t];const r=e.at(-1);if(r&&r.isMark&&t.isMark){t=ON(this,GN).call(this,t,r.type);const{children:n,...i}=t,{children:o,...s}=r;if(t.type===r.type&&n&&o&&JSON.stringify(i)===JSON.stringify(s)){const t={...s,children:[...o,...n]};return e.slice(0,-1).concat(ON(this,XN).call(this,t))}}return e.concat(t)}),[])),e})),EN(this,ZN,(e=>{const t={...e.props,type:e.type};return e.children&&(t.children=e.children),e.value&&(t.value=e.value),t})),this.openNode=(e,t,n)=>(this.open(WN.create(e,void 0,t,n)),this),EN(this,QN,(()=>{const e=this.close();return ON(this,eP).call(this,e.type,e.children,e.value,e.props)})),this.closeNode=()=>(ON(this,QN).call(this),this),EN(this,eP,((e,t,n,r)=>{const i=WN.create(e,t,n,r),o=ON(this,XN).call(this,ON(this,ZN).call(this,i));return this.push(o),o})),this.addNode=(e,t,n,r)=>(ON(this,eP).call(this,e,t,n,r),this),EN(this,tP,((e,t,n,r)=>e.isInSet(ON(this,qN))?this:(EN(this,qN,e.addToSet(ON(this,qN))),this.openNode(t,n,{...r,isMark:!0})))),EN(this,nP,(e=>{e.isInSet(ON(this,qN))&&(EN(this,qN,e.type.removeFromSet(ON(this,qN))),ON(this,QN).call(this))})),this.withMark=(e,t,n,r)=>(ON(this,tP).call(this,e,t,n,r),this),this.closeMark=e=>(ON(this,nP).call(this,e),this),this.build=()=>{let e=null;do{e=ON(this,QN).call(this)}while(this.size());return e},this.next=e=>(e=>Object.prototype.hasOwnProperty.call(e,"size"))(e)?(e.forEach((e=>{ON(this,JN).call(this,e)})),this):(ON(this,JN).call(this,e),this),this.toString=e=>e.stringify(this.build()),this.run=e=>(this.next(e),this),this.schema=e}};qN=new WeakMap,UN=new WeakMap,YN=new WeakMap,KN=new WeakMap,JN=new WeakMap,GN=new WeakMap,XN=new WeakMap,ZN=new WeakMap,QN=new WeakMap,eP=new WeakMap,tP=new WeakMap,nP=new WeakMap,rP.create=(e,t)=>{const n=new rP(e);return e=>(n.run(e),n.toString(t))};let iP=rP;class oP{constructor(e,t,n={}){var r;this.match=e,this.match=e,this.handler="string"==typeof t?(r=t,function(e,t,n,i){let o=r;if(t[1]){let e=t[0].lastIndexOf(t[1]);o+=t[0].slice(e+t[1].length);let r=(n+=e)-i;r>0&&(o=t[0].slice(e-r,e)+o,n=i)}return e.tr.insertText(o,n,i)}):t,this.undoable=!1!==n.undoable}}const sP=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let i,o=n[r];if(o.spec.isInputRules&&(i=o.getState(e))){if(t){let n=e.tr,r=i.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(i.text){let t=n.doc.resolve(i.from).marks();n.replaceWith(i.from,i.to,e.schema.text(i.text,t))}else n.delete(i.from,i.to);t(n)}return!0}}return!1};function aP(e,t,n=null,r){return new oP(e,((e,i,o,s)=>{let a=n instanceof Function?n(i):n,l=e.tr.delete(o,s),c=l.doc.resolve(o).blockRange(),d=c&&ST(c,t,a);if(!d)return null;l.wrap(c,d);let u=l.doc.resolve(o-1).nodeBefore;return u&&u.type==t&&OT(l.doc,o-1)&&(!r||r(i,u))&&l.join(o-1),l}))}function lP(e,t,n=null){return new oP(e,((e,r,i,o)=>{let s=e.doc.resolve(i),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(i,o).setBlockType(i,i,t,a):null}))}new oP(/--$/,"—"),new oP(/\.\.\.$/,"…"),new oP(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new oP(/"$/,"”"),new oP(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new oP(/'$/,"’");const cP="undefined"!=typeof navigator?navigator:null,dP="undefined"!=typeof document?document:null,uP=cP&&cP.userAgent||"",hP=/Edge\/(\d+)/.exec(uP),pP=/MSIE \d/.exec(uP),fP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(uP),mP=!!(pP||fP||hP),gP=pP?document.documentMode:fP?+fP[1]:hP?+hP[1]:0,vP=!mP&&/gecko\/(\d+)/i.test(uP),yP=vP&&+(/Firefox\/(\d+)/.exec(uP)||[0,0])[1],bP=!mP&&/Chrome\/(\d+)/.exec(uP),wP=!!bP,xP=bP?+bP[1]:0,kP=!mP&&!!cP&&/Apple Computer/.test(cP.vendor),CP=kP&&(/Mobile\/\w+/.test(uP)||!!cP&&cP.maxTouchPoints>2),_P=CP||!!cP&&/Mac/.test(cP.platform),SP=/Android \d/.test(uP),MP=!!dP&&"webkitFontSmoothing"in dP.documentElement.style,TP=MP?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var OP=Object.freeze({__proto__:null,android:SP,chrome:wP,chrome_version:xP,gecko:vP,gecko_version:yP,ie:mP,ie_version:gP,ios:CP,mac:_P,safari:kP,webkit:MP,webkit_version:TP});function DP(e,t,n,r,i,o){if(e.composing)return!1;const s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"￼")+r;for(let c=0;c<i.length;c++){const a=i[c].match.exec(l),d=a&&a[0]&&i[c].handler(s,a,t-(a[0].length-r.length),n);if(d)return e.dispatch(d.setMeta(o,{transform:d,from:t,to:n,text:r})),!0}return!1}const EP=new hO("MILKDOWN_CUSTOM_INPUTRULES");function AP({rules:e}){const t=new cO({key:EP,isInputRules:!0,state:{init:()=>null,apply(e,t){const n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,i,o)=>DP(n,r,i,o,e,t),handleDOMEvents:{compositionend:n=>(setTimeout((()=>{const{$cursor:r}=n.state.selection;r&&DP(n,r.pos,r.pos,"",e,t)})),!1)},handleKeyDown(n,r){if("Enter"!==r.key)return!1;const{$cursor:i}=n.state.selection;return!!i&&DP(n,i.pos,i.pos,"\n",e,t)}}});return t}function NP(e,t,n={}){return new oP(e,((e,r,i,o)=>{var s,a,l,c;const{tr:d}=e;let u=r[r.length-1],h=r[0],p=[],f=o;const m={group:u,fullMatch:h,start:i,end:o},g=null==(s=n.updateCaptured)?void 0:s.call(n,m);if(Object.assign(m,g),({group:u,fullMatch:h,start:i,end:o}=m),null===h)return null;if(""===(null==u?void 0:u.trim()))return null;if(u){const e=h.search(/\S/),s=i+h.indexOf(u),m=s+u.length;p=null!=(a=d.storedMarks)?a:[],m<o&&d.delete(m,o),s>i&&d.delete(i+e,s),f=i+e+u.length;const g=null==(l=n.getAttr)?void 0:l.call(n,r);d.addMark(i,f,t.create(g)),d.setStoredMarks(p),null==(c=n.beforeDispatch)||c.call(n,{match:r,start:i,end:o,tr:d})}return d}))}var PP=Object.defineProperty,LP=Object.defineProperties,RP=Object.getOwnPropertyDescriptors,IP=Object.getOwnPropertySymbols,$P=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable,BP=(e,t,n)=>t in e?PP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FP=(e,t)=>{for(var n in t||(t={}))$P.call(t,n)&&BP(e,n,t[n]);if(IP)for(var n of IP(t))zP.call(t,n)&&BP(e,n,t[n]);return e},VP=(e,t)=>LP(e,RP(t));function jP(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function HP(e,t,n){const r=e.state.doc.content.size,i=jP(t,0,r),o=jP(n,0,r),s=e.coordsAtPos(i),a=e.coordsAtPos(o,-1),l=Math.min(s.top,a.top),c=Math.max(s.bottom,a.bottom),d=Math.min(s.left,a.left),u=Math.max(s.right,a.right),h={top:l,bottom:c,left:d,right:u,width:u-d,height:c-l,x:d,y:l};return VP(FP({},h),{toJSON:()=>h})}function WP(e){return Object.assign(Object.create(e),e).setTime(Date.now())}function qP(e,t){if(!(e instanceof GT))return;const{node:n,$from:r}=e;return function(e,t){return Array.isArray(e)&&e.includes(t.type)||t.type===e}(t,n)?{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}:void 0}const UP=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const YP=(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!r)return!1;let i=GP(r);if(!i){let n=r.blockRange(),i=n&&_T(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&tL(e,i,t))return!0;if(0==r.parent.content.size&&(KP(o,"end")||GT.isSelectable(o))){let n=DT(e.doc,r.before(),r.after(),cM.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(KP(o,"end")?WT.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):GT.create(r.doc,i.pos-o.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)};function KP(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const JP=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=GP(r)}let s=o&&o.nodeBefore;return!(!s||!GT.isSelectable(s))&&(t&&t(e.tr.setSelection(GT.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function GP(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function XP(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function ZP(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const QP=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof GT&&e.selection.node.isBlock)return!(!n.parentOffset||!TT(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){let i=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof KT||e.selection instanceof ZT)&&o.deleteSelection();let s=0==n.depth?null:ZP(n.node(-1).contentMatchAt(n.indexAfter(-1))),a=eL&&eL(r.parent,i),l=a?[a]:i&&s?[{type:s}]:void 0,c=TT(o.doc,o.mapping.map(n.pos),1,l);if(l||c||!TT(o.doc,o.mapping.map(n.pos),1,s?[{type:s}]:void 0)||(s&&(l=[{type:s}]),c=!0),c&&(o.split(o.mapping.map(n.pos),1,l),!i&&!n.parentOffset&&n.parent.type!=s)){let e=o.mapping.map(n.before()),t=o.doc.resolve(e);s&&n.node(-1).canReplaceWith(t.index(),t.index()+1,s)&&o.setNodeMarkup(o.mapping.map(n.before()),s)}t(o.scrollIntoView())}return!0};var eL;function tL(e,t,n){let r,i,o=t.nodeBefore,s=t.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!i.isTextblock&&!OT(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(r=(i=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&i.matchType(r[0]||s.type).validEnd){if(n){let i=t.pos+s.nodeSize,a=rM.empty;for(let e=r.length-1;e>=0;e--)a=rM.from(r[e].create(null,a));a=rM.from(o.copy(a));let l=e.tr.step(new xT(t.pos-1,i,t.pos,i,new cM(a,1,0),r.length,!0)),c=i+2*r.length;OT(l.doc,c)&&l.join(c),n(l.scrollIntoView())}return!0}let l=WT.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),d=c&&_T(c);if(null!=d&&d>=t.depth)return n&&n(e.tr.lift(c,d).scrollIntoView()),!0;if(a&&KP(s,"start",!0)&&KP(o,"end")){let r=o,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let a=s,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,a.content)){if(n){let r=rM.empty;for(let e=i.length-1;e>=0;e--)r=rM.from(i[e].copy(r));n(e.tr.step(new xT(t.pos-i.length,t.pos+s.nodeSize,t.pos+l,t.pos+s.nodeSize-l,new cM(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function nL(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(KT.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const rL=nL(-1),iL=nL(1);function oL(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&ST(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}function sL(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function aL(e,t=null){return function(n,r){let{empty:i,$cursor:o,ranges:s}=n.selection;if(i&&!o||!function(e,t,n){for(let r=0;r<t.length;r++){let{$from:i,$to:o}=t[r],s=0==i.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,o.pos,(e=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return!0}return!1}(n.doc,s,e))return!1;if(r)if(o)e.isInSet(n.storedMarks||o.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let i=!1,o=n.tr;for(let t=0;!i&&t<s.length;t++){let{$from:r,$to:o}=s[t];i=n.doc.rangeHasMark(r.pos,o.pos,e)}for(let n=0;n<s.length;n++){let{$from:r,$to:a}=s[n];if(i)o.removeMark(r.pos,a.pos,e);else{let n=r.pos,i=a.pos,s=r.nodeAfter,l=a.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,d=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+c<i&&(n+=c,i-=d),o.addMark(n,i,e.create(t))}}r(o.scrollIntoView())}return!0}}function lL(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let cL=lL(UP,YP,JP),dL=lL(UP,((e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!r)return!1;let i=XP(r);if(!i)return!1;let o=i.nodeAfter;if(tL(e,i,t))return!0;if(0==r.parent.content.size&&(KP(o,"start")||GT.isSelectable(o))){let n=DT(e.doc,r.before(),r.after(),cM.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(KP(o,"start")?WT.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):GT.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)}),((e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=XP(r)}let s=o&&o.nodeAfter;return!(!s||!GT.isSelectable(s))&&(t&&t(e.tr.setSelection(GT.create(e.doc,o.pos)).scrollIntoView()),!0)}));const uL={Enter:lL(((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),((e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof ZT||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=ZP(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(KT.create(s.doc,n+1)),t(s.scrollIntoView())}return!0}),((e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(TT(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&_T(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)}),QP),"Mod-Enter":(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=ZP(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(WT.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},Backspace:cL,"Mod-Backspace":cL,"Shift-Backspace":cL,Delete:dL,"Mod-Delete":dL,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new ZT(e.doc))),!0)},hL={"Ctrl-h":uL.Backspace,"Alt-Backspace":uL["Mod-Backspace"],"Ctrl-d":uL.Delete,"Ctrl-Alt-Backspace":uL["Mod-Delete"],"Alt-Delete":uL["Mod-Delete"],"Alt-d":uL["Mod-Delete"],"Ctrl-a":rL,"Ctrl-e":iL};for(let e in uL)hL[e]=uL[e];const pL=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?hL:uL;for(var fL={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},mL={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gL="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),vL="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),yL=0;yL<10;yL++)fL[48+yL]=fL[96+yL]=String(yL);for(yL=1;yL<=24;yL++)fL[yL+111]="F"+yL;for(yL=65;yL<=90;yL++)fL[yL]=String.fromCharCode(yL+32),mL[yL]=String.fromCharCode(yL);for(var bL in fL)mL.hasOwnProperty(bL)||(mL[bL]=fL[bL]);const wL="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function xL(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let e=o[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);wL?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function kL(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function CL(e){return new cO({props:{handleKeyDown:_L(e)}})}function _L(e){let t=function(e){let t=Object.create(null);for(let n in e)t[xL(n)]=e[n];return t}(e);return function(e,n){let r,i=function(e){var t=!(gL&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||vL&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?mL:fL)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=t[kL(i,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[kL(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=fL[n.keyCode])&&r!=i){let i=t[kL(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}var SL=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ML=(e,t,n)=>(SL(e,t,"read from private field"),n?n.call(e):t.get(e)),TL=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},OL=(e,t,n,r)=>(SL(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function DL(e,t){return e.meta={package:"@milkdown/core",group:"System",...t},e}const EL={strong:(e,t,n,r)=>{const i=e.marker||n.options.strong||"*",o=n.enter("strong"),s=n.createTracker(r);let a=s.move(i+i);return a+=s.move(n.containerPhrasing(e,{before:a,after:i,...s.current()})),a+=s.move(i+i),o(),a},emphasis:(e,t,n,r)=>{const i=e.marker||n.options.emphasis||"*",o=n.enter("emphasis"),s=n.createTracker(r);let a=s.move(i);return a+=s.move(n.containerPhrasing(e,{before:a,after:i,...s.current()})),a+=s.move(i),o(),a}},AL=MN("ConfigReady");const NL=MN("InitReady"),PL=tN([],"initTimer"),LL=tN({},"editor"),RL=tN([],"inputRules"),IL=tN([],"prosePlugins"),$L=tN([],"remarkPlugins"),zL=tN([],"nodeView"),BL=tN([],"markView"),FL=tN(gt().use(vt).use(yt),"remark"),VL=tN({handlers:EL},"remarkStringifyOptions");function jL(e){const t=t=>(t.inject(LL,e).inject(IL,[]).inject($L,[]).inject(RL,[]).inject(zL,[]).inject(BL,[]).inject(VL,{handlers:EL}).inject(FL,gt().use(vt).use(yt)).inject(PL,[AL]).record(NL),async()=>{await t.waitTimers(PL);const e=t.get(VL);return t.set(FL,gt().use(vt).use(yt,e)),t.done(NL),()=>{t.remove(LL).remove(IL).remove($L).remove(RL).remove(zL).remove(BL).remove(VL).remove(FL).remove(PL).clearTimer(NL)}});return DL(t,{displayName:"Init"}),t}const HL=MN("SchemaReady"),WL=tN([],"schemaTimer"),qL=tN({},"schema"),UL=tN([],"nodes"),YL=tN([],"marks");function KL(e){var t;return{...e,parseDOM:null==(t=e.parseDOM)?void 0:t.map((t=>({priority:e.priority,...t})))}}const JL=e=>(e.inject(qL,{}).inject(UL,[]).inject(YL,[]).inject(WL,[NL]).record(HL),async()=>{await e.waitTimers(WL);const t=e.get(FL),n=e.get($L).reduce(((e,t)=>e.use(t.plugin,t.options)),t);e.set(FL,n);const r=Object.fromEntries(e.get(UL).map((([e,t])=>[e,KL(t)]))),i=Object.fromEntries(e.get(YL).map((([e,t])=>[e,KL(t)]))),o=new qM({nodes:r,marks:i});return e.set(qL,o),e.done(HL),()=>{e.remove(qL).remove(UL).remove(YL).remove(WL).clearTimer(HL)}});DL(JL,{displayName:"Schema"});const GL=MN("ParserReady"),XL=()=>{throw jA()},ZL=tN(XL,"parser"),QL=tN([],"parserTimer"),eR=e=>(e.inject(ZL,XL).inject(QL,[HL]).record(GL),async()=>{await e.waitTimers(QL);const t=e.get(FL),n=e.get(qL);return e.set(ZL,jN.create(n,t)),e.done(GL),()=>{e.remove(ZL).remove(QL).clearTimer(GL)}});DL(eR,{displayName:"Parser"});const tR=MN("SerializerReady"),nR=tN([],"serializerTimer"),rR=()=>{throw jA()},iR=tN(rR,"serializer"),oR=e=>(e.inject(iR,rR).inject(nR,[HL]).record(tR),async()=>{await e.waitTimers(nR);const t=e.get(FL),n=e.get(qL);return e.set(iR,iP.create(n,t)),e.done(tR),()=>{e.remove(iR).remove(nR).clearTimer(tR)}});DL(oR,{displayName:"Serializer"});const sR=tN("","defaultValue"),aR=tN({},"editorState"),lR=tN((e=>e),"stateOptions"),cR=tN([],"editorStateTimer"),dR=MN("EditorStateReady");function uR(e,t,n){if("string"==typeof e)return t(e);if("html"===e.type)return YM.fromSchema(n).parse(e.dom);if("json"===e.type)return TM.fromJSON(n,e.value);throw function(e){return new BA(zA.docTypeError,`Doc type error, unsupported type: ${VA(e)}`)}(e)}const hR=new hO("MILKDOWN_STATE_TRACKER");function pR(e){const t=lL(sP,UP,YP,JP);return e.Backspace=t,e}const fR=e=>(e.inject(sR,"").inject(aR,{}).inject(lR,(e=>e)).inject(cR,[GL,tR,DR]).record(dR),async()=>{await e.waitTimers(cR);const t=e.get(qL),n=e.get(ZL),r=e.get(RL),i=e.get(lR),o=e.get(IL),s=uR(e.get(sR),n,t),a=[...o,new cO({key:hR,state:{init:()=>{},apply:(t,n,r,i)=>{e.set(aR,i)}}}),AP({rules:r}),CL(pR(pL))];e.set(IL,a);const l=i({schema:t,doc:s,plugins:a}),c=aO.create(l);return e.set(aR,c),e.done(dR),()=>{e.remove(sR).remove(aR).remove(lR).remove(cR).clearTimer(dR)}});DL(fR,{displayName:"EditorState"});const mR=MN("EditorViewReady"),gR=tN({},"editorView"),vR=tN([],"editorViewTimer"),yR=tN({},"editorViewOptions"),bR=tN(null,"root"),wR=tN(null,"rootDOM"),xR=tN({},"rootAttrs");const kR=new hO("MILKDOWN_VIEW_CLEAR"),CR=e=>(e.inject(bR,document.body).inject(gR,{}).inject(yR,{}).inject(wR,null).inject(xR,{}).inject(vR,[dR]).record(mR),async()=>{await e.wait(NL);const t=e.get(bR)||document.body,n="string"==typeof t?document.querySelector(t):t;e.update(IL,(t=>[new cO({key:kR,view:t=>{const r=n?function(e,t){const n=document.createElement("div");n.className="milkdown",e.appendChild(n),t.set(wR,n);const r=t.get(xR);return Object.entries(r).forEach((([e,t])=>n.setAttribute(e,t))),n}(n,e):void 0;return(()=>{if(r&&n){const e=t.dom;n.replaceChild(r,e),r.appendChild(e)}})(),{destroy:()=>{null!=r&&r.parentNode&&(null==r||r.parentNode.replaceChild(t.dom,r)),null==r||r.remove()}}}}),...t])),await e.waitTimers(vR);const r=e.get(aR),i=e.get(yR),o=Object.fromEntries(e.get(zL)),s=Object.fromEntries(e.get(BL)),a=new yA(n,{state:r,nodeViews:o,markViews:s,...i});return function(e){e.classList.add("editor"),e.setAttribute("role","textbox")}(a.dom),e.set(gR,a),e.done(mR),()=>{null==a||a.destroy(),e.remove(bR).remove(gR).remove(yR).remove(wR).remove(xR).remove(vR).clearTimer(mR)}});var _R,SR;DL(CR,{displayName:"EditorView"});let MR=class{constructor(){TL(this,_R,void 0),TL(this,SR,void 0),OL(this,_R,new JA),OL(this,SR,null),this.setCtx=e=>{OL(this,SR,e)}}get ctx(){return ML(this,SR)}create(e,t){const n=e.create(ML(this,_R).sliceMap);return n.set(t),n}get(e){return ML(this,_R).get(e).get()}remove(e){return ML(this,_R).remove(e)}call(e,t){if(null==ML(this,SR))throw new BA(zA.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized");const n=this.get(e)(t),r=ML(this,SR).get(gR);return n(r.state,r.dispatch,r)}};_R=new WeakMap,SR=new WeakMap;const TR=tN(new MR,"commands"),OR=tN([HL],"commandsTimer"),DR=MN("CommandsReady"),ER=e=>{const t=new MR;return t.setCtx(e),e.inject(TR,t).inject(OR,[HL]).record(DR),async()=>(await e.waitTimers(OR),e.done(DR),()=>{e.remove(TR).remove(OR).clearTimer(DR)})};var AR,NR,PR,LR,RR,IR,$R,zR,BR,FR,VR,jR,HR,WR,qR;DL(ER,{displayName:"Commands"});AR=new WeakMap,NR=new WeakMap,PR=new WeakMap,LR=new WeakMap,RR=new WeakMap,IR=new WeakMap,$R=new WeakMap,zR=new WeakMap,BR=new WeakMap,FR=new WeakMap,VR=new WeakMap,jR=new WeakMap,HR=new WeakMap,WR=new WeakMap,qR=new WeakMap;let UR=class e{constructor(){TL(this,AR,void 0),TL(this,NR,void 0),TL(this,PR,void 0),TL(this,LR,void 0),TL(this,RR,void 0),TL(this,IR,void 0),TL(this,$R,void 0),TL(this,zR,void 0),TL(this,BR,void 0),TL(this,FR,void 0),TL(this,VR,void 0),TL(this,jR,void 0),TL(this,HR,void 0),TL(this,WR,void 0),TL(this,qR,void 0),OL(this,AR,!1),OL(this,NR,"Idle"),OL(this,PR,[]),OL(this,LR,(()=>{})),OL(this,RR,new JA),OL(this,IR,new vN),OL(this,$R,new Map),OL(this,zR,new Map),OL(this,BR,new gN(ML(this,RR),ML(this,IR))),OL(this,FR,(()=>{const e=function(e){const t=t=>(t.record(AL),async()=>(await e(t),t.done(AL),()=>{t.clearTimer(AL)}));return DL(t,{displayName:"Config"}),t}((async e=>{await Promise.all(ML(this,PR).map((t=>t(e))))})),t=[JL,eR,oR,ER,fR,CR,jL(this),e];ML(this,VR).call(this,t,ML(this,zR))})),OL(this,VR,((e,t)=>{e.forEach((e=>{const n=ML(this,BR).produce(ML(this,AR)?e.meta:void 0),r=e(n);t.set(e,{ctx:n,handler:r,cleanup:void 0})}))})),OL(this,jR,((e,t=!1)=>Promise.all([e].flat().map((e=>{const n=ML(this,$R).get(e),r=null==n?void 0:n.cleanup;return t?ML(this,$R).delete(e):ML(this,$R).set(e,{ctx:void 0,handler:void 0,cleanup:void 0}),"function"==typeof r?r():r}))))),OL(this,HR,(async()=>{await Promise.all([...ML(this,zR).entries()].map((([e,{cleanup:t}])=>"function"==typeof t?t():t))),ML(this,zR).clear()})),OL(this,WR,(e=>{OL(this,NR,e),ML(this,LR).call(this,e)})),OL(this,qR,(e=>[...e.entries()].map((async([t,n])=>{const{ctx:r,handler:i}=n;if(!i)return;const o=await i();e.set(t,{ctx:r,handler:i,cleanup:o})})))),this.enableInspector=(e=!0)=>(OL(this,AR,e),this),this.onStatusChange=e=>(OL(this,LR,e),this),this.config=e=>(ML(this,PR).push(e),this),this.removeConfig=e=>(OL(this,PR,ML(this,PR).filter((t=>t!==e))),this),this.use=e=>{const t=[e].flat();return t.flat().forEach((e=>{ML(this,$R).set(e,{ctx:void 0,handler:void 0,cleanup:void 0})})),"Created"===ML(this,NR)&&ML(this,VR).call(this,t,ML(this,$R)),this},this.remove=async e=>"OnCreate"===ML(this,NR)?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise((t=>{setTimeout((()=>{t(this.remove(e))}),50)}))):(await ML(this,jR).call(this,[e].flat(),!0),this),this.create=async()=>("OnCreate"===ML(this,NR)||("Created"===ML(this,NR)&&await this.destroy(),ML(this,WR).call(this,"OnCreate"),ML(this,FR).call(this),ML(this,VR).call(this,[...ML(this,$R).keys()],ML(this,$R)),await Promise.all([ML(this,qR).call(this,ML(this,zR)),ML(this,qR).call(this,ML(this,$R))].flat()),ML(this,WR).call(this,"Created")),this),this.destroy=async(e=!1)=>"Destroyed"===ML(this,NR)||"OnDestroy"===ML(this,NR)?this:"OnCreate"===ML(this,NR)?new Promise((t=>{setTimeout((()=>{t(this.destroy(e))}),50)})):(e&&OL(this,PR,[]),ML(this,WR).call(this,"OnDestroy"),await ML(this,jR).call(this,[...ML(this,$R).keys()],e),await ML(this,HR).call(this),ML(this,WR).call(this,"Destroyed"),this),this.action=e=>e(ML(this,BR)),this.inspect=()=>ML(this,AR)?[...ML(this,zR).values(),...ML(this,$R).values()].map((({ctx:e})=>{var t;return null==(t=null==e?void 0:e.inspector)?void 0:t.read()})).filter((e=>!!e)):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new e}get ctx(){return ML(this,BR)}get status(){return ML(this,NR)}};var YR=200,KR=function(){};KR.prototype.append=function(e){return e.length?(e=KR.from(e),!this.length&&e||e.length<YR&&this.leafAppend(e)||this.length<YR&&e.leafPrepend(this)||this.appendInner(e)):this},KR.prototype.prepend=function(e){return e.length?KR.from(e).append(this):this},KR.prototype.appendInner=function(e){return new GR(this,e)},KR.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?KR.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},KR.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},KR.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},KR.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},KR.from=function(e){return e instanceof KR?e:e&&e.length?new JR(e):KR.empty};var JR=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=YR)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=YR)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(KR);KR.empty=new JR([]);var GR=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(KR);class XR{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new ZR(e.map));let t,i=e.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new ZR(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,s=new XR(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(e,t,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),d=new ZR(e.mapping.maps[c],l,t);(n=a&&a.merge(d))&&(d=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(d),t&&(o++,t=void 0),r||(a=d)}let l=o-n.depth;return l>eI&&(s=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(s,l),o-=l),new XR(s.append(i),o)}remapping(e,t){let n=new uT;return this.items.forEach(((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new XR(this.items.append(e.map((e=>new ZR(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new ZR(l,o,c))}else n.push(new ZR(l))}),r);let l=[];for(let u=t;u<o;u++)l.push(new ZR(i.maps[u]));let c=this.items.slice(0,r).append(l).append(n),d=new XR(c,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l,c=new ZR(s.invert(),e,a),d=r.length-1;(l=r.length&&r[d].merge(c))?r[d]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new XR(KR.from(r.reverse()),i)}}XR.empty=new XR(KR.empty,0);class ZR{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ZR(t.getMap().invert(),t,this.selection)}}}class QR{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const eI=20;function tI(e){let t=[];return e.forEach(((e,n,r,i)=>t.push(r,i))),t}function nI(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function rI(e,t,n,r){let i=sI(t),o=aI.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),c=new QR(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(aI,{redo:r,historyState:c}).scrollIntoView())}let iI=!1,oI=null;function sI(e){let t=e.plugins;if(oI!=t){iI=!1,oI=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){iI=!0;break}}return iI}const aI=new hO("history"),lI=new hO("closeHistory");function cI(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new cO({key:aI,state:{init:()=>new QR(XR.empty,XR.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let i,o=n.getMeta(aI);if(o)return o.historyState;n.getMeta(lI)&&(e=new QR(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(aI))return s.getMeta(aI).redo?new QR(e.done.addTransform(n,void 0,r,sI(t)),e.undone,tI(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new QR(e.done,e.undone.addTransform(n,void 0,r,sI(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new QR(e.done.rebased(n,i),e.undone.rebased(n,i),nI(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new QR(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),nI(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),a=s?nI(e.prevRanges,n.mapping):tI(n.mapping.maps[n.steps.length-1]);return new QR(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,sI(t)),XR.empty,a,n.time,null==i?e.prevComposition:i)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?dI:"historyRedo"==n?uI:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const dI=(e,t)=>{let n=aI.getState(e);return!(!n||0==n.done.eventCount)&&(t&&rI(n,e,t,!1),!0)},uI=(e,t)=>{let n=aI.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&rI(n,e,t,!0),!0)};let hI=e=>crypto.getRandomValues(new Uint8Array(e));function pI(e,t){const n=function(e="cmdKey"){return tN((()=>()=>!1),e)}(e),r=i=>async()=>{r.key=n,await i.wait(DR);const o=t(i);return i.get(TR).create(n,o),r.run=t=>i.get(TR).call(e,t),()=>{i.get(TR).remove(n)}};return r}function fI(e){const t=n=>async()=>{await n.wait(HL);const r=e(n);return n.update(RL,(e=>[...e,r])),t.inputRule=r,()=>{n.update(RL,(e=>e.filter((e=>e!==r))))}};return t}function mI(e,t){const n=r=>async()=>{const i=t(r);return r.update(YL,(t=>[...t.filter((t=>t[0]!==e)),[e,i]])),n.id=e,n.schema=i,()=>{r.update(YL,(t=>t.filter((([t])=>t!==e))))}};return n.type=t=>{const n=t.get(qL).marks[e];if(!n)throw function(e){return new BA(zA.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${e}" in schema.`)}(e);return n},n}function gI(e,t){const n=r=>async()=>{const i=t(r);return r.update(UL,(t=>[...t.filter((t=>t[0]!==e)),[e,i]])),n.id=e,n.schema=i,()=>{r.update(UL,(t=>t.filter((([t])=>t!==e))))}};return n.type=t=>{const n=t.get(qL).nodes[e];if(!n)throw function(e){return new BA(zA.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${e}" in schema.`)}(e);return n},n}function vI(e){let t;const n=n=>async()=>(await n.wait(HL),t=e(n),n.update(IL,(e=>[...e,t])),()=>{n.update(IL,(e=>e.filter((e=>e!==t))))});return n.plugin=()=>t,n.key=()=>t.spec.key,n}function yI(e,t){const n=tN(e,t),r=e=>(e.inject(n),()=>()=>{e.remove(n)});return r.key=n,r}function bI(e,t){const n=yI(t,e),r=gI(e,(e=>e.get(n.key)(e))),i=[n,r];return i.id=r.id,i.node=r,i.type=e=>r.type(e),i.schema=r.schema,i.ctx=n,i.key=n.key,i.extendSchema=t=>r=>()=>{const o=r.get(n.key),s=t(o)(r);r.update(UL,(t=>[...t.filter((t=>t[0]!==e)),[e,s]])),i.schema=s},i}function wI(e,t){const n=yI(t,e),r=mI(e,(e=>e.get(n.key)(e))),i=[n,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=n,i.key=n.key,i.extendSchema=t=>r=>()=>{const o=r.get(n.key),s=t(o)(r);r.update(YL,(t=>[...t.filter((t=>t[0]!==e)),[e,s]])),i.schema=s},i}function xI(e,t){const n=Object.fromEntries(Object.entries(t).map((([e,{shortcuts:t}])=>[e,t]))),r=yI(n,`${e}Keymap`),i=function(e){const t=n=>async()=>{await n.wait(HL);const r=e(n),i=CL(r);return n.update(IL,(e=>[...e,i])),t.keymap=r,()=>{n.update(IL,(e=>e.filter((e=>e!==i))))}};return t}((e=>{const n=e.get(r.key),i=Object.entries(t).flatMap((([t,{command:r}])=>[n[t]].flat().map((t=>[t,r(e)]))));return Object.fromEntries(i)})),o=[r,i];return o.ctx=r,o.shortcuts=i,o.key=r.key,o.keymap=i.keymap,o}((e,t=21)=>{((e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length)})(e,t,hI)})("abcedfghicklmn",10);const kI=(e,t=(()=>({})))=>yI(t,`${e}Attr`),CI=(e,t=(()=>({})))=>yI(t,`${e}Attr`);function _I(e,t,n){const r=yI(null!=n?n:{},e),i=e=>async()=>{await e.wait(NL);const n={plugin:t(e),options:e.get(r.key)};return e.update($L,(e=>[...e,n])),()=>{e.update($L,(e=>e.filter((e=>e!==n))))}},o=[r,i];return o.id=e,o.plugin=i,o.options=r,o}function SI(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-history",...t}}),e}const MI=pI("Undo",(()=>()=>dI));SI(MI,{displayName:"Command<undo>"});const TI=pI("Redo",(()=>()=>uI));SI(TI,{displayName:"Command<redo>"});const OI=yI({},"historyProviderConfig");SI(OI,{displayName:"Ctx<historyProviderConfig>"});const DI=vI((e=>cI(e.get(OI.key))));SI(DI,{displayName:"Ctx<historyProviderPlugin>"});const EI=xI("historyKeymap",{Undo:{shortcuts:"Mod-z",command:e=>{const t=e.get(TR);return()=>t.call(MI.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:e=>{const t=e.get(TR);return()=>t.call(TI.key)}}});SI(EI.ctx,{displayName:"KeymapCtx<history>"}),SI(EI.shortcuts,{displayName:"Keymap<history>"});const AI=[OI,DI,EI,MI,TI].flat();var NI=NaN,PI="[object Symbol]",LI=/^\s+|\s+$/g,RI=/^[-+]0x[0-9a-f]+$/i,II=/^0b[01]+$/i,$I=/^0o[0-7]+$/i,zI=parseInt,BI="object"==typeof Bt&&Bt&&Bt.Object===Object&&Bt,FI="object"==typeof self&&self&&self.Object===Object&&self,VI=BI||FI||Function("return this")(),jI=Object.prototype.toString,HI=Math.max,WI=Math.min,qI=function(){return VI.Date.now()};function UI(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function YI(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&jI.call(e)==PI}(e))return NI;if(UI(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=UI(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(LI,"");var n=II.test(e);return n||$I.test(e)?zI(e.slice(2),n?2:8):RI.test(e)?NI:+e}var KI=t("l",(function(e,t,n){var r,i,o,s,a,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=o}function m(){var e=qI();if(f(e))return g(e);a=setTimeout(m,function(e){var n=t-(e-l);return u?WI(n,o-(e-c)):n}(e))}function g(e){return a=void 0,h&&r?p(e):(r=i=void 0,s)}function v(){var e=qI(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(m,t),d?p(e):s}(l);if(u)return a=setTimeout(m,t),p(l)}return void 0===a&&(a=setTimeout(m,t)),s}return t=YI(t)||0,UI(n)&&(d=!!n.leading,o=(u="maxWait"in n)?HI(YI(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},v.flush=function(){return void 0===a?s:g(qI())},v}));const JI=Ft(KI);let GI=class{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}};const XI=tN(new GI,"listener"),ZI=new hO("MILKDOWN_LISTENER"),QI=e=>(e.inject(XI,new GI),async()=>{await e.wait(NL);const t=e.get(XI),{listeners:n}=t;n.beforeMount.forEach((t=>t(e))),await e.wait(tR);const r=e.get(iR);let i=null,o=null;const s=new cO({key:ZI,view:()=>({destroy:()=>{n.destroy.forEach((t=>t(e)))}}),props:{handleDOMEvents:{focus:()=>(n.focus.forEach((t=>t(e))),!1),blur:()=>(n.blur.forEach((t=>t(e))),!1)}},state:{init:()=>{},apply:t=>t.docChanged&&!1!==t.getMeta("addToHistory")?JI((()=>{const{doc:s}=t;if(n.updated.length>0&&(null==i||!i.eq(s))&&n.updated.forEach((t=>{t(e,s,i)})),n.markdownUpdated.length>0&&(null==i||!i.eq(s))){const t=r(s);n.markdownUpdated.forEach((n=>{n(e,t,o)})),o=t}i=s}),200)():void 0}});e.update(IL,(e=>e.concat(s))),await e.wait(mR),n.mounted.forEach((t=>t(e)))});function e$(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function t$(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}QI.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const n$=[["ß","ss"],["ẞ","Ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["ъе","ye"],["Ъе","Ye"],["ъЕ","yE"],["ЪЕ","YE"],["Е","E"],["е","e"],["Ё","Yo"],["ё","yo"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["ый","iy"],["Ый","Iy"],["ЫЙ","IY"],["ыЙ","iY"],["Й","Y"],["й","y"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","Kh"],["х","kh"],["Ц","Ts"],["ц","ts"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Sch"],["щ","sch"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","S"],["ç","c"],["Ç","C"],["ğ","g"],["Ğ","G"],["ı","i"],["İ","I"],["ա","a"],["Ա","A"],["բ","b"],["Բ","B"],["գ","g"],["Գ","G"],["դ","d"],["Դ","D"],["ե","ye"],["Ե","Ye"],["զ","z"],["Զ","Z"],["է","e"],["Է","E"],["ը","y"],["Ը","Y"],["թ","t"],["Թ","T"],["ժ","zh"],["Ժ","Zh"],["ի","i"],["Ի","I"],["լ","l"],["Լ","L"],["խ","kh"],["Խ","Kh"],["ծ","ts"],["Ծ","Ts"],["կ","k"],["Կ","K"],["հ","h"],["Հ","H"],["ձ","dz"],["Ձ","Dz"],["ղ","gh"],["Ղ","Gh"],["ճ","tch"],["Ճ","Tch"],["մ","m"],["Մ","M"],["յ","y"],["Յ","Y"],["ն","n"],["Ն","N"],["շ","sh"],["Շ","Sh"],["ո","vo"],["Ո","Vo"],["չ","ch"],["Չ","Ch"],["պ","p"],["Պ","P"],["ջ","j"],["Ջ","J"],["ռ","r"],["Ռ","R"],["ս","s"],["Ս","S"],["վ","v"],["Վ","V"],["տ","t"],["Տ","T"],["ր","r"],["Ր","R"],["ց","c"],["Ց","C"],["ու","u"],["ՈՒ","U"],["Ու","U"],["փ","p"],["Փ","P"],["ք","q"],["Ք","Q"],["օ","o"],["Օ","O"],["ֆ","f"],["Ֆ","F"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","K"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"],["Ĳ","IJ"],["ĳ","ij"],["¢","c"],["¥","Y"],["߿","b"],["৳","t"],["૱","Bo"],["฿","B"],["₠","CE"],["₡","C"],["₢","Cr"],["₣","F"],["₥","m"],["₦","N"],["₧","Pt"],["₨","Rs"],["₩","W"],["₫","s"],["€","E"],["₭","K"],["₮","T"],["₯","Dp"],["₰","S"],["₱","P"],["₲","G"],["₳","A"],["₴","S"],["₵","C"],["₶","tt"],["₷","S"],["₸","T"],["₹","R"],["₺","L"],["₽","P"],["₿","B"],["﹩","$"],["￠","c"],["￥","Y"],["￦","W"],["𝐀","A"],["𝐁","B"],["𝐂","C"],["𝐃","D"],["𝐄","E"],["𝐅","F"],["𝐆","G"],["𝐇","H"],["𝐈","I"],["𝐉","J"],["𝐊","K"],["𝐋","L"],["𝐌","M"],["𝐍","N"],["𝐎","O"],["𝐏","P"],["𝐐","Q"],["𝐑","R"],["𝐒","S"],["𝐓","T"],["𝐔","U"],["𝐕","V"],["𝐖","W"],["𝐗","X"],["𝐘","Y"],["𝐙","Z"],["𝐚","a"],["𝐛","b"],["𝐜","c"],["𝐝","d"],["𝐞","e"],["𝐟","f"],["𝐠","g"],["𝐡","h"],["𝐢","i"],["𝐣","j"],["𝐤","k"],["𝐥","l"],["𝐦","m"],["𝐧","n"],["𝐨","o"],["𝐩","p"],["𝐪","q"],["𝐫","r"],["𝐬","s"],["𝐭","t"],["𝐮","u"],["𝐯","v"],["𝐰","w"],["𝐱","x"],["𝐲","y"],["𝐳","z"],["𝐴","A"],["𝐵","B"],["𝐶","C"],["𝐷","D"],["𝐸","E"],["𝐹","F"],["𝐺","G"],["𝐻","H"],["𝐼","I"],["𝐽","J"],["𝐾","K"],["𝐿","L"],["𝑀","M"],["𝑁","N"],["𝑂","O"],["𝑃","P"],["𝑄","Q"],["𝑅","R"],["𝑆","S"],["𝑇","T"],["𝑈","U"],["𝑉","V"],["𝑊","W"],["𝑋","X"],["𝑌","Y"],["𝑍","Z"],["𝑎","a"],["𝑏","b"],["𝑐","c"],["𝑑","d"],["𝑒","e"],["𝑓","f"],["𝑔","g"],["𝑖","i"],["𝑗","j"],["𝑘","k"],["𝑙","l"],["𝑚","m"],["𝑛","n"],["𝑜","o"],["𝑝","p"],["𝑞","q"],["𝑟","r"],["𝑠","s"],["𝑡","t"],["𝑢","u"],["𝑣","v"],["𝑤","w"],["𝑥","x"],["𝑦","y"],["𝑧","z"],["𝑨","A"],["𝑩","B"],["𝑪","C"],["𝑫","D"],["𝑬","E"],["𝑭","F"],["𝑮","G"],["𝑯","H"],["𝑰","I"],["𝑱","J"],["𝑲","K"],["𝑳","L"],["𝑴","M"],["𝑵","N"],["𝑶","O"],["𝑷","P"],["𝑸","Q"],["𝑹","R"],["𝑺","S"],["𝑻","T"],["𝑼","U"],["𝑽","V"],["𝑾","W"],["𝑿","X"],["𝒀","Y"],["𝒁","Z"],["𝒂","a"],["𝒃","b"],["𝒄","c"],["𝒅","d"],["𝒆","e"],["𝒇","f"],["𝒈","g"],["𝒉","h"],["𝒊","i"],["𝒋","j"],["𝒌","k"],["𝒍","l"],["𝒎","m"],["𝒏","n"],["𝒐","o"],["𝒑","p"],["𝒒","q"],["𝒓","r"],["𝒔","s"],["𝒕","t"],["𝒖","u"],["𝒗","v"],["𝒘","w"],["𝒙","x"],["𝒚","y"],["𝒛","z"],["𝒜","A"],["𝒞","C"],["𝒟","D"],["𝒢","g"],["𝒥","J"],["𝒦","K"],["𝒩","N"],["𝒪","O"],["𝒫","P"],["𝒬","Q"],["𝒮","S"],["𝒯","T"],["𝒰","U"],["𝒱","V"],["𝒲","W"],["𝒳","X"],["𝒴","Y"],["𝒵","Z"],["𝒶","a"],["𝒷","b"],["𝒸","c"],["𝒹","d"],["𝒻","f"],["𝒽","h"],["𝒾","i"],["𝒿","j"],["𝓀","h"],["𝓁","l"],["𝓂","m"],["𝓃","n"],["𝓅","p"],["𝓆","q"],["𝓇","r"],["𝓈","s"],["𝓉","t"],["𝓊","u"],["𝓋","v"],["𝓌","w"],["𝓍","x"],["𝓎","y"],["𝓏","z"],["𝓐","A"],["𝓑","B"],["𝓒","C"],["𝓓","D"],["𝓔","E"],["𝓕","F"],["𝓖","G"],["𝓗","H"],["𝓘","I"],["𝓙","J"],["𝓚","K"],["𝓛","L"],["𝓜","M"],["𝓝","N"],["𝓞","O"],["𝓟","P"],["𝓠","Q"],["𝓡","R"],["𝓢","S"],["𝓣","T"],["𝓤","U"],["𝓥","V"],["𝓦","W"],["𝓧","X"],["𝓨","Y"],["𝓩","Z"],["𝓪","a"],["𝓫","b"],["𝓬","c"],["𝓭","d"],["𝓮","e"],["𝓯","f"],["𝓰","g"],["𝓱","h"],["𝓲","i"],["𝓳","j"],["𝓴","k"],["𝓵","l"],["𝓶","m"],["𝓷","n"],["𝓸","o"],["𝓹","p"],["𝓺","q"],["𝓻","r"],["𝓼","s"],["𝓽","t"],["𝓾","u"],["𝓿","v"],["𝔀","w"],["𝔁","x"],["𝔂","y"],["𝔃","z"],["𝔄","A"],["𝔅","B"],["𝔇","D"],["𝔈","E"],["𝔉","F"],["𝔊","G"],["𝔍","J"],["𝔎","K"],["𝔏","L"],["𝔐","M"],["𝔑","N"],["𝔒","O"],["𝔓","P"],["𝔔","Q"],["𝔖","S"],["𝔗","T"],["𝔘","U"],["𝔙","V"],["𝔚","W"],["𝔛","X"],["𝔜","Y"],["𝔞","a"],["𝔟","b"],["𝔠","c"],["𝔡","d"],["𝔢","e"],["𝔣","f"],["𝔤","g"],["𝔥","h"],["𝔦","i"],["𝔧","j"],["𝔨","k"],["𝔩","l"],["𝔪","m"],["𝔫","n"],["𝔬","o"],["𝔭","p"],["𝔮","q"],["𝔯","r"],["𝔰","s"],["𝔱","t"],["𝔲","u"],["𝔳","v"],["𝔴","w"],["𝔵","x"],["𝔶","y"],["𝔷","z"],["𝔸","A"],["𝔹","B"],["𝔻","D"],["𝔼","E"],["𝔽","F"],["𝔾","G"],["𝕀","I"],["𝕁","J"],["𝕂","K"],["𝕃","L"],["𝕄","M"],["𝕆","N"],["𝕊","S"],["𝕋","T"],["𝕌","U"],["𝕍","V"],["𝕎","W"],["𝕏","X"],["𝕐","Y"],["𝕒","a"],["𝕓","b"],["𝕔","c"],["𝕕","d"],["𝕖","e"],["𝕗","f"],["𝕘","g"],["𝕙","h"],["𝕚","i"],["𝕛","j"],["𝕜","k"],["𝕝","l"],["𝕞","m"],["𝕟","n"],["𝕠","o"],["𝕡","p"],["𝕢","q"],["𝕣","r"],["𝕤","s"],["𝕥","t"],["𝕦","u"],["𝕧","v"],["𝕨","w"],["𝕩","x"],["𝕪","y"],["𝕫","z"],["𝕬","A"],["𝕭","B"],["𝕮","C"],["𝕯","D"],["𝕰","E"],["𝕱","F"],["𝕲","G"],["𝕳","H"],["𝕴","I"],["𝕵","J"],["𝕶","K"],["𝕷","L"],["𝕸","M"],["𝕹","N"],["𝕺","O"],["𝕻","P"],["𝕼","Q"],["𝕽","R"],["𝕾","S"],["𝕿","T"],["𝖀","U"],["𝖁","V"],["𝖂","W"],["𝖃","X"],["𝖄","Y"],["𝖅","Z"],["𝖆","a"],["𝖇","b"],["𝖈","c"],["𝖉","d"],["𝖊","e"],["𝖋","f"],["𝖌","g"],["𝖍","h"],["𝖎","i"],["𝖏","j"],["𝖐","k"],["𝖑","l"],["𝖒","m"],["𝖓","n"],["𝖔","o"],["𝖕","p"],["𝖖","q"],["𝖗","r"],["𝖘","s"],["𝖙","t"],["𝖚","u"],["𝖛","v"],["𝖜","w"],["𝖝","x"],["𝖞","y"],["𝖟","z"],["𝖠","A"],["𝖡","B"],["𝖢","C"],["𝖣","D"],["𝖤","E"],["𝖥","F"],["𝖦","G"],["𝖧","H"],["𝖨","I"],["𝖩","J"],["𝖪","K"],["𝖫","L"],["𝖬","M"],["𝖭","N"],["𝖮","O"],["𝖯","P"],["𝖰","Q"],["𝖱","R"],["𝖲","S"],["𝖳","T"],["𝖴","U"],["𝖵","V"],["𝖶","W"],["𝖷","X"],["𝖸","Y"],["𝖹","Z"],["𝖺","a"],["𝖻","b"],["𝖼","c"],["𝖽","d"],["𝖾","e"],["𝖿","f"],["𝗀","g"],["𝗁","h"],["𝗂","i"],["𝗃","j"],["𝗄","k"],["𝗅","l"],["𝗆","m"],["𝗇","n"],["𝗈","o"],["𝗉","p"],["𝗊","q"],["𝗋","r"],["𝗌","s"],["𝗍","t"],["𝗎","u"],["𝗏","v"],["𝗐","w"],["𝗑","x"],["𝗒","y"],["𝗓","z"],["𝗔","A"],["𝗕","B"],["𝗖","C"],["𝗗","D"],["𝗘","E"],["𝗙","F"],["𝗚","G"],["𝗛","H"],["𝗜","I"],["𝗝","J"],["𝗞","K"],["𝗟","L"],["𝗠","M"],["𝗡","N"],["𝗢","O"],["𝗣","P"],["𝗤","Q"],["𝗥","R"],["𝗦","S"],["𝗧","T"],["𝗨","U"],["𝗩","V"],["𝗪","W"],["𝗫","X"],["𝗬","Y"],["𝗭","Z"],["𝗮","a"],["𝗯","b"],["𝗰","c"],["𝗱","d"],["𝗲","e"],["𝗳","f"],["𝗴","g"],["𝗵","h"],["𝗶","i"],["𝗷","j"],["𝗸","k"],["𝗹","l"],["𝗺","m"],["𝗻","n"],["𝗼","o"],["𝗽","p"],["𝗾","q"],["𝗿","r"],["𝘀","s"],["𝘁","t"],["𝘂","u"],["𝘃","v"],["𝘄","w"],["𝘅","x"],["𝘆","y"],["𝘇","z"],["𝘈","A"],["𝘉","B"],["𝘊","C"],["𝘋","D"],["𝘌","E"],["𝘍","F"],["𝘎","G"],["𝘏","H"],["𝘐","I"],["𝘑","J"],["𝘒","K"],["𝘓","L"],["𝘔","M"],["𝘕","N"],["𝘖","O"],["𝘗","P"],["𝘘","Q"],["𝘙","R"],["𝘚","S"],["𝘛","T"],["𝘜","U"],["𝘝","V"],["𝘞","W"],["𝘟","X"],["𝘠","Y"],["𝘡","Z"],["𝘢","a"],["𝘣","b"],["𝘤","c"],["𝘥","d"],["𝘦","e"],["𝘧","f"],["𝘨","g"],["𝘩","h"],["𝘪","i"],["𝘫","j"],["𝘬","k"],["𝘭","l"],["𝘮","m"],["𝘯","n"],["𝘰","o"],["𝘱","p"],["𝘲","q"],["𝘳","r"],["𝘴","s"],["𝘵","t"],["𝘶","u"],["𝘷","v"],["𝘸","w"],["𝘹","x"],["𝘺","y"],["𝘻","z"],["𝘼","A"],["𝘽","B"],["𝘾","C"],["𝘿","D"],["𝙀","E"],["𝙁","F"],["𝙂","G"],["𝙃","H"],["𝙄","I"],["𝙅","J"],["𝙆","K"],["𝙇","L"],["𝙈","M"],["𝙉","N"],["𝙊","O"],["𝙋","P"],["𝙌","Q"],["𝙍","R"],["𝙎","S"],["𝙏","T"],["𝙐","U"],["𝙑","V"],["𝙒","W"],["𝙓","X"],["𝙔","Y"],["𝙕","Z"],["𝙖","a"],["𝙗","b"],["𝙘","c"],["𝙙","d"],["𝙚","e"],["𝙛","f"],["𝙜","g"],["𝙝","h"],["𝙞","i"],["𝙟","j"],["𝙠","k"],["𝙡","l"],["𝙢","m"],["𝙣","n"],["𝙤","o"],["𝙥","p"],["𝙦","q"],["𝙧","r"],["𝙨","s"],["𝙩","t"],["𝙪","u"],["𝙫","v"],["𝙬","w"],["𝙭","x"],["𝙮","y"],["𝙯","z"],["𝙰","A"],["𝙱","B"],["𝙲","C"],["𝙳","D"],["𝙴","E"],["𝙵","F"],["𝙶","G"],["𝙷","H"],["𝙸","I"],["𝙹","J"],["𝙺","K"],["𝙻","L"],["𝙼","M"],["𝙽","N"],["𝙾","O"],["𝙿","P"],["𝚀","Q"],["𝚁","R"],["𝚂","S"],["𝚃","T"],["𝚄","U"],["𝚅","V"],["𝚆","W"],["𝚇","X"],["𝚈","Y"],["𝚉","Z"],["𝚊","a"],["𝚋","b"],["𝚌","c"],["𝚍","d"],["𝚎","e"],["𝚏","f"],["𝚐","g"],["𝚑","h"],["𝚒","i"],["𝚓","j"],["𝚔","k"],["𝚕","l"],["𝚖","m"],["𝚗","n"],["𝚘","o"],["𝚙","p"],["𝚚","q"],["𝚛","r"],["𝚜","s"],["𝚝","t"],["𝚞","u"],["𝚟","v"],["𝚠","w"],["𝚡","x"],["𝚢","y"],["𝚣","z"],["𝚤","l"],["𝚥","j"],["𝛢","A"],["𝛣","B"],["𝛤","G"],["𝛥","D"],["𝛦","E"],["𝛧","Z"],["𝛨","I"],["𝛩","TH"],["𝛪","I"],["𝛫","K"],["𝛬","L"],["𝛭","M"],["𝛮","N"],["𝛯","KS"],["𝛰","O"],["𝛱","P"],["𝛲","R"],["𝛳","TH"],["𝛴","S"],["𝛵","T"],["𝛶","Y"],["𝛷","F"],["𝛸","x"],["𝛹","PS"],["𝛺","O"],["𝛻","D"],["𝛼","a"],["𝛽","b"],["𝛾","g"],["𝛿","d"],["𝜀","e"],["𝜁","z"],["𝜂","i"],["𝜃","th"],["𝜄","i"],["𝜅","k"],["𝜆","l"],["𝜇","m"],["𝜈","n"],["𝜉","ks"],["𝜊","o"],["𝜋","p"],["𝜌","r"],["𝜍","s"],["𝜎","s"],["𝜏","t"],["𝜐","y"],["𝜑","f"],["𝜒","x"],["𝜓","ps"],["𝜔","o"],["𝜕","d"],["𝜖","E"],["𝜗","TH"],["𝜘","K"],["𝜙","f"],["𝜚","r"],["𝜛","p"],["𝜜","A"],["𝜝","V"],["𝜞","G"],["𝜟","D"],["𝜠","E"],["𝜡","Z"],["𝜢","I"],["𝜣","TH"],["𝜤","I"],["𝜥","K"],["𝜦","L"],["𝜧","M"],["𝜨","N"],["𝜩","KS"],["𝜪","O"],["𝜫","P"],["𝜬","S"],["𝜭","TH"],["𝜮","S"],["𝜯","T"],["𝜰","Y"],["𝜱","F"],["𝜲","X"],["𝜳","PS"],["𝜴","O"],["𝜵","D"],["𝜶","a"],["𝜷","v"],["𝜸","g"],["𝜹","d"],["𝜺","e"],["𝜻","z"],["𝜼","i"],["𝜽","th"],["𝜾","i"],["𝜿","k"],["𝝀","l"],["𝝁","m"],["𝝂","n"],["𝝃","ks"],["𝝄","o"],["𝝅","p"],["𝝆","r"],["𝝇","s"],["𝝈","s"],["𝝉","t"],["𝝊","y"],["𝝋","f"],["𝝌","x"],["𝝍","ps"],["𝝎","o"],["𝝏","a"],["𝝐","e"],["𝝑","i"],["𝝒","k"],["𝝓","f"],["𝝔","r"],["𝝕","p"],["𝝖","A"],["𝝗","B"],["𝝘","G"],["𝝙","D"],["𝝚","E"],["𝝛","Z"],["𝝜","I"],["𝝝","TH"],["𝝞","I"],["𝝟","K"],["𝝠","L"],["𝝡","M"],["𝝢","N"],["𝝣","KS"],["𝝤","O"],["𝝥","P"],["𝝦","R"],["𝝧","TH"],["𝝨","S"],["𝝩","T"],["𝝪","Y"],["𝝫","F"],["𝝬","X"],["𝝭","PS"],["𝝮","O"],["𝝯","D"],["𝝰","a"],["𝝱","v"],["𝝲","g"],["𝝳","d"],["𝝴","e"],["𝝵","z"],["𝝶","i"],["𝝷","th"],["𝝸","i"],["𝝹","k"],["𝝺","l"],["𝝻","m"],["𝝼","n"],["𝝽","ks"],["𝝾","o"],["𝝿","p"],["𝞀","r"],["𝞁","s"],["𝞂","s"],["𝞃","t"],["𝞄","y"],["𝞅","f"],["𝞆","x"],["𝞇","ps"],["𝞈","o"],["𝞉","a"],["𝞊","e"],["𝞋","i"],["𝞌","k"],["𝞍","f"],["𝞎","r"],["𝞏","p"],["𝞐","A"],["𝞑","V"],["𝞒","G"],["𝞓","D"],["𝞔","E"],["𝞕","Z"],["𝞖","I"],["𝞗","TH"],["𝞘","I"],["𝞙","K"],["𝞚","L"],["𝞛","M"],["𝞜","N"],["𝞝","KS"],["𝞞","O"],["𝞟","P"],["𝞠","S"],["𝞡","TH"],["𝞢","S"],["𝞣","T"],["𝞤","Y"],["𝞥","F"],["𝞦","X"],["𝞧","PS"],["𝞨","O"],["𝞩","D"],["𝞪","av"],["𝞫","g"],["𝞬","d"],["𝞭","e"],["𝞮","z"],["𝞯","i"],["𝞰","i"],["𝞱","th"],["𝞲","i"],["𝞳","k"],["𝞴","l"],["𝞵","m"],["𝞶","n"],["𝞷","ks"],["𝞸","o"],["𝞹","p"],["𝞺","r"],["𝞻","s"],["𝞼","s"],["𝞽","t"],["𝞾","y"],["𝞿","f"],["𝟀","x"],["𝟁","ps"],["𝟂","o"],["𝟃","a"],["𝟄","e"],["𝟅","i"],["𝟆","k"],["𝟇","f"],["𝟈","r"],["𝟉","p"],["𝟊","F"],["𝟋","f"],["⒜","(a)"],["⒝","(b)"],["⒞","(c)"],["⒟","(d)"],["⒠","(e)"],["⒡","(f)"],["⒢","(g)"],["⒣","(h)"],["⒤","(i)"],["⒥","(j)"],["⒦","(k)"],["⒧","(l)"],["⒨","(m)"],["⒩","(n)"],["⒪","(o)"],["⒫","(p)"],["⒬","(q)"],["⒭","(r)"],["⒮","(s)"],["⒯","(t)"],["⒰","(u)"],["⒱","(v)"],["⒲","(w)"],["⒳","(x)"],["⒴","(y)"],["⒵","(z)"],["Ⓐ","(A)"],["Ⓑ","(B)"],["Ⓒ","(C)"],["Ⓓ","(D)"],["Ⓔ","(E)"],["Ⓕ","(F)"],["Ⓖ","(G)"],["Ⓗ","(H)"],["Ⓘ","(I)"],["Ⓙ","(J)"],["Ⓚ","(K)"],["Ⓛ","(L)"],["Ⓝ","(N)"],["Ⓞ","(O)"],["Ⓟ","(P)"],["Ⓠ","(Q)"],["Ⓡ","(R)"],["Ⓢ","(S)"],["Ⓣ","(T)"],["Ⓤ","(U)"],["Ⓥ","(V)"],["Ⓦ","(W)"],["Ⓧ","(X)"],["Ⓨ","(Y)"],["Ⓩ","(Z)"],["ⓐ","(a)"],["ⓑ","(b)"],["ⓒ","(b)"],["ⓓ","(c)"],["ⓔ","(e)"],["ⓕ","(f)"],["ⓖ","(g)"],["ⓗ","(h)"],["ⓘ","(i)"],["ⓙ","(j)"],["ⓚ","(k)"],["ⓛ","(l)"],["ⓜ","(m)"],["ⓝ","(n)"],["ⓞ","(o)"],["ⓟ","(p)"],["ⓠ","(q)"],["ⓡ","(r)"],["ⓢ","(s)"],["ⓣ","(t)"],["ⓤ","(u)"],["ⓥ","(v)"],["ⓦ","(w)"],["ⓧ","(x)"],["ⓨ","(y)"],["ⓩ","(z)"],["Ċ","C"],["ċ","c"],["Ġ","G"],["ġ","g"],["Ħ","H"],["ħ","h"],["Ż","Z"],["ż","z"],["𝟎","0"],["𝟏","1"],["𝟐","2"],["𝟑","3"],["𝟒","4"],["𝟓","5"],["𝟔","6"],["𝟕","7"],["𝟖","8"],["𝟗","9"],["𝟘","0"],["𝟙","1"],["𝟚","2"],["𝟛","3"],["𝟜","4"],["𝟝","5"],["𝟞","6"],["𝟟","7"],["𝟠","8"],["𝟡","9"],["𝟢","0"],["𝟣","1"],["𝟤","2"],["𝟥","3"],["𝟦","4"],["𝟧","5"],["𝟨","6"],["𝟩","7"],["𝟪","8"],["𝟫","9"],["𝟬","0"],["𝟭","1"],["𝟮","2"],["𝟯","3"],["𝟰","4"],["𝟱","5"],["𝟲","6"],["𝟳","7"],["𝟴","8"],["𝟵","9"],["𝟶","0"],["𝟷","1"],["𝟸","2"],["𝟹","3"],["𝟺","4"],["𝟻","5"],["𝟼","6"],["𝟽","7"],["𝟾","8"],["𝟿","9"],["①","1"],["②","2"],["③","3"],["④","4"],["⑤","5"],["⑥","6"],["⑦","7"],["⑧","8"],["⑨","9"],["⑩","10"],["⑪","11"],["⑫","12"],["⑬","13"],["⑭","14"],["⑮","15"],["⑯","16"],["⑰","17"],["⑱","18"],["⑲","19"],["⑳","20"],["⑴","1"],["⑵","2"],["⑶","3"],["⑷","4"],["⑸","5"],["⑹","6"],["⑺","7"],["⑻","8"],["⑼","9"],["⑽","10"],["⑾","11"],["⑿","12"],["⒀","13"],["⒁","14"],["⒂","15"],["⒃","16"],["⒄","17"],["⒅","18"],["⒆","19"],["⒇","20"],["⒈","1."],["⒉","2."],["⒊","3."],["⒋","4."],["⒌","5."],["⒍","6."],["⒎","7."],["⒏","8."],["⒐","9."],["⒑","10."],["⒒","11."],["⒓","12."],["⒔","13."],["⒕","14."],["⒖","15."],["⒗","16."],["⒘","17."],["⒙","18."],["⒚","19."],["⒛","20."],["⓪","0"],["⓫","11"],["⓬","12"],["⓭","13"],["⓮","14"],["⓯","15"],["⓰","16"],["⓱","17"],["⓲","18"],["⓳","19"],["⓴","20"],["⓵","1"],["⓶","2"],["⓷","3"],["⓸","4"],["⓹","5"],["⓺","6"],["⓻","7"],["⓼","8"],["⓽","9"],["⓾","10"],["⓿","0"],["🙰","&"],["🙱","&"],["🙲","&"],["🙳","&"],["🙴","&"],["🙵","&"],["🙶",'"'],["🙷",'"'],["🙸",'"'],["‽","?!"],["🙹","?!"],["🙺","?!"],["🙻","?!"],["🙼","/"],["🙽","\\"],["🜇","AR"],["🜈","V"],["🜉","V"],["🜆","VR"],["🜅","VF"],["🜩","2"],["🜪","5"],["🝡","f"],["🝢","W"],["🝣","U"],["🝧","V"],["🝨","T"],["🝪","V"],["🝫","MB"],["🝬","VB"],["🝲","3B"],["🝳","3B"],["💯","100"],["🔙","BACK"],["🔚","END"],["🔛","ON!"],["🔜","SOON"],["🔝","TOP"],["🔞","18"],["🔤","abc"],["🔠","ABCD"],["🔡","abcd"],["🔢","1234"],["🔣","T&@%"],["#️⃣","#"],["*️⃣","*"],["0️⃣","0"],["1️⃣","1"],["2️⃣","2"],["3️⃣","3"],["4️⃣","4"],["5️⃣","5"],["6️⃣","6"],["7️⃣","7"],["8️⃣","8"],["9️⃣","9"],["🔟","10"],["🅰️","A"],["🅱️","B"],["🆎","AB"],["🆑","CL"],["🅾️","O"],["🅿","P"],["🆘","SOS"],["🅲","C"],["🅳","D"],["🅴","E"],["🅵","F"],["🅶","G"],["🅷","H"],["🅸","I"],["🅹","J"],["🅺","K"],["🅻","L"],["🅼","M"],["🅽","N"],["🆀","Q"],["🆁","R"],["🆂","S"],["🆃","T"],["🆄","U"],["🆅","V"],["🆆","W"],["🆇","X"],["🆈","Y"],["🆉","Z"]],r$=(e,t)=>{for(const[n,r]of t)e=e.replace(new RegExp(t$(n),"g"),r);return e};const i$=[["&"," and "],["🦄"," unicorn "],["♥"," love "]],o$=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),s$=(e,t)=>{const n=e$(t);return e.replace(new RegExp(`${n}{2,}`,"g"),t).replace(new RegExp(`^${n}|${n}$`,"g"),"")},a$=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const n of e.preserveCharacters){if(n===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=e$(n)}return new RegExp(`[^${t}]+`,"g")};function l$(e,t){if("string"!=typeof e)throw new TypeError(`Expected a string, got \`${typeof e}\``);const n=(t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t}).preserveLeadingUnderscore&&e.startsWith("_"),r=t.preserveTrailingDash&&e.endsWith("-");e=function(e,t){if("string"!=typeof e)throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const n=new Map([...n$,...t.customReplacements]);return e=e.normalize(),(e=r$(e,n)).normalize("NFD").replace(/\p{Diacritic}/gu,"").normalize()}(e,{customReplacements:new Map([...i$,...t.customReplacements])}),t.decamelize&&(e=o$(e));const i=a$(t);return t.lowercase&&(e=e.toLowerCase()),e=(e=(e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3")).replace(i,t.separator)).replace(/\\/g,""),t.separator&&(e=s$(e,t.separator)),n&&(e=`_${e}`),r&&(e=`${e}-`),e}function c$(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new xT(o-1,s,o,s,new cM(rM.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new SM(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=_T(r);if(null==a)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;OT(i.doc,l)&&i.join(l);return t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=i.child(f).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),d=o.index(-1);if(!c.canReplace(d+(a?0:1),d+1,s.content.append(l?rM.empty:rM.from(i))))return!1;let u=o.pos,h=u+s.nodeSize;return r.step(new xT(u-(a?1:0),h+(l?1:0),u+1,h-1,new cM((a?rM.empty:rM.from(i.copy(rM.empty))).append(l?rM.empty:rM.from(i.copy(rM.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,o)))}}function d$(e){return String(e||"").toUpperCase()}function u$(){return function(e){const t=function(e){const t=new Map;if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return bt(e,"definition",(function(e){const n=d$(e.identifier);n&&!t.get(n)&&t.set(n,e)})),function(e){const n=d$(e);return t.get(n)}}(e);bt(e,(function(e,n,r){if("definition"===e.type&&void 0!==r&&"number"==typeof n)return r.children.splice(n,1),[wt,n];if("imageReference"===e.type||"linkReference"===e.type){const i=t(e.identifier);if(i&&r&&"number"==typeof n)return r.children[n]="imageReference"===e.type?{type:"image",url:i.url,title:i.title,alt:e.alt}:{type:"link",url:i.url,title:i.title,children:e.children},[wt,n]}}))}}function h$(e,t){var n;if(!(t.childCount>=1&&"hardbreak"===(null==(n=t.lastChild)?void 0:n.type.name)))return void e.next(t.content);const r=[];t.content.forEach(((e,n,i)=>{i!==t.childCount-1&&r.push(e)})),e.next(rM.fromArray(r))}function p$(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-commonmark",...t}}),e}const f$=CI("emphasis");p$(f$,{displayName:"Attr<emphasis>",group:"Emphasis"});const m$=wI("emphasis",(e=>({attrs:{marker:{default:e.get(VL).emphasis||"*"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e}],toDOM:t=>["em",e.get(f$.key)(t)],parseMarkdown:{match:e=>"emphasis"===e.type,runner:(e,t,n)=>{e.openMark(n,{marker:t.marker}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"emphasis"===e.type.name,runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}})));p$(m$.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"}),p$(m$.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const g$=pI("ToggleEmphasis",(e=>()=>aL(m$.type(e))));p$(g$,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const v$=fI((e=>NP(/(?:^|[^*])\*([^*]+)\*$/,m$.type(e),{updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}})));p$(v$,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const y$=fI((e=>NP(/(?:^|[^_])_([^_]+)_$/,m$.type(e),{updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}})));p$(y$,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const b$=xI("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:e=>{const t=e.get(TR);return()=>t.call(g$.key)}}});p$(b$.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"}),p$(b$.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const w$=CI("strong");p$(w$,{displayName:"Attr<strong>",group:"Strong"});const x$=wI("strong",(e=>({attrs:{marker:{default:e.get(VL).strong||"*"}},parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:e=>"bold"===e}],toDOM:t=>["strong",e.get(w$.key)(t)],parseMarkdown:{match:e=>"strong"===e.type,runner:(e,t,n)=>{e.openMark(n,{marker:t.marker}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"strong"===e.type.name,runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}})));p$(x$.mark,{displayName:"MarkSchema<strong>",group:"Strong"}),p$(x$.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const k$=pI("ToggleStrong",(e=>()=>aL(x$.type(e))));p$(k$,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const C$=fI((e=>NP(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,x$.type(e))));p$(C$,{displayName:"InputRule<strong>",group:"Strong"});const _$=xI("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:e=>{const t=e.get(TR);return()=>t.call(k$.key)}}});p$(_$.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"}),p$(_$.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const S$=CI("inlineCode");p$(S$,{displayName:"Attr<inlineCode>",group:"InlineCode"});const M$=wI("inlineCode",(e=>({priority:100,code:!0,inclusive:!1,parseDOM:[{tag:"code"}],toDOM:t=>["code",e.get(S$.key)(t)],parseMarkdown:{match:e=>"inlineCode"===e.type,runner:(e,t,n)=>{e.openMark(n),e.addText(t.value),e.closeMark(n)}},toMarkdown:{match:e=>"inlineCode"===e.type.name,runner:(e,t,n)=>{e.withMark(t,"inlineCode",n.text||"")}}})));p$(M$.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"}),p$(M$.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const T$=pI("ToggleInlineCode",(e=>()=>(t,n)=>{const{selection:r,tr:i}=t;if(r.empty)return!1;const{from:o,to:s}=r;return t.doc.rangeHasMark(o,s,M$.type(e))?(null==n||n(i.removeMark(o,s,M$.type(e))),!0):(Object.keys(t.schema.marks).filter((e=>e!==M$.type.name)).map((e=>t.schema.marks[e])).forEach((e=>{i.removeMark(o,s,e)})),null==n||n(i.addMark(o,s,M$.type(e).create())),!0)}));p$(T$,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const O$=fI((e=>NP(/(?:\`)([^\`]+)(?:\`)$/,M$.type(e))));p$(O$,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const D$=xI("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:e=>{const t=e.get(TR);return()=>t.call(T$.key)}}});p$(D$.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"}),p$(D$.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const E$=CI("link");p$(E$,{displayName:"Attr<link>",group:"Link"});const A$=wI("link",(e=>({attrs:{href:{},title:{default:null}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:t=>["a",{...e.get(E$.key)(t),...t.attrs}],parseMarkdown:{match:e=>"link"===e.type,runner:(e,t,n)=>{const r=t.url,i=t.title;e.openMark(n,{href:r,title:i}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"link"===e.type.name,runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}})));p$(A$.mark,{displayName:"MarkSchema<link>",group:"Link"});const N$=pI("ToggleLink",(e=>(t={})=>aL(A$.type(e),t)));p$(N$,{displayName:"Command<toggleLinkCommand>",group:"Link"});const P$=pI("UpdateLink",(e=>(t={})=>(n,r)=>{if(!r)return!1;let i,o=-1;const{selection:s}=n,{from:a,to:l}=s;if(n.doc.nodesBetween(a,a===l?l+1:l,((t,n)=>{if(A$.type(e).isInSet(t.marks))return i=t,o=n,!1})),!i)return!1;const c=i.marks.find((({type:t})=>t===A$.type(e)));if(!c)return!1;const d=o,u=o+i.nodeSize,{tr:h}=n,p=A$.type(e).create({...c.attrs,...t});return!!p&&(r(h.removeMark(d,u,c).addMark(d,u,p).setSelection(new KT(h.selection.$anchor)).scrollIntoView()),!0)}));p$(P$,{displayName:"Command<updateLinkCommand>",group:"Link"});const L$=gI("doc",(()=>({content:"block+",parseMarkdown:{match:({type:e})=>"root"===e,runner:(e,t,n)=>{e.injectRoot(t,n)}},toMarkdown:{match:e=>"doc"===e.type.name,runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}})));p$(L$,{displayName:"NodeSchema<doc>",group:"Doc"});const R$=kI("paragraph");p$(R$,{displayName:"Attr<paragraph>",group:"Paragraph"});const I$=bI("paragraph",(e=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:t=>["p",e.get(R$.key)(t),0],parseMarkdown:{match:e=>"paragraph"===e.type,runner:(e,t,n)=>{e.openNode(n),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>"paragraph"===e.type.name,runner:(e,t)=>{e.openNode("paragraph"),h$(e,t),e.closeNode()}}})));p$(I$.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"}),p$(I$.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const $$=pI("TurnIntoText",(e=>()=>sL(I$.type(e))));p$($$,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const z$=xI("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:e=>{const t=e.get(TR);return()=>t.call($$.key)}}});p$(z$.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"}),p$(z$.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const B$=Array(6).fill(0).map(((e,t)=>t+1));const F$=yI((function(e){return l$(e.textContent)}),"headingIdGenerator");p$(F$,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const V$=kI("heading");p$(V$,{displayName:"Attr<heading>",group:"Heading"});const j$=bI("heading",(e=>{const t=e.get(F$.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:""},level:{default:1}},parseDOM:B$.map((e=>({tag:`h${e}`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw WA(t);return{level:e,id:t.id}}}))),toDOM:n=>[`h${n.attrs.level}`,{...e.get(V$.key)(n),id:n.attrs.id||t(n)},0],parseMarkdown:{match:({type:e})=>"heading"===e,runner:(e,t,n)=>{const r=t.depth;e.openNode(n,{level:r}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"heading"===e.type.name,runner:(e,t)=>{e.openNode("heading",void 0,{depth:t.attrs.level}),h$(e,t),e.closeNode()}}}}));p$(j$.node,{displayName:"NodeSchema<heading>",group:"Heading"}),p$(j$.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const H$=fI((e=>lP(/^(?<hashes>#+)\s$/,j$.type(e),(t=>{var n,r;const i=(null==(r=null==(n=t.groups)?void 0:n.hashes)?void 0:r.length)||0,o=e.get(gR),{$from:s}=o.state.selection,a=s.node();if("heading"===a.type.name){let e=Number(a.attrs.level)+Number(i);return e>6&&(e=6),{level:e}}return{level:i}}))));p$(H$,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const W$=pI("WrapInHeading",(e=>t=>{var n;return null!==(n=t)&&void 0!==n||(t=1),t<1?sL(I$.type(e)):sL(j$.type(e),{level:t})}));p$(W$,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const q$=pI("DowngradeHeading",(e=>()=>(t,n,r)=>{const{$from:i}=t.selection,o=i.node();if(o.type!==j$.type(e)||!t.selection.empty||0!==i.parentOffset)return!1;const s=o.attrs.level-1;return s?(null==n||n(t.tr.setNodeMarkup(t.selection.$from.before(),void 0,{...o.attrs,level:s})),!0):sL(I$.type(e))(t,n,r)}));p$(q$,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const U$=xI("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:e=>{const t=e.get(TR);return()=>t.call(W$.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:e=>{const t=e.get(TR);return()=>t.call(q$.key)}}});p$(U$.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"}),p$(U$.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Y$=kI("blockquote");p$(Y$,{displayName:"Attr<blockquote>",group:"Blockquote"});const K$=bI("blockquote",(e=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:t=>["blockquote",e.get(Y$.key)(t),0],parseMarkdown:{match:({type:e})=>"blockquote"===e,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},toMarkdown:{match:e=>"blockquote"===e.type.name,runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}})));p$(K$.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"}),p$(K$.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const J$=fI((e=>aP(/^\s*>\s$/,K$.type(e))));p$(J$,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const G$=pI("WrapInBlockquote",(e=>()=>oL(K$.type(e))));p$(G$,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const X$=xI("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:e=>{const t=e.get(TR);return()=>t.call(G$.key)}}});p$(X$.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"}),p$(X$.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const Z$=kI("codeBlock",(()=>({pre:{},code:{}})));p$(Z$,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Q$=bI("code_block",(e=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{language:e.dataset.language}}}],toDOM:t=>{const n=e.get(Z$.key)(t);return["pre",{...n.pre,"data-language":t.attrs.language},["code",n.code,0]]},parseMarkdown:{match:({type:e})=>"code"===e,runner:(e,t,n)=>{const r=t.lang,i=t.value;e.openNode(n,{language:r}),i&&e.addText(i),e.closeNode()}},toMarkdown:{match:e=>"code_block"===e.type.name,runner:(e,t)=>{var n;e.addNode("code",void 0,(null==(n=t.content.firstChild)?void 0:n.text)||"",{lang:t.attrs.language})}}})));p$(Q$.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"}),p$(Q$.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const ez=fI((e=>lP(/^```(?<language>[a-z]*)?[\s\n]$/,Q$.type(e),(e=>{var t,n;return{language:null!==(t=null==(n=e.groups)?void 0:n.language)&&void 0!==t?t:""}}))));p$(ez,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const tz=pI("CreateCodeBlock",(e=>(t="")=>sL(Q$.type(e),{language:t})));p$(tz,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const nz=pI("UpdateCodeBlockLanguage",(()=>({pos:e,language:t}={pos:-1,language:""})=>(n,r)=>e>=0&&(null==r||r(n.tr.setNodeAttribute(e,"language",t)),!0)));p$(nz,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const rz=xI("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:e=>{const t=e.get(TR);return()=>t.call(tz.key)}}});p$(rz.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"}),p$(rz.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const iz=kI("image");p$(iz,{displayName:"Attr<image>",group:"Image"});const oz=bI("image",(e=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:t=>["img",{...e.get(iz.key)(t),...t.attrs}],parseMarkdown:{match:({type:e})=>"image"===e,runner:(e,t,n)=>{const r=t.url,i=t.alt,o=t.title;e.addNode(n,{src:r,alt:i,title:o})}},toMarkdown:{match:e=>"image"===e.type.name,runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}})));p$(oz.node,{displayName:"NodeSchema<image>",group:"Image"}),p$(oz.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const sz=pI("InsertImage",(e=>(t={})=>(n,r)=>{if(!r)return!0;const{src:i="",alt:o="",title:s=""}=t,a=oz.type(e).create({src:i,alt:o,title:s});return a&&r(n.tr.replaceSelectionWith(a).scrollIntoView()),!0}));p$(sz,{displayName:"Command<insertImageCommand>",group:"Image"});const az=pI("UpdateImage",(e=>(t={})=>(n,r)=>{const i=qP(n.selection,oz.type(e));if(!i)return!1;const{node:o,pos:s}=i,a={...o.attrs},{src:l,alt:c,title:d}=t;return void 0!==l&&(a.src=l),void 0!==c&&(a.alt=c),void 0!==d&&(a.title=d),null==r||r(n.tr.setNodeMarkup(s,void 0,a).scrollIntoView()),!0}));p$(az,{displayName:"Command<updateImageCommand>",group:"Image"});const lz=fI((e=>new oP(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,((t,n,r,i)=>{const[o,s,a="",l]=n;return o?t.tr.replaceWith(r,i,oz.type(e).create({src:a,alt:s,title:l})):null}))));p$(lz,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const cz=kI("hardbreak",(e=>({"data-is-inline":e.attrs.isInline})));p$(cz,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const dz=bI("hardbreak",(e=>({inline:!0,group:"inline",attrs:{isInline:{default:!1}},selectable:!1,parseDOM:[{tag:"br"}],toDOM:t=>["br",e.get(cz.key)(t)],parseMarkdown:{match:({type:e})=>"break"===e,runner:(e,t,n)=>{var r;e.addNode(n,{isInline:!(null==(r=t.data)||!r.isInline)})}},leafText:()=>"\n",toMarkdown:{match:e=>"hardbreak"===e.type.name,runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,"\n"):e.addNode("break")}}})));p$(dz.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"}),p$(dz.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const uz=pI("InsertHardbreak",(e=>()=>(t,n)=>{var r;const{selection:i,tr:o}=t;if(!(i instanceof KT))return!1;if(i.empty){const e=i.$from.node();if(e.childCount>0&&"hardbreak"===(null==(r=e.lastChild)?void 0:r.type.name))return null==n||n(o.replaceRangeWith(i.to-1,i.to,t.schema.node("paragraph")).setSelection(WT.near(o.doc.resolve(i.to))).scrollIntoView()),!0}return null==n||n(o.setMeta("hardbreak",!0).replaceSelectionWith(dz.type(e).create()).scrollIntoView()),!0}));p$(uz,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const hz=xI("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:e=>{const t=e.get(TR);return()=>t.call(uz.key)}}});p$(hz.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"}),p$(hz.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const pz=kI("hr");p$(pz,{displayName:"Attr<hr>",group:"Hr"});const fz=bI("hr",(e=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:t=>["hr",e.get(pz.key)(t)],parseMarkdown:{match:({type:e})=>"thematicBreak"===e,runner:(e,t,n)=>{e.addNode(n)}},toMarkdown:{match:e=>"hr"===e.type.name,runner:e=>{e.addNode("thematicBreak")}}})));p$(fz.node,{displayName:"NodeSchema<hr>",group:"Hr"}),p$(fz.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const mz=fI((e=>new oP(/^(?:---|___\s|\*\*\*\s)$/,((t,n,r,i)=>{const{tr:o}=t;return n[0]&&o.replaceWith(r-1,i,fz.type(e).create()),o}))));p$(mz,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const gz=pI("InsertHr",(e=>()=>(t,n)=>{if(!n)return!0;const r=I$.node.type(e).create(),{tr:i,selection:o}=t,{from:s}=o,a=fz.type(e).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(s,r),c=WT.findFrom(l.doc.resolve(s),1,!0);return c&&n(l.setSelection(c).scrollIntoView()),!0}));p$(gz,{displayName:"Command<insertHrCommand>",group:"Hr"});const vz=kI("bulletList");p$(vz,{displayName:"Attr<bulletList>",group:"BulletList"});const yz=bI("bullet_list",(e=>({content:"listItem+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{spread:e.dataset.spread}}}],toDOM:t=>["ul",{...e.get(vz.key)(t),"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!t,runner:(e,t,n)=>{const r=null!=t.spread?`${t.spread}`:"false";e.openNode(n,{spread:r}).next(t.children).closeNode()}},toMarkdown:{match:e=>"bullet_list"===e.type.name,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:"true"===t.attrs.spread}).next(t.content).closeNode()}}})));p$(yz.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"}),p$(yz.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const bz=fI((e=>aP(/^\s*([-+*])\s$/,yz.type(e))));p$(bz,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const wz=pI("WrapInBulletList",(e=>()=>oL(yz.type(e))));p$(wz,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const xz=xI("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:e=>{const t=e.get(TR);return()=>t.call(wz.key)}}});p$(xz.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"}),p$(xz.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const kz=kI("orderedList");p$(kz,{displayName:"Attr<orderedList>",group:"OrderedList"});const Cz=bI("ordered_list",(e=>({content:"listItem+",group:"block",attrs:{order:{default:1},spread:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:t=>["ol",{...e.get(kz.key)(t),...1===t.attrs.order?{}:t.attrs.order,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!!t,runner:(e,t,n)=>{const r=null!=t.spread?`${t.spread}`:"true";e.openNode(n,{spread:r}).next(t.children).closeNode()}},toMarkdown:{match:e=>"ordered_list"===e.type.name,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:"true"===t.attrs.spread}),e.next(t.content),e.closeNode()}}})));p$(Cz.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"}),p$(Cz.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const _z=fI((e=>aP(/^\s*(\d+)\.\s$/,Cz.type(e),(e=>({order:Number(e[1])})),((e,t)=>t.childCount+t.attrs.order===Number(e[1])))));p$(_z,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const Sz=pI("WrapInOrderedList",(e=>()=>oL(Cz.type(e))));p$(Sz,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const Mz=xI("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:e=>{const t=e.get(TR);return()=>t.call(Sz.key)}}});p$(Mz.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"}),p$(Mz.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const Tz=kI("listItem");p$(Tz,{displayName:"Attr<listItem>",group:"ListItem"});const Oz=bI("list_item",(e=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•"},listType:{default:"bullet"},spread:{default:"true"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{label:e.dataset.label,listType:e.dataset["list-type"],spread:e.dataset.spread}}}],toDOM:t=>["li",{...e.get(Tz.key)(t),"data-label":t.attrs.label,"data-list-type":t.attrs.listType,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e})=>"listItem"===e,runner:(e,t,n)=>{const r=null!=t.label?`${t.label}.`:"•",i=null!=t.label?"ordered":"bullet",o=null!=t.spread?`${t.spread}`:"true";e.openNode(n,{label:r,listType:i,spread:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"list_item"===e.type.name,runner:(e,t)=>{e.openNode("listItem",void 0,{spread:"true"===t.attrs.spread}),e.next(t.content),e.closeNode()}}})));p$(Oz.node,{displayName:"NodeSchema<listItem>",group:"ListItem"}),p$(Oz.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const Dz=pI("SinkListItem",(e=>()=>{return t=Oz.type(e),function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let r=l.lastChild&&l.lastChild.type==a.type,i=rM.from(r?t.create():null),s=new cM(rM.from(t.create(null,rM.from(a.type.create(null,i)))),r?3:1,0),c=o.start,d=o.end;n(e.tr.step(new xT(c-(r?3:1),d,c,d,s,1,!0)).scrollIntoView())}return!0};var t}));p$(Dz,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const Ez=pI("SplitListItem",(e=>()=>c$(Oz.type(e))));p$(Ez,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const Az=pI("SplitListItem",(e=>()=>{return t=Oz.type(e),function(e,r){let{$from:i,$to:o,node:s}=e.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(o))return!1;let a=i.node(-1);if(a.type!=t)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(3==i.depth||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let n=rM.empty,o=i.index(-1)?1:i.index(-2)?2:3;for(let e=i.depth-o;e>=i.depth-3;e--)n=rM.from(i.node(e).copy(n));let s=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;n=n.append(rM.from(t.createAndFill()));let a=i.before(i.depth-(o-1)),l=e.tr.replace(a,i.after(-s),new cM(n,4-o,0)),c=-1;l.doc.nodesBetween(a,l.doc.content.size,((e,t)=>{if(c>-1)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)})),c>-1&&l.setSelection(WT.near(l.doc.resolve(c))),r(l.scrollIntoView())}return!0}let l=o.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=e.tr.delete(i.pos,o.pos),d=l?[n?{type:t,attrs:n}:null,{type:l}]:void 0;return!!TT(c.doc,i.pos,2,d)&&(r&&r(c.split(i.pos,2,d).scrollIntoView()),!0)};var t,n}));p$(Az,{displayName:"Command<splitListItemCommand>",group:"ListItem"});const Nz=pI("LiftFirstListItem",(e=>()=>function(e){return(t,n,r)=>{const{selection:i}=t;if(!(i instanceof KT))return!1;const{empty:o,$from:s}=i;if(!o||0!==s.parentOffset)return!1;const a=s.node(-1);return!(a.type!==Oz.type(e)||a.firstChild!==s.node()||s.node(-2).childCount>1)&&c$(Oz.type(e))(t,n,r)}}(e)));p$(Nz,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const Pz=xI("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:e=>{const t=e.get(TR);return()=>t.call(Az.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:e=>{const t=e.get(TR);return()=>t.call(Dz.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:e=>{const t=e.get(TR);return()=>t.call(Ez.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:e=>{const t=e.get(TR);return()=>t.call(Nz.key)}}});p$(Pz.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"}),p$(Pz.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const Lz=gI("text",(()=>({group:"inline",parseMarkdown:{match:({type:e})=>"text"===e,runner:(e,t)=>{e.addText(t.value)}},toMarkdown:{match:e=>"text"===e.type.name,runner:(e,t)=>{e.addNode("text",void 0,t.text)}}})));p$(Lz,{displayName:"NodeSchema<text>",group:"Text"});const Rz=kI("html");p$(Rz,{displayName:"Attr<html>",group:"Html"});const Iz=bI("html",(e=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:""}},toDOM:t=>{const n=document.createElement("span"),r={...e.get(Rz.key)(t),"data-value":t.attrs.value,"data-type":"html"};return n.textContent=t.attrs.value,["span",r,t.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>{var t;return{value:null!==(t=e.dataset.value)&&void 0!==t?t:""}}}],parseMarkdown:{match:({type:e})=>"html"===e,runner:(e,t,n)=>{e.addNode(n,{value:t.value})}},toMarkdown:{match:e=>"html"===e.type.name,runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}})));p$(Iz.node,{displayName:"NodeSchema<html>",group:"Html"}),p$(Iz.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const $z=[L$,R$,I$,F$,V$,j$,cz,dz,Y$,K$,Z$,Q$,pz,fz,iz,oz,vz,yz,kz,Cz,Tz,Oz,f$,m$,w$,x$,S$,M$,E$,A$,Rz,Iz,Lz].flat(),zz=[J$,bz,_z,ez,mz,H$].flat(),Bz=[v$,y$,O$,C$],Fz=[$$,G$,W$,q$,tz,uz,gz,sz,az,Sz,wz,Dz,Az,Ez,Nz,g$,T$,k$,N$,P$],Vz=[X$,rz,hz,U$,Pz,Mz,xz,z$,b$,D$,_$].flat(),jz=_I("remarkAddOrderInList",(()=>()=>e=>{bt(e,"list",(e=>{if(e.ordered){var t;const n=null!==(t=e.start)&&void 0!==t?t:1;e.children.forEach(((e,t)=>{e.label=t+n}))}}))}));p$(jz.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"}),p$(jz.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const Hz=_I("remarkLineBreak",(()=>()=>e=>{const t=/[\t ]*(?:\r?\n|\r)/g;bt(e,"text",((e,n,r)=>{if(!e.value||"string"!=typeof e.value)return;const i=[];let o=0;t.lastIndex=0;let s=t.exec(e.value);for(;s;){const n=s.index;o!==n&&i.push({type:"text",value:e.value.slice(o,n)}),i.push({type:"break",data:{isInline:!0}}),o=n+s[0].length,s=t.exec(e.value)}return i.length>0&&r&&"number"==typeof n?(o<e.value.length&&i.push({type:"text",value:e.value.slice(o)}),r.children.splice(n,1,...i),n+i.length):void 0}))}));p$(Hz.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"}),p$(Hz.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const Wz=_I("remarkInlineLink",(()=>u$));p$(Wz.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"}),p$(Wz.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const qz=_I("remarkHTMLTransformer",(()=>()=>e=>{!function(e,t){(function e(n,r,i){if((e=>!!e.children)(n)){const t=[];for(let r=0,i=n.children.length;r<i;r++){const i=n.children[r];if(i){const o=e(i,r,n);if(o)for(let e=0,n=o.length;e<n;e++){const n=o[e];n&&t.push(n)}}}n.children=t}return t(n,r,i)})(e,0,null)[0]}(e,((e,t,n)=>(e=>"html"===e.type)(e)?("root"===(null==n?void 0:n.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e]))}));p$(qz.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"}),p$(qz.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const Uz=_I("remarkMarker",(()=>()=>(e,t)=>{bt(e,(e=>["strong","emphasis"].includes(e.type)),(e=>{e.marker=(e=>t.value.charAt(e.position.start.offset))(e)}))}));p$(Uz.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"}),p$(Uz.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const Yz=vI((()=>{let e=!1;const t=new hO("MILKDOWN_INLINE_NODES_CURSOR"),n=new cO({key:t,state:{init:()=>!1,apply(e){if(!e.selection.empty)return!1;const t=e.selection.$from,n=t.nodeBefore,r=t.nodeAfter;return!(!(n&&r&&n.isInline&&!n.isText&&r.isInline)||r.isText)}},props:{handleDOMEvents:{compositionend:(t,r)=>!!e&&(e=!1,requestAnimationFrame((()=>{if(n.getState(t.state)){const e=t.state.selection.from;r.preventDefault(),t.dispatch(t.state.tr.insertText(r.data||"",e))}})),!0),compositionstart:t=>(n.getState(t.state)&&(e=!0),!1),beforeinput:(t,r)=>{if(n.getState(t.state)&&r instanceof InputEvent&&r.data&&!e){const e=t.state.selection.from;return r.preventDefault(),t.dispatch(t.state.tr.insertText(r.data||"",e)),!0}return!1}},decorations(e){if(n.getState(e)){const t=e.selection.$from.pos,n=document.createElement("span"),r=UE.widget(t,n,{side:-1}),i=document.createElement("span"),o=UE.widget(t,i);return setTimeout((()=>{n.contentEditable="true",i.contentEditable="true"})),JE.create(e.doc,[r,o])}return JE.empty}}});return n}));p$(Yz,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const Kz=vI((e=>new cO({key:new hO("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(t,n,r)=>{if(!t.length)return;const[i]=t;if(!i)return;const[o]=i.steps;if(i.getMeta("hardbreak")){if(!(o instanceof wT))return;const{from:t}=o;return r.tr.setNodeMarkup(t,dz.type(e),void 0,[])}if(o instanceof gT){let t=r.tr;const{from:n,to:i}=o;return r.doc.nodesBetween(n,i,((n,r)=>{n.type===dz.type(e)&&(t=t.setNodeMarkup(r,dz.type(e),void 0,[]))})),t}}})));p$(Kz,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const Jz=yI(["table","code_block"],"hardbreakFilterNodes");p$(Jz,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const Gz=vI((e=>{const t=e.get(Jz.key);return new cO({key:new hO("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(e,n)=>{const r=e.getMeta("hardbreak"),[i]=e.steps;if(r&&i){const{from:e}=i,r=n.doc.resolve(e);let o=r.depth,s=!0;for(;o>0;)t.includes(r.node(o).type.name)&&(s=!1),o--;return s}return!0}})}));p$(Gz,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const Xz=vI((e=>{const t=new hO("MILKDOWN_HEADING_ID"),n=n=>{if(n.composing||!n.editable)return;const r=e.get(F$.key),i=n.state.tr.setMeta("addToHistory",!1);let o=!1;n.state.doc.descendants(((n,s)=>{if(n.type===j$.type(e)){if(0===n.textContent.trim().length)return;const e=n.attrs,a=r(n);e.id!==a&&(o=!0,i.setMeta(t,!0).setNodeMarkup(s,void 0,{...e,id:a}))}})),o&&n.dispatch(i)};return new cO({key:t,view:e=>(n(e),{update:e=>{n(e)}})})}));p$(Xz,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const Zz=vI((e=>{const t=t=>{if(t.composing||!t.editable)return;const n=Cz.type(e),r=yz.type(e),i=Oz.type(e),o=t.state,s=(e,t)=>{let n=!1;const r=`${t+1}.`;return e.label!==r&&(e.label=r,n=!0),n};let a=o.tr,l=!1;o.doc.descendants(((e,t,o,c)=>{if(e.type===r){const r=e.maybeChild(0);(null==r?void 0:r.type)===i&&"ordered"===r.attrs.listType&&(l=!0,a.setNodeMarkup(t,n,{spread:"true"}),e.descendants(((e,t,n,r)=>{if(e.type===i){const n={...e.attrs};s(n,r)&&(a=a.setNodeMarkup(t,void 0,n))}return!1})))}else if(e.type===i&&(null==o?void 0:o.type)===n){const n={...e.attrs};let r=!1;"ordered"!==n.listType&&(n.listType="ordered",r=!0),(null==o?void 0:o.maybeChild(0))&&(r=s(n,c)),r&&(a=a.setNodeMarkup(t,void 0,n),l=!0)}})),l&&t.dispatch(a.setMeta("addToHistory",!1))};return new cO({key:new hO("MILKDOWN_KEEP_LIST_ORDER"),view:e=>(t(e),{update:e=>{t(e)}})})}));p$(Zz,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Qz=[$z,zz,Bz,Fz,Vz,[Kz,Jz,Gz,Yz,jz,Wz,Hz,qz,Uz,Xz,Zz].flat()].flat();var eB,tB;if("undefined"!=typeof WeakMap){let e=new WeakMap;eB=t=>e.get(t),tB=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;eB=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},tB=(r,i)=>(n==t&&(n=0),e[n++]=r,e[n++]=i)}var nB=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let o=r+1,s=i+1;for(let e=1;o<this.width&&this.map[t+e]==n;e++)o++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:o,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?0==o:s==this.height)?null:this.map[r+this.width*(n<0?o-1:s)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:o}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;for(;n<r&&this.map[n]<i;)n++;return n==r?o-1:this.map[n]}i=o}}static get(e){return eB(e)||tB(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let o=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const i=n.child(e);t+i.attrs.rowspan>r&&(o+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){const t=i.child(e);o+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,r=[];let i=0,o=null;const s=[];for(let c=0,d=t*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const a=e.child(c);d++;for(let e=0;;e++){for(;i<r.length&&0!=r[i];)i++;if(e==a.childCount)break;const l=a.child(e),{colspan:u,rowspan:h,colwidth:p}=l.attrs;for(let e=0;e<h;e++){if(e+c>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:d,n:h-e});break}const a=i+e*t;for(let e=0;e<u;e++){0==r[a+e]?r[a+e]=d:(o||(o=[])).push({type:"collision",row:c,pos:d,n:u-e});const n=p&&p[e];if(n){const r=(a+e)%t*2,i=s[r];null==i||i!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):i==n&&s[r+1]++}}}i+=u,d+=l.nodeSize}const l=(c+1)*t;let u=0;for(;i<l;)0==r[i++]&&u++;u&&(o||(o=[])).push({type:"missing",row:c,n:u}),d++}const a=new nB(t,n,r,o);let l=!1;for(let c=0;!l&&c<s.length;c+=2)null!=s[c]&&s[c+1]<n&&(l=!0);l&&function(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const o=e.map[i];if(r[o])continue;r[o]=!0;const s=n.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=s.attrs;for(let n=0;n<l.colspan;n++){const r=t[2*((i+n)%e.width)];null==r||l.colwidth&&l.colwidth[n]==r||((a||(a=rB(l)))[n]=r)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}(a,s,e);return a}(e))}};function rB(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function iB(e,t){if("string"==typeof e)return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((e=>Number(e))):null,i=Number(e.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const s in t){const n=t[s].getFromDOM,r=n&&n(e);null!=r&&(o[s]=r)}return o}function oB(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const i=t[r].setDOMAttr;i&&i(e.attrs[r],n)}return n}function sB(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var aB=new hO("selectingCells");function lB(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function cB(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function dB(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=lB(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function uB(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function hB(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function pB(e,t,n){const r=e.node(-1),i=nB.get(r),o=e.start(-1),s=i.nextCell(e.pos-o,t,n);return null==s?null:e.node(0).resolve(o+s)}function fB(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((e=>e>0))||(r.colwidth=null)),r}function mB(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}var gB=class e extends WT{constructor(e,t=e){const n=e.node(-1),r=nB.get(n),i=e.start(-1),o=r.rectBetween(e.pos-i,t.pos-i),s=e.node(0),a=r.cellsInRect(o).filter((e=>e!=t.pos-i));a.unshift(t.pos-i);const l=a.map((e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=i+e+1;return new qT(s.resolve(r),s.resolve(r+t.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(uB(r)&&uB(i)&&hB(r,i)){const t=this.$anchorCell.node(-1)!=r.node(-1);return t&&this.isRowSelection()?e.rowSelection(r,i):t&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return KT.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=nB.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[];for(let a=r.top;a<r.bottom;a++){const n=[];for(let o=a*t.width+r.left,s=r.left;s<r.right;s++,o++){const s=t.map[o];if(i[s])continue;i[s]=!0;const a=t.findCell(s);let l=e.nodeAt(s);if(!l)throw RangeError(`No cell with offset ${s} found`);const c=r.left-a.left,d=a.right-r.right;if(c>0||d>0){let e=l.attrs;if(c>0&&(e=fB(e,0,c)),d>0&&(e=fB(e,e.colspan-d,d)),a.left<r.left){if(l=l.type.createAndFill(e),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<r.top||a.bottom>r.bottom){const e={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}n.push(l)}o.push(e.child(a).copy(rM.from(n)))}const s=this.isColSelection()&&this.isRowSelection()?e:o;return new cM(rM.from(s),1,1)}replace(e,t=cM.empty){const n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){const{$from:i,$to:s}=r[o],a=e.mapping.slice(n);e.replace(a.map(i.pos),a.map(s.pos),o?cM.empty:t)}const i=WT.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new cM(rM.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=nB.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let o=0;o<i.length;o++)e(t.nodeAt(i[o]),r+i[o])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=nB.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(n=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(t=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new e(t,n)}isRowSelection(){const e=this.$anchorCell.node(-1),t=nB.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);if(Math.min(r,i)>0)return!1;const o=r+this.$anchorCell.nodeAfter.attrs.colspan,s=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,s)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=nB.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(n=l.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(t=l.resolve(o+i.map[i.width*(s.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new vB(this.$anchorCell.pos,this.$headCell.pos)}};gB.prototype.visible=!1,WT.jsonID("cell",gB);var vB=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&hB(t,n)?new gB(t,n):WT.near(n,1)}};function yB(e){if(!(e.selection instanceof gB))return null;const t=[];return e.selection.forEachCell(((e,n)=>{t.push(UE.node(n,n+e.nodeSize,{class:"selectedCell"}))})),JE.create(e.doc,t)}var bB=new hO("fix-tables");function wB(e,t,n,r){const i=e.childCount,o=t.childCount;e:for(let s=0,a=0;s<o;s++){const o=t.child(s);for(let t=a,r=Math.min(i,s+3);t<r;t++)if(e.child(t)==o){a=t+1,n+=o.nodeSize;continue e}r(o,n),a<i&&e.child(a).sameMarkup(o)?wB(e.child(a),o,n+1,r):o.nodesBetween(0,o.content.size,r,n+1),n+=o.nodeSize}}function xB(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){const i=nB.get(t);if(!i.problems)return r;r||(r=e.tr);const o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){const e=i.problems[l];if("collision"==e.type){const i=t.nodeAt(e.pos);if(!i)continue;const s=i.attrs;for(let t=0;t<s.rowspan;t++)o[e.row+t]+=e.n;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,fB(s,s.colspan-e.n,e.n))}else if("missing"==e.type)o[e.row]+=e.n;else if("overlong_rowspan"==e.type){const i=t.nodeAt(e.pos);if(!i)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...i.attrs,rowspan:i.attrs.rowspan-e.n})}else if("colwidth mismatch"==e.type){const i=t.nodeAt(e.pos);if(!i)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...i.attrs,colwidth:e.colwidth})}}let s,a;for(let l=0;l<o.length;l++)o[l]&&(null==s&&(s=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const n=t.child(l),i=c+n.nodeSize,d=o[l];if(d>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const o=[];for(let n=0;n<d;n++){const n=sB(e.schema)[t].createAndFill();n&&o.push(n)}const u=0!=l&&s!=l-1||a!=l?i-1:c+1;r.insert(r.mapping.map(u),o)}c=i}return r.setMeta(bB,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&wB(t.doc,e.doc,0,r):e.doc.descendants(r),n}function kB(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;const i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if("row"==o)for(let l=0;l<t.childCount;l++){let e=t.child(l).content;const i=l?0:Math.max(0,n-1),o=l<t.childCount-1?0:Math.max(0,r-1);(i||o)&&(e=CB(sB(s).row,new cM(e,i,o)).content),a.push(e)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(n||r?CB(sB(s).row,new cM(t,n,r)).content:t)}return function(e,t){const n=[];for(let i=0;i<t.length;i++){const e=t[i];for(let t=e.childCount-1;t>=0;t--){const{rowspan:r,colspan:o}=e.child(t).attrs;for(let e=i;e<i+r;e++)n[e]=(n[e]||0)+o}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(rM.empty),n[i]<r){const o=sB(e).cell.createAndFill(),s=[];for(let e=n[i];e<r;e++)s.push(o);t[i]=t[i].append(rM.from(s))}return{height:t.length,width:r,rows:t}}(s,a)}function CB(e,t){const n=e.createAndFill();return new jT(n).replace(0,n.content.size,t).doc}function _B(e,t,n,r,i,o,s,a){if(0==s||s==t.height)return!1;let l=!1;for(let c=i;c<o;c++){const i=s*t.width+c,o=t.map[i];if(t.map[i-t.width]==o){l=!0;const i=n.nodeAt(o),{top:d,left:u}=t.findCell(o);e.setNodeMarkup(e.mapping.slice(a).map(o+r),null,{...i.attrs,rowspan:s-d}),e.insert(e.mapping.slice(a).map(t.positionAt(s,u,n)),i.type.createAndFill({...i.attrs,rowspan:d+i.attrs.rowspan-s})),c+=i.attrs.colspan-1}}return l}function SB(e,t,n,r,i,o,s,a){if(0==s||s==t.width)return!1;let l=!1;for(let c=i;c<o;c++){const i=c*t.width+s,o=t.map[i];if(t.map[i-1]==o){l=!0;const i=n.nodeAt(o),d=t.colCount(o),u=e.mapping.slice(a).map(o+r);e.setNodeMarkup(u,null,fB(i.attrs,s-d,i.attrs.colspan-(s-d))),e.insert(u+i.nodeSize,i.type.createAndFill(fB(i.attrs,0,s-d))),c+=i.attrs.rowspan-1}}return l}function MB(e,t,n,r,i){let o=n?e.doc.nodeAt(n-1):e.doc;if(!o)throw new Error("No table found");let s=nB.get(o);const{top:a,left:l}=r,c=l+i.width,d=a+i.height,u=e.tr;let h=0;function p(){if(o=n?u.doc.nodeAt(n-1):u.doc,!o)throw new Error("No table found");s=nB.get(o),h=u.mapping.maps.length}(function(e,t,n,r,i,o,s){const a=sB(e.doc.type.schema);let l,c;if(i>t.width)for(let d=0,u=0;d<t.height;d++){const o=n.child(d);u+=o.nodeSize;const h=[];let p;p=null==o.lastChild||o.lastChild.type==a.cell?l||(l=a.cell.createAndFill()):c||(c=a.header_cell.createAndFill());for(let e=t.width;e<i;e++)h.push(p);e.insert(e.mapping.slice(s).map(u-1+r),h)}if(o>t.height){const d=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,i);e++){const i=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==a.header_cell;d.push(i?c||(c=a.header_cell.createAndFill()):l||(l=a.cell.createAndFill()))}const u=a.row.create(null,rM.from(d)),h=[];for(let e=t.height;e<o;e++)h.push(u);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),h)}return!(!l&&!c)})(u,s,o,n,c,d,h)&&p(),_B(u,s,o,n,l,c,a,h)&&p(),_B(u,s,o,n,l,c,d,h)&&p(),SB(u,s,o,n,a,d,l,h)&&p(),SB(u,s,o,n,a,d,c,h)&&p();for(let f=a;f<d;f++){const e=s.positionAt(f,l,o),t=s.positionAt(f,c,o);u.replace(u.mapping.slice(h).map(e+n),u.mapping.slice(h).map(t+n),new cM(i.rows[f-a],0,0))}p(),u.setSelection(new gB(u.doc.resolve(n+s.positionAt(a,l,o)),u.doc.resolve(n+s.positionAt(d-1,c-1,o)))),t(u)}var TB=_L({ArrowLeft:DB("horiz",-1),ArrowRight:DB("horiz",1),ArrowUp:DB("vert",-1),ArrowDown:DB("vert",1),"Shift-ArrowLeft":EB("horiz",-1),"Shift-ArrowRight":EB("horiz",1),"Shift-ArrowUp":EB("vert",-1),"Shift-ArrowDown":EB("vert",1),Backspace:AB,"Mod-Backspace":AB,Delete:AB,"Mod-Delete":AB});function OB(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function DB(e,t){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof gB)return OB(n,r,WT.near(o.$headCell,t));if("horiz"!=e&&!o.empty)return!1;const s=RB(i,e,t);if(null==s)return!1;if("horiz"==e)return OB(n,r,WT.near(n.doc.resolve(o.head+t),t));{const i=n.doc.resolve(s),o=pB(i,e,t);let a;return a=o?WT.near(o,1):t<0?WT.near(n.doc.resolve(i.before(-1)),-1):WT.near(n.doc.resolve(i.after(-1)),1),OB(n,r,a)}}}function EB(e,t){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let s;if(o instanceof gB)s=o;else{const r=RB(i,e,t);if(null==r)return!1;s=new gB(n.doc.resolve(r))}const a=pB(s.$headCell,e,t);return!!a&&OB(n,r,new gB(s.$anchorCell,a))}}function AB(e,t){const n=e.selection;if(!(n instanceof gB))return!1;if(t){const r=e.tr,i=sB(e.schema).cell.createAndFill().content;n.forEachCell(((e,t)=>{e.content.eq(i)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new cM(i,0,0))})),r.docChanged&&t(r)}return!0}function NB(e,t){const n=lB(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new gB(n))),!0)}function PB(e,t,n){if(!cB(e.state))return!1;let r=kB(n);const i=e.state.selection;if(i instanceof gB){r||(r={width:1,height:1,rows:[rM.from(CB(sB(e.state.schema).cell,n))]});const t=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),s=nB.get(t).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=function({width:e,height:t,rows:n},r,i){if(e!=r){const t=[],i=[];for(let e=0;e<n.length;e++){const o=n[e],s=[];for(let n=t[e]||0,i=0;n<r;i++){let a=o.child(i%o.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(fB(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+a.attrs.colspan}i.push(rM.from(s))}n=i,e=r}if(t!=i){const e=[];for(let r=0,o=0;r<i;r++,o++){const s=[],a=n[o%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);r+t.attrs.rowspan>i&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,i-t.attrs.rowspan)},t.content)),s.push(t)}e.push(rM.from(s))}n=e,t=i}return{width:e,height:t,rows:n}}(r,s.right-s.left,s.bottom-s.top),MB(e.state,e.dispatch,o,s,r),!0}if(r){const t=dB(e.state),n=t.start(-1);return MB(e.state,e.dispatch,n,nB.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function LB(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=IB(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof gB)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(i=lB(e.state.selection.$anchor))&&(null==(n=$B(e,t))?void 0:n.pos)!=i.pos)o(i,t),t.preventDefault();else if(!r)return;function o(t,n){let r=$B(e,n);const i=null==aB.getState(e.state);if(!r||!hB(t,r)){if(!i)return;r=t}const o=new gB(t,r);if(i||!e.state.selection.eq(o)){const n=e.state.tr.setSelection(o);i&&n.setMeta(aB,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),null!=aB.getState(e.state)&&e.dispatch(e.state.tr.setMeta(aB,-1))}function a(n){const i=n,a=aB.getState(e.state);let l;if(null!=a)l=e.state.doc.resolve(a);else if(IB(e,i.target)!=r&&(l=$B(e,t),!l))return s();l&&o(l,i)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function RB(e,t,n){if(!(e.state.selection instanceof KT))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){const o=r.before(i),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?o:null}}return null}function IB(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function $B(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?lB(e.state.doc.resolve(n.pos)):null}var zB=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),BB(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,BB(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function BB(e,t,n,r,i,o){var s;let a=0,l=!0,c=t.firstChild;const d=e.firstChild;if(d){for(let e=0,n=0;e<d.childCount;e++){const{colspan:s,colwidth:u}=d.child(e).attrs;for(let e=0;e<s;e++,n++){const s=i==n?o:u&&u[e],d=s?s+"px":"";a+=s||r,s||(l=!1),c?(c.style.width!=d&&(c.style.width=d),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=d}}for(;c;){const e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var FB=new hO("tableColumnResizing");function VB({handleWidth:e=5,cellMinWidth:t=25,View:n=zB,lastColumnResizable:r=!0}={}){const i=new cO({key:FB,state:{init:(e,r)=>(i.spec.props.nodeViews[sB(r.schema).table.name]=(e,r)=>new n(e,t,r),new jB(-1,!1)),apply:(e,t)=>t.apply(e)},props:{attributes:e=>{const t=FB.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r,i){const o=FB.getState(e.state);if(!o)return;if(!o.dragging){const r=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target);let s=-1;if(r){const{left:i,right:o}=r.getBoundingClientRect();t.clientX-i<=n?s=HB(e,t,"left",n):o-t.clientX<=n&&(s=HB(e,t,"right",n))}if(s!=o.activeHandle){if(!i&&-1!==s){const t=e.state.doc.resolve(s),n=t.node(-1),r=nB.get(n),i=t.start(-1);if(r.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==r.width-1)return}qB(e,s)}}}(t,n,e,0,r)},mouseleave:e=>{!function(e){const t=FB.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&qB(e,-1)}(e)},mousedown:(e,n)=>{!function(e,t,n){const r=FB.getState(e.state);if(!r||-1==r.activeHandle||r.dragging)return!1;const i=e.state.doc.nodeAt(r.activeHandle),o=function(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=e.domAtPos(t);let s=o.node.childNodes[o.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(s-=r[l],a--);return s/a}(e,r.activeHandle,i.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);const r=FB.getState(e.state);(null==r?void 0:r.dragging)&&(!function(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),o=nB.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<o.height;c++){const e=c*o.width+a;if(c&&o.map[e]==o.map[e-o.width])continue;const t=o.map[e],r=i.nodeAt(t).attrs,d=1==r.colspan?0:a-o.colCount(t);if(r.colwidth&&r.colwidth[d]==n)continue;const u=r.colwidth?r.colwidth.slice():UB(r.colspan);u[d]=n,l.setNodeMarkup(s+t,null,{...r,colwidth:u})}l.docChanged&&e.dispatch(l)}(e,r.activeHandle,WB(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(FB,{setDragging:null})))}function a(t){if(!t.which)return s(t);const r=FB.getState(e.state);if(r&&r.dragging){const i=WB(r.dragging,t,n);!function(e,t,n,r){const i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=nB.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;if(!l)return;BB(o,l.firstChild,l,r,a,n)}(e,r.activeHandle,i,n)}}e.dispatch(e.state.tr.setMeta(FB,{setDragging:{startX:t.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault()}(e,n,t)}},decorations:e=>{const t=FB.getState(e);if(t&&t.activeHandle>-1)return function(e,t){const n=[],r=e.doc.resolve(t),i=r.node(-1);if(!i)return JE.empty;const o=nB.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<o.height;l++){const e=a+l*o.width-1;if(!(a!=o.width&&o.map[e]==o.map[e+1]||0!=l&&o.map[e]==o.map[e-o.width])){const t=o.map[e],r=s+t+i.nodeAt(t).nodeSize-1,a=document.createElement("div");a.className="column-resize-handle",n.push(UE.widget(r,a))}}return JE.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}});return i}var jB=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){const n=this,r=t.getMeta(FB);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let r=t.mapping.map(n.activeHandle,-1);return uB(t.doc.resolve(r))||(r=-1),new e(r,n.dragging)}return n}};function HB(e,t,n,r){const i="right"==n?-r:r,o=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!o)return-1;const{pos:s}=o,a=lB(e.state.doc.resolve(s));if(!a)return-1;if("right"==n)return a.pos;const l=nB.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function WB(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function qB(e,t){e.dispatch(e.state.tr.setMeta(FB,{setHandle:t}))}function UB(e){return Array(e).fill(0)}function YB(e){const t=e.selection,n=dB(e),r=n.node(-1),i=n.start(-1),o=nB.get(r);return{...t instanceof gB?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function KB(e,{map:t,tableStart:n,table:r},i){let o=i>0?-1:0;(function(e,t,n){const r=sB(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(t,r,i+o)&&(o=0==i||i==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const o=t.map[a],l=r.nodeAt(o);e.setNodeMarkup(e.mapping.map(n+o),null,mB(l.attrs,i-t.colCount(o))),s+=l.attrs.rowspan-1}else{const l=null==o?sB(r.type.schema).cell:r.nodeAt(t.map[a+o]).type,c=t.positionAt(s,i,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function JB(e,t){if(!cB(e))return!1;if(t){const n=YB(e);t(KB(e.tr,n,n.left))}return!0}function GB(e,t){if(!cB(e))return!1;if(t){const n=YB(e);t(KB(e.tr,n,n.right))}return!0}function XB(e,{map:t,table:n,tableStart:r},i){const o=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+i,l=t.map[a],c=n.nodeAt(l),d=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(o).map(r+l),null,fB(d,i-t.colCount(l)));else{const t=e.mapping.slice(o).map(r+l);e.delete(t,t+c.nodeSize)}s+=d.rowspan}}function ZB(e,{map:t,table:n,tableStart:r},i){let o=0;for(let c=0;c<i;c++)o+=n.child(c).nodeSize;const s=o+n.child(i).nodeSize,a=e.mapping.maps.length;e.delete(o+r,s+r);const l=new Set;for(let c=0,d=i*t.width;c<t.width;c++,d++){const o=t.map[d];if(!l.has(o))if(l.add(o),i>0&&o==t.map[d-t.width]){const t=n.nodeAt(o).attrs;e.setNodeMarkup(e.mapping.slice(a).map(o+r),null,{...t,rowspan:t.rowspan-1}),c+=t.colspan-1}else if(i<t.height&&o==t.map[d+t.width]){const s=n.nodeAt(o),l=s.attrs,d=s.type.create({...l,rowspan:s.attrs.rowspan-1},s.content),u=t.positionAt(i+1,c,n);e.insert(e.mapping.slice(a).map(r+u),d),c+=l.colspan-1}}}function QB(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let i=0;i<r.length;i++){const e=t.table.nodeAt(r[i]);if(e&&e.type!==n.header_cell)return!1}return!0}function eF(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!cB(t))return!1;if(n){const r=sB(t.schema),i=YB(t),o=t.tr,s=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map((e=>i.table.nodeAt(e)));for(let e=0;e<s.length;e++)a[e].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[e],r.cell,a[e].attrs);if(0==o.steps.length)for(let e=0;e<s.length;e++)o.setNodeMarkup(i.tableStart+s[e],r.header_cell,a[e].attrs);n(o)}return!0}}(e):function(t,n){if(!cB(t))return!1;if(n){const r=sB(t.schema),i=YB(t),o=t.tr,s=QB("row",i,r),a=QB("column",i,r),l=("column"===e?s:"row"===e&&a)?1:0,c="column"==e?{left:0,top:l,right:1,bottom:i.map.height}:"row"==e?{left:l,top:0,right:i.map.width,bottom:1}:i,d="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach((e=>{const t=e+i.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,d,n.attrs)})),n(o)}return!0}}function tF(e){return function(t,n){if(!cB(t))return!1;const r=function(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,r=e.before();n>=0;n--){const t=e.node(-1).child(n),i=t.lastChild;if(i)return r-1-i.nodeSize;r-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(dB(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(KT.between(e,(i=e,i.node(0).resolve(i.pos+i.nodeAfter.nodeSize)))).scrollIntoView())}var i;return!0}}function nF({allowTableNodeSelection:e=!1}={}){return new cO({key:aB,state:{init:()=>null,apply(e,t){const n=e.getMeta(aB);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:i}=e.mapping.mapResult(t);return r?null:i}},props:{decorations:yB,handleDOMEvents:{mousedown:LB},createSelectionBetween:e=>null!=aB.getState(e.state)?e.state.selection:null,handleTripleClick:NB,handleKeyDown:TB,handlePaste:PB},appendTransaction:(t,n,r)=>function(e,t,n){const r=(t||e).selection,i=(t||e).doc;let o,s;if(r instanceof GT&&(s=r.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)o=gB.create(i,r.from);else if("row"==s){const e=i.resolve(r.from+1);o=gB.rowSelection(e,e)}else if(!n){const e=nB.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];o=gB.create(i,t+1,n)}}else r instanceof KT&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let o=t.depth;o>=0&&!(t.before(o+1)>t.start(o));o--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}(r)?o=KT.create(i,r.from):r instanceof KT&&function({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const t=e.node(i);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}for(let i=t.depth;i>0;i--){const e=t.node(i);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){r=e;break}}return n!==r&&0===t.parentOffset}(r)&&(o=KT.create(i,r.$from.start(),r.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t}(r,xB(r,n),e)})}function rF(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-gfm",...t}}),e}eF("row",{useDeprecatedLogic:!0}),eF("column",{useDeprecatedLogic:!0}),eF("cell",{useDeprecatedLogic:!0});const iF=CI("strike_through");rF(iF,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const oF=wI("strike_through",(e=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:t=>["del",e.get(iF.key)(t)],parseMarkdown:{match:e=>"delete"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"strike_through"===e.type.name,runner:(e,t)=>{e.withMark(t,"delete")}}})));rF(oF.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"}),rF(oF.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const sF=pI("ToggleStrikeThrough",(e=>()=>aL(oF.type(e))));rF(sF,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const aF=fI((e=>NP(/~([^~]+)~$/,oF.type(e))));rF(aF,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const lF=xI("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:e=>{const t=e.get(TR);return()=>t.call(sF.key)}}});function cF(e,t=3,n=3){const r=Array(n).fill(0).map((()=>DF.type(e).createAndFill())),i=Array(n).fill(0).map((()=>EF.type(e).createAndFill())),o=Array(t).fill(0).map(((t,n)=>OF.type(e).create(null,0===n?i:r)));return TF.type(e).create(null,o)}function dF(e){return(t=e=>"table"===e.type.spec.tableRole,e=>function(e){return t=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}}(t)(e.$from))(e);var t}function uF(e,t){const n=dF(t);if(!n)return;const r=nB.get(n.node);return e<0||e>=r.width?void 0:r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}).map((e=>{const t=n.node.nodeAt(e);if(!t)return;const r=e+n.start;return{pos:r,start:r+1,node:t}})).filter((e=>null!=e))}function hF(e,t){const n=dF(t);if(!n)return;const r=nB.get(n.node);return e<0||e>=r.height?void 0:r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1}).map((e=>{const t=n.node.nodeAt(e);if(!t)return;const r=e+n.start;return{pos:r,start:r+1,node:t}})).filter((e=>null!=e))}function pF(e){const t=function(e){const t=dF(e);if(!t)return;const n=nB.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((e=>{const n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}(e.selection);if(t&&t[0]){const n=e.doc.resolve(t[0].pos),r=t[t.length-1];if(r){const t=e.doc.resolve(r.pos);return WP(e.setSelection(new gB(t,n)))}}return e}function fF(e,t,{map:n,tableStart:r,table:i},o){const s=Array(o).fill(0).reduce(((e,t,n)=>e+i.child(n).nodeSize),r),a=Array(n.width).fill(0).map(((t,r)=>{const o=i.nodeAt(n.map[r]);return DF.type(e).createAndFill({alignment:null==o?void 0:o.attrs.alignment})}));return t.insert(s,OF.type(e).create(null,a)),t}function mF(e){return t=>n=>{const r=dF(n.selection),i="row"===e;if(r){const e=nB.get(r.node);if(t>=0&&t<(i?e.height:e.width)){const o=e.positionAt(i?t:e.height-1,i?e.width-1:t,r.node),s=n.doc.resolve(r.start+o),a=i?gB.rowSelection:gB.colSelection,l=e.positionAt(i?t:0,i?0:t,r.node),c=n.doc.resolve(r.start+l);return WP(n.setSelection(a(s,c)))}}return n}}rF(lF.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"}),rF(lF.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const gF=mF("row"),vF=mF("col");function yF(e){return e[0].map(((t,n)=>e.map((e=>e[n]))))}function bF(e,t){const n=[],r=nB.get(e);for(let i=0;i<r.height;i++){const o=e.child(i),s=[];for(let n=0;n<r.width;n++){if(!t[i][n])continue;const o=r.map[i*r.width+n],a=t[i][n],l=e.nodeAt(o).type.createChecked(Object.assign({},a.attrs),a.content,a.marks);s.push(l)}n.push(o.type.createChecked(o.attrs,s,o.marks))}return e.type.createChecked(e.attrs,n,e.marks)}function wF(e){const t=nB.get(e),n=[];for(let r=0;r<t.height;r++){const i=[],o={};for(let n=0;n<t.width;n++){const s=t.map[r*t.width+n],a=e.nodeAt(s),l=t.findCell(s);o[s]||l.top!==r?i.push(null):(o[s]=!0,i.push(a))}n.push(i)}return n}function xF(e,t,n,r){const i=t[0]>n[0]?-1:1,o=e.splice(t[0],t.length),s=o.length%2==0?1:0;let a;return a=-1===r&&1===i?n[0]-1:1===r&&-1===i?n[n.length-1]-s+1:-1===i?n[0]:n[n.length-1]-s,e.splice(a,0,...o),e}function kF(e,t){let n=e,r=e;for(let c=e;c>=0;c--){const e=uF(c,t.selection);e&&e.forEach((e=>{const t=e.node.attrs.colspan+c-1;t>=n&&(n=c),t>r&&(r=t)}))}for(let c=e;c<=r;c++){const e=uF(c,t.selection);e&&e.forEach((e=>{const t=e.node.attrs.colspan+c-1;e.node.attrs.colspan>1&&t>r&&(r=t)}))}const i=[];for(let c=n;c<=r;c++){const e=uF(c,t.selection);e&&e.length&&i.push(c)}n=i[0],r=i[i.length-1];const o=uF(n,t.selection),s=hF(0,t.selection),a=t.doc.resolve(o[o.length-1].pos);let l;for(let c=r;c>=n;c--){const e=uF(c,t.selection);if(e&&e.length){for(let t=s.length-1;t>=0;t--)if(s[t].pos===e[0].pos){l=e[0];break}if(l)break}}return{$anchor:a,$head:t.doc.resolve(l.pos),indexes:i}}function CF(e,t){let n=e,r=e;for(let c=e;c>=0;c--)hF(c,t.selection).forEach((e=>{const t=e.node.attrs.rowspan+c-1;t>=n&&(n=c),t>r&&(r=t)}));for(let c=e;c<=r;c++)hF(c,t.selection).forEach((e=>{const t=e.node.attrs.rowspan+c-1;e.node.attrs.rowspan>1&&t>r&&(r=t)}));const i=[];for(let c=n;c<=r;c++){const e=hF(c,t.selection);e&&e.length&&i.push(c)}n=i[0],r=i[i.length-1];const o=hF(n,t.selection),s=uF(0,t.selection),a=t.doc.resolve(o[o.length-1].pos);let l;for(let c=r;c>=n;c--){const e=hF(c,t.selection);if(e&&e.length){for(let t=s.length-1;t>=0;t--)if(s[t].pos===e[0].pos){l=e[0];break}if(l)break}}return{$anchor:a,$head:t.doc.resolve(l.pos),indexes:i}}function _F(e,t,n,r=!0){const i=dF(e.selection);if(!i)return e;const{indexes:o}=kF(t,e),{indexes:s}=kF(n,e);if(o.includes(n))return e;const a=function(e,t,n,r){let i=yF(wF(e.node));return i=xF(i,t,n,r),i=yF(i),bF(e.node,i)}(i,o,s,0),l=WP(e).replaceWith(i.pos,i.pos+i.node.nodeSize,a);if(!r)return l;const c=nB.get(a),d=i.start,u=n,h=c.positionAt(c.height-1,u,a),p=l.doc.resolve(d+h),f=gB.colSelection,m=c.positionAt(0,u,a),g=l.doc.resolve(d+m);return l.setSelection(f(p,g))}function SF(e,t,n,r=!0){const i=dF(e.selection);if(!i)return e;const{indexes:o}=CF(t,e),{indexes:s}=CF(n,e);if(o.includes(n))return e;const a=function(e,t,n,r){let i=wF(e.node);return i=xF(i,t,n,r),bF(e.node,i)}(i,o,s,0),l=WP(e).replaceWith(i.pos,i.pos+i.node.nodeSize,a);if(!r)return l;const c=nB.get(a),d=i.start,u=n,h=c.positionAt(u,c.width-1,a),p=l.doc.resolve(d+h),f=gB.rowSelection,m=c.positionAt(u,0,a),g=l.doc.resolve(d+m);return l.setSelection(f(p,g))}const MF=function(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>iB(e,t)}],toDOM:e=>["td",oB(e,t),0]},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>iB(e,t)}],toDOM:e=>["th",oB(e,t),0]}}}({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),TF=bI("table",(()=>({...MF.table,parseMarkdown:{match:e=>"table"===e.type,runner:(e,t,n)=>{const r=t.align,i=t.children.map(((e,t)=>({...e,align:r,isHeader:0===t})));e.openNode(n),e.next(i),e.closeNode()}},toMarkdown:{match:e=>"table"===e.type.name,runner:(e,t)=>{var n;const r=null==(n=t.content.firstChild)?void 0:n.content;if(!r)return;const i=[];r.forEach((e=>{i.push(e.attrs.alignment)})),e.openNode("table",void 0,{align:i}),e.next(t.content),e.closeNode()}}})));rF(TF.node,{displayName:"NodeSchema<table>",group:"Table"}),rF(TF.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const OF=bI("table_row",(()=>({...MF.table_row,parseMarkdown:{match:e=>"tableRow"===e.type,runner:(e,t,n)=>{const r=t.align,i=t.children.map(((e,n)=>({...e,align:r[n],isHeader:t.isHeader})));e.openNode(n),e.next(i),e.closeNode()}},toMarkdown:{match:e=>"table_row"===e.type.name,runner:(e,t)=>{e.openNode("tableRow"),e.next(t.content),e.closeNode()}}})));rF(OF.node,{displayName:"NodeSchema<tableRow>",group:"Table"}),rF(OF.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const DF=bI("table_cell",(()=>({...MF.table_cell,parseMarkdown:{match:e=>"tableCell"===e.type&&!e.isHeader,runner:(e,t,n)=>{const r=t.align;e.openNode(n,{alignment:r}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:e=>"table_cell"===e.type.name,runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}})));rF(DF.node,{displayName:"NodeSchema<tableCell>",group:"Table"}),rF(DF.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const EF=bI("table_header",(()=>({...MF.table_header,parseMarkdown:{match:e=>"tableCell"===e.type&&!!e.isHeader,runner:(e,t,n)=>{const r=t.align;e.openNode(n,{alignment:r}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},toMarkdown:{match:e=>"table_header"===e.type.name,runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}})));rF(EF.node,{displayName:"NodeSchema<tableHeader>",group:"Table"}),rF(EF.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});const AF=fI((e=>new oP(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,((t,n,r,i)=>{var o,s;const a=t.doc.resolve(r);if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),TF.type(e)))return null;const l=cF(e,Number(null==(o=n.groups)?void 0:o.row),Number(null==(s=n.groups)?void 0:s.col)),c=t.tr.replaceRangeWith(r,i,l);return c.setSelection(KT.create(c.doc,r+3)).scrollIntoView()}))));rF(AF,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const NF=pI("GoToPrevTableCell",(()=>()=>tF(-1)));rF(NF,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const PF=pI("GoToNextTableCell",(()=>()=>tF(1)));rF(PF,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const LF=pI("BreakTable",(e=>()=>(t,n)=>{if(!cB(t))return!1;const{$head:r}=t.selection,i=r.after(),o=t.tr.replaceWith(i,i,I$.type(e).createAndFill());return o.setSelection(WT.near(o.doc.resolve(i),1)).scrollIntoView(),null==n||n(o),!0}));rF(LF,{displayName:"Command<breakTableCommand>",group:"Table"});const RF=pI("InsertTable",(e=>({row:t,col:n}={})=>(r,i)=>{const{selection:o,tr:s}=r,{from:a}=o,l=cF(e,t,n),c=s.replaceSelectionWith(l),d=WT.findFrom(c.doc.resolve(a),1,!0);return d&&c.setSelection(d),null==i||i(c),!0}));rF(RF,{displayName:"Command<insertTableCommand>",group:"Table"});const IF=pI("MoveRow",(()=>({from:e,to:t}={})=>(n,r)=>{const{tr:i}=n;return!!(null==r?void 0:r(SF(i,null!=e?e:0,null!=t?t:0,!0)))}));rF(IF,{displayName:"Command<moveRowCommand>",group:"Table"});const $F=pI("MoveCol",(()=>({from:e,to:t}={})=>(n,r)=>{const{tr:i}=n;return!!(null==r?void 0:r(_F(i,null!=e?e:0,null!=t?t:0,!0)))}));rF($F,{displayName:"Command<moveColCommand>",group:"Table"});const zF=pI("SelectRow",(()=>(e=0)=>(t,n)=>{const{tr:r}=t;return!!(null==n?void 0:n(gF(e)(r)))}));rF(zF,{displayName:"Command<selectRowCommand>",group:"Table"});const BF=pI("SelectCol",(()=>(e=0)=>(t,n)=>{const{tr:r}=t;return!!(null==n?void 0:n(vF(e)(r)))}));rF(BF,{displayName:"Command<selectColCommand>",group:"Table"});const FF=pI("SelectTable",(()=>()=>(e,t)=>{const{tr:n}=e;return!!(null==t?void 0:t(pF(n)))}));rF(FF,{displayName:"Command<selectTableCommand>",group:"Table"});const VF=pI("DeleteSelectedCells",(()=>()=>(e,t)=>{const{selection:n}=e;if(!(n instanceof gB))return!1;const r=n.isRowSelection(),i=n.isColSelection();return r&&i?function(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}(e,t):i?function(e,t){if(!cB(e))return!1;if(t){const n=YB(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;XB(r,n,e),e!=n.left;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=nB.get(e)}t(r)}return!0}(e,t):function(e,t){if(!cB(e))return!1;if(t){const n=YB(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;ZB(r,n,e),e!=n.top;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=nB.get(n.table)}t(r)}return!0}(e,t)}));rF(VF,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const jF=pI("AddColBefore",(()=>()=>JB));rF(jF,{displayName:"Command<addColBeforeCommand>",group:"Table"});const HF=pI("AddColAfter",(()=>()=>GB));rF(HF,{displayName:"Command<addColAfterCommand>",group:"Table"});const WF=pI("AddRowBefore",(e=>()=>(t,n)=>{if(!cB(t))return!1;if(n){const r=YB(t);n(fF(e,t.tr,r,r.top))}return!0}));rF(WF,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const qF=pI("AddRowAfter",(e=>()=>(t,n)=>{if(!cB(t))return!1;if(n){const r=YB(t);n(fF(e,t.tr,r,r.bottom))}return!0}));rF(qF,{displayName:"Command<addRowAfterCommand>",group:"Table"});const UF=pI("SetAlign",(()=>(e="left")=>function(e,t){return function(n,r){if(!cB(n))return!1;const i=dB(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const o=n.tr;n.selection instanceof gB?n.selection.forEachCell(((n,r)=>{n.attrs[e]!==t&&o.setNodeMarkup(r,null,{...n.attrs,[e]:t})})):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(o)}return!0}}("alignment",e)));rF(UF,{displayName:"Command<setAlignCommand>",group:"Table"});const YF=xI("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:e=>{const t=e.get(TR);return()=>t.call(PF.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:e=>{const t=e.get(TR);return()=>t.call(NF.key)}},ExitTable:{shortcuts:["Mod-Enter"],command:e=>{const t=e.get(TR);return()=>t.call(LF.key)}}});rF(YF.ctx,{displayName:"KeymapCtx<table>",group:"Table"}),rF(YF.shortcuts,{displayName:"Keymap<table>",group:"Table"});const KF="footnote_definition",JF="footnoteDefinition",GF=bI("footnote_definition",(()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`dl[data-type="${KF}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{label:e.dataset.label}},contentElement:"dd"}],toDOM:e=>{const t=e.attrs.label;return["dl",{"data-label":t,"data-type":KF},["dt",t],["dd",0]]},parseMarkdown:{match:({type:e})=>e===JF,runner:(e,t,n)=>{e.openNode(n,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===KF,runner:(e,t)=>{e.openNode(JF,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}})));rF(GF.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"}),rF(GF.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const XF="footnote_reference",ZF=bI("footnote_reference",(()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${XF}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{label:e.dataset.label}}}],toDOM:e=>{const t=e.attrs.label;return["sup",{"data-label":t,"data-type":XF},t]},parseMarkdown:{match:({type:e})=>"footnoteReference"===e,runner:(e,t,n)=>{e.addNode(n,{label:t.label})}},toMarkdown:{match:e=>e.type.name===XF,runner:(e,t)=>{e.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}})));rF(ZF.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"}),rF(ZF.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const QF=Oz.extendSchema((e=>t=>{const n=e(t);return{...n,attrs:{...n.attrs,checked:{default:null}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:e=>{if(!(e instanceof HTMLElement))throw WA(e);return{label:e.dataset.label,listType:e.dataset["list-type"],spread:e.dataset.spread,checked:e.dataset.checked?"true"===e.dataset.checked:null}}},...(null==n?void 0:n.parseDOM)||[]],toDOM:e=>n.toDOM&&null==e.attrs.checked?n.toDOM(e):["li",{"data-item-type":"task","data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread,"data-checked":e.attrs.checked},0],parseMarkdown:{match:({type:e})=>"listItem"===e,runner:(e,t,r)=>{if(null==t.checked)return void n.parseMarkdown.runner(e,t,r);const i=null!=t.label?`${t.label}.`:"•",o=null!=t.checked?!!t.checked:null,s=null!=t.label?"ordered":"bullet",a=null!=t.spread?`${t.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:a,checked:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"list_item"===e.type.name,runner:(e,t)=>{if(null==t.attrs.checked)return void n.toMarkdown.runner(e,t);const r=t.attrs.label,i=t.attrs.listType,o="true"===t.attrs.spread,s=t.attrs.checked;e.openNode("listItem",void 0,{label:r,listType:i,spread:o,checked:s}),e.next(t.content),e.closeNode()}}}}));rF(QF,{displayName:"NodeSchema<listItem>",group:"ListItem"});const eV=fI((()=>new oP(/^\[(?<checked>\s|x)\]\s$/,((e,t,n,r)=>{var i;const o=e.doc.resolve(n);let s=0,a=o.node(s);for(;a&&"list_item"!==a.type.name;)s--,a=o.node(s);if(!a||null!=a.attrs.checked)return null;const l="x"===(null==(i=t.groups)?void 0:i.checked),c=o.before(s),d=e.tr;return d.deleteRange(n,r).setNodeMarkup(c,void 0,{...a.attrs,checked:l}),d}))));rF(eV,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const tV=[lF,YF].flat(),nV=[AF,eV],rV=[aF],iV=vI((e=>{const t=new hO("MILKDOWN_AUTO_INSERT_ZERO_SPACE"),n=t=>t.type===I$.type(e);return new cO({key:t,props:{handleDOMEvents:{compositionstart(e){const{state:t,dispatch:r}=e,{tr:i,selection:o}=t,{$from:s}=o;return OP.safari&&cB(t)&&o.empty&&(e=>n(e)&&2===e.nodeSize)(s.parent)&&r(i.insertText("⁠",s.start())),!1},compositionend(e){const{state:t,dispatch:r}=e,{tr:i,selection:o}=t,{$from:s}=o;return OP.safari&&cB(t)&&o.empty&&n(s.parent)&&s.parent.textContent.startsWith("⁠")&&r(i.delete(s.start(),s.start()+1)),!1}}}})}));rF(iV,{displayName:"Prose<autoInsertZeroSpaceInTablePlugin>",group:"Prose"});const oV=vI((()=>VB({})));rF(oV,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const sV=vI((()=>nF()));rF(sV,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const aV=_I("remarkGFM",(()=>xt));rF(aV.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"}),rF(aV.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const lV=[iV,oV,sV,aV].flat(),cV=[[QF,TF,OF,EF,DF,GF,ZF,iF,oF].flat(),nV,rV,tV,lV,[PF,NF,LF,RF,IF,$F,zF,BF,FF,VF,WF,qF,jF,HF,UF,sF]].flat(),dV=r({__name:"EditorButton",props:{icon:{}},setup:e=>(e,t)=>(a(),l("button",{class:v(["fr-btn fr-btn--secondary-grey-400 fr-btn--sm fr-btn--tertiary-no-outline",e.icon]),role:"menuitem"},[d(e.$slots,"default")],2))}),uV=["aria-labelledby","id"],hV={class:"fr-container fr-container--fluid fr-container-md"},pV={class:"fr-grid-row fr-grid-row--center"},fV={class:"fr-col-12 fr-col-md-8 fr-col-lg-6"},mV={class:"fr-modal__body"},gV={class:"fr-modal__header"},vV={class:"fr-modal__content"},yV=["id"],bV={"data-testid":"summary"},wV={class:"fr-my-1w"},xV={class:"fr-modal__footer"},kV={class:"fr-btns-group fr-btns-group--right"},CV=r({inheritAttrs:!1,__name:"ImageModal",props:{id:{}},emits:["sendModal"],setup(e,{emit:t}){const n=e,r=t,{t:i}=Re(),o=s((()=>n.id+"-title")),l=y(),d={src:"",title:"",alt:""},p=V({...d}),f={src:{required:kt}},{getErrorText:m,getFunctionalState:g,hasError:v,reset:k,validateRequiredRules:C,v$:_}=H_(p,f,f),S=s((()=>({src:g(_.value.src.$dirty,_.value.src.$error,!1)})));function M(){globalThis.dsfr(l.value).modal.conceal(),p.src=d.src,p.title=d.title,p.alt=d.alt,k()}function T(){C().then((e=>{e&&(r("sendModal",{...p}),M())}))}return(e,t)=>{return a(),u(F,{to:"body"},[w("dialog",c(e.$attrs,{"aria-labelledby":o.value,id:e.id,role:"dialog",class:"fr-modal",ref_key:"modalRef",ref:l}),[w("div",hV,[w("div",pV,[w("div",fV,[w("div",mV,[w("div",gV,[w("button",{class:"fr-btn--close fr-btn","aria-controls":"fr-modal-2",onClick:M},x(h(i)("Close")),1)]),w("div",vV,[w("h1",{id:o.value,class:"fr-mb-2w fr-modal__title"},[t[3]||(t[3]=w("span",{class:"fr-icon-image-line fr-icon--lg"},null,-1)),R(" "+x(h(i)("Add an image")),1)],8,yV),w("p",null,x(h(i)("Paste a link of your image to add it to your description. It is recommended to also provide a textual alternative for an informative image and a title.")),1),b(Tg),b(BW,{label:h(i)("Image link"),placeholder:h(i)("Paste your link..."),required:!0,modelValue:p.src,"onUpdate:modelValue":t[0]||(t[0]=e=>p.src=e),type:"url",hasError:(n="src",v(S,n)),errorText:h(m)("src")},null,8,["label","placeholder","modelValue","hasError","errorText"]),w("details",null,[w("summary",bV,x(h(i)("Customize accessibility options")),1),w("div",wV,[b(BW,{label:h(i)("Image alternative text"),modelValue:p.alt,"onUpdate:modelValue":t[1]||(t[1]=e=>p.alt=e)},null,8,["label","modelValue"]),b(BW,{label:h(i)("Image title"),modelValue:p.title,"onUpdate:modelValue":t[2]||(t[2]=e=>p.title=e)},null,8,["label","modelValue"])])])]),w("div",xV,[w("div",kV,[w("button",{class:"fr-btn",onClick:T,"data-testid":"add-image-button"},x(h(i)("Add image")),1)])])])])])])],16,uV)]);var n}}}),_V=r({__name:"ImageModalButton",emits:["send"],setup(e,{emit:t}){const n=t,{t:r}=Re(),i=Ve("image-modal");function o(e){n("send",e)}return(e,t)=>(a(),l(L,null,[b(dV,{"data-fr-opened":"false","aria-controls":h(i),icon:"fr-icon-image-add-fill",title:h(r)("Image"),"data-testid":"image-modal-button"},null,8,["aria-controls","title"]),b(CV,{id:h(i),multiple:!0,onSendModal:o},null,8,["id"])],64))}});class SV extends zB{constructor(e,t){super(e,t),this.dom.className="fr-table fr-table--no-caption fr-table--layout-fixed"}ignoreMutation(e){return super.ignoreMutation(e)||"attributes"===e.type&&e.target===this.dom}}const MV=vI((()=>VB({View:SV})));var TV="top",OV="bottom",DV="right",EV="left",AV="auto",NV=[TV,OV,DV,EV],PV="start",LV="end",RV="clippingParents",IV="viewport",$V="popper",zV="reference",BV=NV.reduce((function(e,t){return e.concat([t+"-"+PV,t+"-"+LV])}),[]),FV=[].concat(NV,[AV]).reduce((function(e,t){return e.concat([t,t+"-"+PV,t+"-"+LV])}),[]),VV=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function jV(e){return e?(e.nodeName||"").toLowerCase():null}function HV(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function WV(e){return e instanceof HV(e).Element||e instanceof Element}function qV(e){return e instanceof HV(e).HTMLElement||e instanceof HTMLElement}function UV(e){return"undefined"!=typeof ShadowRoot&&(e instanceof HV(e).ShadowRoot||e instanceof ShadowRoot)}const YV={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];qV(i)&&jV(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});qV(r)&&jV(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function KV(e){return e.split("-")[0]}var JV=Math.max,GV=Math.min,XV=Math.round;function ZV(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function QV(){return!/^((?!chrome|android).)*safari/i.test(ZV())}function ej(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&qV(e)&&(i=e.offsetWidth>0&&XV(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&XV(r.height)/e.offsetHeight||1);var s=(WV(e)?HV(e):window).visualViewport,a=!QV()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,d=r.width/i,u=r.height/o;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function tj(e){var t=ej(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function nj(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&UV(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rj(e){return HV(e).getComputedStyle(e)}function ij(e){return["table","td","th"].indexOf(jV(e))>=0}function oj(e){return((WV(e)?e.ownerDocument:e.document)||window.document).documentElement}function sj(e){return"html"===jV(e)?e:e.assignedSlot||e.parentNode||(UV(e)?e.host:null)||oj(e)}function aj(e){return qV(e)&&"fixed"!==rj(e).position?e.offsetParent:null}function lj(e){for(var t=HV(e),n=aj(e);n&&ij(n)&&"static"===rj(n).position;)n=aj(n);return n&&("html"===jV(n)||"body"===jV(n)&&"static"===rj(n).position)?t:n||function(e){var t=/firefox/i.test(ZV());if(/Trident/i.test(ZV())&&qV(e)&&"fixed"===rj(e).position)return null;var n=sj(e);for(UV(n)&&(n=n.host);qV(n)&&["html","body"].indexOf(jV(n))<0;){var r=rj(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function cj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function dj(e,t,n){return JV(e,GV(t,n))}function uj(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function hj(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const pj={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=KV(n.placement),l=cj(a),c=[EV,DV].indexOf(a)>=0?"height":"width";if(o&&s){var d=function(e,t){return uj("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:hj(e,NV))}(i.padding,n),u=tj(o),h="y"===l?TV:EV,p="y"===l?OV:DV,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=lj(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=d[h],w=v-u[c]-d[p],x=v/2-u[c]/2+y,k=dj(b,x,w),C=l;n.modifiersData[r]=((t={})[C]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&nj(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fj(e){return e.split("-")[1]}var mj={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gj(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"==typeof d?d({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=EV,w=TV,x=window;if(c){var k=lj(n),C="clientHeight",_="clientWidth";if(k===HV(n)&&"static"!==rj(k=oj(n)).position&&"absolute"===a&&(C="scrollHeight",_="scrollWidth"),i===TV||(i===EV||i===DV)&&o===LV)w=OV,m-=(u&&k===x&&x.visualViewport?x.visualViewport.height:k[C])-r.height,m*=l?1:-1;if(i===EV||(i===TV||i===OV)&&o===LV)b=DV,p-=(u&&k===x&&x.visualViewport?x.visualViewport.width:k[_])-r.width,p*=l?1:-1}var S,M=Object.assign({position:a},c&&mj),T=!0===d?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:XV(n*i)/i||0,y:XV(r*i)/i||0}}({x:p,y:m},HV(n)):{x:p,y:m};return p=T.x,m=T.y,l?Object.assign({},M,((S={})[w]=y?"0":"",S[b]=v?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",S)):Object.assign({},M,((t={})[w]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var vj={passive:!0};var yj={left:"right",right:"left",bottom:"top",top:"bottom"};function bj(e){return e.replace(/left|right|bottom|top/g,(function(e){return yj[e]}))}var wj={start:"end",end:"start"};function xj(e){return e.replace(/start|end/g,(function(e){return wj[e]}))}function kj(e){var t=HV(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Cj(e){return ej(oj(e)).left+kj(e).scrollLeft}function _j(e){var t=rj(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Sj(e){return["html","body","#document"].indexOf(jV(e))>=0?e.ownerDocument.body:qV(e)&&_j(e)?e:Sj(sj(e))}function Mj(e,t){var n;void 0===t&&(t=[]);var r=Sj(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=HV(r),s=i?[o].concat(o.visualViewport||[],_j(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Mj(sj(s)))}function Tj(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Oj(e,t,n){return t===IV?Tj(function(e,t){var n=HV(e),r=oj(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=QV();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Cj(e),y:l}}(e,n)):WV(t)?function(e,t){var n=ej(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Tj(function(e){var t,n=oj(e),r=kj(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=JV(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=JV(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Cj(e),l=-r.scrollTop;return"rtl"===rj(i||n).direction&&(a+=JV(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(oj(e)))}function Dj(e,t,n,r){var i="clippingParents"===t?function(e){var t=Mj(sj(e)),n=["absolute","fixed"].indexOf(rj(e).position)>=0&&qV(e)?lj(e):e;return WV(n)?t.filter((function(e){return WV(e)&&nj(e,n)&&"body"!==jV(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=Oj(e,n,r);return t.top=JV(i.top,t.top),t.right=GV(i.right,t.right),t.bottom=GV(i.bottom,t.bottom),t.left=JV(i.left,t.left),t}),Oj(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ej(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?KV(i):null,s=i?fj(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case TV:t={x:a,y:n.y-r.height};break;case OV:t={x:a,y:n.y+n.height};break;case DV:t={x:n.x+n.width,y:l};break;case EV:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?cj(o):null;if(null!=c){var d="y"===c?"height":"width";switch(s){case PV:t[c]=t[c]-(n[d]/2-r[d]/2);break;case LV:t[c]=t[c]+(n[d]/2-r[d]/2)}}return t}function Aj(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?RV:a,c=n.rootBoundary,d=void 0===c?IV:c,u=n.elementContext,h=void 0===u?$V:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=uj("number"!=typeof g?g:hj(g,NV)),y=h===$V?zV:$V,b=e.rects.popper,w=e.elements[f?y:h],x=Dj(WV(w)?w:w.contextElement||oj(e.elements.popper),l,d,s),k=ej(e.elements.reference),C=Ej({reference:k,element:b,strategy:"absolute",placement:i}),_=Tj(Object.assign({},b,C)),S=h===$V?_:k,M={top:x.top-S.top+v.top,bottom:S.bottom-x.bottom+v.bottom,left:x.left-S.left+v.left,right:S.right-x.right+v.right},T=e.modifiersData.offset;if(h===$V&&T){var O=T[i];Object.keys(M).forEach((function(e){var t=[DV,OV].indexOf(e)>=0?1:-1,n=[TV,OV].indexOf(e)>=0?"y":"x";M[e]+=O[n]*t}))}return M}function Nj(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?FV:l,d=fj(r),u=d?a?BV:BV.filter((function(e){return fj(e)===d})):NV,h=u.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=Aj(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[KV(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}const Pj={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=KV(g),y=l||(v===g||!f?[bj(g)]:function(e){if(KV(e)===AV)return[];var t=bj(e);return[xj(e),t,xj(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(KV(n)===AV?Nj(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,k=new Map,C=!0,_=b[0],S=0;S<b.length;S++){var M=b[S],T=KV(M),O=fj(M)===PV,D=[TV,OV].indexOf(T)>=0,E=D?"width":"height",A=Aj(t,{placement:M,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),N=D?O?DV:EV:O?OV:TV;w[E]>x[E]&&(N=bj(N));var P=bj(N),L=[];if(o&&L.push(A[T]<=0),a&&L.push(A[N]<=0,A[P]<=0),L.every((function(e){return e}))){_=M,C=!1;break}k.set(M,L)}if(C)for(var R=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},I=f?3:1;I>0;I--){if("break"===R(I))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Lj(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Rj(e){return[TV,DV,OV,EV].some((function(t){return e[t]>=0}))}const Ij={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=FV.reduce((function(e,n){return e[n]=function(e,t,n){var r=KV(e),i=[EV,TV].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[EV,DV].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};const $j={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=Aj(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=KV(t.placement),y=fj(t.placement),b=!y,w=cj(v),x="x"===w?"y":"x",k=t.modifiersData.popperOffsets,C=t.rects.reference,_=t.rects.popper,S="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,M="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(k){if(o){var D,E="y"===w?TV:EV,A="y"===w?OV:DV,N="y"===w?"height":"width",P=k[w],L=P+g[E],R=P-g[A],I=p?-_[N]/2:0,$=y===PV?C[N]:_[N],z=y===PV?-_[N]:-C[N],B=t.elements.arrow,F=p&&B?tj(B):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=V[E],H=V[A],W=dj(0,C[N],F[N]),q=b?C[N]/2-I-W-j-M.mainAxis:$-W-j-M.mainAxis,U=b?-C[N]/2+I+W+H+M.mainAxis:z+W+H+M.mainAxis,Y=t.elements.arrow&&lj(t.elements.arrow),K=Y?"y"===w?Y.clientTop||0:Y.clientLeft||0:0,J=null!=(D=null==T?void 0:T[w])?D:0,G=P+U-J,X=dj(p?GV(L,P+q-J-K):L,P,p?JV(R,G):R);k[w]=X,O[w]=X-P}if(a){var Z,Q="x"===w?TV:EV,ee="x"===w?OV:DV,te=k[x],ne="y"===x?"height":"width",re=te+g[Q],ie=te-g[ee],oe=-1!==[TV,EV].indexOf(v),se=null!=(Z=null==T?void 0:T[x])?Z:0,ae=oe?re:te-C[ne]-_[ne]-se+M.altAxis,le=oe?te+C[ne]+_[ne]-se-M.altAxis:ie,ce=p&&oe?function(e,t,n){var r=dj(e,t,n);return r>n?n:r}(ae,te,le):dj(p?ae:re,te,p?le:ie);k[x]=ce,O[x]=ce-te}t.modifiersData[r]=O}},requiresIfExists:["offset"]};function zj(e,t,n){void 0===n&&(n=!1);var r,i,o=qV(t),s=qV(t)&&function(e){var t=e.getBoundingClientRect(),n=XV(t.width)/e.offsetWidth||1,r=XV(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=oj(t),l=ej(e,s,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!n)&&(("body"!==jV(t)||_j(a))&&(c=(r=t)!==HV(r)&&qV(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:kj(r)),qV(t)?((d=ej(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Cj(a))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Bj(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var Fj={placement:"bottom",modifiers:[],strategy:"absolute"};function Vj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function jj(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Fj:i;return function(e,t,n){void 0===n&&(n=o);var i,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fj,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},o,a.options,i),a.scrollParents={reference:WV(e)?Mj(e):e.contextElement?Mj(e.contextElement):[],popper:Mj(t)};var s=function(e){var t=Bj(e);return VV.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=s.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:a,name:t,instance:d,options:r}),s=function(){};l.push(o||s)}})),d.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(Vj(t,n)){a.rects={reference:zj(t,lj(n),"fixed"===a.options.strategy),popper:tj(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,s=i.options,l=void 0===s?{}:s,u=i.name;"function"==typeof o&&(a=o({state:a,options:l,name:u,instance:d})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){d.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){u(),c=!0}};if(!Vj(e,t))return d;function u(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var Hj=jj({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=HV(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,vj)})),a&&l.addEventListener("resize",n.update,vj),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,vj)})),a&&l.removeEventListener("resize",n.update,vj)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Ej({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:KV(t.placement),variation:fj(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,gj(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,gj(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},YV,Ij,Pj,$j,pj,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=Aj(t,{elementContext:"reference"}),a=Aj(t,{altBoundary:!0}),l=Lj(s,r),c=Lj(a,i,o),d=Rj(l),u=Rj(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),Wj="tippy-content",qj="tippy-backdrop",Uj="tippy-arrow",Yj="tippy-svg-arrow",Kj={passive:!0,capture:!0},Jj=function(){return document.body};function Gj(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function Xj(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Zj(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Qj(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function eH(e){return[].concat(e)}function tH(e,t){-1===e.indexOf(t)&&e.push(t)}function nH(e){return[].slice.call(e)}function rH(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function iH(){return document.createElement("div")}function oH(e){return["Element","Fragment"].some((function(t){return Xj(e,t)}))}function sH(e){return oH(e)?[e]:function(e){return Xj(e,"NodeList")}(e)?nH(e):Array.isArray(e)?e:nH(document.querySelectorAll(e))}function aH(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function lH(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function cH(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}function dH(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var uH={isTouch:!1},hH=0;function pH(){uH.isTouch||(uH.isTouch=!0,window.performance&&document.addEventListener("mousemove",fH))}function fH(){var e=performance.now();e-hH<20&&(uH.isTouch=!1,document.removeEventListener("mousemove",fH)),hH=e}function mH(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var gH=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,vH=Object.assign({appendTo:Jj,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),yH=Object.keys(vH);function bH(e){var t=(e.plugins||[]).reduce((function(t,n){var r,i=n.name,o=n.defaultValue;i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=vH[i])?r:o);return t}),{});return Object.assign({},e,t)}function wH(e,t){var n=Object.assign({},t,{content:Zj(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(bH(Object.assign({},vH,{plugins:t}))):yH).reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(OI){t[n]=r}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},vH.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var xH=function(){return"innerHTML"};function kH(e,t){e[xH()]=t}function CH(e){var t=iH();return!0===e?t.className=Uj:(t.className=Yj,oH(e)?t.appendChild(e):kH(t,e)),t}function _H(e,t){oH(t.content)?(kH(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?kH(e,t.content):e.textContent=t.content)}function SH(e){var t=e.firstElementChild,n=nH(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(Wj)})),arrow:n.find((function(e){return e.classList.contains(Uj)||e.classList.contains(Yj)})),backdrop:n.find((function(e){return e.classList.contains(qj)}))}}function MH(e){var t=iH(),n=iH();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=iH();function i(n,r){var i=SH(t),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||_H(s,e.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(CH(r.arrow))):o.appendChild(CH(r.arrow)):a&&o.removeChild(a)}return r.className=Wj,r.setAttribute("data-state","hidden"),_H(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}MH.$$tippy=!0;var TH=1,OH=[],DH=[];function EH(e,t){var n,r,i,o,s,a,l,c,d=wH(e,Object.assign({},vH,bH(rH(t)))),u=!1,h=!1,p=!1,f=!1,m=[],g=Qj(Y,d.interactiveDebounce),v=TH++,y=(c=d.plugins).filter((function(e,t){return c.indexOf(e)===t})),b={id:v,reference:e,popper:iH(),popperInstance:null,props:d,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(t){if(b.state.isDestroyed)return;P("onBeforeUpdate",[b,t]),q();var n=b.props,r=wH(e,Object.assign({},n,rH(t),{ignoreAttributes:!0}));b.props=r,W(),n.interactiveDebounce!==r.interactiveDebounce&&(I(),g=Qj(Y,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?eH(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");R(),N(),k&&k(n,r);b.popperInstance&&(X(),Q().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));P("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=uH.isTouch&&!b.props.touch,i=Gj(b.props.duration,0,vH.duration);if(e||t||n||r)return;if(O().hasAttribute("disabled"))return;if(P("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,T()&&(x.style.visibility="visible");N(),F(),b.state.isMounted||(x.style.transition="none");if(T()){var o=E();aH([o.box,o.content],0)}a=function(){var e;if(b.state.isVisible&&!f){if(f=!0,x.offsetHeight,x.style.transition=b.props.moveTransition,T()&&b.props.animation){var t=E(),n=t.box,r=t.content;aH([n,r],i),lH([n,r],"visible")}L(),R(),tH(DH,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&T()&&function(e,t){j(e,t)}(i,(function(){b.state.isShown=!0,P("onShown",[b])}))}},function(){var e,t=b.props.appendTo,n=O();e=b.props.interactive&&t===Jj||"parent"===t?n.parentNode:Zj(t,[n]);e.contains(x)||e.appendChild(x);b.state.isMounted=!0,X()}()},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Gj(b.props.duration,1,vH.duration);if(e||t||n)return;if(P("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,f=!1,u=!1,T()&&(x.style.visibility="hidden");if(I(),V(),N(!0),T()){var i=E(),o=i.box,s=i.content;b.props.animation&&(aH([o,s],r),lH([o,s],"hidden"))}L(),R(),b.props.animation?T()&&function(e,t){j(e,(function(){!b.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&t()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(e){D().addEventListener("mousemove",g),tH(OH,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;Z(),Q().forEach((function(e){e._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x);DH=DH.filter((function(e){return e!==b})),b.state.isMounted=!1,P("onHidden",[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),q(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b])}};if(!d.render)return b;var w=d.render(b),x=w.popper,k=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+b.id,b.popper=x,e._tippy=b,x._tippy=b;var C=y.map((function(e){return e.fn(b)})),_=e.hasAttribute("aria-expanded");return W(),R(),N(),P("onCreate",[b]),d.showOnCreate&&ee(),x.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&D().addEventListener("mousemove",g)})),b;function S(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function M(){return"hold"===S()[0]}function T(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function O(){return l||e}function D(){var e,t,n=O().parentNode;return n?null!=(t=eH(n)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function E(){return SH(x)}function A(e){return b.state.isMounted&&!b.state.isVisible||uH.isTouch||o&&"focus"===o.type?0:Gj(b.props.delay,e?0:1,vH.delay)}function N(e){void 0===e&&(e=!1),x.style.pointerEvents=b.props.interactive&&!e?"":"none",x.style.zIndex=""+b.props.zIndex}function P(e,t,n){var r;(void 0===n&&(n=!0),C.forEach((function(n){n[e]&&n[e].apply(n,t)})),n)&&(r=b.props)[e].apply(r,t)}function L(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=x.id;eH(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}}))}}function R(){!_&&b.props.aria.expanded&&eH(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===O()?"true":"false"):e.removeAttribute("aria-expanded")}))}function I(){D().removeEventListener("mousemove",g),OH=OH.filter((function(e){return e!==g}))}function $(t){if(!uH.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!dH(x,n)){if(eH(b.props.triggerTarget||e).some((function(e){return dH(e,n)}))){if(uH.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),h=!0,setTimeout((function(){h=!1})),b.state.isMounted||V())}}}function z(){p=!0}function B(){p=!1}function F(){var e=D();e.addEventListener("mousedown",$,!0),e.addEventListener("touchend",$,Kj),e.addEventListener("touchstart",B,Kj),e.addEventListener("touchmove",z,Kj)}function V(){var e=D();e.removeEventListener("mousedown",$,!0),e.removeEventListener("touchend",$,Kj),e.removeEventListener("touchstart",B,Kj),e.removeEventListener("touchmove",z,Kj)}function j(e,t){var n=E().box;function r(e){e.target===n&&(cH(n,"remove",r),t())}if(0===e)return t();cH(n,"remove",s),cH(n,"add",r),s=r}function H(t,n,r){void 0===r&&(r=!1),eH(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})}))}function W(){var e;M()&&(H("touchstart",U,{passive:!0}),H("touchend",K,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(H(e,U),e){case"mouseenter":H("mouseleave",K);break;case"focus":H(gH?"focusout":"blur",J);break;case"focusin":H("focusout",J)}}))}function q(){m.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)})),m=[]}function U(e){var t,n=!1;if(b.state.isEnabled&&!G(e)&&!h){var r="focus"===(null==(t=o)?void 0:t.type);o=e,l=e.currentTarget,R(),!b.state.isVisible&&Xj(e,"MouseEvent")&&OH.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||u)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(u=!n),n&&!r&&te(e)}}function Y(e){var t=e.target,n=O().contains(t)||x.contains(t);if("mousemove"!==e.type||!n){var r=Q().concat(x).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:d}:null})).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,i=e.popperState,o=e.props.interactiveBorder,s=i.placement.split("-")[0],a=i.modifiersData.offset;if(!a)return!0;var l="bottom"===s?a.top.y:0,c="top"===s?a.bottom.y:0,d="right"===s?a.left.x:0,u="left"===s?a.right.x:0,h=t.top-r+l>o,p=r-t.bottom-c>o,f=t.left-n+d>o,m=n-t.right-u>o;return h||p||f||m}))})(r,e)&&(I(),te(e))}}function K(e){G(e)||b.props.trigger.indexOf("click")>=0&&u||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function J(e){b.props.trigger.indexOf("focusin")<0&&e.target!==O()||b.props.interactive&&e.relatedTarget&&x.contains(e.relatedTarget)||te(e)}function G(e){return!!uH.isTouch&&M()!==e.type.indexOf("touch")>=0}function X(){Z();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,l=T()?SH(x).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||O()}:e,d={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(T()){var n=E().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}},u=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},d];T()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=Hj(c,x,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:u}))}function Z(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return nH(x.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),F();var t=A(!0),r=S(),i=r[0],o=r[1];uH.isTouch&&"hold"===i&&o&&(t=o),t?n=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=A(!1);t?r=setTimeout((function(){b.state.isVisible&&b.hide()}),t):i=requestAnimationFrame((function(){b.hide()}))}}else V()}}function AH(e,t){void 0===t&&(t={});var n=vH.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",pH,Kj),window.addEventListener("blur",mH);var r=Object.assign({},t,{plugins:n}),i=sH(e).reduce((function(e,t){var n=t&&EH(t,r);return n&&e.push(n),e}),[]);return oH(e)?i[0]:i}AH.defaultProps=vH,AH.setDefaultProps=function(e){Object.keys(e).forEach((function(t){vH[t]=e[t]}))},AH.currentInput=uH,Object.assign({},YV,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),AH.setDefaultProps({render:MH});var NH,PH,LH,RH,IH,$H,zH,BH=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},FH=(e,t,n)=>(BH(e,t,"read from private field"),n?n.call(e):t.get(e)),VH=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},jH=(e,t,n,r)=>(BH(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class HH{constructor(e){var t,n,r;VH(this,$H),VH(this,NH,void 0),VH(this,PH,void 0),VH(this,LH,void 0),VH(this,RH,void 0),VH(this,IH,void 0),jH(this,IH,((e,t)=>{var n;const{state:r,composing:i}=e,{selection:o,doc:s}=r,{ranges:a}=o,l=Math.min(...a.map((e=>e.$from.pos))),c=Math.max(...a.map((e=>e.$to.pos))),d=t&&t.doc.eq(s)&&t.selection.eq(o);if(null!==(n=FH(this,NH))&&void 0!==n||jH(this,NH,AH(e.dom,{trigger:"manual",interactive:!0,...FH(this,PH),content:this.element})),!i&&!d){if(!FH(this,RH).call(this,e,t))return void this.hide();FH(this,NH).setProps({getReferenceClientRect:()=>HP(e,l,c)}),this.show()}})),this.update=(e,t)=>{JI(FH(this,IH),FH(this,LH))(e,t)},this.destroy=()=>{var e;null==(e=FH(this,NH))||e.destroy()},this.show=()=>{var e;null==(e=FH(this,NH))||e.show()},this.hide=()=>{var e;null==(e=FH(this,NH))||e.hide()},this.getInstance=()=>FH(this,NH),this.element=e.content,jH(this,PH,null!==(t=e.tippyOptions)&&void 0!==t?t:{}),jH(this,LH,null!==(n=e.debounce)&&void 0!==n?n:200),jH(this,RH,null!==(r=e.shouldShow)&&void 0!==r?r:((e,t,n)=>(BH(e,t,"access private method"),n))(this,$H,zH))}}function WH(e){const t=yI({},`${e}_TOOLTIP_SPEC`),n=vI((n=>{const r=n.get(t.key);return new cO({key:new hO(`${e}_TOOLTIP`),...r})})),r=[t,n];return r.key=t.key,r.pluginKey=n.key,t.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${e}`},n.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${e}`},r}NH=new WeakMap,PH=new WeakMap,LH=new WeakMap,RH=new WeakMap,IH=new WeakMap,$H=new WeakSet,zH=function(e){const{doc:t,selection:n}=e.state,{empty:r,from:i,to:o}=n,s=!t.textBetween(i,o).length&&e.state.selection instanceof KT,a=this.element.contains(document.activeElement),l=!e.hasFocus()&&!a,c=!e.editable;return!(l||r||s||c)};const qH=yI(null,"tableTooltip"),UH=WH("TABLE"),YH=["draggable"],KH=r({__name:"TableSelectorWidget",setup(e){var t;const{spec:n}=i(LA),r=null==n?void 0:n.type,o=null!==(t=null==n?void 0:n.index)&&void 0!==t?t:0,[c,d]=HS(),u=y(null),p=y(!1),f=s((()=>"absolute bg-grey-200 "+(p.value?"border border-blue-400 border-2":""))),m=s((()=>"left"===r?"w-1w h-100 left-n3-5v top-0 fr-py-1v":"top"===r?"right-px h-1w w-100 left-0 top-n3-5v":"h-3v w-3v left-n2w top-n2w rounded-circle"));function g(e){e.stopPropagation();const t=u.value;if(!t)return;if(c.value)return;d().action((e=>{var n;const i=e.get(qH.key);null==i||null===(n=i.getInstance())||void 0===n||n.setProps({getReferenceClientRect:()=>t.getBoundingClientRect()}),null==i||i.show();const s=e.get(TR);"left"===r?s.call(zF.key,o):"top"===r?s.call(BF.key,o):s.call(FF.key)}))}function b(e){e.stopPropagation();const t={index:null==n?void 0:n.index,type:null==n?void 0:n.type};e.dataTransfer&&(e.dataTransfer.setData("application/milkdown-table-sort",JSON.stringify(t)),e.dataTransfer.effectAllowed="move")}function w(e){p.value=!0,e.stopPropagation(),e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}function x(){p.value=!1}function k(e){var t,i;if(p.value=!1,"top-left"===r)return;const o=null==n?void 0:n.index;if(c.value||null==o)return;const s=null!==(t=null===(i=e.dataTransfer)||void 0===i?void 0:i.getData("application/milkdown-table-sort"))&&void 0!==t?t:"";try{const{index:e,type:t}=JSON.parse(s);d().action((n=>{const r=n.get(TR),i={from:Number(e),to:o};r.call("left"===t?IF.key:$F.key,i)}))}catch{}}return(e,t)=>(a(),l("button",{ref_key:"containerRef",ref:u,draggable:"top-left"!==h(r),class:v(["table-selector block fr-p-0",m.value+" "+f.value]),onClick:g,onDragstart:b,onDragover:w,onDragleave:x,onDrop:k},null,42,YH))}}),JH=hn(KH,[["__scopeId","data-v-e26c3559"]]);function GH(e){return vI((()=>{const t=new hO("MILKDOWN_TABLE_SELECTOR");return new cO({key:t,state:{init:()=>({decorations:JE.empty,pos:0}),apply(t,n,r,i){const o=uF(0,t.selection);if(!o)return{decorations:JE.empty,pos:0};const s=hF(0,t.selection);if(!s)return{decorations:JE.empty,pos:0};const a=e({as:"div",component:JH}),[l]=o;if(!l)return{decorations:JE.empty,pos:0};const c=[];return c.push(a(l.pos+1,{type:"top-left"})),o.forEach(((e,t)=>{c.push(a(e.pos+1,{type:"left",index:t}))})),s.forEach(((e,t)=>{c.push(a(e.pos+1,{type:"top",index:t}))})),n.pos===l.pos&&r.doc.eq(i.doc)?n:{decorations:JE.create(t.doc,c),pos:l.pos}}},props:{decorations:e=>t.getState(e).decorations}})}))}const XH=yI(null,"linkEditTooltip"),ZH=yI({from:-1,to:-1,mark:null},"linkTooltipStateCtx"),QH=WH("LINK_EDIT"),eW=pI("InsertLink",(e=>()=>()=>tW(e)));function tW(e){var t;const n=e.get(gR),{selection:r}=n.state;if(r.empty)return!1;e.update(ZH.key,(()=>({from:r.from,to:r.to,mark:null}))),n.dispatch(n.state.tr.setSelection(KT.create(n.state.doc,r.from,r.to)));const i=e.get(XH.key);return null==i||null===(t=i.getInstance())||void 0===t||t.setProps({getReferenceClientRect:()=>HP(n,r.from,r.to)}),null==i||i.show(),!0}const nW=[XH,QH,ZH,eW].flat();function rW(e,t){const n=y(null);return{tooltipProvider:n,setTooltipProvider:r=>{n.value=r;const i=ue(e());null!=i&&i.ctx&&i.ctx.isInjected(t)&&(i.ctx.set(t,r),n.value=r)}}}function iW(e,t){const{view:n}=EA(),[r,i]=HS(),{tooltipProvider:o,setTooltipProvider:s}=rW(i,e);return C([t,r,o,n],(([e,t,n,r],[i,o,a,l],c)=>{if(e&&!t&&!n&&r&&r.state){const t=Or(e);if(t instanceof HTMLElement){const e=new HH({content:t,tippyOptions:{zIndex:30},shouldShow:()=>!1});e.update(r),s(e)}c((()=>null==a?void 0:a.destroy()))}})),{tooltipProvider:o}}const oW={class:"bg-white border border-default-grey fr-py-1w fr-px-3v rounded-xxs drop-shadow fr-grid-row fr-grid-row--middle no-wrap"};const sW=hn({},[["render",function(e,t){return a(),l("div",oW,[d(e.$slots,"default")])}]]);function aW(){const e=i(lW);return{link:K(e),updateLink(t){e.value=t}}}const lW=Symbol(),cW=["placeholder","onKeydown"],dW=r({__name:"LinkEditTooltip",setup(e){const{t:t}=Re(),n=y(null),{link:r,updateLink:i}=aW(),o=y("");P((()=>{o.value=r.value}));const{view:s}=EA(),[l,c]=HS(),{tooltipProvider:d}=iW(XH.key,n);function p(){var e;i(""),null===(e=d.value)||void 0===e||e.hide()}function m(){const e=ue(c());if(!e)return;const{mark:t}=e.ctx.get(ZH.key),n=A$.type(e.ctx);t&&t.attrs.href===o.value||function(e,t,n){const r=e.state.tr;n&&r.removeMark(e.state.selection.from,e.state.selection.to,n),r.addMark(e.state.selection.from,e.state.selection.to,t),e.dispatch(r)}(s.value,n.create({href:o.value}),t),p()}function g(e){"Escape"===e.key&&p()}return(e,r)=>(a(),u(sW,{ref_key:"toolTipRef",ref:n},{default:f((()=>[G(w("input",{class:"input-area",placeholder:h(t)("Paste link..."),ref:"linkInput",onKeydown:[oe(U(m,["stop","prevent"]),["enter"]),g],"onUpdate:modelValue":r[0]||(r[0]=e=>o.value=e)},null,40,cW),[[X,o.value]]),w("button",{class:v(["fr-ml-1w fr-button fr-btn--sm fr-btn--tertiary-no-outline",{"fr-hidden":0===o.value.length}]),onClick:m},x(h(t)("Confirm ⏎")),3)])),_:1},512))}});const uW=yI(null,"linkPreviewTooltip"),hW=WH("LINK_PREVIEW"),pW=[uW,hW].flat(),fW={class:"text-overflow-ellipsis"},mW=["href"],gW=["title"],vW=r({__name:"LinkPreviewTooltip",setup(e){const{t:t}=Re(),n=y(null),{tooltipProvider:r}=iW(uW.key,n),{view:i}=EA(),[o,s]=HS(),{link:l}=aW();function c(){var e;const t=ue(s());if(!t)return;const{from:n,to:o}=t.ctx.get(ZH.key);null===(e=r.value)||void 0===e||e.hide(),i.value.dispatch(i.value.state.tr.setSelection(KT.create(i.value.state.doc,n,o))),tW(t.ctx)}function d(){var e;const t=ue(s());if(!t)return;const{from:n,to:o,mark:a}=t.ctx.get(ZH.key);a&&function(e,t,n,r){const i=e.state.tr;r&&i.removeMark(t,n,r),e.dispatch(i)}(i.value,n,o,a),null===(e=r.value)||void 0===e||e.hide()}return(e,r)=>(a(),u(sW,{ref_key:"toolTipRef",ref:n,class:v({"fr-hidden":0===h(l).length})},{default:f((()=>[r[0]||(r[0]=w("span",{"aria-hidden":"true",class:"fr-icon-link fr-mr-1w"},null,-1)),w("div",fW,[w("a",{class:"fr-link",href:h(l)},x(h(l)),9,mW)]),w("button",{class:"fr-btn fr-btn--secondary fr-btn--sm fr-icon-pencil-line fr-mx-1w",onClick:c},x(h(t)("Edit link")),1),w("button",{class:"fr-btn fr-btn--tertiary fr-btn--sm fr-icon-link-unlink",title:h(t)("Remove link"),onClick:d},x(h(t)("Remove link")),9,gW)])),_:1},8,["class"]))}});function yW(e,t){const n=NA(),r=y(!1),i=()=>{r.value=!0},o=()=>{r.value=!1},s=Yx(((n,r)=>{if(!n.hasFocus())return;const s=function(e,t,n){const{node:r,pos:i}=function(e,t){const n=t.posAtCoords(e);if(!n)return{node:null,pos:null};const{pos:r}=n;return{node:t.state.doc.nodeAt(r),pos:r}}({left:n.clientX,top:n.clientY},t);if(!r)return;const o=function(e,t){return e.marks.find((e=>e.type===t))}(r,A$.mark.type(e));if(!o)return;return hW.pluginKey()?{show:!0,pos:i,node:r,mark:o}:void 0}(e,n,r),l=e.get(uW.key);if(s){var c,d,u;const r=n.state.doc.resolve(s.pos),a=function(e,t,n,r){let i={start:-1,end:-1};return t.nodesBetween(n,r,((t,n)=>{if(i.start>-1)return!1;-1===i.start&&e.isInSet(t.marks)&&(i={start:n,end:n+Math.max(t.textContent.length,1)})})),i}(s.mark,n.state.doc,r.before(),r.after()),h=e.get(hW.key);if(!h||!h.view)return;return null==l||null===(c=l.getInstance())||void 0===c||c.setProps({getReferenceClientRect:()=>HP(n,a.start,a.end)}),e.update(ZH.key,(()=>({from:a.start,to:a.end,mark:s.mark}))),t(s.mark.attrs.href),null==l||l.show(),null==l||null===(d=l.getInstance())||void 0===d||d.popper.addEventListener("mouseenter",i),void(null==l||null===(u=l.getInstance())||void 0===u||u.popper.addEventListener("mouseleave",o))}a()}),200),a=()=>{setTimeout((()=>{var n,s,a;if(r.value)return;const l=e.get(uW.key),c=e.get(XH.key);null==l||l.hide(),null!=c&&null!==(n=c.getInstance())&&void 0!==n&&n.state.isVisible||t(""),null==l||null===(s=l.getInstance())||void 0===s||s.popper.removeEventListener("mouseenter",i),null==l||null===(a=l.getInstance())||void 0===a||a.popper.removeEventListener("mouseleave",o)}),200)};e.set(hW.key,{props:{handleDOMEvents:{mousemove:s,mouseleave:a}},view:n({component:vW})})}const bW=["innerHTML"],wW=r({__name:"TooltipButton",props:{icon:{},svg:{}},emits:["click"],setup(e,{emit:t}){const n=e,r=n.icon?n.icon:"fr-icon-svg",i=t;return(e,t)=>(a(),l("button",{class:v(["fr-btn fr-btn--secondary fr-btn--sm bg-white",h(r)]),onClick:t[0]||(t[0]=e=>i("click"))},[e.svg?(a(),l("div",{key:0,innerHTML:e.svg},null,8,bW)):g("",!0),d(e.$slots,"default")],2))}}),xW={class:"fr-hidden"},kW=r({__name:"TableTooltip",setup(e){const{t:t}=Re(),n=y(null),{view:r}=EA(),[i,o]=HS(),{tooltipProvider:c}=iW(qH.key,n),d=s((()=>r.value.state.selection instanceof gB&&r.value.state.selection.isRowSelection())),p=s((()=>r.value.state.selection instanceof gB&&r.value.state.selection.isColSelection())),f=s((()=>d.value&&p.value)),m=s((()=>d.value||p.value)),v=s((()=>{var e;return d.value&&"table_header"===(null===(e=r.value.state.doc.nodeAt(r.value.state.selection.$headCell.pos))||void 0===e?void 0:e.type.name)}));return(e,r)=>(a(),l("div",xW,[w("div",{class:"fr-grid-row",ref_key:"toolTipRef",ref:n},[f.value||v.value||!d.value?g("",!0):(a(),u(wW,{key:0,icon:"fr-icon-arrow-up-line",class:"fr-mr-1v",title:h(t)("Add row before"),onClick:r[0]||(r[0]=()=>{var e,t;h(i)||(null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(WF).key)})),null===(t=h(c))||void 0===t||t.hide())})},null,8,["title"])),!f.value&&p.value?(a(),u(wW,{key:1,icon:"fr-icon-arrow-left-line",class:"fr-mr-1v",title:h(t)("Add column before"),onClick:r[1]||(r[1]=()=>{var e,t;h(i)||(null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(jF).key)})),null===(t=h(c))||void 0===t||t.hide())})},null,8,["title"])):g("",!0),f.value||!v.value&&m.value?(a(),u(wW,{key:2,icon:"fr-icon-delete-line",class:"fr-mr-1v",title:h(t)("Delete selected cells"),onClick:r[2]||(r[2]=()=>{var e,t;h(i)||(null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(VF).key)})),null===(t=h(c))||void 0===t||t.hide())})},null,8,["title"])):g("",!0),!f.value&&d.value?(a(),u(wW,{key:3,icon:"fr-icon-arrow-down-line",class:"fr-mr-1v",title:h(t)("Add row after"),onClick:r[3]||(r[3]=()=>{var e,t;h(i)||(null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(qF).key)})),null===(t=h(c))||void 0===t||t.hide())})},null,8,["title"])):g("",!0),!f.value&&p.value?(a(),l(L,{key:4},[b(wW,{icon:"fr-icon-arrow-right-line",class:"fr-mr-1v",title:h(t)("Add column after"),onClick:r[4]||(r[4]=()=>{var e,t;h(i)||(null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(HF).key)})),null===(t=h(c))||void 0===t||t.hide())})},null,8,["title"]),b(wW,{svg:h('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 10L17 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 6H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 18L17 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 14H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),class:"fr-mr-1v",title:h(t)("Align left"),onClick:r[5]||(r[5]=()=>{var e;h(i)||null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(UF).key,"left")}))})},null,8,["svg","title"]),b(wW,{class:"fr-mr-1v",svg:h('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 6H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 14H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M6 10L18 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M6 18L18 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),title:h(t)("Align center"),onClick:r[6]||(r[6]=()=>{var e;h(i)||null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(UF).key,"center")}))})},null,8,["svg","title"]),b(wW,{class:"fr-mr-1v",svg:h('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M7 10L21 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 6H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M7 18L21 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3 14H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),title:h(t)("Align right"),onClick:r[7]||(r[7]=()=>{var e;h(i)||null===(e=h(o)())||void 0===e||e.action((e=>{e.get(h(TR)).call(h(UF).key,"right")}))})},null,8,["svg","title"])],64)):g("",!0)],512)]))}}),CW={class:"editor__container"},_W={class:"fr-mx-auto fr-grid-row fr-pb-1v",role:"menubar"},SW={role:"group",class:"fr-pr-1w"},MW={role:"group",class:"fr-pr-1w"},TW={role:"group",class:"fr-px-1w"},OW={role:"group",class:"fr-pl-1w"},DW={class:"fr-p-1v"},EW=r({__name:"InternalEditor",props:{ariaLabel:{},ariaLabelledBy:{},id:{},disabled:{type:Boolean,default:!1},value:{default:""}},emits:["change","editorMounted"],setup(e,{emit:t}){const n=e,r=t,o=Yx((e=>r("change",e)),300),{t:s}=Re(),c=NA(),d=i(RA),{updateLink:u}=aW(),p=cV.findIndex((e=>e===oV));cV[p]=MV;const f=[cV,UH,qH,e=>async()=>{e.set(UH.key,{view:c({component:kW})})},GH(d)].flat(),m=function(e){const{editorFactory:t,loading:n,editor:r}=i(FS);return t.value=e,{loading:n,get:()=>r.value}}((e=>UR.make().config((t=>{t.set(bR,e),function(e){const t=NA();e.set(QH.key,{view:t({component:dW})})}(t),yW(t,u),t.set(sR,n.value),t.set(V$.key,(e=>{const t=e.attrs.level;return 1===t?{class:"fr-h1"}:2===t?{class:"fr-h2"}:3===t?{class:"fr-h3"}:4===t?{class:"fr-h4"}:5===t?{class:"fr-h5"}:6===t?{class:"fr-h6"}:{}})),t.update(yR,(e=>{const t=e.attributes;return{...e,attributes:e=>{const r="function"==typeof t?t(e):null!=t?t:{};return r.id=n.id,r["data-testid"]="markdown-editor",n.ariaLabelledBy?r["aria-labelledby"]=n.ariaLabelledBy:n.ariaLabel&&(r.ariaLabel=n.ariaLabel),{...r}},editable:()=>!n.disabled}})),t.set(R$.key,(()=>({class:"text-lg"}))),t.get(XI).markdownUpdated(((e,t,n)=>o(t))),t.get(XI).mounted((e=>{r("editorMounted")}))})).use(Qz).use(f).use(AI).use(nW).use(pW).use(QI)));function g(e,t){var n;return null===(n=m.get())||void 0===n?void 0:n.action(function(e,t){return n=>n.get(TR).call(e,t)}(e,t))}return(e,t)=>(a(),l("div",CW,[w("div",_W,[w("div",SW,[b(dV,{icon:"fr-icon-arrow-go-back-line",onClick:t[0]||(t[0]=()=>g(h(MI).key)),title:h(s)("Undo")},null,8,["title"]),b(dV,{icon:"fr-icon-arrow-go-forward-line",onClick:t[1]||(t[1]=()=>g(h(TI).key)),title:h(s)("Redo")},null,8,["title"])]),t[13]||(t[13]=w("div",{role:"separator",class:"w-1px bg-grey-125 fr-my-1v"},null,-1)),w("div",MW,[b(dV,{icon:"fr-icon-bold",onClick:t[2]||(t[2]=()=>g(h(k$).key)),title:h(s)("Bold")},null,8,["title"]),b(dV,{icon:"fr-icon-italic",onClick:t[3]||(t[3]=()=>g(h(g$).key)),title:h(s)("Italic")},null,8,["title"]),b(dV,{icon:"fr-icon-h-1",onClick:t[4]||(t[4]=()=>g(h(W$).key,3)),title:h(s)("Title")},null,8,["title"]),b(dV,{icon:"fr-icon-h-2",onClick:t[5]||(t[5]=()=>g(h(W$).key,4)),title:h(s)("Subtitle")},null,8,["title"])]),t[14]||(t[14]=w("div",{role:"separator",class:"w-1px bg-grey-125 fr-my-1v"},null,-1)),w("div",TW,[b(dV,{icon:"fr-icon-table-2",onClick:t[6]||(t[6]=()=>g(h(RF).key)),title:h(s)("Table")},null,8,["title"]),b(dV,{icon:"fr-icon-link",onClick:t[7]||(t[7]=()=>g(h(eW).key)),title:h(s)("Link")},null,8,["title"]),b(_V,{onSend:t[8]||(t[8]=e=>g(h(sz).key,e))})]),t[15]||(t[15]=w("div",{role:"separator",class:"w-1px bg-grey-125 fr-my-1v"},null,-1)),w("div",OW,[b(dV,{icon:"fr-icon-list-unordered",onClick:t[9]||(t[9]=()=>g(h(wz).key)),title:h(s)("List unordered")},null,8,["title"]),b(dV,{icon:"fr-icon-list-ordered",onClick:t[10]||(t[10]=()=>g(h(Sz).key)),title:h(s)("List ordered")},null,8,["title"]),b(dV,{icon:"fr-icon-code-s-slash-line",onClick:t[11]||(t[11]=()=>g(h(tz).key)),title:h(s)("Code block")},null,8,["title"]),b(dV,{icon:"fr-icon-quote-line",onClick:t[12]||(t[12]=()=>g(h(G$).key)),title:h(s)("Quote")},null,8,["title"])])]),w("div",DW,[b(h(VS))])]))}}),AW=r({__name:"MarkdownEditor",props:{ariaLabel:{},ariaLabelledBy:{},id:{},disabled:{type:Boolean},value:{}},emits:["change","editorMounted"],setup(e){const t=e;return function(){const e=y("");z(lW,e)}(),(e,n)=>(a(),u(h(jS),null,{default:f((()=>[b(h($A),null,{default:f((()=>[b(EW,c(t,{onChange:n[0]||(n[0]=t=>e.$emit("change",t)),onEditorMounted:n[1]||(n[1]=t=>e.$emit("editorMounted"))}),null,16)])),_:1})])),_:1}))}}),NW=["for"],PW={key:0,class:"fr-hint-text"},LW=["aria-describedby","id","disabled","type","value","placeholder","required"],RW={key:1,class:"fr-mt-1w"},IW=["aria-describedby","id","disabled","type","placeholder","value","required"],$W=["id"],zW=["id"],BW=r({__name:"InputGroup",props:{ariaDescribedby:{default:""},disabled:{type:Boolean,default:!1},errorText:{default:""},hasError:{type:Boolean,default:!1},hasWarning:{type:Boolean,default:!1},hintText:{default:""},isValid:{type:Boolean,default:!1},label:{},modelValue:{default:void 0},placeholder:{default:""},required:{type:Boolean,default:!1},type:{default:"text"},validText:{default:""}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const r=n,i=e,{id:o}=mg("input");t({id:o});const c=s((()=>o+"-desc-error")),d=s((()=>o+"-desc-valid")),p=s((()=>{let e=i.ariaDescribedby?i.ariaDescribedby+" ":"";return i.isValid?e+=d.value:i.hasError&&(e+=c.value),e})),f=s((()=>({"fr-input-group--disabled":i.disabled,"fr-input-group--error":i.hasError,"fr-input-group--warning":!i.hasError&&i.hasWarning,"fr-input-group--valid":i.isValid}))),m=mt(Ke);function y(e){let t;if(e instanceof Event){const n=e.target;t=null==n?void 0:n.value}else t=e;r("update:modelValue",t),r("change",t)}return(e,t)=>(a(),l("div",{class:v(["fr-input-group",f.value])},[w("label",{class:"fr-label",for:h(o)},[R(x(e.label)+" ",1),b(Py,{required:e.required},null,8,["required"]),e.hintText?(a(),l("span",PW,x(e.hintText),1)):g("",!0)],8,NW),"textarea"===e.type?(a(),l("textarea",{key:0,class:v(["fr-input",{"fr-input--error":e.hasError,"fr-input--warning":!e.hasError&&h(U_),"fr-input--valid":e.isValid}]),"aria-describedby":p.value,id:h(o),disabled:e.disabled,type:e.type,value:e.modelValue,placeholder:e.placeholder,onChange:y,required:e.required},null,42,LW)):"date"===e.type?(a(),l("div",RW,[b(h(RS),{class:v(["fr-input",{"fr-input--error":e.hasError,"fr-input--valid":e.isValid}]),"aria-describedby":p.value,id:h(o),disabled:e.disabled,modelValue:e.modelValue,onChange:y,locale:h(m),inputFormat:"P"},null,8,["class","aria-describedby","id","disabled","modelValue","locale"])])):"range"===e.type?(a(),u(BS,{key:2,modelValue:e.modelValue,onChange:y},null,8,["modelValue"])):"markdown"===e.type?(a(),u(AW,{key:3,class:v(["fr-mt-1w",{"fr-input--error":e.hasError,"fr-input--warning":!e.hasError&&h(U_),"fr-input--valid":e.isValid}]),"aria-describedby":p.value,id:h(o),disabled:e.disabled,value:e.modelValue,placeholder:e.placeholder,onChange:y,required:e.required},null,8,["class","aria-describedby","id","disabled","value","placeholder","required"])):(a(),l("input",{key:4,class:v(["fr-input",{"fr-input--error":e.hasError,"fr-input--valid":e.isValid}]),"aria-describedby":p.value,id:h(o),disabled:e.disabled,type:e.type,placeholder:e.placeholder,value:e.modelValue,onChange:y,required:e.required},null,42,IW)),e.isValid?(a(),l("p",{key:5,id:d.value,class:"fr-valid-text"},x(e.validText),9,$W)):e.hasError?(a(),l("p",{key:6,id:c.value,class:"fr-error-text"},x(e.errorText),9,zW)):g("",!0)],2))}}),FW=["aria-labelledby","id"],VW={class:"fr-container fr-container--fluid fr-container-md"},jW={class:"fr-grid-row fr-grid-row--center"},HW={class:"fr-col-12 fr-col-md-8"},WW={class:"fr-modal__body"},qW={class:"fr-modal__header"},UW=["title","aria-controls","disabled"],YW={class:"fr-modal__content"},KW=["id"],JW=["href"],GW={class:"fr-modal__footer"},XW={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left"},ZW=["aria-controls"],QW={class:"fr-modal__content"},eq=["id"],tq=["href"],nq={class:"fr-modal__footer"},rq={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left"},iq=["aria-controls","disabled"],oq=r({__name:"ReportModal",props:{id:{},loading:{type:Boolean},succeeded:{type:Boolean}},emits:["send"],setup(e,{emit:t}){const n=t,{t:r}=Re(),i=Ve("modal-title"),o=y(),d={reason:"",message:""},p=V({...d}),m=y([]),g={reason:{required:kt},message:{required:kt}},{getErrorText:v,getFunctionalState:k,hasError:C,reset:S,validateRequiredRules:M,v$:T}=H_(p,g,g),O=e=>C(D,e),D=s((()=>({reason:k(T.value.reason.$dirty,T.value.reason.$error,!1),message:k(T.value.message.$dirty,T.value.message.$error,!1)})));function E(){globalThis.dsfr(o.value).modal.conceal(),p.message=d.message,p.reason=d.reason,S()}function A(){M().then((e=>{e&&n("send",{...p})}))}return _((async()=>{m.value=await async function(){return(await me.get(ct("reports/reasons/"))).data}()})),(e,t)=>{const n=J("i18n-t");return a(),u(F,{to:"body"},[w("dialog",c(e.$attrs,{"aria-labelledby":h(i),id:e.id,role:"dialog",class:"fr-modal",ref_key:"modalRef",ref:o}),[w("div",VW,[w("div",jW,[w("div",HW,[w("div",WW,[w("div",qW,[w("button",{class:"fr-btn--close fr-btn",title:h(r)("Close the modal dialog"),"aria-controls":e.id,target:"_self",disabled:e.loading,onClick:E},x(h(r)("Close")),9,UW)]),e.succeeded?(a(),l(L,{key:0},[w("div",YW,[w("h2",{id:h(i),class:"fr-mb-2w"},[t[2]||(t[2]=w("span",{class:"fr-icon-success-line fr-icon--lg"},null,-1)),R(x(h(r)("Thanks for reporting this content")),1)],8,KW),b(n,{keypath:"{site} team will examine the content to check if it breaks our {markup}. Thanks for your help.",tag:"p",class:"fr-mt-0 fr-mb-1w fr-text--xs",scope:"global"},{site:f((()=>[R(x(h(Ct)),1)])),markup:f((()=>[w("a",{href:h(_t)},x(h(r)("usage policy")),9,JW)])),_:1})]),w("div",GW,[w("div",XW,[w("button",{class:"fr-btn","aria-controls":e.id,target:"_self",onClickCapture:U(E,["prevent","stop"])},x(h(r)("Close")),41,ZW)])])],64)):(a(),l(L,{key:1},[w("div",QW,[w("h2",{id:h(i),class:"fr-mb-2w"},x(h(r)("Report this content")),9,eq),b(h(gc),{class:"fr-mb-2w",color:"warning",weight:"regular"},{default:f((()=>[t[3]||(t[3]=w("span",{class:"fr-icon-warning-line fr-mr-1v","aria-hidden":"true"},null,-1)),R(" "+x(h(r)("Please only report in case of serious concern."))+" ",1),w("a",{href:h(_t)},x(h(r)("See our usage policy")),9,tq)])),_:1}),b(eS,{label:h(r)("Report reason"),required:!0,modelValue:p.reason,"onUpdate:modelValue":t[0]||(t[0]=e=>p.reason=e),hasError:O("reason"),errorText:h(v)("reason"),options:m.value},null,8,["label","modelValue","hasError","errorText","options"]),b(BW,{type:"textarea",label:h(r)("Message"),required:!0,hasError:O("message"),errorText:h(v)("message"),modelValue:p.message,"onUpdate:modelValue":t[1]||(t[1]=e=>p.message=e),placeholder:h(r)("Reason of your report.{newline}Don't include any personal data.")},null,8,["label","hasError","errorText","modelValue","placeholder"])]),w("div",nq,[w("div",rq,[w("button",{class:"fr-btn","aria-controls":e.id,target:"_self",disabled:e.loading,onClickCapture:U(A,["prevent","stop"])},x(h(r)("Send")),41,iq)])])],64))])])])])],16,FW)])}}}),sq=["aria-controls","disabled","title"],aq=r({__name:"ReportModalButton",props:{objectType:{},objectId:{}},setup(e){const t=e,{t:n}=Re(),{toast:r}=iv(),i=y(!1),o=y(!1),s=Ve();async function d(e){try{i.value=!0,await async function(e,t,n,r){return(await me.post("/reports/",{subject:{id:t,class:e},reason:n,message:r})).data}(t.objectType,t.objectId,e.reason,e.message),o.value=!0}catch(OI){r.error(n("An unexpected error occured while reporting this content."))}finally{i.value=!1}}return(e,t)=>(a(),l(L,null,[w("button",c({class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-icon-flag-line","data-fr-opened":"false","aria-controls":h(s)},e.$attrs,{disabled:i.value,title:h(n)("Make a report")}),x(h(n)("Make a report")),17,sq),b(oq,{id:h(s),loading:i.value,succeeded:o.value,onSend:d},null,8,["id","loading","succeeded"])],64))}}),lq={class:"fr-grid-row fr-grid-row--middle justify-between","data-cy":"search"},cq={class:"fr-search-bar fr-search-bar--lg w-100"},dq=["for"],uq=["id","aria-label","placeholder"],hq={class:"fr-btn",type:"submit"},pq={class:"fr-grid-row fr-mt-1w fr-mt-md-5v"},fq={class:"fr-col-12 fr-col-md-4 fr-col-lg-3"},mq={class:"fr-sidemenu","aria-labelledby":"fr-sidemenu-title"},gq={class:"fr-sidemenu__inner"},vq={class:"fr-sidemenu__btn fr-mt-1w",hidden:"","aria-controls":"fr-sidemenu-wrapper","aria-expanded":"false"},yq={class:"fr-collapse",id:"fr-sidemenu-wrapper"},bq={class:"fr-sidemenu__title fr-mb-3v",id:"fr-sidemenu-title"},wq={class:"fr-grid-row fr-grid-row--gutters"},xq={key:0,class:"fr-col-12"},kq={class:"fr-col-12"},Cq={class:"fr-select-group"},_q=["for"],Sq=["id"],Mq={value:null},Tq={value:!1},Oq={value:!0},Dq={key:1,class:"fr-col-12 fr-mb-3w text-align-center"},Eq={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-mt-2w fr-mt-md-0 search-results"},Aq={key:0},Nq={key:1,class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-between fr-pb-1w"},Pq={class:"fr-col-auto fr-my-0",role:"status"},Lq={key:2},Rq={class:"fr-mt-1w border-default-grey border-top relative z-2"},Iq={key:3,class:"fr-mt-2w"},$q=r({__name:"DataservicesSearch",props:{organization:{default:""}},setup(e){const t=e,{t:n}=Re(),{toast:r}={toast:co},i=y(null);C(i,(()=>d.value=1));const o=y(null);C(o,(()=>d.value=1));const c=he(),d=y(1),p=s((()=>i.value||null!==o.value)),f=()=>{i.value="",o.value=null},m=()=>{S.value="",f(),O()},k=he(),S=y(""),M=function(e,t=200,n={}){const r=y(e.value),i=Sr((()=>{r.value=e.value}),t,n);return C(e,(()=>i())),r}(S,500),T=pe("searchInputRef"),O=()=>{T.value&&T.value.scrollIntoView({behavior:"smooth"})},D=s((()=>{const e={};return i.value&&(e.organization=i.value),M.value&&(e.q=M.value),null!==o.value&&(e.is_restricted=o.value.toString()),t.organization&&(e.organization=t.organization),d.value&&1!==d.value&&(e.page=d.value.toString()),new URLSearchParams(e)})),{ignoreUpdates:E}=function(e,t,n={}){const{eventFilter:r=_r,...i}=n,o=Cr(r,t);let s,a,l;if("sync"===i.flush){const t=y(!1);a=()=>{},s=e=>{t.value=!0,e(),t.value=!1},l=C(e,((...e)=>{t.value||o(...e)}),i)}else{const t=[],n=y(0),r=y(0);a=()=>{n.value=r.value},t.push(C(e,(()=>{r.value++}),{...i,flush:"sync"})),s=e=>{const t=r.value;e(),n.value+=r.value-t},t.push(C(e,((...e)=>{const t=n.value>0&&n.value===r.value;n.value=0,r.value=0,t||o(...e)}),i)),l=()=>{t.forEach((e=>e()))}}return{stop:l,ignoreUpdates:s,ignorePrevAsyncUpdates:a}}(D,(()=>{let e=new URL(window.location.href);e.search=D.value.toString(),window.history.pushState(null,"",e)})),A=s((()=>`/dataservices/search/?${D.value}`)),N=y(null),P=y(null);C(S,(()=>{P.value&&P.value.abort(),d.value=1}));const R=async()=>{N.value=null,P.value=new AbortController;try{const e=await dt.get(A.value,{signal:P.value.signal});P.value=null,N.value=e.data}catch(OI){je.isCancel(OI)||r.error(n("Error getting search results."))}},I=()=>{const e=new URL(window.location.href);i.value=e.searchParams.get("organization"),S.value=e.searchParams.get("q")||"","true"===e.searchParams.get("is_restricted")?o.value=!0:"false"===e.searchParams.get("is_restricted")?o.value=!1:o.value=null,d.value=parseInt(e.searchParams.get("page")||"1")};_((()=>{var e;I(),R(),null===(e=T.value)||void 0===e||e.focus(),window.addEventListener("popstate",(()=>{E((()=>{I()}))}))})),C(A,(()=>{R()}));const $=e=>{d.value=e};return(e,r)=>(a(),l("form",{class:"fr-pt-3v",onSubmit:U(R,["prevent"])},[w("div",lq,[w("section",cq,[w("label",{class:"fr-label",for:h(k)},x(h(n)("Search")),9,dq),G(w("input",{id:h(k),type:"search","onUpdate:modelValue":r[0]||(r[0]=e=>S.value=e),ref:"searchInputRef",class:"fr-input","aria-label":h(n)("Search..."),placeholder:h(n)("Search..."),"data-cy":"search-input","data-testid":"search-input"},null,8,uq),[[X,S.value]]),w("button",hq,x(h(n)("Search")),1)])]),w("div",pq,[w("div",fq,[w("nav",mq,[w("div",gq,[w("button",vq,x(h(n)("Filter results")),1),w("div",yq,[w("div",bq,x(h(n)("Filters")),1),w("div",wq,[t.organization?g("",!0):(a(),l("div",xq,[b(Uy,{placeholder:h(n)("Organizations"),searchPlaceholder:h(n)("Search an organization..."),allOption:h(n)("All organizations"),listUrl:"/organizations/?sort=-followers",suggestUrl:"/organizations/suggest/",entityUrl:"/organizations/",values:i.value,onChange:r[1]||(r[1]=e=>i.value=e),isBlue:!0},null,8,["placeholder","searchPlaceholder","allOption","values"])])),w("div",kq,[w("div",Cq,[w("label",{class:"fr-label",for:h(c)},x(h(n)("Access terms")),9,_q),G(w("select",{class:v(["fr-select",{"text-mention-grey":null===o.value}]),id:h(c),"onUpdate:modelValue":r[2]||(r[2]=e=>o.value=e)},[w("option",Mq,x(h(n)("All access terms")),1),w("option",Tq,x(h(n)("Open APIs to everyone")),1),w("option",Oq,x(h(n)("Restricted access APIs")),1)],10,Sq),[[ie,o.value]])])]),p.value?(a(),l("div",Dq,[w("button",{class:"fr-btn fr-btn--secondary fr-icon-close-circle-line fr-btn--icon-left justify-center w-100",onClick:f},x(h(n)("Reset filters")),1)])):g("",!0)])])])])]),w("section",Eq,[null===N.value?(a(),l("div",Aq,[b(_y)])):g("",!0),null!==N.value?(a(),l("div",Nq,[w("p",Pq,x(h(n)("{count} API",N.value.total)),1)])):g("",!0),null!==N.value&&N.value.data.length?(a(),l("div",Lq,[w("ul",Rq,[(a(!0),l(L,null,q(N.value.data,(e=>(a(),l("li",{key:e.id},[b(h(qo),{dataservice:e,dataserviceUrl:e.self_web_url},null,8,["dataservice","dataserviceUrl"])])))),128))]),null!==N.value&&N.value.total>N.value.page_size?(a(),u(h(vs),{key:0,page:d.value,pageSize:N.value.page_size,totalResults:N.value.total,onChange:$,class:"fr-mt-2w"},null,8,["page","pageSize","totalResults"])):(a(),u(rk,{key:1,onResetFilters:m}))])):g("",!0),null!==N.value&&0===N.value.data.length?(a(),l("div",Iq,[b(rk,{onResetFilters:m})])):g("",!0)])])],32))}});St({admin_root:Mt,api_root:Tt,api_2_root:Ot,default_lang:Dt.global.locale.value,only_locales:Dt.global.locale.value,schema_documentation_url:Et,schema_validata_url:At,show_copy_resource_permalink:!0,tabular_api_dataservice_id:Nt,tabular_api_url:Pt,tabular_page_size:Lt,title:Ct});document.querySelectorAll(".vuejs").forEach((e=>{const t=e.innerHTML;try{(e=>{const t=fe({});Rt(t),t.use(It),t.use(PC),t.use($t),t.use(Dt),t.component("chart",xg),t.component("dataset-resources",GC),t.component("dataset-resource-from-hash",DC),t.component("dataservice-card",qo),t.component("dataservice-links",b_),t.component("delete-button",Wk),t.component("delete-user-button",oC),t.component("discussion-threads",Gv),t.component("discussion-create",Hg),t.component("featured-button",dC),t.component("follow-button",fC),t.component("menu-search",dy),t.component("owner-type",ns),t.component("owner-type-icon",vr),t.component("read-more",bs),t.component("report-button",aq),t.component("request-membership",gC),t.component("reuse-card",EC),t.component("search",Nk),t.component("dataservices-search",$q),t.component("toggletip",Qi),t.component("user-dataset-list",e_),t.component("user-reuse-list",o_),t.config.compilerOptions.delimiters=["",""],t.mount(e)})(e)}catch(OI){throw e.innerHTML=t,console.log(`VueJS template compilation failed for element ${e.className}.\n      Aborted the process and rolled back the HTML.\n      See error(s) above and below (probably won't help you tho) :`),console.log(e),console.error(OI),OI}})),globalThis.dsfr.start(),console.log("JS is injected !"),function(){const e=document.querySelectorAll("[data-update-url]");window.addEventListener("hashchange",(()=>{k_(e)})),e.forEach((e=>{const t=x_(e);e.addEventListener("click",(()=>{if(!window.location.hash.includes(t)){var e;let n=new URL(window.location.href);n.hash=t,window.history.pushState(null,"",n),null===(e=globalThis._paq)||void 0===e||e.push(["trackEvent","Move page to hash",window.location.pathname,t])}}))})),setTimeout((()=>{k_(e)}),100)}()}}}))}();
